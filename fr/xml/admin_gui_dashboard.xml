<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_gui_dashboard.xml" version="5.0" xml:id="ceph-dashboard">
 <title>Ceph Dashboard</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>oui</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Ceph Dashboard est un module qui ajoute une application de surveillance et d'administration Web intégrée au module Ceph Manager (voir <xref linkend="storage-intro-core-nodes"/> pour plus de détails sur Ceph Manager). Vous n'avez plus besoin de connaître les commandes complexes relatives à Ceph pour gérer et surveiller votre grappe Ceph. Vous pouvez utiliser l'interface Web intuitive de Ceph Dashboard ou son API REST intégrée.
 </para>
 <para>
  Ceph Dashboard est automatiquement activé et configuré avec la phase 3 de DeepSea lors de la procédure de déploiement (voir <xref linkend="ceph-install-stack"/>). Dans une grappe Ceph avec plusieurs instances de Ceph Manager, seul le tableau de bord en cours d'exécution sur le daemon Ceph Manager actuellement actif dessert les demandes entrantes. Si vous accédez au port TCP du tableau de bord sur l'une des autres instances de Ceph Manager qui sont actuellement en veille, le système effectue une redirection HTTP (303) vers l'URL du tableau de bord de l'instance de Ceph Manager actuellement active. De cette façon, vous pouvez faire pointer votre navigateur vers n'importe quelle instance de Ceph Manager pour accéder au tableau de bord. Tenez compte de ce comportement lors de la sécurisation de l'accès à l'aide d'un pare-feu ou lors de la planification de la configuration HA.
 </para>
 <sect1 xml:id="dashboard-webui-general">
  <title>Interface utilisateur Web du tableau de bord</title>

  <sect2 xml:id="dashboard-webui-login">
   <title>Connexion</title>
   <para>
    Pour vous connecter à l'application Web du tableau de bord, faites pointer votre navigateur vers son URL, y compris le numéro de port. Vous pouvez trouver son adresse en exécutant la commande suivante :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr services | grep dashboard
"dashboard": "https://ses-dash-node.example.com:8443/",
</screen>
   <figure>
    <title>Écran de connexion à Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Vous avez besoin d'un compte utilisateur pour vous connecter à l'application Web du tableau de bord. DeepSea crée pour vous un utilisateur par défaut « admin » disposant des privilèges d'administrateur. Si vous décidez de vous connecter avec l'utilisateur par défaut « admin », récupérez le mot de passe correspondant en exécutant la commande suivante :
   </para>
<screen>
<prompt>root@master # </prompt>salt-call grains.get dashboard_creds
</screen>
   <tip>
    <title>compte utilisateur personnalisé</title>
    <para>
     Si vous ne souhaitez pas utiliser le compte « admin » par défaut pour accéder à Ceph Dashboard, créez un compte utilisateur personnalisé avec des privilèges d'administrateur. Pour plus d'informations, reportez-vous à la <xref linkend="dashboard-user-roles"/>.
    </para>
   </tip>
   <para>
    L'interface utilisateur du tableau de bord est très clairement divisée en plusieurs <emphasis>blocs</emphasis> : le <emphasis>menu utilitaire</emphasis>, le <emphasis>menu principal</emphasis> et le <emphasis>volet de contenu</emphasis>.
   </para>
   <figure>
    <title>Page d'accueil de Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-util-menu">
   <title>Menu utilitaire</title>
   <para>
    La partie supérieure droite de l'écran contient un menu utilitaire. Il comprend des tâches générales liées davantage au tableau de bord qu'à la grappe Ceph. Vous pouvez cliquer sur ses options pour effectuer les tâches suivantes :
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Modifier la langue de l'interface utilisateur du tableau de bord. Vous pouvez choisir entre l'allemand, l'anglais, le chinois, l'espagnol, le français, l'indonésien, le portugais et le tchèque.
     </para>
    </listitem>
    <listitem>
     <para>
      Afficher la liste des tâches liées à Ceph qui s'exécutent en arrière-plan.
     </para>
    </listitem>
    <listitem>
     <para>
      Afficher et effacer les notifications récentes du tableau de bord.
     </para>
    </listitem>
    <listitem>
     <para>
      Afficher une liste de liens relatifs aux informations sur le tableau de bord, sa documentation complète et un aperçu de son API REST.
     </para>
    </listitem>
    <listitem>
     <para>
      Gérer les utilisateurs et les rôles des utilisateurs du tableau de bord. Reportez-vous à la <xref linkend="dashboard-user-roles"/> pour obtenir des descriptions de ligne de commande plus détaillées.
     </para>
    </listitem>
    <listitem>
     <para>
      Déconnectez-vous du tableau de bord.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-main-menu">
   <title>Menu principal</title>
   <para>
    Le menu principal du tableau de bord occupe la partie supérieure gauche de l'écran. Il traite les aspects suivants :
   </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>Tableau de bord</guimenu></term>
     <listitem>
      <para>
       Permet de retourner sur la page d'accueil de Ceph Dashboard.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Grappe</guimenu></term>
     <listitem>
      <para>
       Affiche des informations détaillées sur la configuration de grappe globale et la carte CRUSH, ses hôtes, les OSD Ceph, les moniteurs Ceph et le contenu d'un fichier journal.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Réserves</guimenu></term>
     <listitem>
      <para>
       Permet d'afficher et de gérer les réserves de la grappe.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Bloc</guimenu></term>
     <listitem>
      <para>
       Permet d'afficher et de gérer les périphériques de bloc et leurs exportations iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>NFS</guimenu></term>
     <listitem>
      <para>
       Permet d'afficher et de gérer les déploiements NFS Ganesha.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Systèmes de fichiers</guimenu></term>
     <listitem>
      <para>
       Permet d'afficher et de gérer les CephFS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Object Gateway</guimenu></term>
     <listitem>
      <para>
       Permet d'afficher et de gérer les daemons, les utilisateurs et les compartiments d'Object Gateway.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-cpane">
   <title>Volet de contenu</title>
   <para>
    Le volet contenu occupe la partie principale de l'écran du tableau de bord. La page d'accueil du tableau de bord présente de nombreux widgets utiles pour vous informer brièvement sur l'état actuel de la grappe, la capacité et les performances.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-ui-common">
   <title>Fonctionnalités courantes de l'interface utilisateur Web</title>
   <para>
    Dans Ceph Dashboard, la plupart des opérations s'effectuent à l'aide de <emphasis>listes</emphasis>, par exemple, des listes de réserves, de noeuds OSD ou de périphériques RBD. Par défaut, toutes les listes se rafraîchissent automatiquement toutes les 5 secondes. Les widgets communs suivants vous aident à gérer ou à ajuster ces listes :
   </para>
   <para>
    Cliquez sur <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/> </imageobject> </inlinemediaobject> déclencher un rafraîchissement manuel de la liste.
   </para>
   <para>
    Cliquez sur <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> pour afficher ou masquer des colonnes de table individuelles.
   </para>
   <para>
    Cliquez sur <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/> </imageobject> </inlinemediaobject> et sélectionnez le nombre de lignes à afficher sur une seule page.
   </para>
   <para>
    Cliquez à l'intérieur de <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/> </imageobject> </inlinemediaobject> et filtrez les lignes en saisissant la chaîne à rechercher.
   </para>
   <para>
    Utilisez <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/> </imageobject> </inlinemediaobject> pour modifier la page affichée si la liste s'étend sur plusieurs pages.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-widgets">
   <title>Widgets du tableau de bord</title>
   <para>
    Chaque widget du tableau de bord affiche des informations d'état spécifiques liées à un aspect particulier d'une grappe Ceph en cours d'exécution. Certains widgets sont des liens actifs. Si vous cliquez sur ces derniers, ils vous redirigent vers une page détaillée associée au sujet qu'ils représentent.
   </para>
   <tip>
    <title>plus de détails grâce au pointeur de la souris</title>
    <para>
     Certains widgets graphiques vous montrent plus de détails lorsque vous passez le pointeur de la souris sur eux.
    </para>
   </tip>
   <sect3 xml:id="dashboard-widgets-status">
    <title>Widgets de statut</title>
    <para>
     Les widgets <guimenu>Statut</guimenu> vous donnent un bref aperçu du statut actuel de la grappe.
    </para>
    <figure>
     <title>Widgets de statut</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Statut de la grappe</guimenu></term>
      <listitem>
       <para>
        Présente des informations de base sur l'état de santé de la grappe.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Moniteurs</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre de moniteurs en cours d'exécution et leur quorum.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>OSD</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre total d'OSD, ainsi que le nombre d'OSD démarrés et rentrés.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Daemons Manager</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre de daemons Ceph Manager actifs et en veille.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Hôtes</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre total de noeuds de la grappe.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Object Gateway</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre d'instances Object Gateway en cours d'exécution.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Serveur de métadonnées (MDS)</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre de serveurs de métadonnées.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Passerelle iSCSI</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre de passerelles iSCSI configurées.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-performance">
    <title>Widgets de performance</title>
    <para>
     Les widgets <guimenu>Performance</guimenu> font référence aux données de performance de base des clients Ceph.
    </para>
    <figure>
     <title>Widgets de performance</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>IOPS client</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Débit client</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Lectures/Écritures client</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Débit de récupération</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Nettoyer</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-capacity">
    <title>Widgets de capacité</title>
    <para>
     Les widgets <guimenu>Capacité</guimenu> affichent de brèves informations sur la capacité de stockage.
    </para>
    <figure>
     <title>Widgets de capacité</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Réserves</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre de réserve dans la grappe.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Capacité brute</guimenu></term>
      <listitem>
       <para>
        Affiche le rapport entre la capacité de stockage brute utilisée et celle disponible.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Objets</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre d'objets de données stockés dans la grappe.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Groupes de placements par OSD</guimenu></term>
      <listitem>
       <para>
        Affiche le nombre de groupes de placements par OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Statut du groupe de placements</guimenu></term>
      <listitem>
       <para>
        Affiche une représentation graphique des groupes de placements en fonction de leur statut.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-mgmt">
  <title>Gestion des utilisateurs et des rôles du tableau de bord</title>

  <para>
   La gestion des utilisateurs du tableau de bord effectuée à l'aide de commandes Ceph sur la ligne de commande a déjà été présentée à la <xref linkend="dashboard-user-roles"/>.
  </para>

  <para>
   Cette section décrit comment gérer les comptes utilisateur à l'aide de l'interface utilisateur Web du tableau de bord.
  </para>

  <sect2 xml:id="dashboard-listing-users">
   <title>Liste des utilisateurs</title>
   <para>
    Cliquez sur <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> dans le menu utilitaire, puis sélectionnez <guimenu>Gestion des utilisateurs</guimenu>.
   </para>
   <para>
    La liste contient le nom de chaque utilisateur, son nom complet, son adresse électronique et la liste des rôles qui lui sont assignés.
   </para>
   <figure>
    <title>Gestion des utilisateurs</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-users">
   <title>Ajout de nouveaux utilisateurs</title>
   <para>
    Cliquez sur <guimenu>Ajouter</guimenu> en haut à gauche de l'en-tête de tableau pour ajouter un nouvel utilisateur. Entrez son nom d'utilisateur, son mot de passe et éventuellement un nom complet et une adresse électronique.
   </para>
   <figure>
    <title>Ajout d'un utilisateur</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Cliquez sur la petite icône de crayon pour assigner des rôles prédéfinis à l'utilisateur. Confirmez en cliquant sur le bouton <guimenu>Create User</guimenu> (Créer l'utilisateur).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-users">
   <title>Modification des utilisateurs</title>
   <para>
    Dans le tableau, cliquez sur la ligne d'un utilisateur, puis sélectionnez <guimenu>Modifier</guimenu> pour éditer les détails de l'utilisateur. Confirmez en cliquant sur le bouton <guimenu>Mettre à jour l'utilisateur</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-users">
   <title>Suppression d'utilisateurs</title>
   <para>
    Dans le tableau, cliquez sur la ligne d'un utilisateur, puis sélectionnez <guimenu>Supprimer</guimenu> pour supprimer le compte utilisateur. Cochez la case <guimenu>Oui</guimenu> et confirmez avec le bouton <guimenu>Delete User</guimenu> (Supprimer l'utilisateur).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-listing-user-roles">
   <title>Liste des rôles des utilisateurs</title>
   <para>
    Cliquez sur <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> dans le menu utilitaire, puis sélectionnez <guimenu>Gestion des utilisateurs</guimenu>. Cliquez ensuite sur l'onglet <guimenu>Rôles</guimenu>.
   </para>
   <para>
    La liste contient le nom et la description de chaque rôle, et indique s'il s'agit d'un rôle système.
   </para>
   <figure>
    <title>Rôles utilisateur</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-roles">
   <title>Ajout de rôles personnalisés</title>
   <para>
    Cliquez sur <guimenu>Ajouter</guimenu> en haut à gauche de l'en-tête de tableau pour ajouter un nouveau rôle personnalisé. Entrez son nom et sa description, puis définissez les autorisations requises pour les différents périmètres.
   </para>
   <tip>
    <title>Purge des rôles personnalisés</title>
    <para>
     Si vous créez des rôles utilisateur personnalisés et avez l'intention de supprimer ultérieurement la grappe Ceph à l'aide de l'exécuteur <command>ceph.purge</command>, vous devez d'abord purger les rôles personnalisés. Pour plus de détails, reportez-vous à la <xref linkend="deepsea-ceph-purge"/>.
    </para>
   </tip>
   <figure>
    <title>Ajout d'un rôle</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>activation multiple</title>
    <para>
     Si vous cochez la case qui précède le nom du périmètre, vous activez toutes les autorisations pour ce périmètre. Si vous cochez la case <guimenu>Tout</guimenu>, vous activez toutes les autorisations pour tous les périmètres.
    </para>
   </tip>
   <para>
    Confirmez en cliquant sur le bouton <guimenu>Create role </guimenu> (Créer le rôle).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-roles">
   <title>Modification des rôles personnalisés</title>
   <para>
    Dans le tableau, cliquez sur la ligne d'un rôle personnalisé, puis sélectionnez <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête de table pour éditer la description et les autorisations du rôle personnalisé. Confirmez en cliquant sur le bouton <guimenu>Update Role</guimenu> (Mettre à jour le rôle).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-roles">
   <title>Suppression des rôles personnalisés</title>
   <para>
    Dans le tableau, cliquez sur la ligne d'un rôle, puis sélectionnez <guimenu>Supprimer</guimenu> pour supprimer le rôle. Cochez la case <guimenu>Oui</guimenu> et confirmez avec le bouton <guimenu>Delete Role</guimenu> (Supprimer le rôle).
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster">
  <title>Affichage des éléments internes de la grappe</title>

  <para>
   L'élément de menu <guimenu>Grappe</guimenu> vous permet d'afficher des informations détaillées sur les hôtes, les OSD, les MON, la carte CRUSH et le contenu des fichiers journaux de la grappe Ceph.
  </para>

  <sect2 xml:id="dashboard-cluster-hosts">
   <title>Noeuds de la grappe</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Hôtes</guimenu></menuchoice> pour afficher la liste des noeuds de la grappe.
   </para>
   <figure>
    <title>Hôtes</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Cliquez sur un nom de noeud dans la colonne <guimenu>Nom d'hôte</guimenu> pour afficher les détails de performance du noeud.
   </para>
   <para>
    La colonne <guimenu>Services</guimenu> répertorie tous les daemons qui s'exécutent sur chaque noeud associé. Cliquez sur un nom de daemon pour afficher sa configuration détaillée.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-monitors">
   <title>Ceph Monitor</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Moniteurs</guimenu></menuchoice> pour afficher la liste des noeuds de la grappe hébergeant des moniteurs Ceph en cours d'exécution. La liste comprend le numéro de rang de chaque moniteur, son adresse IP publique et le nombre de sessions ouvertes.
   </para>
   <para>
    La liste est divisée en deux tableaux : l'un pour les moniteurs Ceph qui <emphasis>sont</emphasis> dans le quorum et le second pour les moniteurs Ceph qui <emphasis>ne sont pas</emphasis> dans le quorum.
   </para>
   <para>
    Cliquez sur un nom de noeud dans la colonne <guimenu>Nom</guimenu> pour afficher la configuration Ceph Monitor associée.
   </para>
   <para>
    Le tableau <guimenu>Statut</guimenu> affiche des statistiques générales sur les moniteurs Ceph en cours d'exécution.
   </para>
   <figure>
    <title>Moniteurs Ceph</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-osds">
   <title>OSD Ceph</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>OSD</guimenu></menuchoice> pour afficher la liste des noeuds hébergeant des daemons/disques OSD en cours d'exécution. La liste comprend, pour chaque noeud, le nom, le statut, le nombre de groupes de placements, la taille, l'utilisation, un graphique des octets de lecture/d'écriture dans le temps, ainsi que le taux d'opérations de lecture/écriture par seconde.
   </para>
   <figure>
    <title>OSD Ceph</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Cliquez sur <guimenu>Set Cluster-wide Flags</guimenu> (Définir les drapeaux à l'échelle de la grappe) dans l'en-tête du tableau pour ouvrir une fenêtre contextuelle contenant la liste des drapeaux qui s'appliquent à l'ensemble de la grappe. Vous pouvez activer ou désactiver des drapeaux individuels et confirmer avec le bouton <guimenu>Soumettre</guimenu>.
   </para>
   <figure>
    <title>Drapeaux OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Cliquez sur <guimenu>Set Cluster-wide Recovery Priority</guimenu> (Définir la priorité de récupération à l'échelle de la grappe) dans l'en-tête du tableau pour ouvrir une fenêtre contextuelle avec une liste des priorités de récupération des OSD qui s'appliquent à l'ensemble de la grappe. Vous pouvez activer le profil de priorité préféré et affiner les différentes valeurs ci-dessous. Confirmez en cliquant sur <guimenu>Soumettre</guimenu>.
   </para>
   <figure>
    <title>Priorité de récupération des OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Cliquez sur un nom de noeud dans la colonne <guimenu>Hôte</guimenu> pour afficher un tableau étendu reprenant les détails des paramètres et performances de l'OSD. En parcourant plusieurs onglets, vous pouvez voir les listes <guimenu>Attributs</guimenu>, <guimenu>Métadonnées</guimenu> et <guimenu>Compteur de performance</guimenu>, ainsi qu'un <guimenu>histogramme</guimenu> graphique des opérations de lecture et d'écriture.
   </para>
   <figure>
    <title>Détails des OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>exécution de tâches spécifiques sur les OSD</title>
    <para>
     Après avoir cliqué sur un nom de noeud OSD, sa ligne dans le tableau change légèrement de couleur, ce qui signifie que vous pouvez maintenant effectuer une tâche sur le noeud. Cliquez sur la flèche vers le bas en haut à gauche de l'en-tête du tableau et sélectionnez une tâche à effectuer, par exemple <guimenu>Nettoyage en profondeur</guimenu>. Entrez éventuellement une valeur requise pour la tâche et confirmez pour l'exécuter sur le noeud.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dahsboard-cluster-config">
   <title>Configuration de la grappe</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Configuration</guimenu></menuchoice>pour afficher une liste complète des options de configuration de la grappe Ceph. La liste contient le nom de l'option, une brève description et ses valeurs actuelles et par défaut.
   </para>
   <figure>
    <title>Configuration de la grappe</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Cliquez sur une ligne d'option spécifique pour la mettre en surbrillance et consulter les informations détaillées de l'option, telles que son type de valeur, les valeurs minimales et maximales autorisées, si elle peut être mise à jour au moment de l'exécution, etc.
   </para>
   <para>
    Lorsqu'une option spécifique est mise en surbrillance, vous pouvez éditer sa ou ses valeurs en cliquant sur le bouton <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau. Confirmez les modifications en cliquant sur <guimenu>Enregistrer</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-crushmap">
   <title>Carte CRUSH</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Carte CRUSH</guimenu></menuchoice> pour afficher une carte CRUSH de la grappe. Pour plus d'informations générales sur les cartes CRUSH, reportez-vous à la <xref linkend="op-crush"/>.
   </para>
   <para>
    Cliquez sur la racine, les noeuds ou des OSD spécifiques pour afficher des informations plus détaillées, telles que la pondération CRUSH, la profondeur dans l'arborescence de la carte, la classe de périphérique de l'OSD, etc.
   </para>
   <figure>
    <title>Carte CRUSH</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-mgr-plugins">
   <title>Modules Manager</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Modules Manager</guimenu></menuchoice> pour afficher une liste des modules Ceph Manager disponibles. Chaque ligne reprend un nom de module et indique s'il est actuellement activé ou non.
   </para>
   <figure>
    <title>Modules Manager</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Après avoir mis en surbrillance un module spécifique, vous pouvez voir ses paramètres détaillés dans le tableau <guimenu>Détails</guimenu> en dessous. Pour les éditer, cliquez sur <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau. Confirmez les modification en cliquant sur <guimenu>Mise à jour</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-logs">
   <title>Journaux</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Journaux</guimenu></menuchoice> pour afficher une liste des entrées de journal récentes de la grappe. Chaque ligne comprend un tampon horaire, le type de l'entrée de journal et le message consigné.
   </para>
   <para>
    Cliquez sur l'onglet <guimenu>Journaux d'audit</guimenu> pour afficher les entrées de journal du sous-système d'audit. Reportez-vous à la <xref linkend="dashboard-auditing"/> pour connaître les commandes permettant d'activer ou de désactiver les audits.
   </para>
   <figure>
    <title>Journaux</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-pools">
  <title>Gestion des réserves</title>

  <tip>
   <title>plus d'informations sur les réserves</title>
   <para>
    Pour plus d'informations générales sur les réserves Ceph, reportez-vous au <xref linkend="ceph-pools"/>. Pour des informations spécifiques sur les réserves codées à effacement, reportez-vous au <xref linkend="cha-ceph-erasure"/>.
   </para>
  </tip>

  <para>
   Pour répertorier toutes les réserves disponibles, cliquez sur <guimenu>Pools</guimenu> (Réserves) dans le menu principal.
  </para>

  <para>
   La liste affiche, pour chaque réserve, le nom, le type, l'application associée, le statut du groupe de placements, la taille des répliques, le profil codé à effacement, l'utilisation et les statistiques de lecture/écriture.
  </para>

  <figure>
   <title>Liste des réserves</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Pour afficher des informations plus détaillées sur une réserve, activez sa ligne dans le tableau.
  </para>

  <sect2 xml:id="dashboard-pools-create">
   <title>Ajout d'une nouvelle réserve</title>
   <para>
    Pour ajouter une nouvelle réserve, cliquez sur <guimenu>Ajouter</guimenu> en haut à gauche du tableau des réserves. Dans le formulaire de la réserve, vous pouvez entrer le nom de cette dernière, le type, le nombre de groupes de placements et des informations supplémentaires, telles que les applications de la réserve, le mode de compression et l'algorithme. Le formulaire de la réserve calcule lui-même le nombre de groupes de placements qui convient le mieux à cette réserve. Le calcul est basé sur la quantité d'OSD dans la grappe et le type de réserve sélectionné avec ses paramètres spécifiques. Dès qu'un nombre de groupes de placements est défini manuellement, il est remplacé par un nombre calculé. Confirmez en cliquant sur le bouton <guimenu>Create pool</guimenu> (Créer une réserve).
   </para>
   <figure>
    <title>Ajout d'une nouvelle réserve</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-pools-delete">
   <title>Suppression de réserves</title>
   <para>
    Pour supprimer une réserve, cliquez sur sa ligne dans le tableau et cliquez sur <guimenu>Supprimer</guimenu> en haut à gauche du tableau des réserves.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-pools-edit">
   <title>Modification des options d'une réserve</title>
   <para>
    Pour éditer les options d'une réserve, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Modifier</guimenu> en haut à gauche du tableau des réserves.
   </para>
   <para>
    Vous pouvez modifier le nom de la réserve, augmenter le nombre de groupes de placements et éditer la liste des applications et les paramètres de compression. Confirmez en cliquant sur le bouton <guimenu>Edit pool</guimenu> (Modifier une réserve).
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-rbds">
  <title>Gestion des périphériques de bloc RADOS</title>

  <para>
   Pour répertorier tous les périphériques de bloc RADOS (RADOS Block Device, RBD) disponibles, cliquez sur <menuchoice><guimenu>Bloc</guimenu><guimenu>Images</guimenu></menuchoice> dans le menu principal.
  </para>

  <para>
   La liste affiche de brèves informations sur le périphérique, telles que son nom, le nom de la réserve associée, la taille de l'appareil, ainsi que le nombre et la taille des objets sur celui-ci.
  </para>

  <figure>
   <title>Liste des images RBD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dashboard-rbds-details">
   <title>Affichage des détails sur les RBD</title>
   <para>
    Pour afficher des informations plus détaillées sur un périphérique, cliquez sur sa ligne dans le tableau :
   </para>
   <figure>
    <title>Informations sur les RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-configuration">
   <title>Affichage de la configuration d'un RBD</title>
   <para>
    Pour afficher la configuration détaillée d'un périphérique, cliquez sur sa ligne dans le tableau, puis sur l'onglet <guimenu>Configuration</guimenu> dans le tableau inférieur :
   </para>
   <figure>
    <title>Configuration d'un RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-create">
   <title>Création de RBD</title>
   <para>
    Pour ajouter un nouveau périphérique, cliquez sur <guimenu>Ajouter</guimenu> dans la partie supérieure gauche de l'en-tête du tableau, puis procédez comme suit dans l'écran <guimenu>Create RBD</guimenu> (Créer un RBD) :
   </para>
   <figure>
    <title>Ajout d'un nouveau RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Entrez le nom du nouveau périphérique. Reportez-vous au <xref linkend="sysreq-naming"/> pour plus d'informations sur les règles de dénomination.
     </para>
    </step>
    <step>
     <para>
      Sélectionnez la réserve à laquelle est assignée l'application « rbd » à partir de laquelle le nouveau périphérique RBD va être créé.
     </para>
    </step>
    <step>
     <para>
      Spécifiez la taille du nouveau périphérique.
     </para>
    </step>
    <step>
     <para>
      Spécifiez des options supplémentaires pour le périphérique. Pour affiner les paramètres de l'appareil, cliquez sur <guimenu>Avancé</guimenu> et entrez des valeurs pour la taille d'objet, l'unité de segmentation ou le nombre de segments. Pour spécifier les limites de la qualité de service (Quality of Service, QoS), cliquez sur <guimenu>Qualité de service</guimenu> et indiquez les valeurs.
     </para>
    </step>
    <step>
     <para>
      Confirmez en cliquant sur le bouton <guimenu>Create RDB</guimenu> (Créer un RDB).
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dashboard-rbd-delete">
   <title>Suppression de RBD</title>
   <para>
    Pour supprimer un périphérique, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Supprimer</guimenu> en haut à gauche de l'en-tête du tableau. Confirmez la suppression en cliquant sur <guimenu>Delete RBD</guimenu> (Supprimer le RBD).
   </para>
   <tip>
    <title>déplacement de RBD vers la corbeille</title>
    <para>
     La suppression d'un RDB est une opération irréversible. En revanche, <guimenu>Déplacer vers la corbeille</guimenu> vous permet de restaurer ultérieurement le périphérique en le sélectionnant sur l'onglet <guimenu>Corbeille</guimenu> du principal tableau et en cliquant sur <guimenu>Restaurer</guimenu> en haut à gauche de l'en-tête du tableau.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-rbds-snapshots">
   <title>Instantanés de périphériques de bloc RADOS</title>
   <para>
    Pour créer un instantané de périphérique de bloc RADOS, cliquez sur la ligne du périphérique dans le tableau et, sur l'onglet <guimenu>Instantanés</guimenu> sous le tableau principal, cliquez sur <guimenu>Créer</guimenu> en haut à gauche de l'en-tête du tableau. Entrez le nom de l'instantané et confirmez en cliquant sur <guimenu>Create Snapshot</guimenu> (Créer un instantané).
   </para>
   <para>
    Après avoir sélectionné un instantané, vous pouvez effectuer des opérations supplémentaires sur le périphérique, telles que renommer, protéger, cloner, copier ou supprimer. <guimenu>Rollback</guimenu> restaure l'état de l'appareil à partir de l'instantané actuel.
   </para>
   <figure>
    <title>Instantanés de RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-iscsi">
   <title>Gestion des passerelles iSCSI</title>
   <tip>
    <title>plus d'informations sur les passerelles iSCSI</title>
    <para>
     Pour plus d'informations sur les passerelles iSCSI, reportez-vous au <xref linkend="cha-ceph-as-iscsi"/> et au <xref linkend="cha-ceph-iscsi"/>.
    </para>
   </tip>
   <para>
    Pour répertorier toutes les passerelles disponibles et les images assignées, cliquez sur <menuchoice><guimenu>Bloc</guimenu><guimenu>iSCSI</guimenu></menuchoice> dans le menu principal. Un onglet <guimenu>Présentation</guimenu> s'ouvre et répertorie les passerelles iSCSI actuellement configurées et les images RBD assignées.
   </para>
   <para>
    Le tableau <guimenu>Passerelles</guimenu> répertorie l'état de chaque passerelle, le nombre de cibles iSCSI et le nombre de sessions. Le tableau <guimenu>Images</guimenu> répertorie le nom de chaque image assignée, le type de backstore du nom de la réserve associée et d'autres détails statistiques.
   </para>
   <para>
    L'onglet <guimenu>Cibles</guimenu> répertorie les cibles iSCSI actuellement configurées.
   </para>
   <figure>
    <title>Liste des cibles iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Pour afficher des informations plus détaillées sur une cible, cliquez sur sa ligne dans le tableau. Un schéma structuré en arborescence s'ouvre et liste les disques, les portails, les initiateurs et les groupes. Cliquez sur un élément pour le développer et afficher son contenu détaillé, éventuellement avec une configuration associée dans le tableau sur la droite.
   </para>
   <figure>
    <title>Détails d'une cible ISCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-iscsi-create">
    <title>Ajout de cibles iSCSI</title>
    <para>
     Pour ajouter une nouvelle cible iSCSI, cliquez sur <guimenu>Ajouter</guimenu> en haut à gauche dans le tableau <guimenu>Cibles</guimenu>, puis entrez les informations requises.
    </para>
    <figure>
     <title>Ajout d'une nouvelle cible</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       Entrez l'adresse cible de la nouvelle passerelle.
      </para>
     </step>
     <step>
      <para>
       Cliquez sur <guimenu>Add portal</guimenu> (Ajouter un portail) et sélectionnez un ou plusieurs portails iSCSI dans la liste.
      </para>
     </step>
     <step>
      <para>
       Cliquez sur <guimenu>Add image</guimenu> (Ajouter une image) et sélectionnez une ou plusieurs images RBD pour la passerelle.
      </para>
     </step>
     <step>
      <para>
       Si vous devez utiliser l'authentification pour accéder à la passerelle, sélectionnez la case à cocher <guimenu>Authentication</guimenu> (Authentification), puis entrez les informations d'identification. Vous pouvez trouver des options d'authentification plus avancées après avoir activé <guimenu>l'authentification mutuelle</guimenu> et l'<guimenu>authentification par détection</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Confirmez en cliquant sur le bouton <guimenu>Create Target</guimenu> (Créer une cible).
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-edit">
    <title>Modification des cibles iSCSI</title>
    <para>
     Pour modifier une cible iSCSI existante, cliquez sur sa ligne dans le tableau <guimenu>Cibles</guimenu>, puis cliquez sur <guimenu>Modifier</guimenu> en haut à gauche du tableau.
    </para>
    <para>
     Vous pouvez ensuite modifier la cible iSCSI, ajouter ou supprimer des portails et ajouter ou supprimer des images RBD associées. Vous pouvez également ajuster les informations d'authentification pour la passerelle.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-delete">
    <title>Suppression de cibles iSCSI</title>
    <para>
     Pour supprimer une cible iSCSI, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Supprimer</guimenu> en haut à gauche du tableau des passerelles. Cochez la case <guimenu>Oui</guimenu> et confirmez avec le bouton <guimenu>Delete iSCSI </guimenu> (Supprimer iSCSI).
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-qos">
   <title>Qualité de service (QoS) RBD</title>
   <tip>
    <title>Complément d'informations</title>
    <para>
     Pour plus d'informations générales et une description des options de configuration QoS RBD, reportez-vous à la <xref linkend="rbd-qos"/>.
    </para>
   </tip>
   <para>
    Les options QoS peuvent être configurées à différents niveaux.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Globalement
     </para>
    </listitem>
    <listitem>
     <para>
      Par réserve
     </para>
    </listitem>
    <listitem>
     <para>
      Par image
     </para>
    </listitem>
   </itemizedlist>
   <para>
    La configuration <emphasis>globale</emphasis> est en haut de la liste et sera utilisée pour toutes les images RBD récemment créées et pour les images qui ne remplacent pas ces valeurs au niveau de la couche image RBD ou réserve. Une valeur d'option spécifiée globalement peut être remplacée par réserve ou par image. Les options spécifiées sur une réserve seront appliquées à toutes les images RBD de cette réserve, excepté si elles sont remplacées par une option de configuration définie sur une image. Les options spécifiées sur une image remplaceront les options spécifiées sur une réserve et celles définies globalement.
   </para>
   <para>
    De cette façon, il est possible de définir des valeurs par défaut de manière globale, de les adapter pour toutes les images RBD d'une réserve spécifique et de remplacer la configuration de la réserve pour des images RBD individuelles.
   </para>
   <sect3 xml:id="dash-rbd-qos-global">
    <title>Configuration globale des options</title>
    <para>
     Pour configurer les options RBD globalement, sélectionnez <menuchoice><guimenu>Grappe</guimenu> <guimenu>Configuration</guimenu></menuchoice> dans le menu principal.
    </para>
    <para>
     Pour répertorier toutes les options de configuration globale, cliquez sur <menuchoice><guimenu>Niveau</guimenu> <guimenu>Avancé</guimenu></menuchoice>. Filtrez ensuite les résultats du tableau en entrant « rbd_qos » dans le champ de recherche. Cela liste toutes les options de configuration disponibles pour QoS. Pour modifier une valeur, cliquez sur sa ligne dans le tableau, puis sélectionnez <guimenu>Modifier</guimenu> en haut à gauche du tableau. La boîte de dialogue <guimenu>Modifier</guimenu> contient six champs différents pour spécifier les valeurs. Les valeurs d'option de configuration RBD sont requises dans la zone de texte <guimenu>mgr</guimenu>. Notez que contrairement aux autres boîtes de dialogue, celle-ci ne vous permet pas de spécifier la valeur dans des unités pratiques. Vous devez définir ces valeurs en octets ou en entrées/sorties par seconde (IOPS), en fonction de l'option que vous modifiez.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-create">
    <title>Configuration des options d'une nouvelle réserve</title>
    <para>
     Pour créer une réserve et configurer ses options de configuration RBD, cliquez sur <menuchoice><guimenu>Réserves</guimenu> <guimenu>Créer</guimenu></menuchoice>. Sélectionnez <guimenu>replicated</guimenu> (répliqué) comme type de réserve. Vous devez ensuite ajouter la balise d'application <guimenu>rbd</guimenu> à la réserve pour être en mesure de configurer les options QoS RBD.
    </para>
    <note>
     <para>
      Il n'est pas possible de définir les options de configuration RBD QoS sur une réserve codée à effacement. Pour configurer les options QoS RBD pour les réserves codées à effacement, vous devez modifier la réserve de métadonnées répliquée d'une image RBD. La configuration sera ensuite appliquée à la réserve de données codée à effacement de cette image.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-edit">
    <title>Configuration des options d'une réserve existante</title>
    <para>
     Pour configurer les options QoS RBD sur une réserve existante, cliquez sur <guimenu>Réserves</guimenu>, puis sur la ligne de la réserve dans le tableau, et sélectionnez <guimenu>Modifier</guimenu> en haut à gauche du tableau.
    </para>
    <para>
     Dans la boîte de dialogue, vous devriez voir la section <guimenu>Configuration RBD</guimenu> suivie d'une section <guimenu>Qualité de service</guimenu>.
    </para>
    <note>
     <para>
      Si aucune d'elles n'apparaît<guimenu/><guimenu/>, vous êtes probablement occupé à modifier une réserve <emphasis>codée à effacement</emphasis>, qui ne permet pas de définir des options de configuration RBD, ou la réserve n'est pas configurée pour être utilisée par des images RBD. Dans ce dernier cas, assignez la balise d'application <guimenu>rbd</guimenu> à la réserve et les sections de configuration correspondantes s'afficheront.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-qos">
    <title>Options de configuration</title>
    <para>
     Cliquez sur <guimenu>Qualité de service +</guimenu> pour développer les options de configuration. Une liste de toutes les options disponibles s'affiche. Les unités des options de configuration sont déjà affichées dans les zones de texte. En cas d'option d'octets par seconde, vous pouvez utiliser des raccourcis tels que « 1M » ou « 5G ». Ils seront automatiquement convertis en « 1 Mo/s » et « 5 Go/s » respectivement.
    </para>
    <para>
     Si vous cliquez sur le bouton de réinitialisation à droite de chaque zone de texte, toute valeur éventuelle définie pour la réserve est supprimée. En revanche, cela ne supprime pas les valeurs de configuration des options configurées globalement ou au niveau d'une image RBD.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-create">
    <title>Création d'options QoS RBD avec une nouvelle image RBD</title>
    <para>
     Pour créer une image RBD avec des options QoS RBD définies sur cette image, sélectionnez <menuchoice><guimenu>Bloc</guimenu> <guimenu>Images</guimenu></menuchoice>, puis cliquez sur <guimenu>Créer</guimenu>. Cliquez sur <guimenu>Avancé</guimenu> pour développer la section de configuration avancée. Cliquez sur <guimenu>Qualité de service</guimenu> pour ouvrir toutes les options de configuration disponibles.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-edit">
    <title>Modification des options QoS RBD sur les images existantes</title>
    <para>
     Pour modifier les options QoS RBD pour une image existante, sélectionnez <menuchoice><guimenu>Bloc</guimenu> <guimenu>Images</guimenu></menuchoice> et cliquez sur la ligne du tableau de la réserve, puis sur <guimenu>Modifier</guimenu>. La boîte de dialogue de modification s'affiche. Cliquez sur <guimenu>Avancé</guimenu> pour développer la section de configuration avancée. Cliquez sur <guimenu>Qualité de service</guimenu> pour ouvrir toutes les options de configuration disponibles.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-copy">
    <title>Modification des options de configuration lors de la copie ou du clonage d'images</title>
    <para>
     Si une image RBD est clonée ou copiée, par défaut, les valeurs définies sur cette image particulière sont également copiées. Si vous le souhaitez, vous pouvez les modifier lors de la copie ou du clonage en spécifiant les valeurs de configuration mises à jour dans la boîte de dialogue de copie/clonage, de la même manière que lors de la création ou de l'édition d'une image RBD. De cette façon, seules les valeurs de l'image RBD copiée ou clonée sont définies (ou réinitialisées). Cette opération ne modifie ni la configuration d'image RBD source, ni la configuration globale.
    </para>
    <para>
     Si vous choisissez de réinitialiser la valeur d'option lors de la copie/du clonage, aucune valeur ne sera définie pour cette option sur cette image. Cela signifie que toute valeur de cette option spécifiée pour la réserve parent sera utilisée si elle est configurée pour la réserve parent. Dans le cas contraire, le système appliquera la valeur par défaut globale.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-mirror">
   <title>Mise en miroir RBD</title>
   <tip>
    <title>informations générales</title>
    <para>
     Pour des informations générales et l'approche de ligne de commande pour la mise en miroir de périphérique de bloc RADOS, reportez-vous à la <xref linkend="ceph-rbd-mirror"/>.
    </para>
   </tip>
   <para>
    Vous pouvez utiliser Ceph Dashboard pour configurer la réplication d'images RBD entre plusieurs grappes.
   </para>
   <sect3 xml:id="rbd-mirror-primary-secondary">
    <title>Grappe primaire et grappe(s) secondaire(s)</title>
    <para>
     La grappe <emphasis>primaire</emphasis> est celle sur laquelle la réserve d'origine avec les images est créée. La ou les grappes <emphasis>secondaires</emphasis> sont celles sur lesquelles la réserve/les images sont répliquées à partir de la grappe <emphasis>primaire</emphasis>.
    </para>
    <note>
     <title>assignation d'un nom relatif</title>
     <para>
      Les termes <emphasis>primaire</emphasis> et <emphasis>secondaire</emphasis> peuvent être relatifs dans le contexte de la réplication, étant donné qu'ils se rapportent davantage aux réserves individuelles qu'aux grappes. Par exemple, dans la réplication bidirectionnelle, une réserve peut être mise en miroir de la grappe <emphasis>primaire</emphasis> vers la grappe <emphasis>secondaire</emphasis>, tandis qu'une autre réserve peut être mise en miroir de la grappe <emphasis>secondaire</emphasis> vers la grappe <emphasis>primaire</emphasis>.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="rbd-mirroring-replication-modes">
    <title>Modes de réplication</title>
    <para>
     Il existe deux modes de réplication des données :
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Le mode <emphasis>réserve</emphasis> vous permet de répliquer toutes les images RBD d'une réserve.
      </para>
     </listitem>
     <listitem>
      <para>
       Le mode <emphasis>image</emphasis> vous permet d'activer la mise en miroir uniquement pour une ou plusieurs images spécifiques d'une réserve.
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui-daemon">
    <title>Configuration du daemon <systemitem class="daemon">rbd-mirror</systemitem></title>
    <para>
     Le daemon <systemitem class="daemon">rbd-mirror</systemitem> effectue la réplication réelle des données de grappe. Pour l'installer, le configurer et l'exécuter, procédez comme suit :
    </para>
    <procedure>
     <step>
      <para>
       Le daemon <systemitem class="daemon">rbd-mirror</systemitem> doit s'exécuter sur l'un des noeuds de la grappe <emphasis>secondaire</emphasis> autre que le noeud Admin. Étant donné qu'il n'est pas installé par défaut, installez-le :
      </para>
<screen><prompt>root@minion &gt; </prompt>zypper install rbd-mirror</screen>
     </step>
     <step>
      <para>
       Sur la grappe <emphasis>primaire</emphasis>, créez un ID utilisateur Ceph unique pour le processus du daemon <systemitem class="daemon">rbd-mirror</systemitem>. Dans cet exemple, nous utiliserons « uid1 » comme ID utilisateur :
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd'
[client.rbd-mirror.uid1]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       Sur le noeud où vous avez déjà installé le paquetage
       <package>rbd-mirror</package> sur la grappe <emphasis>secondaire</emphasis>, créez le même utilisateur Ceph et enregistrez la sortie dans un trousseau de clés :
      </para>
<screen><prompt>root@minion &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd' \
 &gt; /etc/ceph/ceph.client.rbd-mirror.uid1.keyring</screen>
     </step>
     <step>
      <para>
       Sur le même noeud, activez et exécutez le service <systemitem class="daemon">rbd-mirror</systemitem> :
      </para>
<screen><prompt>root@minion &gt; </prompt>systemctl enable ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl start ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl status ceph-rbd-mirror@rbd-mirror.uid1
● ceph-rbd-mirror@rbd-mirror.uid1.service - Ceph rbd mirror daemon
   Loaded: loaded (/usr/lib/systemd/system/ceph-rbd-mirror@.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2019-10-04 07:48:53 EDT; 2 days ago
 Main PID: 212434 (rbd-mirror)
    Tasks: 47
   CGroup: /system.slice/system-ceph\x2drbd\x2dmirror.slice/ceph-rbd-mirror@rbd-mirror.uid1.service
           └─212434 /usr/bin/rbd-mirror -f --cluster ceph --id rbd-mirror.test --setuser ceph --setgroup ceph

Oct 04 07:48:53 doc-ses6min4 systemd[1]: Started Ceph rbd mirror daemon.
</screen>
     </step>
     <step>
      <para>
       Sur l'instance Ceph Dashboard de la grappe <emphasis>secondaire</emphasis>, accédez à <menuchoice><guimenu>Bloc</guimenu><guimenu>Mise en miroir</guimenu></menuchoice>. Le tableau <guimenu>Daemons</guimenu> à gauche montre les daemons <systemitem>rbd-mirror</systemitem> en cours d'exécution et leur état de santé.
      </para>
      <figure>
       <title>Exécution de daemons <systemitem class="daemon">rbd-mirror</systemitem></title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui">
    <title>Configuration de la réplication de réserve dans Ceph Dashboard</title>
    <para>
     Le daemon <systemitem class="daemon">rbd-mirror</systemitem> doit avoir accès à la grappe primaire pour pouvoir mettre en miroir des images RBD. Par conséquent, vous devez créer un compte utilisateur Ceph <emphasis>homologue</emphasis> sur la grappe primaire et informer la grappe secondaire de son trousseau de clés :
    </para>
    <procedure>
     <step>
      <para>
       Sur la grappe <emphasis>primaire</emphasis>, créez un utilisateur « client.rbd-mirror-peer » qui sera utilisé pour la réplication des données :
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror-peer \
 mon 'profile rbd' osd 'profile rbd'
[client.rbd-mirror-peer]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       Sur les grappes <emphasis>primaire</emphasis> et <emphasis>secondaire</emphasis>, créez une réserve portant le même nom et assignez-lui l'application « rbd ». Reportez-vous à la <xref linkend="dashboard-pools-create"/> pour plus de détails sur la création d'une réserve.
      </para>
      <figure>
       <title>Création d'une réserve avec l'application RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Sur les tableaux de bord des grappes <emphasis>primaire</emphasis> et <emphasis>secondaire</emphasis>, accédez à <menuchoice><guimenu>Bloc</guimenu><guimenu>Mise en miroir</guimenu></menuchoice>. Dans le tableau <guimenu>Réserves</guimenu> à droite, cliquez sur le nom de la réserve à répliquer et, après avoir cliqué sur <guimenu>Mode d'édition</guimenu>, sélectionnez le mode de réplication. Dans cet exemple, nous travaillerons avec un mode de réplication <emphasis>réserve</emphasis>, ce qui signifie que toutes les images d'une réserve donnée seront répliquées. Confirmez en cliquant sur <guimenu>Mise à jour</guimenu>.
      </para>
      <figure>
       <title>Configuration du mode de réplication</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <important>
       <title>erreur ou avertissement sur la grappe primaire</title>
       <para>
        Après la mise à jour du mode de réplication, un drapeau d'erreur ou d'avertissement apparaît dans la colonne de droite correspondante. Cela est dû au fait que la réserve n'a encore aucun utilisateur homologue qui lui est assigné pour la réplication. Ignorez ce drapeau pour la grappe <emphasis>primaire</emphasis> étant donné que nous assignons un utilisateur homologue à la grappe <emphasis>secondaire</emphasis> uniquement.
       </para>
      </important>
     </step>
     <step>
      <para>
       Sur le tableau de bord de la grappe <emphasis>secondaire</emphasis>, accédez à <menuchoice><guimenu>Bloc</guimenu><guimenu>Mise en mise en miroir</guimenu></menuchoice>. Enregistrez le trousseau de clés de l'utilisateur « client.rbd-mirror-peer » dans la réserve mise en miroir en cliquant sur le nom de la réserve et en sélectionnant <guimenu>Ajouter un homologue</guimenu>. Spécifiez les détails de la grappe <emphasis>primaire</emphasis> :
      </para>
      <figure>
       <title>Ajout des informations d'identification de l'homologue</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <variablelist>
       <varlistentry>
        <term><guimenu>Nom de la grappe</guimenu></term>
        <listitem>
         <para>
          Chaîne unique arbitraire qui identifie la grappe primaire (par exemple « primaire »). Le nom de la grappe doit être différent de celui de la grappe secondaire réel.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>ID CephX</guimenu></term>
        <listitem>
         <para>
          ID utilisateur Ceph que vous avez créé en tant qu'homologue de mise en miroir. Dans cet exemple, il s'agit de « rbd-mirror-peer ».
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Adresses du moniteur</guimenu></term>
        <listitem>
         <para>
          Liste (séparée par des virgules) des adresses IP/noms d'hôte des noeuds Ceph Monitor de la grappe primaire.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Clé CephX</guimenu></term>
        <listitem>
         <para>
          Clé liée à l'ID utilisateur homologue. Vous pouvez la récupérer en exécutant l'exemple de commande suivant sur la grappe primaire :
         </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth print_key client.rbd-mirror-peer</screen>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Confirmez en cliquant sur <guimenu>Soumettre</guimenu>.
      </para>
      <figure>
       <title>Liste des réserves répliquées</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-test">
    <title>Vérification du fonctionnement de la réplication d'image RBD</title>
    <para>
     Lorsque le daemon <systemitem class="daemon">rbd-mirror</systemitem> est en cours d'exécution et que la réplication d'image RBD est configurée sur Ceph Dashboard, il est temps de vérifier si la réplication fonctionne réellement :
    </para>
    <procedure>
     <step>
      <para>
       Sur l'instance Ceph Dashboard de la grappe <emphasis>primaire</emphasis>, créez une image RBD de sorte que sa réserve parent soit la réserve que vous avez déjà créée à des fins de réplication. Activez les fonctionnalités <option>Verrou exclusif</option> et <option>Journalisation</option> pour l'image. Reportez-vous à la <xref linkend="dashboard-rbds-create"/> pour plus de détails sur la création d'images RBD.
      </para>
      <figure>
       <title>Nouvelle image RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Après avoir créé l'image que vous souhaitez répliquer, ouvrez l'instance Ceph Dashboard de la grappe <emphasis>secondaire</emphasis> et accédez à <menuchoice><guimenu>Bloc</guimenu><guimenu>Mise en mirroir</guimenu></menuchoice>. Le tableau <guimenu>Réserves</guimenu> sur la droite rend compte du changement du <guimenu>nombre d'images à distance</guimenu> et synchronise le <guimenu>nombre d'images en local</guimenu>.
      </para>
      <figure>
       <title>Nouvelle image RBD synchronisée</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <tip>
       <title>progression de la réplication</title>
       <para>
        Le tableau <guimenu>Images</guimenu> en bas de la page affiche le statut de la réplication des images RBD. L'onglet <guimenu>Problèmes</guimenu> inclut les éventuels problèmes, l'onglet <guimenu>Synchronisation en cours</guimenu> affiche la progression de la réplication des images et l'onglet <guimenu>Prêt</guimenu> répertorie toutes les images dont la réplication a réussi.
       </para>
       <figure>
        <title>Statut de la réplication des images RBD</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </tip>
     </step>
     <step>
      <para>
       Sur la grappe <emphasis>primaire</emphasis>, écrivez des données dans l'image RBD. Sur l'instance Ceph Dashboard de la grappe <emphasis>secondaire</emphasis>, accédez à <menuchoice><guimenu>Bloc</guimenu><guimenu>Images</guimenu></menuchoice> et surveillez si la taille de l'image correspondante augmente au fur et à mesure que des données sont inscrites sur la grappe primaire.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dash-webui-nfs">
  <title>Gestion de NFS Ganesha</title>

  <tip>
   <title>plus d'informations sur NFS Ganesha</title>
   <para>
    Pour plus d'informations générales sur NFS Ganesha, reportez-vous au <xref linkend="cha-ceph-nfsganesha"/>.
   </para>
  </tip>

  <para>
   Pour répertorier toutes les exportations NFS disponibles, cliquez sur <guimenu>NFS</guimenu> dans le menu principal.
  </para>

  <para>
   La liste affiche le répertoire de chaque exportation, le nom d'hôte du daemon, le type d'interface dorsale de stockage et son type d'accès.
  </para>

  <figure>
   <title>Liste des exportations NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Pour afficher des informations plus détaillées sur une exportation NFS, cliquez sur sa ligne dans le tableau.
  </para>

  <figure>
   <title>Détails de l'exportation NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dash-webui-nfs-create">
   <title>Ajout d'exportations NFS</title>
   <para>
    Pour ajouter un nouvelle exportation NFS, cliquez sur <guimenu>Add</guimenu> (Ajouter) en haut à gauche du tableau des exportations, puis entrez les informations requises.
   </para>
   <figure>
    <title>Ajout d'une nouvelle exportation NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Sélectionnez un ou plusieurs daemons NFS Ganesha qui exécuteront l'exportation.
     </para>
    </step>
    <step>
     <para>
      Sélectionnez un système dorsal de stockage, soit <guimenu>CephFS</guimenu>, soit <guimenu>Object Gateway</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Sélectionnez un ID utilisateur et d'autres options associées à l'interface dorsale.
     </para>
    </step>
    <step>
     <para>
      Entrez le chemin de répertoire pour l'exportation NFS. Si le répertoire n'existe pas sur le serveur, il est alors créé.
     </para>
    </step>
    <step>
     <para>
      Indiquez d'autres options liées à NFS, telles que la version du protocole NFS prise en charge, le pseudo, le type d'accès, l'action squash ou le protocole de transport.
     </para>
    </step>
    <step>
     <para>
      Si vous devez limiter l'accès à des clients spécifiques, cliquez sur <guimenu>Add clients</guimenu> (Ajouter des clients) et ajoutez leurs adresses IP, ainsi que le type d'accès et les options d'action squash.
     </para>
    </step>
    <step>
     <para>
      Confirmez en cliquant sur <guimenu>Submit</guimenu> (Soumettre).
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-delete">
   <title>Suppression des exportations NFS</title>
   <para>
    Pour supprimer une exportation, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Supprimer</guimenu> en haut à gauche du tableau des exportations.
   </para>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-edit">
   <title>Modification d'exportations NFS</title>
   <para>
    Pour modifier une exportation existante, cliquez sur sa ligne dans le tableau, puis sur <guimenu>Modifier</guimenu> en haut à gauche du tableau des exportations.
   </para>
   <para>
    Vous pouvez ensuite régler tous les détails de l'exportation NFS.
   </para>
   <figure>
    <title>Modification d'une exportation NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-mds">
  <title>Gestion des systèmes de fichiers Ceph</title>

  <tip>
   <title>Complément d'informations</title>
   <para>
    Pour trouver des informations détaillées sur CephFS, reportez-vous au <xref linkend="cha-ceph-cephfs"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-mds-overview">
   <title>Affichage de la vue d'ensemble CephFS</title>
   <para>
    Cliquez sur <guimenu>Systèmes de fichiers</guimenu> dans le menu principal pour afficher la vue d'ensemble des systèmes de fichiers configurés. Le tableau principal affiche le nom de chaque système de fichiers, sa date de création et s'il est activé ou non.
   </para>
   <para>
    Vous pouvez cliquer sur la ligne d'un système de fichiers dans le tableau afin de découvrir des détails sur son rang et sur les réserves ajoutées au système de fichiers.
   </para>
   <figure>
    <title>Détails CephFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Au bas de l'écran, vous pouvez voir des statistiques comptant le nombre d'inodes MDS connexes et les demandes des clients, recueillies en temps réel.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-ogw">
  <title>Gestion des instances Object Gateway</title>

  <tip>
   <title>plus d'informations sur Object Gateway</title>
   <para>
    Pour plus d'informations générales sur Object Gateway, reportez-vous au <xref linkend="cha-ceph-gw"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-ogw-view">
   <title>Affichage des instances Object Gateway</title>
   <para>
    Pour afficher une liste des passerelles Object Gateway configurées, cliquez sur <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Daemons</guimenu></menuchoice>. La liste comprend l'ID de la passerelle, le nom de l'hôte du noeud de grappe sur lequel le daemon de la passerelle est en cours d'exécution et le numéro de version de la passerelle.
   </para>
   <para>
    Cliquez sur la ligne d'une passerelle dans le tableau pour en afficher les informations détaillées. L'onglet <guimenu>Compteurs de performance</guimenu> affiche les détails des opérations de lecture/d'écriture et les statistiques de cache.
   </para>
   <figure>
    <title>Détails de la passerelle</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-ogw-user">
   <title>Gestion des utilisateurs Object Gateway</title>
   <para>
    Cliquez sur <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Utilisateurs</guimenu></menuchoice> pour afficher une liste des utilisateurs Object Gateway existants.
   </para>
   <para>
    Cliquez sur la ligne d'un utilisateur dans le tableau pour afficher les détails du compte utilisateur, tels que les informations de statut ou les détails du quota de compartiment et utilisateur.
   </para>
   <figure>
    <title>Utilisateurs d'Object Gateway</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-ogw-user-create">
    <title>Ajout d'un nouvel utilisateur Gateway</title>
    <para>
     Pour ajouter un nouvel utilisateur de passerelle, cliquez sur <guimenu>Ajouter</guimenu> en haut à gauche de l'en-tête du tableau. Remplissez les informations d'identification, les détails sur la clé S3 et le quota de compartiment/utilisateur, puis confirmez en cliquant sur <guimenu>Ajouter</guimenu>.
    </para>
    <figure>
     <title>Ajout d'un nouvel utilisateur Gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-delete">
    <title>Suppression d'utilisateurs Object Gateway</title>
    <para>
     Pour supprimer un utilisateur Object Gateway, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Supprimer</guimenu> en haut à gauche de l'en-tête du tableau. Cochez la case <guimenu>Oui</guimenu> et confirmez avec le bouton <guimenu>Delete User</guimenu> (Supprimer l'utilisateur).
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-edit">
    <title>Modification des détails des utilisateurs Object Gateway</title>
    <para>
     Pour modifier les détails d'un utilisateur Object Gateway, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau.
    </para>
    <para>
     Modifiez les informations utilisateur de base ou supplémentaires, telles que les fonctions, clés, utilisateurs secondaires et les détails de quota. Confirmez en cliquant sur <guimenu>Mise à jour</guimenu>.
    </para>
    <para>
     L'onglet <guimenu>Clés</guimenu> comprend une liste en lecture seule des utilisateurs de la passerelle et de leurs clés secrète et d'accès. Pour afficher les clés, cliquez sur un nom d'utilisateur dans la liste, puis sélectionnez <guimenu>Afficher</guimenu> en haut à gauche de l'en-tête du tableau. Dans la boîte de dialogue <guimenu>Clef S3</guimenu>, cliquez sur l'icône en forme d'oeil pour dévoiler les clés, ou cliquez sur l'icône du presse-papiers pour copier la clé associée dans le presse-papiers.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-ogw-bucket">
   <title>Gestion des compartiments Object Gateway</title>
   <para>
    Les compartiments Object Gateway (OGW) implémentent la fonctionnalité des conteneurs OpenStack Swift. Ils servent de conteneurs pour le stockage des objets de données.
   </para>
   <para>
    Cliquez sur <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Compartiments</guimenu></menuchoice> pour afficher une liste des compartiments OGW.
   </para>
   <sect3 xml:id="dashboard-ogw-bucket-create">
    <title>Ajout d'un nouveau compartiment</title>
    <para>
     Pour ajouter un nouveau compartiment OGW, cliquez sur <guimenu>Ajouter</guimenu> en haut à gauche de l'en-tête du tableau. Entrez le nom du compartiment et sélectionnez son propriétaire. Cliquez sur <guimenu>Ajouter</guimenu> pour confirmer.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-view">
    <title>Affichage des détails d'un compartiment</title>
    <para>
     Pour afficher des informations détaillées sur un compartiment OGW, cliquez sur sa ligne dans le tableau.
    </para>
    <figure>
     <title>Détails d'un compartiment OGW</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <tip>
     <title>Quota de compartiment</title>
     <para>
      Sous le tableau <guimenu>Détails</guimenu>, vous pouvez trouver des détails sur les paramètres de quota du compartiment.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-edit">
    <title>Mise à jour du propriétaire d'un compartiment</title>
    <para>
     Cliquez sur une ligne de compartiment dans le tableau, puis sélectionnez <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau.
    </para>
    <para>
     Mettez à jour le propriétaire du compartiment et confirmez en cliquant sur le bouton <guimenu>Mise à jour</guimenu>.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-delete">
    <title>Suppression d'un compartiment</title>
    <para>
     Pour supprimer un compartiment OGW, cliquez sur sa ligne dans le tableau et sélectionnez <guimenu>Supprimer</guimenu> en haut à gauche de l'en-tête du tableau. Cochez la case <guimenu>Oui</guimenu> et confirmez avec le bouton <guimenu>Delete bucket</guimenu> (Supprimer le compartiment).
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-initial-configuration">
  <title>Configuration manuelle</title>

  <para>
   Cette section présente des informations avancées pour les utilisateurs qui préfèrent configurer manuellement les paramètres du tableau de bord via la ligne de commande.
  </para>

  <sect2 xml:id="dashboard-ssl">
   <title>Prise en charge TLS/SSL</title>
   <para>
    Par défaut, toutes les connexions HTTP vers le tableau de bord sont sécurisées par SSL/TLS. Une connexion sécurisée nécessite un certificat SSL. Vous pouvez soit utiliser un certificat auto-signé, soit générer un certificat à faire signer par une autorité de certification bien connue.
   </para>
   <tip>
    <title>désactivation de SSL</title>
    <para>
     Vous pouvez souhaiter désactiver le support SSL pour une raison spécifique, par exemple, si le tableau de bord s'exécute derrière un proxy qui ne prend pas en charge SSL.
    </para>
    <para>
     Soyez toutefois prudent lorsque vous désactivez SSL, car <emphasis role="bold">les noms d'utilisateur et les mots de passe</emphasis> seront envoyés au tableau de bord <emphasis role="bold">non chiffrés</emphasis>.
    </para>
    <para>
     Pour désactiver SSL, exécutez la commande suivante :
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/ssl false
</screen>
   </tip>
   <tip>
    <title>redémarrage des processus Ceph Manager</title>
    <para>
     Vous devez redémarrer manuellement les processus Ceph Manager après avoir modifié le certificat et la clé SSL. Pour ce faire, vous pouvez exécuter la commande
    </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph mgr fail<replaceable>ACTIVE-MANAGER-NAME</replaceable></screen>
    <para>
     ou désactiver, puis réactiver le module de tableau de bord, ce qui déclenche une régénération du gestionnaire :
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr module disable dashboard
<prompt>cephadm@adm &gt; </prompt>ceph mgr module enable dashboard
</screen>
   </tip>
   <sect3 xml:id="self-sign-certificates">
    <title>Certificats auto-signés</title>
    <para>
     La création d'un certificat auto-signé pour une communication sécurisée est simple. Elle vous permet d'exécuter rapidement le tableau de bord.
    </para>
    <note>
     <title>exigence des navigateurs Web</title>
     <para>
      En cas de certificat auto-signé, la plupart des navigateurs Web exigent une confirmation explicite avant d'établir une connexion sécurisée au tableau de bord.
     </para>
    </note>
    <para>
     Pour générer et installer un certificat auto-signé, utilisez la commande intégrée suivante :
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard create-self-signed-cert
</screen>
   </sect3>
   <sect3 xml:id="cert-sign-CA">
    <title>Certificats signés par une autorité de certification</title>
    <para>
     Pour sécuriser correctement la connexion au tableau de bord et pour éviter l'exigence de confirmation explicite imposée par les navigateurs Web en cas de certificat auto-signé, nous vous recommandons d'utiliser un certificat signé par une autorité de certification.
    </para>
    <para>
     Vous pouvez générer une paire de clés de certificat avec une commande similaire à la suivante :
    </para>
<screen>
<prompt>root # </prompt>openssl req -new -nodes -x509 \
  -subj "/O=IT/CN=ceph-mgr-dashboard" -days 3650 \
  -keyout dashboard.key -out dashboard.crt -extensions v3_ca
</screen>
    <para>
     La commande ci-dessus produit les fichiers <filename>dashboard.key</filename> et <filename>dashboard.crt</filename>. Une fois le fichier <filename>dashboard.crt</filename> signé par une autorité de certification, activez-le pour toutes les instances Ceph Manager en exécutant les commandes suivantes :
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/key -i dashboard.key
</screen>
    <tip>
     <title>des certificats différents pour chaque instance du gestionnaire</title>
     <para>
      Si vous avez besoin de certificats différents pour chaque instance Ceph Manager, modifiez les commandes et incluez le nom de l'instance comme suit. Remplacez <replaceable>NAME</replaceable> par le nom de l'instance Ceph Manager (généralement le nom d'hôte associé) :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/key -i dashboard.key
</screen>
    </tip>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-hostname-port">
   <title>Nom d'hôte et numéro de port</title>
   <para>
    L'application Web Ceph Dashboard se lie à une adresse TCP/IP et à un port TCP spécifiques. Par défaut, l'instance Ceph Manager actuellement active qui héberge le tableau de bord se lie au port TCP 8443 (ou 8080 lorsque SSL est désactivé).
   </para>
   <para>
    L'application Web de tableau de bord se lie par défaut à « :: », ce qui correspond à toutes les adresses IPv4 et IPv6 disponibles. Vous pouvez modifier l'adresse IP et le numéro de port de l'application Web afin qu'ils s'appliquent à toutes les instances Ceph Manager en utilisant les commandes suivantes :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   <tip>
    <title>configuration séparée des instances Ceph Manager</title>
    <para>
     Étant donné que chaque daemon <systemitem class="daemon">ceph-mgr</systemitem> héberge sa propre instance du tableau de bord, vous devrez peut-être les configurer séparément. Pour changer l'adresse IP et le numéro de port pour une instance spécifique du gestionnaire, utilisez les commandes suivantes (remplacez <replaceable>NAME</replaceable> par l'ID de l'instance <systemitem class="daemon">ceph-mgr</systemitem>) :
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   </tip>
   <tip>
    <title>liste des noeuds d'extrémité configurés</title>
    <para>
     La commande <command>ceph mgr services</command> affiche tous les noeuds d'extrémité actuellement configurés. Recherchez la clé « dashboard » pour obtenir l'URL d'accès au tableau de bord.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-username-password">
   <title>Nom d'utilisateur et mot de passe</title>
   <para>
    Si vous ne souhaitez pas utiliser le compte d'administrateur par défaut, créez un compte utilisateur différent et associez-le à au moins un rôle. Nous fournissons un ensemble de rôles système prédéfinis que vous pouvez utiliser. Pour plus d'informations, reportez-vous à la <xref linkend="dashboard-user-roles"/>.
   </para>
   <para>
    Pour créer un utilisateur avec des privilèges d'administrateur, utilisez la commande suivante :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USER_NAME</replaceable> <replaceable>PASSWORD</replaceable> administrator
</screen>
  </sect2>

  <sect2 xml:id="dashboard-ogw-enabling">
   <title>Activation de l'interface client de gestion d'Object Gateway</title>
   <para>
    Pour utiliser la fonctionnalité de gestion d'Object Gateway du tableau de bord, vous devez fournir les informations d'identification de connexion d'un utilisateur avec le drapeau « system » activé :
   </para>
   <procedure>
    <step>
     <para>
      Si vous n'avez pas d'utilisateur avec le drapeau « system », créez-en un :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user create --uid=<replaceable>USER_ID</replaceable> --display-name=<replaceable>DISPLAY_NAME</replaceable> --system
</screen>
     <para>
      Prenez note des clés « access_key » et « secret_key » dans la sortie de la commande.
     </para>
    </step>
    <step>
     <para>
      Vous pouvez également obtenir les informations d'identification d'un utilisateur existant à l'aide de la commande <command>radosgw-admin</command> :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user info --uid=<replaceable>USER_ID</replaceable>
</screen>
    </step>
    <step>
     <para>
      Fournissez les informations d'identification reçues au tableau de bord :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-access-key <replaceable>ACCESS_KEY</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-secret-key <replaceable>SECRET_KEY</replaceable>
</screen>
    </step>
   </procedure>
   <para>
    Plusieurs points sont à prendre en considération :
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Le nom de l'hôte et le numéro de port d'Object Gateway sont déterminés automatiquement.
     </para>
    </listitem>
    <listitem>
     <para>
      Si plusieurs zones sont utilisées, le système détermine automatiquement l'hôte dans le groupe de zones maître et la zone maître. Cela est suffisant pour la plupart des configurations, mais dans certaines circonstances, vous pouvez souhaiter définir le nom de l'hôte et le port manuellement :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-host <replaceable>HOST</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-port <replaceable>PORT</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Voici d'autres paramètres dont vous pouvez avoir besoin :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-scheme <replaceable>SCHEME</replaceable>  # http or https
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-admin-resource <replaceable>ADMIN_RESOURCE</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-user-id <replaceable>USER_ID</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Si vous utilisez un certificat auto-signé (<xref linkend="dashboard-ssl"/>) dans votre configuration Object Gateway, désactivez la vérification du certificat dans le tableau de bord pour éviter les refus de connexions dus à des certificats signés par une autorité de certification inconnue ou ne correspondant pas au nom d'hôte :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-ssl-verify False
</screen>
    </listitem>
    <listitem>
     <para>
      Si Object Gateway prend trop de temps pour traiter les requêtes et que le tableau de bord s'exécute selon des timeouts, la valeur de ces derniers peut être ajustée (elle est par défaut de 45 secondes) :
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rest-requests-timeout <replaceable>SECONDS</replaceable>
</screen>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-sso">
   <title>Activation de Single Sign-on</title>
   <para>
    <emphasis>Single Sign-on</emphasis> (SSO) est une méthode de contrôle d'accès qui permet aux utilisateurs de se connecter avec un seul ID et mot de passe à plusieurs applications simultanément.
   </para>
   <para>
    Ceph Dashboard prend en charge l'authentification externe des utilisateurs via le protocole SAML 2.0. Étant donné que l'<emphasis>autorisation</emphasis> passe toujours par le tableau de bord, vous devez d'abord créer des comptes utilisateur et les associer aux rôles souhaités. En revanche, le processus d'<emphasis>authentification</emphasis> peut être exécuté par un <emphasis>fournisseur d'identité</emphasis> (IdP) existant.
   </para>
   <para>
    Pour configurer Single Sign-on, utilisez la commande suivante :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso setup saml2 <replaceable>CEPH_DASHBOARD_BASE_URL</replaceable> \
 <replaceable>IDP_METADATA</replaceable> <replaceable>IDP_USERNAME_ATTRIBUTE</replaceable> \
 <replaceable>IDP_ENTITY_ID</replaceable> <replaceable>SP_X_509_CERT</replaceable> \
 <replaceable>SP_PRIVATE_KEY</replaceable>
</screen>
   <para>
    Paramètres :
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>CEPH_DASHBOARD_BASE_URL</replaceable></term>
     <listitem>
      <para>
       URL de base à laquelle Ceph Dashboard est accessible (par exemple, « https://cephdashboard.local »).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_METADATA</replaceable></term>
     <listitem>
      <para>
       URL, chemin ou contenu du fichier XML de métadonnées IdP (par exemple, « https://myidp/metadata »).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_USERNAME_ATTRIBUTE</replaceable></term>
     <listitem>
      <para>
       Facultatif. Attribut qui sera utilisé pour obtenir le nom d'utilisateur à partir de la réponse d'authentification. Sa valeur par défaut est « uid ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_ENTITY_ID</replaceable></term>
     <listitem>
      <para>
       Facultatif. Utilisez ce paramètre lorsqu'il existe plusieurs ID d'entité pour les métadonnées IdP.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>SP_X_509_CERT</replaceable> / <replaceable>SP_PRIVATE_KEY</replaceable></term>
     <listitem>
      <para>
       Facultatif. Chemin du fichier ou contenu du certificat qui sera utilisé par Ceph Dashboard (Fournisseur de service) pour la signature et le codage.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>requêtes SAML</title>
    <para>
     La valeur de l'émetteur des requêtes SAML suivra ce modèle :
    </para>
<screen>
<replaceable>CEPH_DASHBOARD_BASE_URL</replaceable>/auth/saml2/metadata
</screen>
   </note>
   <para>
    Pour afficher la configuration SAML 2.0 actuelle, exécutez :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso show saml2
</screen>
   <para>
    Pour désactiver Single Sign-on, exécutez :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso disable
</screen>
   <para>
    Pour vérifier si SSO est activé, exécutez :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso status
</screen>
   <para>
    Pour activer SSO, exécutez :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso enable saml2
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-roles">
  <title>Gestion des utilisateurs et des rôles via la ligne de commande</title>

  <para>
   Cette section explique comment gérer les comptes utilisateur employés par Ceph Dashboard. Elle vous aide à créer ou modifier des comptes utilisateur, ainsi qu'à définir des rôles et autorisations appropriés pour les utilisateurs.
  </para>

  <sect2 xml:id="dahsboard-user-accounts">
   <title>Comptes utilisateur</title>
   <para>
    Ceph Dashboard prend en charge la gestion de plusieurs comptes utilisateur. Chaque compte utilisateur se compose d'un nom d'utilisateur, d'un mot de passe (stocké sous forme codée à l'aide de <literal>bcrypt</literal>), d'un nom facultatif et d'une adresse électronique facultative.
   </para>
   <para>
    Les comptes utilisateur sont stockés dans la base de données de configuration de Ceph Monitor et sont partagés globalement par toutes les instances Ceph Manager.
   </para>
   <para>
    Utilisez les commandes suivantes pour gérer les comptes utilisateur :
   </para>
   <variablelist>
    <varlistentry>
     <term>Afficher les utilisateurs existants :</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Créer un utilisateur :</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Supprimer un utilisateur :</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Changer le mot de passe d'un utilisateur :</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Changer le nom et l'adresse électronique d'un utilisateur :</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-permissions">
   <title>Rôles et autorisations des utilisateurs</title>
   <para>
    Cette section décrit les étendues de sécurité que vous pouvez assigner à un rôle utilisateur, comment gérer les rôles des utilisateurs et comment les affecter aux comptes utilisateur.
   </para>
   <sect3>
    <title>Étendues de sécurité</title>
    <para>
     Les comptes utilisateur sont associés à un ensemble de rôles qui définissent les parties du tableau de bord auxquelles l'utilisateur peut accéder. Les parties du tableau de bord sont regroupées au sein d'une étendue de <emphasis>sécurité</emphasis>. Les étendues de sécurité sont prédéfinies et statiques. Les périmètres de sécurité suivants sont actuellement disponibles :
    </para>
    <variablelist>
     <varlistentry>
      <term>hosts</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à l'entrée de menu <guimenu>Hôtes</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>config-opt</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion des options de configuration Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion des réserves.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>osd</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion Ceph OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>monitor</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion Ceph Monitor.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-image</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion des images de périphérique de bloc RADOS (RBD).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-mirroring</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion de la mise en miroir de périphériques de bloc RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>iscsi</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion iSCSI.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion Object Gateway.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion CephFS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>manager</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion Ceph Manager.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>log</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées à la gestion des journaux Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>grafana</term>
      <listitem>
       <para>
        Inclut toutes les fonctionnalités liées au proxy Grafana.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>dashboard-settings</term>
      <listitem>
       <para>
        Permet de modifier les paramètres du tableau de bord.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3>
    <title>Rôles utilisateur</title>
    <para>
     Un <emphasis>rôle</emphasis> spécifie un ensemble d'assignations entre une <emphasis>étendue de sécurité</emphasis> et un ensemble d'<emphasis>autorisations</emphasis>. Il existe quatre types d'autorisations : « read » (lire), « create » (créer), « update » (mettre à jour) et « delete » (supprimer).
    </para>
    <para>
     L'exemple suivant spécifie un rôle pour lequel un utilisateur dispose des autorisation de lecture et de création concernant les fonctionnalités liées à la gestion des réserves, et possède toutes les autorisations pour les fonctionnalités liées à la gestion des images RBD :
    </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
    <para>
     Le tableau de bord fournit déjà un ensemble de rôles prédéfinis que nous appelons les <emphasis>rôles système</emphasis>. Vous pouvez les utiliser instantanément après une nouvelle installation de Ceph Dashboard :
    </para>
    <variablelist>
     <varlistentry>
      <term>administrateur</term>
      <listitem>
       <para>
        Fournit des autorisations complètes pour toutes les étendues de sécurité.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>read-only</term>
      <listitem>
       <para>
        Fournit une autorisation de lecture pour toutes les étendues de sécurité, à l'exception des paramètres du tableau de bord.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>block-manager</term>
      <listitem>
       <para>
        Fournit des autorisations complètes pour les étendues « rbd-image », « rbd-mirroring » et « iscsi ».
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw-manager</term>
      <listitem>
       <para>
        Fournit des autorisations complètes pour l'étendue « rgw ».
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cluster-manager</term>
      <listitem>
       <para>
        Fournit des autorisations complètes pour les étendues « hosts », « osd », « monitor », « manager » et « config-opt ».
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool-manager</term>
      <listitem>
       <para>
        Fournit des autorisations complètes pour l'étendue « pool ».
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs-manager</term>
      <listitem>
       <para>
        Fournit des autorisations complètes pour l'étendue « cephfs ».
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <sect4>
     <title>Gestion des rôles personnalisés</title>
     <para>
      Vous pouvez créer des rôles utilisateur à l'aide des commandes suivantes :
     </para>
     <variablelist>
      <varlistentry>
       <term>Créer un rôle :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Supprimer un rôle :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Ajouter des autorisations d'étendue à un rôle :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Supprimer des autorisations d'étendue d'un rôle :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
    </sect4>
    <sect4>
     <title>Assignation de rôles à des comptes utilisateur</title>
     <para>
      Utilisez les commandes suivantes pour assigner des rôles aux utilisateurs :
     </para>
     <variablelist>
      <varlistentry>
       <term>Définir des rôles utilisateur :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Ajouter des rôles supplémentaires à un utilisateur :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Supprimer des rôles d'un utilisateur :</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>purge des rôles personnalisés</title>
      <para>
       Si vous créez des rôles utilisateur personnalisés et avez l'intention de supprimer ultérieurement la grappe Ceph à l'aide de l'exécuteur <command>ceph.purge</command>, vous devez d'abord purger les rôles personnalisés. Pour plus de détails, reportez-vous à la <xref linkend="deepsea-ceph-purge"/>.
      </para>
     </tip>
    </sect4>
    <sect4>
     <title>Exemple : création d'un utilisateur et d'un rôle personnalisé</title>
     <para>
      Cette section illustre une procédure de création d'un compte utilisateur pouvant gérer les images RBD, afficher et créer des réserves Ceph, et accéder en lecture seule à toutes les autres étendues.
     </para>
     <procedure>
      <step>
       <para>
        Créez un utilisateur nommé « tux » :
       </para>
<screen>
 <prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
      </step>
      <step>
       <para>
        Créez un rôle et spécifiez les autorisations d'étendue :
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
      </step>
      <step>
       <para>
        Associez les rôles à l'utilisateur « tux » :
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
      </step>
     </procedure>
    </sect4>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-proxy">
   <title>Proxys inverses</title>
   <para>
    Si vous accédez au tableau de bord via une configuration de proxy inverse, vous devrez peut-être le desservir sous un préfixe d'URL. Pour que le tableau de bord utilise des hyperliens qui incluent votre préfixe, vous pouvez définir le paramètre <option>url_prefix</option> :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
</screen>
   <para>
    Ensuite, vous pouvez au tableau de bord à l'adresse <literal>http://<replaceable>NOM_HÔTE</replaceable>:<replaceable>NUMÉRO_PORT</replaceable>/<replaceable>PRÉFIXE_URL</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-auditing">
   <title>Audit</title>
   <para>
    L'API REST de Ceph Dashboard peut consigner les requêtes PUT, POST et DELETE dans le journal d'audit Ceph. La consignation est désactivée par défaut, mais vous pouvez l'activer avec la commande suivante :
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>
   <para>
    Si elle est activée, les paramètres suivants sont consignés pour chaque requête :
   </para>
   <variablelist>
    <varlistentry>
     <term>from</term>
     <listitem>
      <para>
       Origine de la requête, par exemple « https://[::1]:44410 ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>path</term>
     <listitem>
      <para>
       Chemin de l'API REST, par exemple « /api/auth ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>method</term>
     <listitem>
      <para>
       « PUT », « POST » ou « DELETE ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user</term>
     <listitem>
      <para>
       Nom de l'utilisateur (ou « Aucun »).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Un exemple d'entrée de journal ressemble à ceci :
   </para>
<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>
   <tip>
    <title>désactivation de la consignation de la charge utile de requête</title>
    <para>
     La consignation de la charge utile de requête (la liste des arguments et leurs valeurs) est activée par défaut. Vous pouvez la désactiver comme suit :
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
   </tip>
  </sect2>
 </sect1>
</chapter>
