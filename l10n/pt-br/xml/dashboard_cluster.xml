<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_cluster.xml" version="5.0" xml:id="dashboard-cluster">
 <title>Ver detalhes internos do cluster</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sim</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  O item de menu <guimenu>Cluster</guimenu> permite ver informações detalhadas sobre hosts de cluster do Ceph, inventário, Ceph Monitors, serviços, OSDs, configuração, Mapa CRUSH, Ceph Manager, registros e arquivos de monitoramento.
 </para>
 <sect1 xml:id="dashboard-cluster-hosts">
  <title>Visualizando nós do cluster</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Hosts</guimenu></menuchoice> para ver uma lista de nós do cluster.
  </para>

  <figure>
   <title>Hosts</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_hosts.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_hosts.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Clique na seta suspensa ao lado do nome de um nó na coluna <guimenu>Nome de host</guimenu> para ver os detalhes do desempenho do nó.
  </para>

  <para>
   A coluna <guimenu>Serviços</guimenu> lista todos os daemons que estão em execução em cada nó relacionado. Clique no nome de um daemon para ver sua configuração detalhada.
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-inventory">
  <title>Acessando o inventário do cluster</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Inventário</guimenu></menuchoice> para ver uma lista de dispositivos. A lista inclui o caminho, o tipo, a disponibilidade, o fornecedor, o modelo, o tamanho e os OSDs do dispositivo.
  </para>

  <para>
   Clique para selecionar o nome de um nó na coluna <guimenu>Nome de host</guimenu>. Quando selecionado, clique em <guimenu>Identificar</guimenu> para identificar o dispositivo no qual o host está sendo executado. Esse procedimento instrui o dispositivo a piscar os LEDs. Selecione a duração dessa ação entre 1, 2, 5, 10 ou 15 minutos. Clique em <guimenu>Executar</guimenu>.
  </para>

  <figure>
   <title>Serviços</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_inventory.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_inventory.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-monitors">
  <title>Visualizando Ceph Monitors</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Monitores</guimenu></menuchoice> para ver uma lista de nós do cluster com monitores do Ceph em execução. O painel de conteúdo é dividido em duas telas: <literal>Status</literal> e <literal>No Quorum</literal> ou <literal>Não está no Quorum</literal>.
  </para>

  <para>
   A tabela <guimenu>Status</guimenu> mostra as estatísticas gerais dos Ceph Monitors em execução, incluindo as seguintes:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     ID do cluster
    </para>
   </listitem>
   <listitem>
    <para>
     monmap modificado
    </para>
   </listitem>
   <listitem>
    <para>
     época de monmap
    </para>
   </listitem>
   <listitem>
    <para>
     quorum con
    </para>
   </listitem>
   <listitem>
    <para>
     quorum mon
    </para>
   </listitem>
   <listitem>
    <para>
     con obrigatório
    </para>
   </listitem>
   <listitem>
    <para>
     mon obrigatório
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Os painéis <literal>No Quorum</literal> e <literal>Não está no Quorum</literal> incluem o nome, o número de classificação, o endereço IP público e o número de sessões abertas de cada monitor.
  </para>

  <para>
   Clique no nome de um nó na coluna <guimenu>Nome</guimenu> para ver a configuração do Ceph Monitor relacionado.
  </para>

  <figure>
   <title>Ceph Monitors</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_mons.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_mons.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-services">
  <title>Exibindo serviços</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Serviços</guimenu></menuchoice> para ver os detalhes de cada um dos serviços disponíveis: <literal>crash</literal>, Ceph Manager e Ceph Monitors. A lista inclui o nome da imagem do container, o ID da imagem do container, o status do elemento que está em execução, o tamanho e a data da última atualização.
  </para>

  <para>
   Clique na seta suspensa ao lado do nome de um serviço na coluna <guimenu>Serviço</guimenu> para ver os detalhes do daemon. A lista de detalhes inclui nome de host, tipo de daemon, ID do daemon, ID do container, nome da imagem do container, ID da imagem do container, número da versão, status e data da última atualização.
  </para>

  <figure>
   <title>Serviços</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_services.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_services.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-osds">
  <title>Exibindo Ceph OSDs</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>OSDs</guimenu></menuchoice> para ver uma lista de nós com daemons OSD em execução. A lista inclui nome, ID, status, classe do dispositivo, número de grupos de posicionamento, tamanho, uso, cronograma de leituras/gravações e taxa de operações de leitura/gravação por segundo de cada nó.
  </para>

  <figure>
   <title>Ceph OSDs</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Selecione <guimenu>Flags</guimenu> no menu suspenso <guimenu>Configuração de todo o cluster</guimenu> no cabeçalho da tabela para abrir uma janela popup. Ela mostra uma lista de flags que se aplicam a todo o cluster. É possível ativar ou desativar flags individuais e clicar em <guimenu>Enviar</guimenu> para confirmar.
  </para>

  <figure>
   <title>Flags OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Selecione <guimenu>Prioridade de Recuperação</guimenu> no menu suspenso <guimenu>Configuração de todo o cluster</guimenu> no cabeçalho da tabela para abrir uma janela popup. Ela mostra uma lista de prioridades de recuperação de OSD que se aplicam a todo o cluster. É possível ativar o perfil de prioridade preferencial e ajustar os valores individuais a seguir. Clique em <guimenu>Enviar</guimenu> para confirmar.
  </para>

  <figure>
   <title>Prioridade de recuperação de OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Clique na seta suspensa ao lado do nome de um nó na coluna <guimenu>Host</guimenu> para ver uma tabela estendida com os detalhes das configurações e do desempenho do dispositivo. Ao navegar pelas diversas guias, você pode ver listas de <guimenu>Atributos</guimenu>, <guimenu>Metadados</guimenu>, <guimenu>Saúde do dispositivo</guimenu>, <guimenu>Contador de desempenho</guimenu>, um <guimenu>Histograma</guimenu> gráfico das leituras e gravações e <guimenu>Detalhes de Desempenho</guimenu>.
  </para>

  <figure>
   <title>Detalhes do OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osd_details.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osd_details.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <tip>
   <title>Executando tarefas específicas nos OSDs</title>
   <para>
    Depois que você clicar no nome de um nó OSD, a linha da tabela será realçada. Isso significa que agora você pode executar uma tarefa no nó. É possível executar qualquer uma das seguintes ações: <guimenu>Editar</guimenu>, <guimenu>Criar</guimenu>, <guimenu>Remoção</guimenu>, <guimenu>Remoção Profunda</guimenu>, <guimenu>Reponderar</guimenu>, <guimenu>Marcar como Saída</guimenu>, <guimenu>Marcar como Entrada</guimenu>, <guimenu>Marcar como Inativo</guimenu>, <guimenu>Marcar como Perdido</guimenu>, <guimenu>Purgar</guimenu>, <guimenu>Destruir</guimenu> ou <guimenu>Excluir</guimenu>.
   </para>
   <para>
    Clique na seta para baixo na parte superior esquerda do cabeçalho da tabela ao lado do botão <guimenu>Criar</guimenu> e selecione a tarefa que deseja executar.
   </para>
  </tip>

  <sect2 xml:id="dashboard-cluster-osds-add">
   <title>Adicionando OSDs</title>
   <para>
    Para adicionar novos OSDs, siga estas etapas:
   </para>
   <procedure>
    <step>
     <para>
      Verifique se alguns nós do cluster têm dispositivos de armazenamento com status <literal>disponível</literal>. Em seguida, clique na seta para baixo na parte superior esquerda do cabeçalho da tabela e selecione <guimenu>Criar</guimenu>. Isso abre a janela <guimenu>Criar OSDs</guimenu>.
     </para>
     <figure>
      <title>Criar OSDs</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Para adicionar dispositivos de armazenamento principais aos OSDs, clique em <guimenu>Adicionar</guimenu>. Antes de adicionar dispositivos de armazenamento, você precisa especificar os critérios de filtragem na parte superior direita da tabela <guimenu>Dispositivos principais</guimenu>, por exemplo <guimenu>Tipo</guimenu> <guimenu>hdd</guimenu>. Confirme com <guimenu>Add</guimenu> (Adicionar).
     </para>
     <figure>
      <title>Adicionando dispositivos principais</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Se preferir, na janela <guimenu>Criar OSDs</guimenu> atualizada, adicione dispositivos WAL e BD compartilhados ou habilite a criptografia de dispositivo.
     </para>
     <figure>
      <title>Criar OSDs com dispositivos principais adicionados</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_created.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_created.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Clique em <guimenu>Visualização</guimenu> para ver a especificação DriveGroups dos dispositivos adicionados anteriormente. Clique em <guimenu>Create</guimenu> (Criar) para confirmar.
     </para>
     <figure>
      <title/>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_preview.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_preview.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Novos dispositivos serão adicionados à lista de OSDs.
     </para>
     <figure>
      <title>OSDs recém-adicionados</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_added.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_added.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <note>
      <para>
       Não há visualização do andamento do processo de criação de OSDs. Leva um tempo para eles serem realmente criados. Os OSDs aparecerão na lista quando forem implantados. Para ver os registros e verificar o status da implantação, clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Registros</guimenu></menuchoice>.
      </para>
     </note>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster-config">
  <title>Visualizando a configuração do cluster</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Configuração</guimenu></menuchoice> para ver uma lista completa de opções de configuração de cluster do Ceph. A lista contém o nome da opção, sua descrição resumida e seus valores atuais e padrão e indica se a opção é editável.
  </para>

  <figure>
   <title>Configuração do cluster</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_cluster_config.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_cluster_config.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Clique na seta suspensa ao lado de uma opção de configuração na coluna <guimenu>Nome</guimenu> para ver uma tabela estendida com informações detalhadas sobre a opção, como tipo de valor, valores mínimo e máximo permitidos, se é possível atualizá-la em tempo de execução etc.
  </para>

  <para>
   Após realçar uma opção específica, você poderá editar o(s) valor(s) dela clicando no botão <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela. Clique em <guimenu>Salvar</guimenu> para confirmar as mudanças.
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-crushmap">
  <title>Vendo o mapa CRUSH do </title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Mapa CRUSH</guimenu></menuchoice> para ver um Mapa CRUSH do cluster. Para obter mais informações gerais sobre Mapas CRUSH, consulte a <xref linkend="op-crush"/>.
  </para>

  <para>
   Clique em cada raiz, nó ou OSD para ver informações mais detalhadas, como peso do CRUSH, profundidade na árvore de mapa, classe de dispositivo do OSD e muitos mais.
  </para>

  <figure>
   <title>Mapa CRUSH</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_crushmap.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_crushmap.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-mgr-plugins">
  <title>Visualizando módulos do gerenciador</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Módulos do gerenciador</guimenu></menuchoice> para ver uma lista dos módulos disponíveis do Ceph Manager. Cada linha consiste no nome do módulo e nas informações que indicam se ele está ou não habilitado no momento.
  </para>

  <figure>
   <title>Módulos do gerenciador</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_mgr_modules.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_mgr_modules.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Clique na seta suspensa ao lado de um módulo na coluna <guimenu>Nome</guimenu> para ver uma tabela estendida com as configurações detalhadas na tabela <guimenu>Detalhes</guimenu> abaixo. Para editá-las, clique no botão <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela. Clique em <guimenu>Atualizar</guimenu> para confirmar as mudanças.
  </para>

  <para>
   Clique na seta suspensa ao lado do botão <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela para <guimenu>Habilitar</guimenu> ou <guimenu>Desabilitar</guimenu> um módulo.
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-logs">
  <title>Visualizando registros</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Registros</guimenu></menuchoice> para ver uma lista das entradas de registro recentes do cluster. Cada linha consiste em uma marcação de horário, no tipo de entrada de registro e na própria mensagem registrada.
  </para>

  <para>
   Clique na guia <guimenu>Registros de Auditoria</guimenu> para ver as entradas de registro do subsistema de auditoria. Consulte a <xref linkend="dashboard-auditing"/> para ver os comandos que habilitam ou desabilitam a auditoria.
  </para>

  <figure>
   <title>Registros</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_logs.png" width="80%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_logs.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-monitoring">
  <title>Visualizando o monitoramento</title>

  <para>
   Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Monitoramento</guimenu></menuchoice> para gerenciar e ver detalhes sobre os alertas do Prometheus.
  </para>

  <para>
   Se o Prometheus estiver ativo, você poderá ver informações detalhadas sobre <guimenu>Alertas Ativos</guimenu>, <guimenu>Todos os Alertas</guimenu> ou <guimenu>Silêncios</guimenu> nesse painel de conteúdo.
  </para>

  <note>
   <para>
    Se você não tiver o Prometheus implantado, um banner de informações será exibido com um link para a documentação relevante.
   </para>
  </note>
 </sect1>
</chapter>
