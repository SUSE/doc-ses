<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_user_cmdline.xml" version="5.0" xml:id="dashboard-user-roles">
 <title>Gerenciar usuários e funções na linha de comando</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sim</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Esta seção descreve como gerenciar contas de usuário usadas pelo Ceph Dashboard. Ela ajuda você a criar ou modificar as contas de usuário e definir as funções e permissões de usuário apropriadas.
 </para>
 <sect1 xml:id="dashboard-password-policy">
  <title>Gerenciando a política de senha</title>

  <para>
   Por padrão, o recurso de política de senha está habilitado, incluindo as seguintes verificações:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     A senha tem mais de <emphasis>N</emphasis> caracteres?
    </para>
   </listitem>
   <listitem>
    <para>
     As senhas antiga e nova são iguais?
    </para>
   </listitem>
  </itemizedlist>

  <para>
   O recurso de política de senha pode ser ativado ou desativado completamente:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-enabled <replaceable>true|false</replaceable></screen>

  <para>
   Cada uma destas verificações pode ser ativada ou desativada:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-length-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-oldpwd-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-username-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-exclusion-list-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-complexity-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-sequential-chars-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-repetitive-chars-enabled <replaceable>true|false</replaceable>
</screen>

  <para>
   As seguintes opções tambem estão disponíveis para configurar o comportamento da política de senha.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     O tamanho mínimo da senha (padrão 8):
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-length <replaceable>N</replaceable></screen>
   </listitem>
   <listitem>
    <para>
     A complexidade mínima da senha (padrão 10):
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-complexity <replaceable>N</replaceable></screen>
    <para>
     A complexidade da senha é calculada pela classificação de cada caractere na senha.
    </para>
   </listitem>
   <listitem>
    <para>
     Uma lista de palavras separadas por vírgula que não podem ser usadas em uma senha:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-exclusion-list <replaceable>word</replaceable>[,...]</screen>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="dashboard-user-accounts">
  <title>Gerenciando contas dos usuários</title>

  <para>
   O Ceph Dashboard suporta o gerenciamento de várias contas de usuário. Cada conta de usuário consiste em nome de usuário, senha (armazenada em formato criptografado com <literal>bcrypt</literal>), além de nome e endereço de e-mail opcionais.
  </para>

  <para>
   As contas de usuário são armazenadas no banco de dados de configuração do Ceph Monitor e compartilhadas globalmente com todas as instâncias do Ceph Manager.
  </para>

  <para>
   Use os seguintes comandos para gerenciar as contas de usuário:
  </para>

  <variablelist>
   <varlistentry>
    <term>Mostrar usuários existentes:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Criar um novo usuário:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Apagar um usuário:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Mudar a senha de um usuário:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Modificar nome e e-mail de um usuário:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Desabilitar usuário</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-disable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Habilitar Usuário</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-enable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="dashboard-permissions">
  <title>Funções e permissões de usuário</title>

  <para>
   Esta seção descreve quais escopos de segurança você pode atribuir a uma função de usuário, como gerenciar as funções deo usuário e atribuí-las a contas de usuário.
  </para>

  <sect2 xml:id="dashboard-security-scopes">
   <title>Definindo escopos de segurança</title>
   <para>
    As contas de usuário são associadas a um conjunto de funções que definem quais partes do painel de controle podem ser acessadas pelo usuário. As partes do painel de controle são agrupadas dentro de um escopo de <emphasis>segurança</emphasis>. Os escopos de segurança são predefinidos e estáticos. Atualmente, os seguintes escopos de segurança estão disponíveis:
   </para>
   <variablelist>
    <varlistentry>
     <term>hosts</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados à entrada do menu <guimenu>Hosts</guimenu>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>config-opt</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento das opções de configuração do Ceph.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento de pools.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento do Ceph OSD.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>monitor</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento do Ceph Monitor.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-image</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento de imagens do Dispositivo de Blocos RADOS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-mirroring</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento de espelhamento do Dispositivo de Blocos RADOS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>iscsi</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento do iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento do Gateway de Objetos.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento do CephFS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>manager</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento do Ceph Manager.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>registro</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao gerenciamento de registros do Ceph.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>grafana</term>
     <listitem>
      <para>
       Inclui todos os recursos relacionados ao proxy do Grafana.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>prometheus</term>
     <listitem>
      <para>
       Inclua todos os recursos relacionados ao gerenciamento de alertas do Prometheus.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>dashboard-settings</term>
     <listitem>
      <para>
       Permite mudar as configurações do painel de controle.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-user-roles-security-scope">
   <title>Especificando funções de usuário</title>
   <para>
    Uma <emphasis>função</emphasis> especifica um conjunto de mapeamentos entre um <emphasis>escopo de segurança</emphasis> e um conjunto de <emphasis>permissões</emphasis>. Há quatro tipos de permissões: “read”, “create”, “update” e “delete”.
   </para>
   <para>
    O exemplo a seguir especifica uma função em que um usuário tem permissões de "leitura" e "criação" para recursos relacionados ao gerenciamento de pools e tem permissões completas para recursos relacionados ao gerenciamento de imagens RBD:
   </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
   <para>
    O painel de controle já dispõe de um conjunto de funções predefinidas que chamamos de <emphasis>funções de sistema</emphasis>. Você pode usá-las logo após uma instalação recente do Ceph Dashboard:
   </para>
   <variablelist>
    <varlistentry>
     <term>administrator</term>
     <listitem>
      <para>
       Concede permissões completas para todos os escopos de segurança.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>read-only</term>
     <listitem>
      <para>
       Concede permissão de leitura para todos os escopos de segurança, exceto as configurações do painel de controle.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>block-manager</term>
     <listitem>
      <para>
       Concede permissões completas para os escopos “rbd-image”, “rbd-mirroring” e “iscsi”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw-manager</term>
     <listitem>
      <para>
       Concede permissões completas para o escopo “rgw”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cluster-manager</term>
     <listitem>
      <para>
       Concede permissões completas para os escopos “hosts”, “osd”, “monitor”, “manager” e “config-opt”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool-manager</term>
     <listitem>
      <para>
       Concede permissões completas para o escopo “pool”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs-manager</term>
     <listitem>
      <para>
       Concede permissões completas para o escopo “cephfs”.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="dashboard-managing-custom-roles">
    <title>Gerenciando funções personalizadas</title>
    <para>
     Você pode criar novas funções de usuário executando os seguintes comandos:
    </para>
    <variablelist>
     <varlistentry>
      <term>Criar uma nova função:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Apagar uma função:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Adicionar permissões de escopo a uma função:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Apagar permissões de escopo a uma função:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-assigning-roles-user-accounts">
    <title>Atribuindo funções às contas dos usuários</title>
    <para>
     Use os seguintes comandos para atribuir funções a usuários:
    </para>
    <variablelist>
     <varlistentry>
      <term>Definir funções de usuário:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Adicionar mais funções a um usuário:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Apagar funções de um usuário:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
    <tip>
     <title>Purgando funções personalizadas</title>
     <para>
      Se você cria funções de usuário personalizadas e posteriormente pretende remover o cluster do Ceph com o executor <command>ceph.purge</command>, precisa purgar primeiro as funções personalizadas. Encontre mais detalhes na <xref linkend="ceph-cluster-purge"/>.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="example-create-user-custom-role">
    <title>Exemplo: Criando um usuário e uma função personalizada</title>
    <para>
     Esta seção ilustra um procedimento para criar uma conta de usuário capaz de gerenciar imagens RBD, ver e criar pools do Ceph e obter acesso apenas leitura a qualquer outro escopo.
    </para>
    <procedure>
     <step>
      <para>
       Criar um novo usuário chamado <literal>tux</literal>:
      </para>
<screen>
 <prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
     </step>
     <step>
      <para>
       Criar uma função e especificar permissões de escopo:
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
     </step>
     <step>
      <para>
       Associar as funções ao usuário <literal>tux</literal>:
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-proxy-config">
  <title>Configuração de proxy</title>

  <para>
   Para estabelecer um URL fixo para acessar o Ceph Dashboard, ou se você não deseja permitir conexões diretas com os nós do gerenciador, pode configurar um proxy que encaminhe automaticamente as solicitações recebidas para a instância ativa do <literal>ceph-mgr</literal> no momento.
  </para>

  <sect2 xml:id="dashboard-proxy">
   <title>Acessando o painel de controle com proxies reversos</title>
   <para>
    Se você acessa o painel de controle por meio de uma configuração de proxy reverso, talvez seja necessário usar um prefixo de URL para acessá-lo. Para fazer com que o painel de controle use hiperlinks que incluam seu prefixo, você pode definir a configuração <option>url_prefix</option>:
   </para>
<screen>
  <prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
  </screen>
   <para>
    Em seguida, você pode acessar o painel de controle em <literal>http://<replaceable>HOST_NAME</replaceable>:<replaceable>PORT_NUMBER</replaceable>/<replaceable>URL_PREFIX</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-disable-redirection">
   <title>Desabilitando redirecionamentos</title>
   <para>
    Se o Ceph Dashboard estiver protegido por um proxy de equilíbrio de carga, como HAProxy, desabilite o comportamento de redirecionamento para evitar situações em que os URLs internos (não resolvidos) são publicados no cliente de front end. Use o seguinte comando para fazer com que o painel de controle responda com um erro HTTP (padrão <literal>500</literal>), em vez de redirecionar para o painel de controle ativo:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "error"
</screen>
   <para>
    Para redefinir a configuração para o comportamento de redirecionamento padrão, use o seguinte comando:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "redirect"
</screen>
  </sect2>

  <sect2 xml:id="dashboard-config-error-status">
   <title>Configurando códigos de status de erro</title>
   <para>
    Se o comportamento de redirecionamento estiver desabilitado, você deverá personalizar o código de status HTTP dos painéis de controle de standby. Para fazer isso, execute o seguinte comando:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_error_status_code 503
</screen>
  </sect2>

  <sect2 xml:id="dashboard-haproxy-config">
   <title>Exemplo de configuração do HAProxy</title>
   <para>
    O exemplo de configuração a seguir refere-se à transferência de TLS/SSL por meio do HAProxy.
   </para>
   <note>
    <para>
     A configuração funciona nas seguintes condições: Se o painel de controle falhar, o cliente de front end poderá receber uma resposta de redirecionamento HTTP (<literal>303</literal>) e será redirecionado para um host não resolvido.
    </para>
    <para>
     Isso acontece quando o failover ocorre durante duas verificações de saúde do HAProxy. Nessa situação, o nó do painel de controle que antes estava ativo agora responderá com um código 303 que aponta para o novo nó ativo. Para evitar essa situação, você deve desabilitar o comportamento de redirecionamento nos nós de standby.
    </para>
   </note>
<screen>
  defaults
    log global
    option log-health-checks
    timeout connect 5s
    timeout client 50s
    timeout server 450s

  frontend dashboard_front
    mode http
    bind *:80
    option httplog
    redirect scheme https code 301 if !{ ssl_fc }

  frontend dashboard_front_ssl
    mode tcp
    bind *:443
    option tcplog
    default_backend dashboard_back_ssl

  backend dashboard_back_ssl
    mode tcp
    option httpchk GET /
    http-check expect status 200
    server x <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server y <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server z <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-auditing">
  <title>Fazendo auditoria das solicitações de API</title>

  <para>
   A API REST do Ceph Dashboard pode gravar solicitações PUT, POST e DELETE no registro de auditoria do Ceph. Por padrão, o registro está desabilitado, mas você pode habilitá-lo com o seguinte comando:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>

  <para>
   Se habilitado, os seguintes parâmetros serão registrados por cada solicitação:
  </para>

  <variablelist>
   <varlistentry>
    <term>from</term>
    <listitem>
     <para>
      A origem da solicitação, por exemplo “https://[::1]:44410”.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>path</term>
    <listitem>
     <para>
      O caminho da API REST, por exemplo <filename>/api/auth</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>method</term>
    <listitem>
     <para>
      “PUT”, “POST” ou “DELETE”.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>user</term>
    <listitem>
     <para>
      O nome do usuário (ou “Nenhum”).
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Veja a seguir um exemplo de entrada de registro:
  </para>

<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>

  <tip>
   <title>Desabilitar o registro de payload de solicitação</title>
   <para>
    Por padrão, o registro de payload de solicitação (a lista de argumentos e seus valores) está habilitado. Você pode desabilitá-lo da seguinte forma:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
  </tip>
 </sect1>
 <sect1 xml:id="dashboard-config-nfs-ganesha">
  <title>Configurando o NFS Ganesha no Ceph Dashboard</title>

  <para>
   O Ceph Dashboard pode gerenciar exportações do NFS Ganesha que usam o CephFS ou o Gateway de Objetos como backstore. O painel de controle gerencia os arquivos de configuração do NFS Ganesha armazenados em objetos RADOS no cluster do CephFS. O NFS Ganesha deve armazenar parte da sua configuração no cluster do Ceph.
  </para>

  <para>
   Execute o seguinte comando para configurar o local do objeto de configuração do NFS Ganesha:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>]</screen>

  <para>
   Agora você pode gerenciar as exportações do NFS Ganesha usando o Ceph Dashboard.
  </para>

  <sect2 xml:id="dashboard-multi-config-nfs-ganesha">
   <title>Configurando vários clusters do NFS Ganesha</title>
   <para>
    O Ceph Dashboard suporta o gerenciamento de exportações do NFS Ganesha pertencentes a diferentes clusters do NFS Ganesha. Recomendamos que cada cluster do NFS Ganesha armazene seus objetos de configuração em um pool/namespace RADOS diferente para isolar umas configurações das outras.
   </para>
   <para>
    Use o seguinte comando para especificar os locais da configuração de cada cluster do NFS Ganesha:
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>](,<replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>])*</screen>
   <para>
    O <replaceable>cluster_id</replaceable> é uma string arbitrária que identifica exclusivamente o cluster do NFS Ganesha.
   </para>
   <para>
    Ao configurar o Ceph Dashboard com vários clusters do NFS Ganesha, a IU da Web permite escolher automaticamente a qual cluster uma exportação pertence.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-debug-plugin">
  <title>Plug-ins de depuração</title>

  <para>
   Os plug-ins do Ceph Dashboard estendem a funcionalidade do painel de controle. O plug-in de depuração permite a personalização do comportamento do painel de controle de acordo com o modo de depuração. Ele pode ser habilitado, desabilitado ou verificado com o seguinte comando:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug status
Debug: 'disabled'
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug enable
Debug: 'enabled'
<prompt>cephuser@adm &gt; </prompt>dashboard debug disable
Debug: 'disabled'
</screen>

  <para>
   Por padrão, esse modo está desabilitado. Essa é a configuração recomendada para implantações de produção. Se necessário, o modo de depuração pode ser habilitado sem necessidade de reinicialização.
  </para>
 </sect1>
</chapter>
