<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_ceph_iscsi.xml" version="5.0" xml:id="cha-ceph-iscsi">
 <title>Ceph iSCSI Gateway</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  この章では、iSCSI Gatewayに関連する管理タスクに焦点を当てて説明します。展開手順については、<xref linkend="deploy-cephadm-day2-service-igw"/>を参照してください。
 </para>
 <sect1 xml:id="ceph-iscsi-connect">
  <title><systemitem class="daemon">ceph-iscsi</systemitem>管理対象ターゲット</title>

  <para>
   この章では、Linux、Microsoft Windows、またはVMwareが実行されているクライアントから<systemitem class="daemon">ceph-iscsi</systemitem>管理対象ターゲットに接続する方法について説明します。
  </para>

  <sect2 xml:id="ceph-iscsi-connect-linux">
   <title><systemitem>open-iscsi</systemitem>に接続</title>
   <para>
    <systemitem class="daemon">ceph-iscsi</systemitem>を利用するiSCSIターゲットに<systemitem>open-iscsi</systemitem>で接続するのは、2段階のプロセスです。まず、イニシエータがゲートウェイホスト上で利用可能なiSCSIターゲットを検出し、ログインして、利用可能なLU (論理ユニット)をマップする必要があります。
   </para>
   <para>
    どちらの手順でも<systemitem>open-iscsi</systemitem>デーモンが実行されている必要があります。<systemitem>open-iscsi</systemitem>デーモンの起動方法はLinux配布パッケージによって異なります。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      SLES (SUSE Linux Enterprise Server)およびRHEL (Red Hat Enterprise Linux)のホストでは、<command>systemctl start iscsid</command> (または、<command>systemctl</command>が利用できない場合は<command>service iscsid start</command>)を実行します。
     </para>
    </listitem>
    <listitem>
     <para>
      DebianおよびUbuntuのホストでは、<command>systemctl start open-iscsi</command> (または<command>service open-iscsi start</command>)を実行します。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    イニシエータホストでSUSE Linux Enterprise Serverが実行されている場合、iSCSIターゲットへの接続方法については、<link xlink:href="https://documentation.suse.com/sles/15-SP2/html/SLES-all/cha-iscsi.html#sec-iscsi-initiator"/>を参照してください。
   </para>
   <para>
    <systemitem>open-iscsi</systemitem>をサポートするその他のLinux配布パッケージでは、次に進んで<systemitem class="daemon">ceph-iscsi</systemitem>ゲートウェイ上でターゲットを検出します(この例では、iscsi1.example.comをポータルアドレスとして使用します。マルチパスアクセスの場合は、iscsi2.example.comでこれらの手順を繰り返します)。
   </para>
<screen><prompt role="root">root # </prompt>iscsiadm -m discovery -t sendtargets -p iscsi1.example.com
192.168.124.104:3260,1 iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol</screen>
   <para>
    続いて、ポータルにログインします。ログインが正常に完了した場合、ポータル上でRBDを利用する論理ユニットは、ただちにシステムSCSIバス上で利用可能になります。
   </para>
<screen><prompt role="root">root # </prompt>iscsiadm -m node -p iscsi1.example.com --login
Logging in to [iface: default, target: iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260] (multiple)
Login to [iface: default, target: iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260] successful.</screen>
   <para>
    他のポータルIPアドレスまたはホストに対して、このプロセスを繰り返します。
   </para>
   <para>
    システムに<systemitem>lsscsi</systemitem>ユーティリティがインストールされている場合は、そのユーティリティを使用して、システムで利用可能なSCSIデバイスを列挙します。
   </para>
<screen>lsscsi
[8:0:0:0]    disk    SUSE     RBD              4.0   /dev/sde
[9:0:0:0]    disk    SUSE     RBD              4.0   /dev/sdf</screen>
   <para>
    マルチパス設定(接続されている2台のiSCSIデバイスが1台の同一のLUを表す)では、<systemitem>multipath</systemitem>ユーティリティでマルチパスデバイスの状態を調べることもできます。
   </para>
<screen><prompt role="root">root # </prompt>multipath -ll
360014050cf9dcfcb2603933ac3298dca dm-9 SUSE,RBD
size=49G features='0' hwhandler='0' wp=rw
|-+- policy='service-time 0' prio=1 status=active
| `- 8:0:0:0 sde 8:64 active ready running
`-+- policy='service-time 0' prio=1 status=enabled
`- 9:0:0:0 sdf 8:80 active ready running</screen>
   <para>
    これで、このマルチパスデバイスをBlock Deviceと同じように使用できます。たとえば、デバイスをLinux LVM (論理ボリューム管理)の物理ボリュームとして使用したり、単にデバイス上にファイルシステムを作成したりできます。次の例は、新しく接続されたマルチパスiSCSIボリューム上にXFSファイルシステムを作成する方法を示しています。
   </para>
<screen><prompt role="root">root # </prompt>mkfs -t xfs /dev/mapper/360014050cf9dcfcb2603933ac3298dca
log stripe unit (4194304 bytes) is too large (maximum is 256KiB)
log stripe unit adjusted to 32KiB
meta-data=/dev/mapper/360014050cf9dcfcb2603933ac3298dca isize=256    agcount=17, agsize=799744 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=12800000, imaxpct=25
         =                       sunit=1024   swidth=1024 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=6256, version=2
         =                       sectsz=512   sunit=8 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0</screen>
   <para>
    XFSは非クラスタ化ファイルシステムであるため、特定の時点で1つのiSCSIイニシエータノードにのみマウントできます。
   </para>
   <para>
    特定のターゲットに関連付けられているiSCSI LUの使用を中止したい場合は、次のコマンドを実行します。
   </para>
<screen><prompt role="root">root # </prompt>iscsiadm -m node -p iscsi1.example.com --logout
Logging out of session [sid: 18, iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260]
Logout of [sid: 18, target: iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260] successful.</screen>
   <para>
    ディスカバリおよびログインの場合と同様に、ポータルのすべてのIPアドレスまたはホスト名に対してログアウト手順を繰り返す必要があります。
   </para>
   <sect3 xml:id="ceph-iscsi-connect-linux-multipath">
    <title>マルチパスの設定</title>
    <para>
     マルチパス設定はクライアントまたはイニシエータ上で管理され、<systemitem class="daemon">ceph-iscsi</systemitem>設定とは無関係です。ブロックストレージを使用する前にストラテジーを選択します。<filename>/etc/multipath.conf</filename>を編集した後、次のコマンドを使用して<systemitem>multipathd</systemitem>を再起動します。
    </para>
<screen><prompt role="root">root # </prompt>systemctl restart multipathd</screen>
    <para>
     フレンドリ名を使用するアクティブ-パッシブ設定では、次の記述を設定ファイルに追加します。
    </para>
<screen>defaults {
  user_friendly_names yes
}</screen>
    <para>
     追加先のファイルは<filename>/etc/multipath.conf</filename>です。ターゲットに正常に接続したら、次のコマンドを実行します。
    </para>
<screen><prompt role="root">root # </prompt>multipath -ll
mpathd (36001405dbb561b2b5e439f0aed2f8e1e) dm-0 SUSE,RBD
size=2.0G features='0' hwhandler='0' wp=rw
|-+- policy='service-time 0' prio=1 status=active
| `- 2:0:0:3 sdl 8:176 active ready running
|-+- policy='service-time 0' prio=1 status=enabled
| `- 3:0:0:3 sdj 8:144 active ready running
`-+- policy='service-time 0' prio=1 status=enabled
  `- 4:0:0:3 sdk 8:160 active ready running</screen>
    <para>
     各リンクの状態に注意してください。アクティブ-アクティブ設定の場合は、次の記述を設定ファイルに追加します。
    </para>
<screen>defaults {
  user_friendly_names yes
}

devices {
  device {
    vendor "(LIO-ORG|SUSE)"
    product "RBD"
    path_grouping_policy "multibus"
    path_checker "tur"
    features "0"
    hardware_handler "1 alua"
    prio "alua"
    failback "immediate"
    rr_weight "uniform"
    no_path_retry 12
    rr_min_io 100
  }
}</screen>
    <para>
     追加先のファイルは<filename>/etc/multipath.conf</filename>です。<systemitem>multipathd</systemitem>を再起動して、次のコマンドを実行します。
    </para>
<screen><prompt role="root">root # </prompt>multipath -ll
mpathd (36001405dbb561b2b5e439f0aed2f8e1e) dm-3 SUSE,RBD
size=2.0G features='1 queue_if_no_path' hwhandler='1 alua' wp=rw
`-+- policy='service-time 0' prio=50 status=active
  |- 4:0:0:3 sdj 8:144 active ready running
  |- 3:0:0:3 sdk 8:160 active ready running
  `- 2:0:0:3 sdl 8:176 active ready running</screen>
   </sect3>
  </sect2>

  <sect2 xml:id="ceph-iscsi-connect-win">
   <title>Microsoft Windows (Microsoft iSCSIイニシエータ)に接続</title>
   <para>
    Windows 2012サーバからSUSE Enterprise StorageのiSCSIターゲットに接続するには、次の手順に従います。
   </para>
   <procedure>
    <step>
     <para>
      Windowsサーバ マネージャーを開きます。ダッシュボードから、<menuchoice><guimenu>ツール</guimenu><guimenu>iSCSI イニシエータ</guimenu></menuchoice>を選択します。<guimenu>iSCSI イニシエータのプロパティ</guimenu>ダイアログが表示されます。<guimenu>探索</guimenu>タブを選択します。
     </para>
     <figure>
      <title>iSCSIイニシエータのプロパティ</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-initiator-props.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-initiator-props.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      <guimenu>ターゲット ポータルの探索</guimenu>ダイアログで、<guimenu>ターゲット</guimenu>フィールドにターゲットのホスト名またはIPアドレスを入力して、<guimenu>OK</guimenu>をクリックします。
     </para>
     <figure>
      <title>ターゲットポータルの探索</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-target-ip.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-target-ip.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      他のすべてのゲートウェイホストの名前またはIPアドレスに対して、このプロセスを繰り返します。完了したら、<guimenu>ターゲット ポータル</guimenu>リストを確認します。
     </para>
     <figure>
      <title>ターゲットポータル</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-target-ip-list.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-target-ip-list.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      次に、<guimenu>ターゲット</guimenu>タブに切り替えて、検出されたターゲットを確認します。
     </para>
     <figure>
      <title>ターゲット</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-targets.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-targets.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      <guimenu>ターゲット</guimenu>タブで<guimenu>接続</guimenu>をクリックします。<guimenu>ターゲットへの接続</guimenu>ダイアログが表示されます。<guimenu>複数パスを有効にする</guimenu>チェックボックスをオンにしてMPIO (マルチパスI/O)を有効にして、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>ターゲットへの接続</guimenu>ダイアログが閉じたら、<guimenu>プロパティ</guimenu>を選択して、ターゲットのプロパティを確認します。
     </para>
     <figure>
      <title>iSCSIターゲットのプロパティ</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-target-properties.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-target-properties.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      <guimenu>デバイス</guimenu>を選択し、<guimenu>MPIO</guimenu>をクリックしてマルチパスI/Oの設定を確認します。
     </para>
     <figure>
      <title>デバイスの詳細</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-device-details.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-device-details.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      デフォルトの<guimenu>負荷分散ポリシー</guimenu>は<guimenu>Round Robin With Subset (サブセット付きラウンド ロビン)</guimenu>です。純粋なフェールオーバー設定が必要な場合は、<guimenu>Fail Over Only (フェールオーバーのみ)</guimenu>に変更します。
     </para>
    </step>
   </procedure>
   <para>
    これでiSCSIイニシエータの設定は終了です。iSCSIボリュームを他のSCSIデバイスと同じように利用できるようになり、初期化してボリュームやドライブとして使用できます。<guimenu>OK</guimenu>をクリックして<guimenu>iSCSI イニシエータのプロパティ</guimenu>ダイアログを閉じて、<guimenu>サーバ マネージャー</guimenu>ダッシュボードから<guimenu>ファイル サービスと記憶域サービス</guimenu>の役割に進みます。
   </para>
   <para>
    新しく接続されたボリュームを確認します。これはiSCSIバス上で「SUSE RBD SCSI Multi-Path Drive (SUSE RBD SCSIマルチパスデバイス)<emphasis/>」として識別されており、初期状態では、状態に「オフライン」<emphasis/>、パーティションテーブルタイプに「不明」<emphasis/>のマークが付いています。新しいボリュームがすぐに表示されない場合は、<guimenu>タスク</guimenu>ドロップダウンボックスから<guimenu>記憶域の再スキャン</guimenu>を選択して、iSCSIバスを再スキャンします。
   </para>
   <procedure>
    <step>
     <para>
      iSCSIボリュームを右クリックして、コンテキストメニューから<guimenu>ボリュームの新規作成</guimenu>を選択します。<guimenu>新しいボリューム ウィザード</guimenu>が表示されます。<guimenu>次へ</guimenu>をクリックして、新しく接続されたiSCSIボリュームを強調表示し、<guimenu>次へ</guimenu>をクリックして開始します。
     </para>
     <figure>
      <title>新しいボリュームウィザード</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-volume-wizard.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-volume-wizard.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      初期状態では、デバイスは空でパーティションテーブルを含みません。プロンプトが表示されたら、ボリュームがGPTパーティションテーブルで初期化されることを示すダイアログを確認します。
     </para>
     <figure>
      <title>オフラインディスクのプロンプト</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-win-prompt1.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-win-prompt1.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      ボリュームサイズを選択します。通常は、デバイスの全容量を使用します。続いて、新しく作成されたボリュームを利用できるドライブ文字またはディレクトリ名を割り当てます。次に、新しいボリューム上に作成するファイルシステムを選択します。最後に、選択内容を確認して<guimenu>作成</guimenu>をクリックし、ボリュームの作成を完了します。
     </para>
     <figure>
      <title>ボリュームの選択内容の確認</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-volume-confirm.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-volume-confirm.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      プロセスが完了したら、結果を確認し、<guimenu>閉じる</guimenu>をクリックしてドライブの初期化を完了します。初期化が完了すると、このボリューム(およびそのNTFSファイルシステム)は、新しく初期化されたローカルドライブと同じように利用可能になります。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="ceph-iscsi-connect-vmware">
   <title>VMwareの接続</title>
   <para/>
   <procedure>
    <step>
     <para>
      <systemitem class="daemon">ceph-iscsi</systemitem>で管理されているiSCSIボリュームに接続するには、設定済みのiSCSIソフトウェアアダプタが必要です。現在のvSphere設定でこのアダプタが利用できない場合は、<menuchoice><guimenu>構成</guimenu><guimenu>ストレージ アダプタ</guimenu> <guimenu>追加</guimenu><guimenu>iSCSI Software initiator (iSCSIソフトウェアイニシエータ)</guimenu></menuchoice>の順に選択して作成します。
     </para>
    </step>
    <step>
     <para>
      アダプタが利用可能になったら、アダプタを右クリックしてコンテキストメニューから<guimenu>プロパティ</guimenu>を選択し、アダプタのプロパティを選択します。
     </para>
     <figure>
      <title>iSCSIイニシエータのプロパティ</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi_vmware_adapter_props.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi_vmware_adapter_props.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      <guimenu>iSCSI Software Initiator (iSCSIソフトウェアイニシエータ)</guimenu>ダイアログで、<guimenu>構成</guimenu>ボタンをクリックします。続いて、<guimenu>動的検出</guimenu>タブに移動して、<guimenu>追加</guimenu>を選択します。
     </para>
    </step>
    <step>
     <para>
      <systemitem class="daemon">ceph-iscsi</systemitem> iSCSI GatewayのIPアドレスまたはホスト名を入力します。複数のiSCSI Gatewayをフェールオーバー設定で実行する場合は、運用するゲートウェイの数だけこの手順を繰り返します。
     </para>
     <figure>
      <title>ターゲットサーバの追加</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-add-target.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-add-target.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      すべてのiSCSI Gatewayを入力したら、ダイアログで<guimenu>OK</guimenu>をクリックして、iSCSIアダプタの再スキャンを開始します。
     </para>
    </step>
    <step>
     <para>
      再スキャンが完了すると、新しいiSCSIデバイスが<guimenu>詳細</guimenu>ペインの<guimenu>ストレージ アダプタ</guimenu>リストの下に表示されます。マルチパスデバイスの場合は、アダプタを右クリックして、コンテキストメニューから<guimenu>パスの管理</guimenu>を選択します。
     </para>
     <figure>
      <title>マルチパスデバイスの管理</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-multipath.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-multipath.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      これで、<guimenu>ステータス</guimenu>にすべてのパスが緑色のマークで表示されます。パスの1つに<guimenu>有効 (I/O)</guimenu>のマークが付いていて、他のすべてには単に<guimenu>アクティブ</guimenu>のマークが付いている必要があります。
     </para>
     <figure>
      <title>マルチパスのパスの一覧</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-paths.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-paths.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      <guimenu>ストレージ アダプタ</guimenu>から<guimenu>ステータス</guimenu>というラベルの項目に切り替えることができます。このペインの右上隅にある<guimenu>ストレージの追加...</guimenu>を選択して、<guimenu>Add Storage (ストレージの追加)</guimenu>ダイアログを表示します。続いて、<guimenu>ディスク/LUN</guimenu>を選択して、<guimenu>次へ</guimenu>をクリックします。新しく追加されたiSCSIデバイスが<guimenu>ディスクまたはLUNの選択</guimenu>リストに表示されます。デバイスを選択し、<guimenu>次へ</guimenu>をクリックして続行します。
     </para>
     <figure>
      <title>ストレージの追加ダイアログ</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-add-storage-dialog.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-add-storage-dialog.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      <guimenu>次へ</guimenu>をクリックして、デフォルトのディスクレイアウトをそのまま使用します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>プロパティ</guimenu>ペインで、新しいデータストアに名前を割り当てて、<guimenu>次へ</guimenu>をクリックします。ボリュームの全領域をこのデータストアに使用する場合はデフォルト設定をそのまま使用し、データストアの領域を減らす場合は<guimenu>カスタム領域設定</guimenu>を選択します。
     </para>
     <figure>
      <title>カスタム領域設定</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-custom-datastore.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-custom-datastore.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      <guimenu>終了</guimenu>をクリックしてデータストアの作成を完了します。
     </para>
     <para>
      新しいデータストアがデータストアのリストに表示され、そのデータストアを選択して詳細を取得できます。これで、vSphereの他のデータストアと同じように、<systemitem class="daemon">ceph-iscsi</systemitem>を利用するiSCSIボリュームを使用できるようになります。
     </para>
     <figure>
      <title>iSCSIデータストアの概要</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-overview.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-overview.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="ceph-iscsi-conclude">
  <title>結論</title>

  <para>
   <systemitem class="daemon">ceph-iscsi</systemitem>はSUSE Enterprise Storage 7において鍵となるコンポーネントで、iSCSIプロトコルに対応した任意のサーバやクライアントから分散型の高可用性ブロックストレージへのアクセスを可能にします。1つ以上のiSCSI Gatewayホストで<systemitem class="daemon">ceph-iscsi</systemitem>を使用することにより、Ceph RBDイメージはiSCSIターゲットに関連付けられたLU (論理ユニット)として利用可能になります。オプションで、負荷分散された可用性が高い方法でアクセスすることもできます。
  </para>

  <para>
   <systemitem class="daemon">ceph-iscsi</systemitem>のすべての設定はCeph RADOS Object Storeに保存されるので、<systemitem class="daemon">ceph-iscsi</systemitem>ゲートウェイホストは本質的に永続状態を持ちません。したがって、自由に置換、増強、または縮小できます。その結果、SUSE Enterprise Storage 7により、SUSEのお客様は、コモディティハードウェアと完全なオープンソースプラットフォーム上で、真に分散化され、高い可用性、災害耐性、自己修復機能を併せ持つエンタープライズストレージ技術を運用できます。
  </para>
 </sect1>
</chapter>
