<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_user_cmdline.xml" version="5.0" xml:id="dashboard-user-roles">
 <title>コマンドラインによるユーザと役割の管理</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  このセクションでは、Cephダッシュボードによって使用されるユーザアカウントを管理する方法について説明します。これは、ユーザアカウントを作成または変更する場合や、適切なユーザ役割と許可を設定する場合に役立ちます。
 </para>
 <sect1 xml:id="dashboard-password-policy">
  <title>パスワードポリシーの管理</title>

  <para>
   デフォルトでは、次のチェックを含むパスワードポリシー機能が有効になっています。
  </para>

  <itemizedlist>
   <listitem>
    <para>
     パスワードは<emphasis>N</emphasis>文字より長いか。
    </para>
   </listitem>
   <listitem>
    <para>
     古いパスワードと新しいパスワードが同じか。
    </para>
   </listitem>
  </itemizedlist>

  <para>
   次のコマンドにより、パスワードポリシー機能全体をON/OFFに切り替えることができます。
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-enabled <replaceable>true|false</replaceable></screen>

  <para>
   次のチェック項目を個別にON/OFFに切り替えることも可能です。
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-length-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-oldpwd-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-username-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-exclusion-list-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-complexity-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-sequential-chars-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-repetitive-chars-enabled <replaceable>true|false</replaceable>
</screen>

  <para>
   また、パスワードポリシーの動作設定に次のオプションを利用できます。
  </para>

  <itemizedlist>
   <listitem>
    <para>
     最小のパスワード長(デフォルトは8文字)。
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-length <replaceable>N</replaceable></screen>
   </listitem>
   <listitem>
    <para>
     最低限のパスワードの複雑さ(デフォルトは10)。
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-complexity <replaceable>N</replaceable></screen>
    <para>
     パスワードの複雑さは、パスワードに含まれる各文字を分類することで算出されます。
    </para>
   </listitem>
   <listitem>
    <para>
     パスワードに使用できない単語をカンマで区切ったリスト。
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-exclusion-list <replaceable>word</replaceable>[,...]</screen>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="dashboard-user-accounts">
  <title>ユーザアカウントの管理</title>

  <para>
   Cephダッシュボードは、複数のユーザアカウントの管理をサポートしています。各ユーザアカウントは、ユーザ名、パスワード(<literal>bcrypt</literal>を使用して暗号化された形式で保存)、オプションの名前、およびオプションの電子メールアドレスで構成されます。
  </para>

  <para>
   ユーザアカウントはCeph Monitorの設定データベースに保存され、すべてのCeph Managerインスタンス間でグローバルに共有されます。
  </para>

  <para>
   ユーザアカウントを管理するには、次のコマンドを使用します。
  </para>

  <variablelist>
   <varlistentry>
    <term>既存のユーザの表示</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>新しいユーザの作成</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザの削除</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザのパスワードの変更</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザの名前と電子メールの変更</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザの無効化</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-disable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザの有効化</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-enable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="dashboard-permissions">
  <title>ユーザの役割と許可</title>

  <para>
   このセクションでは、ユーザの役割に割り当てることができるセキュリティスコープ、ユーザの役割を管理する方法、およびユーザの役割をユーザアカウントに割り当てる方法について説明します。
  </para>

  <sect2 xml:id="dashboard-security-scopes">
   <title>セキュリティスコープの定義</title>
   <para>
    ユーザアカウントは、ユーザがダッシュボードのどの部分にアクセスできるかを定義する一連の役割に関連付けられます。ダッシュボードの各部分は、<emphasis/>「セキュリティ」スコープ内でグループ化されます。セキュリティスコープは事前定義されていて静的です。現在のところ、次のセキュリティスコープを使用できます。
   </para>
   <variablelist>
    <varlistentry>
     <term>hosts</term>
     <listitem>
      <para>
       <guimenu>ホスト</guimenu>メニューエントリに関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>config-opt</term>
     <listitem>
      <para>
       Ceph設定オプションの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool</term>
     <listitem>
      <para>
       プールの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd</term>
     <listitem>
      <para>
       Ceph OSDの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>monitor</term>
     <listitem>
      <para>
       Ceph Monitorの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-image</term>
     <listitem>
      <para>
       RADOS Block Deviceイメージの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-mirroring</term>
     <listitem>
      <para>
       RADOS Block Deviceのミラーリングの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>iscsi</term>
     <listitem>
      <para>
       iSCSIの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw</term>
     <listitem>
      <para>
       Object Gatewayの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs</term>
     <listitem>
      <para>
       CephFSの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>manager (マネージャ)</term>
     <listitem>
      <para>
       Ceph Managerの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>log</term>
     <listitem>
      <para>
       Cephのログの管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>grafana</term>
     <listitem>
      <para>
       Grafanaプロキシに関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>prometheus</term>
     <listitem>
      <para>
       Prometheusアラート管理に関連するすべての機能が含まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>dashboard-settings</term>
     <listitem>
      <para>
       ダッシュボードの設定を変更できます。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-user-roles-security-scope">
   <title>ユーザの役割の指定</title>
   <para>
    「役割」<emphasis/>は、<emphasis/>「セキュリティスコープ」と一連の<emphasis/>「許可」との間の一連のマッピングを指定するものです。許可には、「read」、「create」、「update」、および「delete」の4つのタイプがあります。
   </para>
   <para>
    次の例では、ユーザがプールの管理に関連する機能に対して「read」許可と「create」許可を持ち、RBDイメージの管理に関連する機能に対して完全な許可を持つ役割を指定します。
   </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
   <para>
    ダッシュボードには、<emphasis/>「システム役割」と呼ばれる、事前定義済みの一連の役割があらかじめ用意されています。これらの役割は、Cephダッシュボードを新規インストールした後ですぐに使用できます。
   </para>
   <variablelist>
    <varlistentry>
     <term>管理者</term>
     <listitem>
      <para>
       すべてのセキュリティスコープに対する完全な許可を提供します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>読み込み専用</term>
     <listitem>
      <para>
       ダッシュボード設定を除くすべてのセキュリティスコープの読み込み許可を提供します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>block-manager</term>
     <listitem>
      <para>
       「rbd-image」、「rbd-mirroring」、および「iscsi」のスコープに対する完全な許可を提供します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw-manager</term>
     <listitem>
      <para>
       「rgw」スコープに対する完全な許可を提供します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cluster-manager</term>
     <listitem>
      <para>
       「hosts」、「osd」、「monitor」、「manager」、および「config-opt」のスコープに対する完全な許可を提供します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool-manager</term>
     <listitem>
      <para>
       「pool」スコープに対する完全な許可を提供します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs-manager</term>
     <listitem>
      <para>
       「cephfs」スコープに対する完全な許可を提供します。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="dashboard-managing-custom-roles">
    <title>カスタム役割の管理</title>
    <para>
     次のコマンドを使用して、新しいユーザの役割を作成できます。
    </para>
    <variablelist>
     <varlistentry>
      <term>新規ロール(役割)を作成します:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>役割の削除:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>役割へのスコープ許可の追加</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>役割からのスコープ許可の削除</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-assigning-roles-user-accounts">
    <title>ユーザアカウントへの役割の割り当て</title>
    <para>
     役割をユーザに割り当てるには、次のコマンドを使用します。
    </para>
    <variablelist>
     <varlistentry>
      <term>ユーザの役割の設定</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>ユーザへの追加の役割の追加</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>ユーザからの役割の削除</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
    <tip>
     <title>カスタム役割の消去</title>
     <para>
      カスタム役割を作成し、後で<command>ceph.purge</command>ランナを使ってCephクラスタを削除する場合、まずカスタム役割を消去する必要があります。詳細については、<xref linkend="ceph-cluster-purge"/>を参照してください。
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="example-create-user-custom-role">
    <title>例: ユーザとカスタム役割の作成</title>
    <para>
     このセクションでは、RBDイメージの管理、Cephプールの表示と作成、および他のスコープへの読み込み専用アクセスを行うことができるユーザアカウントの作成手順について説明します。
    </para>
    <procedure>
     <step>
      <para>
       <literal>tux</literal>という名前の新しいユーザを作成します。
      </para>
<screen>
 <prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
     </step>
     <step>
      <para>
       役割を作成し、スコープ許可を指定します。
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
     </step>
     <step>
      <para>
       役割を<literal>tux</literal>ユーザに関連付けます。
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-proxy-config">
  <title>プロキシ設定</title>

  <para>
   Cephダッシュボードへの固定URLを定めたい場合や、管理ノードへの直接接続を許可したくない場合は、プロキシを設定できます。このプロキシは受け取った要求現在をアクティブな<literal>ceph-mgr</literal>インスタンスへ自動的に転送します。
  </para>

  <sect2 xml:id="dashboard-proxy">
   <title>リバースプロキシによるダッシュボードへのアクセス</title>
   <para>
    リバースプロキシ設定を使用してダッシュボードにアクセスしている場合は、URLプレフィックスを使用してダッシュボードを提供しなければならないことがあります。ダッシュボードがプレフィックスを含むハイパーリンクを使用できるようにするには、<option>url_prefix</option>設定を設定できます。
   </para>
<screen>
  <prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
  </screen>
   <para>
    これにより、<literal>http://<replaceable>HOST_NAME</replaceable>:<replaceable>PORT_NUMBER</replaceable>/<replaceable>URL_PREFIX</replaceable>/</literal>でダッシュボードにアクセスできます。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-disable-redirection">
   <title>リダイレクションの無効化</title>
   <para>
    CephダッシュボードがHAProxyのようなロードバランシングプロキシの背後にある場合、リダイレクション動作を無効化することで、内部URL(解決できないURL)がフロントエンドのクライアントに公開されないようにします。次のコマンドを使用することで、ダッシュボードがアクティブなダッシュボードへリダイレクトするのではなく、HTTPエラー(デフォルトでは<literal>500</literal>)を返すようになります。
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "error"
</screen>
   <para>
    デフォルトのリダイレクション動作に設定をリセットするには、次のコマンドを使用します。
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "redirect"
</screen>
  </sect2>

  <sect2 xml:id="dashboard-config-error-status">
   <title>エラーステータスコードの設定</title>
   <para>
    リダイレクション動作を無効化する場合、スタンバイダッシュボードのHTTPステータスコードをカスタマイズする必要があります。そのためには、次のコマンドを実行します。
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_error_status_code 503
</screen>
  </sect2>

  <sect2 xml:id="dashboard-haproxy-config">
   <title>HAProxyの設定例</title>
   <para>
    以下に示す設定は、HAProxyを使用したTLS/SSLパススルーの例です。
   </para>
   <note>
    <para>
     この設定が効果を発揮する状況は次の通りです。ダッシュボードがフェールオーバーした際に、フロントエンドのクライアントはHTTPリダイレクト応答(<literal>303</literal>)を受け取る可能性があります。この場合、クライアントは解決不能ホストにリダイレクトされてしまいます。
    </para>
    <para>
     このような状況は、HAProxyの2つのヘルスチェック中にフェールオーバーが発生した場合に生じます。これは、それまでアクティブだったダッシュボードが、新しいアクティブノードをリダイレクト先とする303エラーで応答してしまうためです。このような状況を避けるため、スタンバイノードのリダイレクション動作を無効化することを検討する必要があります。
    </para>
   </note>
<screen>
  defaults
    log global
    option log-health-checks
    timeout connect 5s
    timeout client 50s
    timeout server 450s

  frontend dashboard_front
    mode http
    bind *:80
    option httplog
    redirect scheme https code 301 if !{ ssl_fc }

  frontend dashboard_front_ssl
    mode tcp
    bind *:443
    option tcplog
    default_backend dashboard_back_ssl

  backend dashboard_back_ssl
    mode tcp
    option httpchk GET /
    http-check expect status 200
    server x <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server y <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server z <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-auditing">
  <title>API要求の監査</title>

  <para>
   CephダッシュボードのREST APIは、PUT、POST、およびDELETEの各要求をCeph監査ログに記録できます。ログはデフォルトでは無効ですが、次のコマンドで有効にできます。
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>

  <para>
   ログが有効な場合、要求ごとに次のパラメータがログに記録されます。
  </para>

  <variablelist>
   <varlistentry>
    <term>from</term>
    <listitem>
     <para>
      「https://[::1]:44410」などの要求の発信元。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>path</term>
    <listitem>
     <para>
      <filename>/api/auth</filename>などのREST APIパス。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>method</term>
    <listitem>
     <para>
      「PUT」、「POST」、または「DELETE」。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>user</term>
    <listitem>
     <para>
      ユーザの名前(または「None」)。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   次に、ログエントリの例を示します。
  </para>

<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>

  <tip>
   <title>要求ペイロードのログの無効化</title>
   <para>
    要求ペイロード(引数とその値のリスト)のログは、デフォルトで有効になっています。これは、次のコマンドを使用して無効にできます。
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
  </tip>
 </sect1>
 <sect1 xml:id="dashboard-config-nfs-ganesha">
  <title>CephダッシュボードによるNFS Ganeshaの設定</title>

  <para>
   Cephダッシュボードは、CephFSまたはObject Gatewayをバックストアとして使用するNFS Ganeshaエクスポートを管理できます。ダッシュボードはCephFSクラスタのRADOSオブジェクトに保存されたNFS Ganeshaの設定ファイルを管理します。NFS Ganeshaは設定の一部をCephクラスタに保存する必要があります。
  </para>

  <para>
   NFS Ganeshaの設定オブジェクトの場所を設定するには、次のコマンドを実行します。
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>]</screen>

  <para>
   これで、Cephダッシュボードを使用してNFS Ganeshaのエクスポートを管理できます。
  </para>

  <sect2 xml:id="dashboard-multi-config-nfs-ganesha">
   <title>複数のNFS Ganeshaクラスタの設定</title>
   <para>
    Cephダッシュボードは、異なるNFS Ganeshaクラスタに属するNFS Ganeshaエクスポートの管理をサポートしています。各NFS Ganeshaクラスタの設定オブジェクトを異なるRADOSプール/ネームスペースに保存することをお勧めします。これは、設定を互いに分離するためです。
   </para>
   <para>
    各NFS Ganeshaクラスタの設定の場所を指定するには、次のコマンドを使用します。
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>](,<replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>])*</screen>
   <para>
    <replaceable>Cluster_id</replaceable>は任意の文字列で、NFS Ganeshaクラスタを一意に識別します。
   </para>
   <para>
    Cephダッシュボードと複数のNFS Ganeshaクラスタを設定した場合、エクスポートがどのクラスタに属しているかをWeb UIによって自動的に選択できるようになります。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-debug-plugin">
  <title>デバッグ用プラグイン</title>

  <para>
   Cephダッシュボードのプラグインはダッシュボードの機能を拡張します。デバッグプラグインを使用すると、デバッグモードによってダッシュボードの動作をカスタマイズできるようになります。次のコマンドによって、デバッグモードの有効化、無効化、確認ができます。
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug status
Debug: 'disabled'
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug enable
Debug: 'enabled'
<prompt>cephuser@adm &gt; </prompt>dashboard debug disable
Debug: 'disabled'
</screen>

  <para>
   デフォルトでは、この機能は無効です。このモードは運用環境の展開に推奨される設定です。必要に応じて、再起動せずにデバッグモードを有効化できます。
  </para>
 </sect1>
</chapter>
