<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_maintenance_updates.xml" version="5.0">
 <title>アップストリーム「Octopus」ポイントリリースに基づくCeph保守更新</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  SUSE Enterprise Storage 7のいくつかの主要パッケージは、CephのOctopusリリースシリーズに基づいています。Cephプロジェクト(<link xlink:href="https://github.com/ceph/ceph"/>)がOctopusシリーズの新しいポイントリリースを公開した場合、SUSE Enterprise Storage 7は、アップストリームの最新のバグ修正や機能のバックポートのメリットを得られるように更新されます。
 </para>
 <para>
  この章には、製品に組み込み済みか、組み込みが予定されている各アップストリームポイントリリースに含まれる重要な変更点についての概要が記載されています。
 </para>
 <bridgehead renderas="sect1">Octopus 15.2.5ポイントリリース</bridgehead>
 <para>
  Octopusのポイントリリース15.2.5では、以下の修正とその他の変更が行われました。
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CephFS: 新しい拡張ディレクトリ属性である、分散型エフェメラルピンニングとランダムエフェメラルピンニングを使用して、自動静的サブツリーパーティショニングポリシーを自動で設定できるようになりました。詳細については、次のドキュメントを参照してください。<link xlink:href="https://docs.ceph.com/docs/master/cephfs/multimds/"/>
   </para>
  </listitem>
  <listitem>
   <para>
    Monitorに<option>mon_osd_warn_num_repaired</option>設定オプションが追加されました。デフォルトで10に設定されています。いずれかのOSDで、保存データのI/Oエラーを修復した数がこの値を超えた場合、<literal>OSD_TOO_MANY_REPAIRS</literal>ヘルス警告が発生します。
   </para>
  </listitem>
  <listitem>
   <para>
    グローバルまたはプールごとに<literal>no scrub</literal>フラグと<literal>no deep-scrub</literal>フラグの両方またはいずれかが設定されていない場合、無効化されたタイプのスケジュール済みスクラブは中止されます。ユーザが開始したスクラブはすべて中断されません。
   </para>
  </listitem>
  <listitem>
   <para>
    正常なクラスタでosdmapが最適化されない問題を修正しました。
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.4ポイントリリース</bridgehead>
 <para>
  Octopusのポイントリリース15.2.4では、以下の修正とその他の変更が行われました。
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10753: rgw: s3 CORSConfigurationのExposeHeaderで改行をサニタイズ
   </para>
  </listitem>
  <listitem>
   <para>
    Object Gateway: オーファンを処理する<command>radosgw-admin</command>サブコマンド(<command>radosgw-admin orphans find</command>、<command>radosgw-admin orphans finish</command>、<command>radosgw-admin orphans list-jobs</command>)は非推奨となりました。これらのサブコマンドはあまり保守されておらず、またクラスタに中間結果を保存するため空き容量の少ないクラスタを満杯にしてしまう可能性があります。そのため、現在、現在実験的と見なされている<command>rgw-orphan-list</command>ツールに置き換えられました。
   </para>
  </listitem>
  <listitem>
   <para>
    RBD: RBDのごみ箱を空にするスケジュールを保存するために使用されるRBDプールオブジェクトの名前が<literal>rbd_trash_trash_purge_schedule</literal>から<literal>rbd_trash_purge_schedule</literal>に変更されました。ユーザがRBDのごみ箱を空にするスケジュール機能の使用を開始しており、プールごとまたはネームスペースごとにスケジュールを設定している場合は、<literal>rbd_trash_trash_purge_schedule</literal>オブジェクトを<literal>rbd_trash_purge_schedule</literal>にコピーしてからアップグレードして<literal>rbd_trash_purge_schedule</literal>を削除する必要があります。この削除には、ごみ箱を空にするスケジュールが設定されていたすべてのRBDプールとネームスペースに対して次のコマンドを使用します。
   </para>
<screen>
rados -p <replaceable>pool-name</replaceable> [-N namespace] cp rbd_trash_trash_purge_schedule rbd_trash_purge_schedule
rados -p <replaceable>pool-name</replaceable> [-N namespace] rm rbd_trash_trash_purge_schedule
</screen>
   <para>
    もしくは、他の便利な方法を使用して、アップグレード後にスケジュールを復元してください。
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.3ポイントリリース</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    Octopusポイントリリース15.2.3は、<option>bluefs_preextend_wal_files</option>と<option>bluefs_buffered_io</option>を同時に有効にした場合にWALの破損が見られる問題に対処するためのホットフィックスリリースでした。15.2.3での修正はあくまで応急処置です(<option>bluefs_preextend_wal_files</option>のデフォルト値を<literal>false</literal>に変更)。恒久的な修正では<option>bluefs_preextend_wal_files</option>オプションを完全に削除することになります。この修正は15.2.6ポイントリリースに含まれる可能性が高いです。
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.2ポイントリリース</bridgehead>
 <para>
  Octopusのポイントリリース15.2.2では、1つのセキュリティ脆弱性にパッチを適用しました。
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10736: MONとMGRでの認証バイパスを修正
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.1ポイントリリース</bridgehead>
 <para>
  Octopusのポイントリリース15.2.1では、Luminous (SES5.5)からNautilus (SES6)さらにOctopus (SES7)に素早くアップグレードした際に、OSDがクラッシュする問題を修正しました。また、最初のOctopus (15.2.0)リリースに存在した2つのセキュリティ脆弱性にパッチを適用しました。
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-1759: msgr V2セキュアモードでのナンスの再利用を修正
   </para>
  </listitem>
  <listitem>
   <para>
    CVE-2020-1760: RGW GetObjectヘッダー分割によるXSSを修正
   </para>
  </listitem>
 </itemizedlist>
</appendix>
