<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_cluster.xml" version="5.0" xml:id="dashboard-cluster">
 <title>クラスタの内部情報の表示</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  <guimenu>クラスタ</guimenu>メニュー項目を使用すると、Cephクラスタホスト、インベントリ、Ceph Monitor、サービス、OSD、設定、CRUSHマップ、Ceph Manager、ログ、および監視ファイルに関する詳細情報を表示できます。
 </para>
 <sect1 xml:id="dashboard-cluster-hosts">
  <title>クラスタノードの表示</title>

  <para>
   クラスタノードのリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>ホスト</guimenu></menuchoice>をクリックします。
  </para>

  <figure>
   <title>ホスト</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_hosts.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_hosts.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   ノードのパフォーマンスの詳細を表示するには、<guimenu>ホスト名</guimenu>列のノード名の横にあるドロップダウン矢印をクリックします。
  </para>

  <para>
   <guimenu>サービス</guimenu>列には、関連する各ノードで実行されているすべてのデーモンが一覧にされます。デーモン名をクリックすると、その詳細な設定が表示されます。
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-inventory">
  <title>クラスタのインベントリへのアクセス</title>

  <para>
   デバイスのリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>インベントリ</guimenu></menuchoice>をクリックします。リストにはデバイスのパス、種類、利用可能かどうか、ベンダー、モデル、サイズ、OSDが含まれます。
  </para>

  <para>
   <guimenu>ホスト名</guimenu>列のノード名をクリックして選択します。選択した状態で、<guimenu>識別</guimenu>をクリックすると、そのホストを実行しているデバイスが特定されます。このとき、デバイスにLEDを点滅させるよう指示されます。このアクションの時間は、1、2、5、10、15分から選択します。<guimenu>実行</guimenu>をクリックします。
  </para>

  <figure>
   <title>サービス</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_inventory.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_inventory.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-monitors">
  <title>Ceph Monitorの表示</title>

  <para>
   実行中のCeph Monitorが存在するクラスタノードのリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>モニター</guimenu></menuchoice>をクリックします。コンテンツペインは2つのビューに分割されます。1つは<literal>ステータス</literal>ビューで、もう1つは<literal>定数内</literal>と<literal>非定数内</literal>のビューです。
  </para>

  <para>
   <guimenu>ステータス</guimenu>テーブルには、実行中のCeph Monitorに関する一般的な統計情報が表示されます。内容は次の通りです。
  </para>

  <itemizedlist>
   <listitem>
    <para>
     クラスタID
    </para>
   </listitem>
   <listitem>
    <para>
     monmapが変更されました
    </para>
   </listitem>
   <listitem>
    <para>
     monmapエポック
    </para>
   </listitem>
   <listitem>
    <para>
     定数con
    </para>
   </listitem>
   <listitem>
    <para>
     定数mon
    </para>
   </listitem>
   <listitem>
    <para>
     必須のcon
    </para>
   </listitem>
   <listitem>
    <para>
     必須のmon
    </para>
   </listitem>
  </itemizedlist>

  <para>
   <literal>定数内</literal>と<literal>非定数内</literal>のペインには、各Monitorの名前、ランク数、パブリックIPアドレス、開いているセッション数が含まれます。
  </para>

  <para>
   関連するCeph Monitorの設定を表示するには、<guimenu>名前</guimenu>列のノード名をクリックします。
  </para>

  <figure>
   <title>Ceph Monitor</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_mons.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_mons.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-services">
  <title>サービスの表示</title>

  <para>
   利用可能な各サービスの詳細を表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>サービス</guimenu></menuchoice>をクリックします。サービスの例としては、<literal>crash</literal>、Ceph Manager、Ceph Monitorなどがあります。リストにはコンテナイメージの名前、コンテナイメージのID、実行中の内容のステータス、サイズ、最後に更新された日時が含まれます。
  </para>

  <para>
   デーモンの詳細を表示するには、<guimenu>サービス</guimenu>列のサービス名の横にあるドロップダウン矢印をクリックします。詳細リストには、ホスト名、デーモンの種類、デーモンID、コンテナID、コンテナイメージ名、コンテナイメージID、バージョン番号、ステータス、最後に更新された日時が含まれます。
  </para>

  <figure>
   <title>サービス</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_services.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_services.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-osds">
  <title>Ceph OSDの表示</title>

  <para>
   実行中のOSDデーモンが存在するノードのリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>OSD</guimenu></menuchoice>をクリックします。このリストには、各ノードの名前、ID、ステータス、デバイスクラス、配置グループの数、サイズ、使用状況、時間内の読み込み/書き込みチャート、および1秒あたりの読み込み/書き込み操作の速度が含まれます。
  </para>

  <figure>
   <title>Ceph OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   ポップアップウィンドウを開くには、テーブル見出しの<guimenu>クラスタ全体の設定</guimenu>ドロップダウンメニューから、<guimenu>フラグ</guimenu>を選択します。このウィンドウにはクラスタ全体に適用されるフラグの一覧が表示されます。個々のフラグを有効または無効にし、<guimenu>送信</guimenu>をクリックして確認できます。
  </para>

  <figure>
   <title>OSDフラグ</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   ポップアップウィンドウを開くには、テーブル見出しの<guimenu>クラスタ全体の設定</guimenu>ドロップダウンメニューから、<guimenu>回復優先度</guimenu>を選択します。このウィンドウにはクラスタ全体に適用されるOSDの回復優先度の一覧が表示されます。希望する優先度プロファイルを有効にし、その下の個々の値を微調整できます。<guimenu>送信</guimenu>をクリックして確認します。
  </para>

  <figure>
   <title>OSD回復優先度</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   デバイスの設定とパフォーマンスに関する詳細が含まれる拡張テーブルを表示するには、<guimenu>ホスト</guimenu>列のノード名の横にあるドロップダウン矢印をクリックします。複数のタブを参照すると、<guimenu>属性</guimenu>、<guimenu>メタデータ</guimenu>、<guimenu>デバイスヘルス</guimenu>、<guimenu>パフォーマンスカウンタ</guimenu>、読み込みと書き込みをグラフィカルに表示する<guimenu>ヒストグラム</guimenu>、および<guimenu>パフォーマンスの詳細</guimenu>の各リストを確認できます。
  </para>

  <figure>
   <title>OSDの詳細</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osd_details.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osd_details.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <tip>
   <title>OSDでの固有のタスクの実行</title>
   <para>
    OSDノード名をクリックすると、テーブルの行が強調表示されます。これは、そのノードでタスクを実行できることを表すものです。以下のアクションのいずれかを選択して実行できます。<guimenu>編集</guimenu>、<guimenu>作成</guimenu>、<guimenu>スクラブ</guimenu>、<guimenu>ディープスクラブ</guimenu>、<guimenu>再重みづけ</guimenu>、<guimenu>アウトとしてマーク</guimenu>、<guimenu>インとしてマーク</guimenu>、<guimenu>ダウンとしてマーク</guimenu>、<guimenu>喪失としてマーク</guimenu>、<guimenu>消去</guimenu>、<guimenu>破棄</guimenu>、<guimenu>削除</guimenu>。
   </para>
   <para>
    <guimenu>作成</guimenu>ボタン隣のテーブル見出しの左上にある下矢印をクリックし、実行したいタスクを選択します。
   </para>
  </tip>

  <sect2 xml:id="dashboard-cluster-osds-add">
   <title>OSDの追加</title>
   <para>
    新しいOSDを追加するには、次の手順に従います。
   </para>
   <procedure>
    <step>
     <para>
      ステータスが<literal>使用可能</literal>のストレージデバイスを持つクラスタノードが存在することを確認します。テーブル見出しの左上にある下矢印をクリックして、<guimenu>作成</guimenu>を選択します。これにより、<guimenu>OSDの作成</guimenu>ウィンドウが開きます。
     </para>
     <figure>
      <title>OSDの作成</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      OSDにプライマリストレージデバイスを追加するには、 <guimenu>追加</guimenu>をクリックします。ストレージデバイスを追加する前に、<guimenu>プライマリデバイス</guimenu>テーブルの右上でフィルタ条件を指定する必要があります。たとえば、<guimenu>タイプ</guimenu> <guimenu>hdd</guimenu>など。<guimenu>追加</guimenu>をクリックして確認します。
     </para>
     <figure>
      <title>プライマリデバイスの追加</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      更新された<guimenu>OSDの作成</guimenu>ウィンドウで、必要に応じて共有WALとBDデバイスを追加したり、デバイスの暗号化を有効化したりします。
     </para>
     <figure>
      <title>プライマリデバイスを追加したOSDの作成</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_created.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_created.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      以前追加したデバイスのDriveGroup仕様のプレビューを表示するには、<guimenu>プレビュー</guimenu>をクリックします。<guimenu>作成</guimenu>をクリックして確認します。
     </para>
     <figure>
      <title/>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_preview.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_preview.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      OSDのリストに新しいデバイスが追加されます。
     </para>
     <figure>
      <title>新しく追加されたOSD</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_added.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_added.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <note>
      <para>
       OSD作成プロセスの進捗を視覚化する機能はありません。実際に作成されるまでには、多少の時間がかかります。OSDは展開が完了すると、リストに表示されます。展開のステータスを確認したい場合は、<menuchoice><guimenu>クラスタ</guimenu><guimenu>ログ</guimenu></menuchoice>をクリックして、ログを表示します。
      </para>
     </note>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster-config">
  <title>クラスタ設定の表示</title>

  <para>
   Cephクラスタ設定オプションの完全なリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>設定</guimenu></menuchoice>をクリックします。リストにはオプション名、簡単な説明、現在値とデフォルト値、およびオプションを編集可能かどうかが含まれます。
  </para>

  <figure>
   <title>クラスタの設定</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_cluster_config.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_cluster_config.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   オプションに関する詳細情報が含まれる拡張テーブルを表示するには、<guimenu>名前</guimenu>列の設定オプションの隣にあるドロップダウン矢印をクリックします。詳細情報としては、値の種類、最小許容値と最大許容値、実行中に更新可能か、などが含まれます。
  </para>

  <para>
   特定のオプションを強調表示した後で、テーブル見出しの左上の<guimenu>編集</guimenu>ボタンをクリックして、その値を編集できます。<guimenu>保存</guimenu>をクリックして変更を確定します。
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-crushmap">
  <title>CRUSHマップの表示</title>

  <para>
   クラスタのCRUSHマップを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>CRUSHマップ</guimenu></menuchoice>をクリックします。CRUSHマップの全般的な情報については、<xref linkend="op-crush"/>を参照してください。
  </para>

  <para>
   ルート、ノード、または個々のOSDをクリックすると、CRUSHの重み、マップツリー内での深さ、OSDのデバイスクラスなどの詳細情報が表示されます。
  </para>

  <figure>
   <title>CRUSHマップ</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_crushmap.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_crushmap.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-mgr-plugins">
  <title>マネージャモジュールの表示</title>

  <para>
   使用可能なCeph Managerモジュールのリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>マネージャモジュール</guimenu></menuchoice>をクリックします。各行は、モジュール名と、そのモジュールが現在有効かどうかに関する情報で構成されます。
  </para>

  <figure>
   <title>マネージャモジュール</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_mgr_modules.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_mgr_modules.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   詳細設定を含む拡張テーブルを、下の<guimenu>詳細</guimenu>テーブルに表示するには、<guimenu>名前</guimenu>列のモジュールの隣にあるドロップダウン矢印をクリックします。設定を編集するには、テーブル見出しの左上の<guimenu>編集</guimenu>ボタンをクリックします。<guimenu>更新</guimenu>をクリックして変更を確定します。
  </para>

  <para>
   モジュールを<guimenu>有効化</guimenu>または<guimenu>無効化</guimenu>するには、テーブル見出しの左上にある<guimenu>編集</guimenu>ボタンの隣のドロップダウン矢印をクリックします。
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-logs">
  <title>ログの表示</title>

  <para>
   クラスタの最近のログエントリのリストを表示するには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>ログ</guimenu></menuchoice>をクリックします。各行は、タイムスタンプ、ログエントリのタイプ、およびログに記録されたメッセージ自体で構成されます。
  </para>

  <para>
   監査サブシステムのログエントリを表示するには、<guimenu>監査ログ</guimenu>タブをクリックします。監査を有効または無効にするためのコマンドについては、<xref linkend="dashboard-auditing"/>を参照してください。
  </para>

  <figure>
   <title>ログ</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_logs.png" width="80%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_logs.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-monitoring">
  <title>監視の表示</title>

  <para>
   Prometheusアラートの詳細の管理と表示を行うには、<menuchoice><guimenu>クラスタ</guimenu><guimenu>監視</guimenu></menuchoice>をクリックします。
  </para>

  <para>
   アクティブなPrometheusが存在するなら、このコンテンツペインの<guimenu>有効なアラート</guimenu>、<guimenu>すべてのアラート</guimenu>、または<guimenu>サイレンス</guimenu>から詳細な情報を表示できます。
  </para>

  <note>
   <para>
    Prometheusが展開されていない場合、表示される情報バナーから関連するドキュメントを表示できます。
   </para>
  </note>
 </sect1>
</chapter>
