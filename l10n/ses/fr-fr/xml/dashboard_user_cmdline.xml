<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_user_cmdline.xml" version="5.0" xml:id="dashboard-user-roles">
 <title>Gestion des utilisateurs et des rôles via la ligne de commande</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>oui</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Cette section explique comment gérer les comptes utilisateur employés par Ceph Dashboard. Elle vous aide à créer ou modifier des comptes utilisateur, ainsi qu'à définir des rôles et autorisations appropriés pour les utilisateurs.
 </para>
 <sect1 xml:id="dashboard-password-policy">
  <title>Gestion de la stratégie de mot de passe</title>

  <para>
   Par défaut, la fonction de stratégie de mot de passe est activée, y compris les vérifications suivantes :
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Le mot de passe comporte-t-il plus de <emphasis>N</emphasis> caractères ?
    </para>
   </listitem>
   <listitem>
    <para>
     L'ancien et le nouveau mots de passe sont-ils identiques ?
    </para>
   </listitem>
  </itemizedlist>

  <para>
   La fonction de stratégie de mot de passe peut être complètement activée ou désactivée :
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-enabled <replaceable>true|false</replaceable></screen>

  <para>
   Les vérifications individuelles suivantes peuvent être activées ou désactivées :
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-length-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-oldpwd-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-username-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-exclusion-list-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-complexity-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-sequential-chars-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-repetitive-chars-enabled <replaceable>true|false</replaceable>
</screen>

  <para>
   En outre, les options suivantes sont disponibles pour configurer le comportement de la stratégie de mot de passe.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Longueur minimale du mot de passe (8 par défaut) :
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-length <replaceable>N</replaceable></screen>
   </listitem>
   <listitem>
    <para>
     Complexité minimale du mot de passe (10 par défaut) :
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-complexity <replaceable>N</replaceable></screen>
    <para>
     La complexité du mot de passe est calculée en classant chaque caractère du mot de passe.
    </para>
   </listitem>
   <listitem>
    <para>
     Liste de mots, séparés par des virgules, qui ne peuvent pas être utilisés dans un mot de passe :
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-exclusion-list <replaceable>word</replaceable>[,...]</screen>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="dashboard-user-accounts">
  <title>Gestion des comptes utilisateur</title>

  <para>
   Ceph Dashboard prend en charge la gestion de plusieurs comptes utilisateur. Chaque compte utilisateur se compose d'un nom d'utilisateur, d'un mot de passe (stocké sous forme codée à l'aide de <literal>bcrypt</literal>), d'un nom facultatif et d'une adresse électronique facultative.
  </para>

  <para>
   Les comptes utilisateur sont stockés dans la base de données de configuration de Ceph Monitor et sont partagés globalement par toutes les instances Ceph Manager.
  </para>

  <para>
   Utilisez les commandes suivantes pour gérer les comptes utilisateur :
  </para>

  <variablelist>
   <varlistentry>
    <term>Afficher les utilisateurs existants :</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Créer un utilisateur :</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Supprimer un utilisateur :</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Changer le mot de passe d'un utilisateur :</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Changer le nom et l'adresse électronique d'un utilisateur :</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Désactiver l'utilisateur</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-disable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Activer l'utilisateur</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-enable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="dashboard-permissions">
  <title>Rôles et autorisations des utilisateurs</title>

  <para>
   Cette section décrit les étendues de sécurité que vous pouvez assigner à un rôle utilisateur, comment gérer les rôles des utilisateurs et comment les affecter aux comptes utilisateur.
  </para>

  <sect2 xml:id="dashboard-security-scopes">
   <title>Définition des étendues de sécurité</title>
   <para>
    Les comptes utilisateur sont associés à un ensemble de rôles qui définissent les parties du tableau de bord auxquelles l'utilisateur peut accéder. Les parties du tableau de bord sont regroupées au sein d'une étendue de <emphasis>sécurité</emphasis>. Les étendues de sécurité sont prédéfinies et statiques. Les périmètres de sécurité suivants sont actuellement disponibles :
   </para>
   <variablelist>
    <varlistentry>
     <term>hosts</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à l'entrée de menu <guimenu>Hôtes</guimenu>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>config-opt</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion des options de configuration Ceph.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion des réserves.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion Ceph OSD.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>monitor</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion Ceph Monitor.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-image</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion des images de périphérique de bloc RADOS (RBD).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-mirroring</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion de la mise en miroir de périphériques de bloc RADOS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>iscsi</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion Object Gateway.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion CephFS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>manager</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion Ceph Manager.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>log</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées à la gestion des journaux Ceph.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>grafana</term>
     <listitem>
      <para>
       Inclut toutes les fonctionnalités liées au proxy Grafana.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>prometheus</term>
     <listitem>
      <para>
       Inclut toutes les fonctions liées à la gestion des alertes Prometheus.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>dashboard-settings</term>
     <listitem>
      <para>
       Permet de modifier les paramètres du tableau de bord.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-user-roles-security-scope">
   <title>Spécification des rôles utilisateur</title>
   <para>
    Un <emphasis>rôle</emphasis> spécifie un ensemble d'assignations entre une <emphasis>étendue de sécurité</emphasis> et un ensemble d'<emphasis>autorisations</emphasis>. Il existe quatre types d'autorisations : « read » (lire), « create » (créer), « update » (mettre à jour) et « delete » (supprimer).
   </para>
   <para>
    L'exemple suivant spécifie un rôle pour lequel un utilisateur dispose des autorisations de lecture et de création concernant les fonctionnalités liées à la gestion des réserves, et possède toutes les autorisations pour les fonctionnalités liées à la gestion des images RBD :
   </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
   <para>
    Le tableau de bord fournit déjà un ensemble de rôles prédéfinis que nous appelons les <emphasis>rôles système</emphasis>. Vous pouvez les utiliser instantanément après une nouvelle installation de Ceph Dashboard :
   </para>
   <variablelist>
    <varlistentry>
     <term>administrateur</term>
     <listitem>
      <para>
       Fournit des autorisations complètes pour toutes les étendues de sécurité.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>read-only</term>
     <listitem>
      <para>
       Fournit une autorisation de lecture pour toutes les étendues de sécurité, à l'exception des paramètres du tableau de bord.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>block-manager</term>
     <listitem>
      <para>
       Fournit des autorisations complètes pour les étendues « rbd-image », « rbd-mirroring » et « iscsi ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw-manager</term>
     <listitem>
      <para>
       Fournit des autorisations complètes pour l'étendue « rgw ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cluster-manager</term>
     <listitem>
      <para>
       Fournit des autorisations complètes pour les étendues « hosts », « osd », « monitor », « manager » et « config-opt ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool-manager</term>
     <listitem>
      <para>
       Fournit des autorisations complètes pour l'étendue « pool ».
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs-manager</term>
     <listitem>
      <para>
       Fournit des autorisations complètes pour l'étendue « cephfs ».
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="dashboard-managing-custom-roles">
    <title>Gestion des rôles personnalisés</title>
    <para>
     Vous pouvez créer des rôles utilisateur à l'aide des commandes suivantes :
    </para>
    <variablelist>
     <varlistentry>
      <term>Créer un rôle :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Supprimer un rôle :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Ajouter des autorisations d'étendue à un rôle :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Supprimer des autorisations d'étendue d'un rôle :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-assigning-roles-user-accounts">
    <title>Assignation de rôles à des comptes utilisateur</title>
    <para>
     Utilisez les commandes suivantes pour assigner des rôles aux utilisateurs :
    </para>
    <variablelist>
     <varlistentry>
      <term>Définir des rôles utilisateur :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Ajouter des rôles supplémentaires à un utilisateur :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Supprimer des rôles d'un utilisateur :</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
    <tip>
     <title>purge des rôles personnalisés</title>
     <para>
      Si vous créez des rôles utilisateur personnalisés et avez l'intention de supprimer ultérieurement la grappe Ceph à l'aide de l'exécuteur <command>ceph.purge</command>, vous devez d'abord purger les rôles personnalisés. Pour plus de détails, reportez-vous à la <xref linkend="ceph-cluster-purge"/>.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="example-create-user-custom-role">
    <title>Exemple : création d'un utilisateur et d'un rôle personnalisé</title>
    <para>
     Cette section illustre une procédure de création d'un compte utilisateur pouvant gérer les images RBD, afficher et créer des réserves Ceph, et accéder en lecture seule à toutes les autres étendues.
    </para>
    <procedure>
     <step>
      <para>
       Créez un utilisateur nommé <literal>tux</literal> :
      </para>
<screen>
 <prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
     </step>
     <step>
      <para>
       Créez un rôle et spécifiez les autorisations d'étendue :
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
     </step>
     <step>
      <para>
       Associez les rôles à l'utilisateur <literal>tux</literal> :
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-proxy-config">
  <title>Configuration du proxy</title>

  <para>
   Si vous souhaitez établir une URL fixe pour accéder à Ceph Dashboard ou si vous ne souhaitez pas autoriser les connexions directes aux noeuds du gestionnaire, vous pouvez configurer un proxy qui transmet automatiquement les requêtes entrantes à l'instance <literal>ceph-mgr</literal> active.
  </para>

  <sect2 xml:id="dashboard-proxy">
   <title>Accès au tableau de bord avec des proxys inverses</title>
   <para>
    Si vous accédez au tableau de bord via une configuration de proxy inverse, vous devrez peut-être le desservir sous un préfixe d'URL. Pour que le tableau de bord utilise des hyperliens qui incluent votre préfixe, vous pouvez définir le paramètre <option>url_prefix</option> :
   </para>
<screen>
  <prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
  </screen>
   <para>
    Ensuite, vous pouvez accéder au tableau de bord à l'adresse <literal>http://<replaceable>NOM_HÔTE</replaceable>:<replaceable>NUMÉRO_PORT</replaceable>/<replaceable>PRÉFIXE_URL</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-disable-redirection">
   <title>Désactivation des réacheminements</title>
   <para>
    Si Ceph Dashboard se trouve derrière un proxy d'équilibrage de la charge tel que HAProxy, désactivez le comportement de redirection pour éviter les situations dans lesquelles les URL internes (impossibles à résoudre) sont publiées sur le client frontal. Utilisez la commande suivante pour que le tableau de bord réponde avec une erreur HTTP (<literal>500</literal> par défaut) au lieu de rediriger vers le tableau de bord actif :
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "error"
</screen>
   <para>
    Pour rétablir le paramètre sur le comportement de redirection par défaut, utilisez la commande suivante :
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "redirect"
</screen>
  </sect2>

  <sect2 xml:id="dashboard-config-error-status">
   <title>Configuration des codes de statut d'erreur</title>
   <para>
    Si le comportement de redirection est désactivé, vous devez personnaliser le code de statut HTTP des tableaux de bord de secours. Pour ce faire, exécutez la commande suivante :
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_error_status_code 503
</screen>
  </sect2>

  <sect2 xml:id="dashboard-haproxy-config">
   <title>Exemple de configuration HAProxy</title>
   <para>
    L'exemple de configuration suivant concerne le passage TLS/SSL à l'aide de HAProxy.
   </para>
   <note>
    <para>
     La configuration fonctionne dans les conditions suivantes : en cas de basculement du tableau de bord, le client frontal peut recevoir une réponse de redirection HTTP (<literal>303</literal>) et être redirigé vers un hôte impossible à résoudre.
    </para>
    <para>
     Cela se produit lorsque le basculement intervient au cours de deux vérifications de l'état de santé HAProxy. Dans cette situation, le noeud de tableau de bord précédemment actif répond alors par un code 303 qui pointe vers le nouveau noeud actif. Pour éviter cela, vous devez envisager de désactiver le comportement de redirection sur les noeuds de secours.
    </para>
   </note>
<screen>
  defaults
    log global
    option log-health-checks
    timeout connect 5s
    timeout client 50s
    timeout server 450s

  frontend dashboard_front
    mode http
    bind *:80
    option httplog
    redirect scheme https code 301 if !{ ssl_fc }

  frontend dashboard_front_ssl
    mode tcp
    bind *:443
    option tcplog
    default_backend dashboard_back_ssl

  backend dashboard_back_ssl
    mode tcp
    option httpchk GET /
    http-check expect status 200
    server x <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server y <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server z <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-auditing">
  <title>Audit des requêtes API</title>

  <para>
   L'API REST de Ceph Dashboard peut consigner les requêtes PUT, POST et DELETE dans le journal d'audit Ceph. La consignation est désactivée par défaut, mais vous pouvez l'activer avec la commande suivante :
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>

  <para>
   Si elle est activée, les paramètres suivants sont consignés pour chaque requête :
  </para>

  <variablelist>
   <varlistentry>
    <term>from</term>
    <listitem>
     <para>
      Origine de la requête, par exemple « https://[::1]:44410 ».
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>path</term>
    <listitem>
     <para>
      Chemin de l'API REST, par exemple <filename>/api/auth</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>method</term>
    <listitem>
     <para>
      « PUT », « POST » ou « DELETE ».
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>user</term>
    <listitem>
     <para>
      Nom de l'utilisateur (ou « Aucun »).
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Un exemple d'entrée de journal ressemble à ceci :
  </para>

<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>

  <tip>
   <title>désactivation de la consignation de la charge utile de requête</title>
   <para>
    La consignation de la charge utile de requête (la liste des arguments et leurs valeurs) est activée par défaut. Vous pouvez la désactiver comme suit :
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
  </tip>
 </sect1>
 <sect1 xml:id="dashboard-config-nfs-ganesha">
  <title>Configuration de NFS Ganesha dans Ceph Dashboard</title>

  <para>
   Ceph Dashboard peut gérer les exportations NFS Ganesha qui utilisent CephFS ou Object Gateway comme backstore. Le tableau de bord gère les fichiers de configuration NFS Ganesha stockés dans des objets RADOS sur la grappe CephFS. NFS Ganesha doit stocker une partie de leur configuration dans la grappe Ceph.
  </para>

  <para>
   Exécutez la commande suivante pour configurer l'emplacement de l'objet de configuration NFS Ganesha :
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>]</screen>

  <para>
   Vous pouvez désormais gérer les exportations NFS Ganesha à l'aide de Ceph Dashboard.
  </para>

  <sect2 xml:id="dashboard-multi-config-nfs-ganesha">
   <title>Configuration de plusieurs grappes NFS Ganesha</title>
   <para>
    Ceph Dashboard prend en charge la gestion des exportations NFS Ganesha appartenant à différentes grappes NFS Ganesha. Il est recommandé que chaque grappe NFS Ganesha stocke ses objets de configuration dans une réserve/un espace de noms RADOS distinct pour isoler les configurations les unes des autres.
   </para>
   <para>
    Utilisez la commande suivante pour spécifier les emplacements de la configuration de chaque grappe NFS Ganesha :
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>](,<replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>])*</screen>
   <para>
    <replaceable>cluster_id</replaceable> est une chaîne arbitraire qui identifie de manière unique la grappe NFS Ganesha.
   </para>
   <para>
    Lors de la configuration de Ceph Dashboard avec plusieurs grappes NFS Ganesha, l'interface utilisateur Web vous permet automatiquement de choisir la grappe à laquelle une exportation appartient.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-debug-plugin">
  <title>Plug-ins de débogage</title>

  <para>
   Les plug-ins Ceph Dashboard étendent les fonctionnalités du tableau de bord. Le plug-in de débogage permet de personnaliser le comportement du tableau de bord en fonction du mode de débogage. Il peut être activé, désactivé ou vérifié à l'aide de la commande suivante :
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug status
Debug: 'disabled'
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug enable
Debug: 'enabled'
<prompt>cephuser@adm &gt; </prompt>dashboard debug disable
Debug: 'disabled'
</screen>

  <para>
   Par défaut, il est désactivé. Il s'agit du paramètre recommandé pour les déploiements de production. Si nécessaire, le mode débogage peut être activé sans redémarrage.
  </para>
 </sect1>
</chapter>
