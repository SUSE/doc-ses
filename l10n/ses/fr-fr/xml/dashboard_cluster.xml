<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_cluster.xml" version="5.0" xml:id="dashboard-cluster">
 <title>Affichage des éléments internes de la grappe</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>oui</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  L'élément de menu <guimenu>Grappe</guimenu> permet d'afficher des informations détaillées sur les hôtes de la grappe Ceph, l'inventaire, les instances Ceph Monitor, les services, les OSD, la configuration, la carte CRUSH, Ceph Manager, les journaux et les fichiers de surveillance.
 </para>
 <sect1 xml:id="dashboard-cluster-hosts">
  <title>Affichage des noeuds de grappe</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Hôtes</guimenu></menuchoice> pour afficher la liste des noeuds de la grappe.
  </para>

  <figure>
   <title>Hôtes</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_hosts.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_hosts.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Cliquez sur la flèche de liste déroulante en regard d'un nom de noeud dans la colonne <guimenu>Nom d'hôte</guimenu> pour afficher les détails des performances du noeud.
  </para>

  <para>
   La colonne <guimenu>Services</guimenu> répertorie tous les daemons qui s'exécutent sur chaque noeud associé. Cliquez sur un nom de daemon pour afficher sa configuration détaillée.
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-inventory">
  <title>Accès à l'inventaire de la grappe</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Inventaire</guimenu></menuchoice> pour afficher la liste des périphériques. La liste inclut le chemin, le type, la disponibilité, le fournisseur, le modèle, la taille et les OSD du périphérique.
  </para>

  <para>
   Cliquez pour sélectionner un nom de noeud dans la colonne <guimenu>Nom d'hôte</guimenu>. Une fois le nom sélectionné, cliquez sur <guimenu>Identifier</guimenu> pour identifier le périphérique sur lequel l'hôte s'exécute. Cela indique au périphérique de faire clignoter ses voyants. Sélectionnez la durée de cette opération entre 1, 2, 5, 10 et 15 minutes. Cliquez sur <guimenu>Exécuter</guimenu>.
  </para>

  <figure>
   <title>Services</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_inventory.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_inventory.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-monitors">
  <title>Affichage des instances Ceph Monitor</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Moniteurs</guimenu></menuchoice> pour afficher la liste des noeuds de la grappe hébergeant des moniteurs Ceph en cours d'exécution. Le volet de contenu est divisé en deux vues : <literal>Statut</literal> et <literal>Dans le quorum</literal> ou <literal>Hors quorum</literal>.
  </para>

  <para>
   Le tableau <guimenu>Statut</guimenu> affiche des statistiques générales sur les instances Ceph Monitor en cours d'exécution, notamment les informations suivantes :
  </para>

  <itemizedlist>
   <listitem>
    <para>
     ID de grappe
    </para>
   </listitem>
   <listitem>
    <para>
     monmap modifié
    </para>
   </listitem>
   <listitem>
    <para>
     monmap epoch
    </para>
   </listitem>
   <listitem>
    <para>
     quorum con
    </para>
   </listitem>
   <listitem>
    <para>
     quorum mon
    </para>
   </listitem>
   <listitem>
    <para>
     required con
    </para>
   </listitem>
   <listitem>
    <para>
     required mon
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Les volets <literal>Dans le quorum</literal> et <literal>Hors quorum</literal> incluent le nom de chaque moniteur, son numéro de rang, son adresse IP publique et le nombre de sessions ouvertes.
  </para>

  <para>
   Cliquez sur un nom de noeud dans la colonne <guimenu>Nom</guimenu> pour afficher la configuration Ceph Monitor associée.
  </para>

  <figure>
   <title>Ceph Monitor</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_mons.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_mons.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-services">
  <title>Affichage des services</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Services</guimenu></menuchoice> pour afficher les détails de chacun des services disponibles : <literal>crash</literal>, Ceph Manager et les instances Ceph Monitor. La liste inclut le nom et l'ID de l'image du conteneur, le statut de ce qui est en cours d'exécution, la taille et la date du dernier rafraîchissement.
  </para>

  <para>
   Cliquez sur la flèche de liste déroulante en regard d'un nom de service dans la colonne <guimenu>Service</guimenu> pour afficher les détails du daemon. La liste détaillée inclut le nom d'hôte, le type et l'ID du daemon, l'ID du conteneur, le nom et l'ID de l'image du conteneur, le numéro de version, le statut et la date du dernier rafraîchissement.
  </para>

  <figure>
   <title>Services</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_services.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_services.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-osds">
  <title>Affichage des OSD Ceph</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>OSD</guimenu></menuchoice> pour afficher la liste des noeuds hébergeant des daemons OSD en cours d'exécution. La liste comprend, pour chaque noeud, le nom, l'ID, le statut, la classe de périphérique, le nombre de groupes de placements, la taille, l'utilisation, un graphique des octets de lecture/d'écriture dans le temps, ainsi que le taux d'opérations de lecture/écriture par seconde.
  </para>

  <figure>
   <title>Instances Ceph OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Sélectionnez <guimenu>Drapeaux</guimenu> dans le menu déroulant de <guimenu>configuration de la grappe</guimenu> dans l'en-tête du tableau pour ouvrir une fenêtre contextuelle. Elle contient une liste des drapeaux qui s'appliquent à l'ensemble de la grappe. Vous pouvez activer ou désactiver des drapeaux individuels et confirmer avec le bouton <guimenu>Soumettre</guimenu>.
  </para>

  <figure>
   <title>Drapeaux OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Sélectionnez <guimenu>Priorité de récupération</guimenu> dans le menu déroulant de <guimenu>configuration de la grappe</guimenu> dans l'en-tête du tableau pour ouvrir une fenêtre contextuelle. Elle contient une liste des priorité de récupération des OSD qui s'appliquent à l'ensemble de la grappe. Vous pouvez activer le profil de priorité préféré et affiner les différentes valeurs ci-dessous. Confirmez en cliquant sur <guimenu>Soumettre</guimenu>.
  </para>

  <figure>
   <title>Priorité de récupération des OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Cliquez sur la flèche de liste déroulante en regard d'un nom de noeud dans la colonne <guimenu>Hôte</guimenu> pour afficher un tableau étendu avec des détails sur les paramètres et les performances des périphériques. En parcourant plusieurs onglets, vous pouvez voir les listes <guimenu>Attributs</guimenu>, <guimenu>Métadonnées</guimenu>, <guimenu>Santé du périphérique</guimenu>, <guimenu>Compteur de performance</guimenu>, ainsi qu'un <guimenu>Histogramme</guimenu> graphique des opérations de lecture et d'écriture et les <guimenu>Détails des performances</guimenu>.
  </para>

  <figure>
   <title>Détails des OSD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_osd_details.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_osd_details.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <tip>
   <title>exécution de tâches spécifiques sur les OSD</title>
   <para>
    Une fois que vous avez cliqué sur un nom de noeud OSD, la ligne du tableau est mise en surbrillance. Cela signifie que vous pouvez désormais effectuer une tâche sur le noeud. Vous pouvez choisir d'effectuer l'une des opérations suivantes : <guimenu>Modifier</guimenu>, <guimenu>Créer</guimenu>, <guimenu>Nettoyer</guimenu>, <guimenu>Nettoyage en profondeur</guimenu>, <guimenu>Réévaluer</guimenu>, <guimenu>Marquer comme sorti</guimenu>, <guimenu>Marquer comme rentré</guimenu>, <guimenu>Marquer comme arrêté</guimenu>, <guimenu>Marquer comme perdu</guimenu>, <guimenu>Purger</guimenu>, <guimenu>Détruire</guimenu> ou <guimenu>Supprimer</guimenu>.
   </para>
   <para>
    Cliquez sur la flèche vers le bas en haut à gauche de l'en-tête du tableau à côté du bouton <guimenu>Créer</guimenu> et sélectionnez la tâche à effectuer.
   </para>
  </tip>

  <sect2 xml:id="dashboard-cluster-osds-add">
   <title>Ajout d'OSD</title>
   <para>
    Pour ajouter de nouveaux OSD, procédez comme suit :
   </para>
   <procedure>
    <step>
     <para>
      Vérifiez que certains noeuds de la grappe disposent de périphériques de stockage dont le statut est <literal>Disponible</literal>. Cliquez ensuite sur la flèche vers le bas en haut à gauche de l'en-tête du tableau et sélectionnez <guimenu>Créer</guimenu>. Cela ouvre la fenêtre <guimenu>Créer des OSD</guimenu>.
     </para>
     <figure>
      <title>Créer des OSD</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Pour ajouter des périphériques de stockage principaux pour les OSD, cliquez sur <guimenu>Ajouter</guimenu>. Avant de pouvoir ajouter des périphériques de stockage, vous devez spécifier des critères de filtrage en haut à droite du tableau <guimenu>Périphériques principaux</guimenu>, par exemple <guimenu>Type</guimenu> <guimenu>disque dur</guimenu>. Cliquez sur <guimenu>Ajouter</guimenu> pour confirmer.
     </para>
     <figure>
      <title>Ajout de périphériques principaux</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Dans la fenêtre <guimenu>Créer des OSD</guimenu> mise à jour, ajoutez éventuellement des périphériques WAL et BD partagés, ou activez le chiffrement des périphériques.
     </para>
     <figure>
      <title>Création d'OSD avec des périphériques principaux ajoutés</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_created.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_created.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Cliquez sur <guimenu>Aperçu</guimenu> pour afficher l'aperçu des spécifications DriveGroups pour les périphériques ajoutés précédemment. Confirmez en cliquant sur <guimenu>Créer</guimenu>.
     </para>
     <figure>
      <title/>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_preview.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_preview.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Les nouveaux périphériques seront ajoutés à la liste des OSD.
     </para>
     <figure>
      <title>OSD nouvellement ajoutés</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="dash_osd_add_primary_added.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="dash_osd_add_primary_added.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <note>
      <para>
       Il n'y a pas de visualisation de la progression du processus de création des OSD. Leur création prend un certain temps. Les OSD apparaissent dans la liste lorsqu'ils ont été déployés. Si vous souhaitez vérifier le statut du déploiement, affichez les journaux en cliquant sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Journaux</guimenu></menuchoice>.
      </para>
     </note>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster-config">
  <title>Affichage de la configuration de la grappe</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Configuration</guimenu></menuchoice>pour afficher une liste complète des options de configuration de la grappe Ceph. La liste contient le nom de l'option, sa brève description et ses valeurs actuelles et par défaut, et indique si l'option est modifiable.
  </para>

  <figure>
   <title>Configuration de la grappe</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_cluster_config.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_cluster_config.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Cliquez sur la flèche de liste déroulante en regard d'une option de configuration dans la colonne <guimenu>Nom</guimenu> pour afficher un tableau étendu avec des informations détaillées sur l'option, telles que son type de valeur, les valeurs minimales et maximales autorisées, si elle peut être mise à jour au moment de l'exécution, etc.
  </para>

  <para>
   Lorsqu'une option spécifique est mise en surbrillance, vous pouvez éditer sa ou ses valeurs en cliquant sur le bouton <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau. Confirmez les modifications en cliquant sur <guimenu>Enregistrer</guimenu>.
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-crushmap">
  <title>Affichage de la carte CRUSH</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Carte CRUSH</guimenu></menuchoice> pour afficher une carte CRUSH de la grappe. Pour plus d'informations générales sur les cartes CRUSH, reportez-vous à la <xref linkend="op-crush"/>.
  </para>

  <para>
   Cliquez sur la racine, les noeuds ou des OSD spécifiques pour afficher des informations plus détaillées, telles que la pondération CRUSH, la profondeur dans l'arborescence de la carte, la classe de périphérique de l'OSD, etc.
  </para>

  <figure>
   <title>Carte CRUSH</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_crushmap.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_crushmap.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-mgr-plugins">
  <title>Affichage des modules Manager</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Modules Manager</guimenu></menuchoice> pour afficher une liste des modules Ceph Manager disponibles. Chaque ligne reprend un nom de module et indique s'il est actuellement activé ou non.
  </para>

  <figure>
   <title>Modules Manager</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_mgr_modules.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_mgr_modules.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Cliquez sur la flèche de liste déroulante en regard d'un module dans la colonne <guimenu>Nom</guimenu> pour afficher un tableau étendu avec des paramètres détaillés dans le tableau <guimenu>Détails</guimenu> ci-dessous. Pour les éditer, cliquez sur <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau. Confirmez les modification en cliquant sur <guimenu>Mise à jour</guimenu>.
  </para>

  <para>
   Cliquez sur la flèche de la liste déroulante en regard du bouton <guimenu>Modifier</guimenu> en haut à gauche de l'en-tête du tableau pour <guimenu>Activer</guimenu> ou <guimenu>Désactiver</guimenu> un module.
  </para>
 </sect1>
 <sect1 xml:id="dashboard-cluster-logs">
  <title>Affichage des journaux</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Journaux</guimenu></menuchoice> pour afficher une liste des entrées de journal récentes de la grappe. Chaque ligne comprend un tampon horaire, le type de l'entrée de journal et le message consigné.
  </para>

  <para>
   Cliquez sur l'onglet <guimenu>Journaux d'audit</guimenu> pour afficher les entrées de journal du sous-système d'audit. Reportez-vous à la <xref linkend="dashboard-auditing"/> pour connaître les commandes permettant d'activer ou de désactiver les audits.
  </para>

  <figure>
   <title>Journaux</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_logs.png" width="80%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_logs.png" width="80%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="dashboard-cluster-monitoring">
  <title>Affichage de la surveillance</title>

  <para>
   Cliquez sur <menuchoice><guimenu>Grappe</guimenu><guimenu>Surveillance</guimenu></menuchoice>pour gérer et afficher les détails des alertes Prometheus.
  </para>

  <para>
   Si Prometheus est actif, dans ce volet de contenu, vous pouvez afficher des informations détaillées sur les <guimenu>Alertes actives</guimenu>, <guimenu>Toutes les alertes</guimenu> ou les <guimenu>Silences</guimenu>.
  </para>

  <note>
   <para>
    Si Prometheus n'est pas déployé, une bannière d'information apparaît avec un lien vers la documentation appropriée.
   </para>
  </note>
 </sect1>
</chapter>
