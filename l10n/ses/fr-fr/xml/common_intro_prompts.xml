<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="common_intro_prompts.xml" version="5.0">
 <title>Commandes et invites de commande utilisées dans ce guide</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>

 <para>
  En tant qu&apos;administrateur de grappe Ceph, vous configurez et ajustez le comportement de la grappe en exécutant des commandes spécifiques. Il existe plusieurs types de commandes dont vous avez besoin :
 </para>

 <sect2>
  <title>Commandes associées à Salt</title>
  <para>
   Ces commandes vous aident à déployer des noeuds de grappe Ceph, à exécuter des commandes simultanément sur plusieurs noeuds de la grappe (ou tous), ou à ajouter ou supprimer des noeuds de la grappe. Les commandes les plus fréquemment utilisées sont <command>ceph-salt</command> et <command>ceph-salt config</command>. Vous devez exécuter les commandes Salt sur le noeud Salt Master en tant qu&apos;utilisateur <systemitem class="username">root</systemitem>. Ces commandes sont introduites avec l&apos;invite suivante :
  </para>
<screen>
<prompt>root@master # </prompt>
</screen>
  <para>
   Par exemple :
  </para>
<screen>
<prompt>root@master # </prompt>ceph-salt config ls
</screen>
 </sect2>

 <sect2>
  <title>Commandes associées à Ceph</title>
  <para>
   Il s&apos;agit de commandes de niveau inférieur permettant de configurer et d&apos;affiner tous les aspects de la grappe et de ses passerelles sur la ligne de commande, par exemple <command>ceph</command>, <command>cephadm</command>, <command>rbd</command> ou <command>radosgw-admin</command>.
  </para>
  <para>
   Pour exécuter les commandes associées à Ceph, vous devez disposé d&apos;un accès en lecture à une clé Ceph. Les fonctionnalités de la clé définissent alors vos privilèges au sein de l&apos;environnement Ceph. Une option consiste à exécuter les commandes Ceph en tant qu&apos;utilisateur <systemitem class="username">root</systemitem> (ou via <command>sudo</command>) et à employer le trousseau de clés par défaut sans restriction « ceph.client.admin.key ».
  </para>
  <para>
   L&apos;option plus sûre et recommandée consiste à créer une clé individuelle plus restrictive pour chaque administrateur et à la placer dans un répertoire où les utilisateurs peuvent la lire, par exemple :
  </para>
<screen>~/.ceph/ceph.client.<replaceable>USERNAME</replaceable>.keyring</screen>
  <tip>
   <title>chemin des clés Ceph</title>
   <para>
    Pour utiliser un administrateur et un trousseau de clés personnalisés, vous devez spécifier le nom d&apos;utilisateur et le chemin d&apos;accès à la clé chaque fois que vous exécutez la commande <command>ceph</command> à l&apos;aide des options <option>-n client.<replaceable>NOM_UTILISATEUR</replaceable></option> et <option>--keyring <replaceable>CHEMIN/VERS/TROUSSEAU</replaceable></option>.
   </para>
   <para>
    Pour éviter cela, incluez ces options dans la variable <varname>CEPH_ARGS</varname> des fichiers <filename>~/.bashrc</filename> des différents utilisateurs.
   </para>
  </tip>
  <para>
   Bien que vous puissiez exécuter les commandes associées à Ceph sur n&apos;importe quel noeud de la grappe, nous vous recommandons de les lancer sur le noeud Admin. Dans cette documentation, nous employons l&apos;utilisateur <systemitem class="username">cephuser</systemitem> pour exécuter les commandes. Elles sont donc introduites avec l&apos;invite suivante :
  </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>
</screen>
  <para>
   Par exemple :
  </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph auth list
</screen>
  <tip>
   <title>commandes de noeuds spécifiques</title>
   <para>
    Si la documentation vous demande d&apos;exécuter une commande sur un noeud de la grappe avec un rôle spécifique, cela sera réglé par l&apos;invite. Par exemple :
   </para>
<screen>
<prompt>cephuser@mon &gt; </prompt>
</screen>
  </tip>
  <sect3>
   <title>Exécution de <command>ceph-volume</command></title>
   <para>
    À partir de SUSE Enterprise Storage 7, les services Ceph s&apos;exécutent de manière conteneurisée. Si vous devez exécuter <command>ceph-volume</command> sur un noeud OSD, vous devez l&apos;ajouter au début de la commande <command>cephadm</command>, par exemple :
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>cephadm ceph-volume simple scan</screen>
  </sect3>
 </sect2>

 <sect2>
  <title>Commandes Linux générales</title>
  <para>
   Les commandes Linux non associées à Ceph, telles que <command>mount</command>, <command>cat</command> ou <command>openssl</command>, sont introduites avec les invites <prompt>cephuser@adm &gt;</prompt> ou <prompt role="root"> #</prompt>, selon les privilèges que la commande concernée nécessite.
  </para>
 </sect2>

 <sect2>
  <title>Informations supplémentaires</title>
  <para>
   Pour plus d&apos;informations sur la gestion des clés Ceph, reportez-vous à la <xref linkend="storage-cephx-keymgmt"/>.
  </para>
 </sect2>
</sect1>
