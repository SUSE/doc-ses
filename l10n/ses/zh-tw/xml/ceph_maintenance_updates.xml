<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_maintenance_updates.xml" version="5.0">
 <title>以上游「Octopus」小數點版本為基礎的 Ceph 維護更新</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>是</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  SUSE Enterprise Storage 7 中的幾個關鍵套件均以 Ceph 的 Octopus 版本系列為基礎。當 Ceph 專案 (<link xlink:href="https://github.com/ceph/ceph"/>) 在 Octopus 系列中發佈新的小數點版本時，SUSE Enterprise Storage 7 即會更新，以確保產品套用最新的上游錯誤修復並可進行功能向後移植。
 </para>
 <para>
  本章簡要介紹有關已經或計劃在產品中包含的每個上游小數點版本中的重要變更。
 </para>
 <bridgehead renderas="sect1">Octopus 15.2.5 小數點版本</bridgehead>
 <para>
  Octopus 15.2.5 小數點版本引入了以下修復和其他變更：
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CephFS：現在可以使用目錄上新的分散式和隨機暫時關聯延伸屬性來設定自動靜態子樹分割規則。如需詳細資訊，請參閱以下文件：<link xlink:href="https://docs.ceph.com/docs/master/cephfs/multimds/"/>
   </para>
  </listitem>
  <listitem>
   <para>
    監控程式現有一個組態選項 <option>mon_osd_warn_num_repaired</option>，該選項預設設定為 10。如果任何 OSD 修復的儲存資料中的 I/O 錯誤數超過此數量，則會產生 <literal>OSD_TOO_MANY_REPAIRS</literal> 狀況警告。
   </para>
  </listitem>
  <listitem>
   <para>
    現在，如果在全域或在池層級設定了 <literal>no scrub</literal> 和/或 <literal>no deep-scrub</literal> 旗標，將中止已停用類型的排程整理。所有使用者啟動的整理將不會中斷。
   </para>
  </listitem>
  <listitem>
   <para>
    修復了在狀態良好的叢集中不會修剪 osdmaps 的問題。
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.4 小數點版本</bridgehead>
 <para>
  Octopus 15.2.4 小數點版本引入了以下修復和其他變更：
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10753：rgw: 處理 s3 CORSConfiguration 的 ExposeHeader 中的換行
   </para>
  </listitem>
  <listitem>
   <para>
    物件閘道：處理未同步分割區的 <command>radosgw-admin</command> 子指令 (<command>radosgw-admin orphans find</command>、<command>radosgw-admin orphans finish</command> 和 <command>radosgw-admin orphans list-jobs</command>) 已被取代。並不會主動維護這些子指令，並且由於它們會在叢集上儲存中間結果，因此可能會填入幾乎已滿的叢集。這些子指令已被工具 <command>rgw-orphan-list</command> 取代，該工具目前被視為是實驗性工具。
   </para>
  </listitem>
  <listitem>
   <para>
    RBD：用於儲存 RBD 垃圾桶清除排程的 RBD 池物件的名稱已由 <literal>rbd_trash_trash_purge_schedule</literal> 變更為 <literal>rbd_trash_purge_schedule</literal>。已開始使用 RBD 垃圾桶清除排程功能並設定了每個池或名稱空間排程的使用者，應在升級前將 <literal>rbd_trash_trash_purge_schedule</literal> 物件複製到 <literal>rbd_trash_purge_schedule</literal>，並在先前設定了垃圾桶清除排程的每個 RBD 池和名稱空間中使用以下指令移除 <literal>rbd_trash_purge_schedule</literal>：
   </para>
<screen>
rados -p <replaceable>pool-name</replaceable> [-N namespace] cp rbd_trash_trash_purge_schedule rbd_trash_purge_schedule
rados -p <replaceable>pool-name</replaceable> [-N namespace] rm rbd_trash_trash_purge_schedule
</screen>
   <para>
    或者，使用任何其他簡便方法在升級後還原排程。
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.3 小數點版本</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    Octopus 15.2.3 小數點版本是一個 Hotfix 版本，用於解決在同時啟用 <option>bluefs_preextend_wal_files</option> 和 <option>bluefs_buffered_io</option> 時發生的 WAL 損毀問題。15.2.3 中的修復只是一種暫時性措施 (將 <option>bluefs_preextend_wal_files</option> 的預設值變更為 <literal>false</literal>)。永久性的修復將是完全移除 <option>bluefs_preextend_wal_files</option> 選項：此修復很可能會在 15.2.6 小數點版本中實現。
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.2 小數點版本</bridgehead>
 <para>
  Octopus 15.2.2 小數點版本修補了一個安全性弱點：
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10736：修復了 MON 和 MGR 中的授權繞過問題
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.1 小數點版本</bridgehead>
 <para>
  Octopus 15.2.1 小數點版本修復了從 Luminous (SES5.5) 到 Nautilus (SES6) 再到 Octopus (SES7) 的快速升級導致 OSD 當機的問題。此外，它還修補了 Octopus (15.2.0) 初始版本中存在的兩個安全性弱點：
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-1759：修復了 msgrv2 安全模式下的 nonce 重複使用
   </para>
  </listitem>
  <listitem>
   <para>
    CVE-2020-1760：修復了由於 RGW GetObject 標題分割而導致的 XSS
   </para>
  </listitem>
 </itemizedlist>
</appendix>
