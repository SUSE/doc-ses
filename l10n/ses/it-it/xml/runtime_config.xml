<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="runtime_config.xml" version="5.0" xml:id="cha-ceph-configuration">
 <title>Configurazione del cluster Ceph</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sì</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Questo capitolo descrive come configurare il cluster Ceph utilizzando le opzioni apposite.
 </para>
 <sect1 xml:id="cha-ceph-configuration-ceph-conf">
  <title>Configurazione del file <filename>ceph.conf</filename></title>

  <para>
   cephadm utilizza un file <filename>ceph.conf</filename> di base che contiene soltanto un insieme minimo di opzioni per la connessione ai MON, l'autenticazione e il recupero delle informazioni di configurazione. Nella maggior parte dei casi, ciò è limitato all'opzione <option>mon_host</option> (anche se è possibile evitarlo utilizzando i record DNS SRV).
  </para>

  <important>
   <para>
    Il file <filename>ceph.conf</filename> non funge più da posizione centrale per la memorizzazione della configurazione del cluster, a favore del database di configurazione (vedere la <xref linkend="cha-ceph-configuration-db"/>).
   </para>
   <para>
    Se tuttavia è necessario modificare la configurazione del cluster tramite il file <filename>ceph.conf</filename>, ad esempio perché si utilizza un client che non è in grado di supportare le opzioni di lettura dal database di configurazione, è necessario eseguire il comando seguente e mantenere e distribuire il file <filename>ceph.conf</filename> nell'intero cluster:
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/cephadm/manage_etc_ceph_ceph_conf false</screen>
  </important>

  <sect2 xml:id="cha-ceph-configuration-ceph-conf-containers">
   <title>Accesso a <filename>ceph.conf</filename> nelle immagini del container</title>
   <para>
    Nonostante i daemon Ceph vengano eseguiti all'interno dei container, è possibile comunque accedere al relativo file di configurazione <filename>ceph.conf</filename>, <emphasis>montato in bind mount</emphasis>, come il file seguente sul sistema host:
   </para>
<screen>/var/lib/ceph/<replaceable>CLUSTER_FSID</replaceable>/<replaceable>DAEMON_NAME</replaceable>/config</screen>
   <para>
    Sostituire <replaceable>CLUSTER_FSID</replaceable> con l'FSID univoco del cluster in esecuzione così come restituito dal comando <command>ceph fsid</command> e <replaceable>DAEMON_NAME</replaceable> con il nome del daemon specifico così come riportato dal comando <command>ceph orch ps</command>. Esempio:
   </para>
<screen>/var/lib/ceph/b4b30c6e-9681-11ea-ac39-525400d7702d/osd.2/config</screen>
   <para>
    Per modificare la configurazione di un daemon, modificare il relativo file <filename>config</filename> e riavviarlo:
   </para>
<screen><prompt role="root">root # </prompt>systemctl restart ceph-<replaceable>CLUSTER_FSID</replaceable>-<replaceable>DAEMON_NAME</replaceable></screen>
   <para>
    Esempio:
   </para>
<screen><prompt role="root">root # </prompt>systemctl restart ceph-b4b30c6e-9681-11ea-ac39-525400d7702d-osd.2</screen>
   <important>
    <para>
     Tutte le impostazioni personalizzate andranno perse dopo che cephadm ripeterà la distribuzione del daemon.
    </para>
   </important>
  </sect2>
 </sect1>
 <sect1 xml:id="cha-ceph-configuration-db">
  <title>Database di configurazione</title>

  <para>
   I Ceph Monitor gestiscono un database centrale delle opzioni di configurazione che influiscono sul comportamento dell'intero cluster.
  </para>

  <sect2 xml:id="cha-ceph-configuration-db-sections">
   <title>Sezioni e maschere di configurazione</title>
   <para>
    Le opzioni di configurazione archiviate dal MON possono risiedere in una sezione <emphasis>globale</emphasis> oppure in una sezione del <emphasis>tipo di daemon</emphasis> o di un <emphasis>daemon specifico</emphasis>. Le opzioni possono disporre inoltre di una <emphasis>maschera</emphasis> associata per limitare ulteriormente i daemon o i client a cui sono applicate. Le maschere presentano due forme:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      <replaceable>TYPE</replaceable>:<replaceable>LOCATION</replaceable>, dove <replaceable>TYPE</replaceable> indica una proprietà CRUSH, come <literal>rack</literal> oppure <literal>host</literal>, e <replaceable>LOCATION</replaceable> indica un valore relativo a tale proprietà.
     </para>
     <para>
      Ad esempio, <literal>host:example_host</literal> limiterà l'opzione soltanto ai daemon o ai client in esecuzione su un determinato host.
     </para>
    </listitem>
    <listitem>
     <para>
      <replaceable>CLASS</replaceable>:<replaceable>DEVICE_CLASS</replaceable>, dove <replaceable>DEVICE_CLASS</replaceable> indica il nome di una classe di dispositivi CRUSH, come <literal>hdd</literal> o <literal>ssd</literal>. Ad esempio, <literal>class:ssd</literal> limiterà l'opzione soltanto agli OSD supportati dai dispositivi SSD. Questa maschera non ha alcun effetto sui daemon o i client non OSD.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="cha-ceph-configuration-db-commands">
   <title>Impostazione e lettura delle opzioni di configurazione</title>
   <para>
    Utilizzare i comandi seguenti per impostare o leggere le opzioni di configurazione del cluster. Il parametro <replaceable>WHO</replaceable> può essere il nome di una sezione, una maschera o entrambe, separate da una barra (/). Ad esempio, <literal>osd/rack:foo</literal> rappresenta tutti i daemon OSD nel rack denominato <literal>foo</literal>.
   </para>
   <variablelist>
    <varlistentry>
     <term><command>ceph config dump</command></term>
     <listitem>
      <para>
       Esegue il dump di tutto il database di configurazione per l'intero cluster.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>ceph config get <replaceable>WHO</replaceable></command></term>
     <listitem>
      <para>
       Esegue il dump della configurazione per un daemon o client specifico (ad esempio, <literal>mds.a</literal>) archiviato nel database di configurazione.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>ceph config set <replaceable>WHO</replaceable> <replaceable>OPTION</replaceable> <replaceable>VALUE</replaceable></command></term>
     <listitem>
      <para>
       Imposta l'opzione di configurazione sul valore specificato nel database di configurazione.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>ceph config show <replaceable>WHO</replaceable></command></term>
     <listitem>
      <para>
       Mostra la configurazione in esecuzione segnalata per un daemon in esecuzione. Se sono in uso anche dei file di configurazione locali o se le opzioni sono state sostituite nella riga di comando o al runtime, queste impostazioni possono differire da quelle archiviate dai monitor. L'origine dei valori di opzione è riportata come parte dell'output.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>ceph config assimilate-conf -i <replaceable>INPUT_FILE</replaceable> -o <replaceable>OUTPUT_FILE</replaceable></command></term>
     <listitem>
      <para>
       Importa un file di configurazione specificato come <replaceable>INPUT_FILE</replaceable> e archivia le opzioni valide nel database di configurazione. Le impostazioni non riconosciute, non valide o che non possono essere controllate dal monitor verranno restituite in un file abbreviato archiviato come <replaceable>OUTPUT_FILE</replaceable>. Questo comando è utile per eseguire la transizione dai file di configurazione esistenti alla configurazione centralizzata basata su monitor.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="cha-ceph-configuration-db-runtime">
   <title>Configurazione dei daemon al runtime</title>
   <para>
    Nella maggior parte dei casi, Ceph consente di apportare modifiche alla configurazione di un daemon al runtime. Ciò è utile, ad esempio, se è necessario aumentare o diminuire il numero di output di log o durante l'ottimizzazione del cluster di runtime.
   </para>
   <para>
    È possibile aggiornare i valori delle opzioni di configurazione con il comando seguente:
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph config set <replaceable>DAEMON</replaceable> <replaceable>OPTION</replaceable> <replaceable>VALUE</replaceable></screen>
   <para>
    Ad esempio, per regolare il livello di log di debug su un OSD specifico, eseguire:
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph config set osd.123 debug_ms 20</screen>
   <note>
    <para>
     Se la stessa opzione è personalizzata anche in un file di configurazione locale, l'impostazione del monitor verrà ignorata poiché ha un livello di priorità inferiore rispetto al file di configurazione.
    </para>
   </note>
   <sect3 xml:id="cha-ceph-configuration-db-runtime-override">
    <title>Sostituzione dei valori</title>
    <para>
     È possibile modificare temporaneamente un valore di opzione tramite i sottocomandi <command>tell</command> o <command>daemon</command>. Tale modifica influisce soltanto sul processo in esecuzione e viene eliminata in seguito al riavvio del daemon o del processo.
    </para>
    <para>
     Esistono due modi per sostituire i valori:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Utilizzare il sottocomando <command>tell</command> per inviare un messaggio a un daemon specifico da un qualsiasi nodo del cluster:
      </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph tell <replaceable>DAEMON</replaceable> config set <replaceable>OPTION</replaceable> <replaceable>VALUE</replaceable></screen>
      <para>
       Esempio:
      </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph tell osd.123 config set debug_osd 20</screen>
      <tip>
       <para>
        Il sottocomando <command>tell</command> accetta i caratteri jolly come identificatori del daemon. Ad esempio, per regolare il livello di debug su tutti i daemon OSD, eseguire:
       </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph tell osd.* config set debug_osd 20</screen>
      </tip>
     </listitem>
     <listitem>
      <para>
       Utilizzare il sottocomando <command>daemon</command> per connettersi a un processo del daemon specifico tramite un socket in <filename>/var/run/ceph</filename> dal nodo su cui è in esecuzione il processo:
      </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph daemon <replaceable>DAEMON</replaceable> config set <replaceable>OPTION</replaceable> <replaceable>VALUE</replaceable></screen>
      <para>
       Esempio:
      </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph daemon osd.4 config set debug_osd 20</screen>
     </listitem>
    </itemizedlist>
    <tip>
     <para>
      Durante la visualizzazione delle impostazioni di runtime con il comando <command>ceph config show</command> (vedere la <xref linkend="cha-ceph-configuration-db-runtime-view"/>), i valori temporaneamente sostituiti vengono mostrati con un valore <literal>override</literal> di origine.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="cha-ceph-configuration-db-runtime-view">
    <title>Visualizzazione delle impostazioni di runtime</title>
    <para>
     Per visualizzare tutte le opzioni impostate per un daemon:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph config show-with-defaults osd.0</screen>
    <para>
     Per visualizzare tutte le opzioni non di default impostate per un daemon:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph config show osd.0</screen>
    <para>
     Per ispezionare un'opzione specifica:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph config show osd.0 debug_osd</screen>
    <para>
     È possibile inoltre connettersi a un daemon in esecuzione dal nodo su cui è in esecuzione tale processo e osservarne la configurazione:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph daemon osd.0 config show</screen>
    <para>
     Per visualizzare soltanto le impostazioni non di default:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph daemon osd.0 config diff</screen>
    <para>
     Per ispezionare un'opzione specifica:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph daemon osd.0 config get debug_osd</screen>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="cha-ceph-config-key-store">
  <title>Archivio <systemitem class="resource">config-key</systemitem></title>

  <para>
   <systemitem class="resource">config-key</systemitem> è un servizio per utilizzo generico offerto dai Ceph Monitor. Semplifica la gestione delle chiavi di configurazione tramite la memorizzazione permanente delle coppie di chiave-valore. <systemitem class="resource">config-key</systemitem> è utilizzato principalmente dagli strumenti e dai daemon Ceph.
  </para>

  <tip>
   <para>
    Dopo aver aggiunto una nuova chiave o averne modificata una esistente, riavviare il servizio interessato per applicare le modifiche. Nel <xref linkend="cha-ceph-operating"/> è possibile trovare ulteriori dettagli sull'attivazione dei servizi Ceph.
   </para>
  </tip>

  <para>
   Utilizzare il comando <command>config-key</command> per eseguire l'archivio <systemitem class="resource">config-key</systemitem>. Il comando <command>config-key</command> utilizza i sottocomandi seguenti:
  </para>

  <variablelist>
   <varlistentry>
    <term><command>ceph config-key rm <replaceable>KEY</replaceable></command></term>
    <listitem>
     <para>
      Elimina la chiave specificata.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>ceph config-key exists <replaceable>KEY</replaceable></command></term>
    <listitem>
     <para>
      Verifica la presenza della chiave specificata.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>ceph config-key get <replaceable>KEY</replaceable></command></term>
    <listitem>
     <para>
      Recupera il valore della chiave specificata.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>ceph config-key ls</command></term>
    <listitem>
     <para>
      Elenca tutte le chiavi.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>ceph config-key dump</command></term>
    <listitem>
     <para>
      Esegue il dump di tutte le chiavi e dei relativi valori.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>ceph config-key set <replaceable>KEY</replaceable> <replaceable>VALUE</replaceable></command></term>
    <listitem>
     <para>
      Archivia la chiave specificata con il valore specificato.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <sect2 xml:id="cha-ceph-config-key-store-iscsi">
   <title>iSCSI Gateway</title>
   <para>
    iSCSI Gateway utilizza l'archivio <systemitem class="resource">config-key</systemitem> per salvare o leggere le relative opzioni di configurazione. Tutte le chiavi relative a iSCSI Gateway dispongono del prefisso <literal>iscsi</literal>, ad esempio:
   </para>
<screen>
iscsi/trusted_ip_list
iscsi/api_port
iscsi/api_user
iscsi/api_password
iscsi/api_secure
</screen>
   <para>
    Se ad esempio sono necessari due insiemi di opzioni di configurazione, estendere il prefisso con un'altra parola chiave descrittiva, come <literal>datacenterA</literal> e <literal>datacenterB</literal>:
   </para>
<screen>
iscsi/datacenterA/trusted_ip_list
iscsi/datacenterA/api_port
[...]
iscsi/datacenterB/trusted_ip_list
iscsi/datacenterB/api_port
[...]
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="config-osd-and-bluestore">
  <title>Ceph OSD e BlueStore</title>

  <sect2 xml:id="config-auto-cache-sizing">
   <title>Configurazione del ridimensionamento automatico della cache</title>
   <para>
    È possibile configurare BlueStore sul ridimensionamento automatico delle cache se <option>tc_malloc</option> è configurato come allocatore di memoria e l'impostazione <option>bluestore_cache_autotune</option> è abilitata. Attualmente, questa opzione è abilitata per default. BlueStore tenterà di mantenere l'utilizzo della memoria heap dell'OSD al di sotto delle dimensioni di destinazione definite tramite l'opzione di configurazione <option>osd_memory_target</option>. Si tratta di un algoritmo best-effort e le cache non si ridurranno oltre le dimensioni specificate da <option>osd_memory_cache_min</option>. I rapporti della cache verranno selezionati in base a una gerarchia di priorità. Se le informazioni di priorità non sono disponibili, vengono utilizzate come fallback le opzioni <option>bluestore_cache_meta_ratio</option> e <option>bluestore_cache_kv_ratio</option>.
   </para>
   <variablelist>
    <varlistentry>
     <term>bluestore_cache_autotune</term>
     <listitem>
      <para>
       Ottimizza automaticamente i rapporti assegnati a diverse cache BlueStore restando nei valori minimi. L'impostazione di default è <option>True</option>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd_memory_target</term>
     <listitem>
      <para>
       Se <option>tc_malloc</option> e <option>bluestore_cache_autotune</option> sono abilitate, cerca di mantenere questo numero di byte mappati alla memoria.
      </para>
      <note>
       <para>
        Questo numero potrebbe non corrispondere esattamente all'utilizzo della memoria RSS del processo. Anche se di norma la quantità totale di memoria heap mappata dal processo non deve essere molto lontana da questo valore di destinazione, non vi sono garanzie che il kernel recupererà la memoria non mappata.
       </para>
      </note>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd_memory_cache_min</term>
     <listitem>
      <para>
       Se <option>tc_malloc</option> e <option>bluestore_cache_autotune</option> sono abilitate, consente di impostare la quantità minima di memoria utilizzata per le cache.
      </para>
      <note>
       <para>
        Se viene impostato un valore troppo basso, può verificarsi un notevole trashing della cache.
       </para>
      </note>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
 </sect1>
 <sect1 xml:id="config-ogw">
  <title>Ceph Object Gateway</title>

  <para>
   È possibile influenzare il comportamento di Object Gateway utilizzando diverse opzioni. Se un'opzione non viene specificata, ne viene utilizzato il valore di default. Di seguito è riportato un elenco completo delle opzioni di Object Gateway:
  </para>

  <sect2 xml:id="config-ogw-general-settings">
   <title>Impostazioni generali</title>
   <variablelist>
    <varlistentry>
     <term>rgw_frontends</term>
     <listitem>
      <para>
       Configura i front-end HTTP. Specificare più front-end in un elenco separato da virgole. Ogni configurazione di front-end può includere un elenco di opzioni separate da spazi, in cui ogni opzione è nel formato "key=value" o "key". L'impostazione di default è <literal>beast port=7480</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_data</term>
     <listitem>
      <para>
       Imposta l'ubicazione dei file di dati per Object Gateway. L'impostazione di default è <filename>/var/lib/ceph/radosgw/<replaceable>CLUSTER_ID</replaceable></filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_enable_apis</term>
     <listitem>
      <para>
       Abilita le API specificate. L'impostazione di default è "s3, swift, swift_auth, admin All APIs".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_cache_enabled</term>
     <listitem>
      <para>
       Abilita o disabilita la cache di Object Gateway. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_cache_lru_size</term>
     <listitem>
      <para>
       Numero di voci nella cache di Object Gateway. Il valore di default è 10000.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_socket_path</term>
     <listitem>
      <para>
       Percorso del socket per il socket di dominio. <option>FastCgiExternalServer</option> utilizza questo socket. Se non viene specificato nessun percorso del socket, Object Gateway non verrà eseguito come server esterno. Il percorso specificato qui deve essere lo stesso del percorso specificato nel file <filename>rgw.conf</filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_fcgi_socket_backlog</term>
     <listitem>
      <para>
       Backlog del socket per fcgi. Il valore di default è 1024.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_host</term>
     <listitem>
      <para>
       Host dell'istanza di Object Gateway. Può essere un indirizzo IP o un nome host. Il valore di default è <literal>0.0.0.0</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_port</term>
     <listitem>
      <para>
       Numero di porta in cui l'istanza è in ascolto delle richieste. Se non è specificato, Object Gateway esegue il FastCGI esterno.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_dns_name</term>
     <listitem>
      <para>
       Nome DNS del dominio servito.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_script_uri</term>
     <listitem>
      <para>
       Valore alternativo di SCRIPT_URI se non impostato nella richiesta.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_request_uri</term>
     <listitem>
      <para>
       Valore alternativo di REQUEST_URI se non impostato nella richiesta.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_print_continue</term>
     <listitem>
      <para>
       Se attiva, abilitare 100-continue. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_remote_addr_param</term>
     <listitem>
      <para>
       Parametro dell'indirizzo remoto. Ad esempio, il campo HTTP contenente l'indirizzo remoto o l'indirizzo X-Forwarded-For se è attivo un proxy inverso. L'impostazione di default è <literal>REMOTE_ADDR</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_op_thread_timeout</term>
     <listitem>
      <para>
       Timeout espresso in secondi per i thread aperti. Il valore di default è 600.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_op_thread_suicide_timeout</term>
     <listitem>
      <para>
       Timeout espresso in secondi prima del termine del processo di Object Gateway. Se è impostata a 0 (default), questa impostazione è disabilitata.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_thread_pool_size</term>
     <listitem>
      <para>
       Numero di thread per il server Oggetto beast. Aumentare il valore se è necessario provvedere a più richieste. Il valore di default è 100 thread.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_num_rados_handles</term>
     <listitem>
      <para>
       Numero di handle del cluster RADOS per Object Gateway. Adesso per ciascun thread di lavoro Object Gateway viene selezionato un handle RADOS permanente. Questa opzione potrebbe diventare obsoleta e rimossa dalle release future. Il valore di default è 1.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_num_control_oids</term>
     <listitem>
      <para>
       Numero di oggetti di notifica utilizzati per la sincronizzazione della cache tra diverse istanze di Object Gateway. Il valore di default è 8.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_init_timeout</term>
     <listitem>
      <para>
       Numero di secondi prima che Object Gateway smetta di tentare di effettuare l'inizializzazione. Il valore di default è 30.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_mime_types_file</term>
     <listitem>
      <para>
       Percorso e ubicazione dei tipi MIME. Utilizzata per il rilevamento automatico Swift dei tipi di oggetto. L'impostazione di default è <filename>/etc/mime.types</filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_gc_max_objs</term>
     <listitem>
      <para>
       Numero massimo di oggetti che possono essere gestiti dal recupero spazio in un ciclo di elaborazione di recupero spazio. Il valore di default è 32.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_gc_obj_min_wait</term>
     <listitem>
      <para>
       Tempo di attesa minimo prima che l'oggetto venga rimosso e gestito dal processo di recupero spazio. Il valore di default è 2 * 3600.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_gc_processor_max_time</term>
     <listitem>
      <para>
       Durata massima tra l'inizio di due cicli di elaborazione di recupero spazio consecutivi. Il valore di default è 3600.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_gc_processor_period</term>
     <listitem>
      <para>
       Durata del ciclo di elaborazione di recupero spazio. Il valore di default è 3600.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_s3_success_create_obj_status</term>
     <listitem>
      <para>
       Risposta alternativa di stato riuscito per <literal>create-obj</literal>. Il valore di default è 0.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_resolve_cname</term>
     <listitem>
      <para>
       Determina se Object Gateway deve utilizzare il record DNS CNAME del campo del nome host della richiesta (se il nome host non è uguale al nome DNS di Object Gateway). L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_obj_stripe_size</term>
     <listitem>
      <para>
       Dimensioni di striping di oggetto per gli oggetti Object Gateway. Il valore di default è <literal>4 &lt;&lt; 20</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_extended_http_attrs</term>
     <listitem>
      <para>
       Aggiunge un nuovo set di attributi che è possibile impostare su un'entità (ad esempio un utente, un compartimento o un oggetto). È possibile impostare tali attributi aggiuntivi tramite i campi dell'intestazione HTTP quando si inserisce o si modifica l'entità tramite il metodo POST. Se impostati, questi attributi verranno restituiti come campi HTTP durante la richiesta GET/HEAD sull'entità. L'impostazione di default è <literal>content_foo, content_bar, x-foo-bar</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_exit_timeout_secs</term>
     <listitem>
      <para>
       Numero di secondi in cui restare in attesa di un processo prima dell'uscita senza condizioni. Il valore di default è 120.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_get_obj_window_size</term>
     <listitem>
      <para>
       Dimensioni in byte della finestra di una singola richiesta di oggetto. Il valore di default è <literal>16 &lt;&lt; 20</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_get_obj_max_req_size</term>
     <listitem>
      <para>
       Dimensioni massime della richiesta di una singola operazione GET inviata al cluster di memorizzazione Ceph. Il valore di default è <literal>4 &lt;&lt; 20</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_relaxed_s3_bucket_names</term>
     <listitem>
      <para>
       Abilita le regole minime del nome del compartimento S3 per i compartimenti dell'area US. L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_list_buckets_max_chunk</term>
     <listitem>
      <para>
       Numero massimo di compartimenti da recuperare durante un'operazione singola quando vengono elencati i compartimenti dell'utente. Il valore di default è 1000.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_override_bucket_index_max_shards</term>
     <listitem>
      <para>
       Rappresenta il numero di partizioni dell'oggetto di indice del compartimento. Se viene impostata a 0 (default), il partizionamento non verrà eseguito. Si sconsiglia di impostare un valore troppo elevato (ad esempio 1000) poiché ciò aumenta i costi di creazione dell'elenco dei compartimenti. Impostare questa variabile nelle sezioni client o global per applicarla automaticamente ai comandi <command>radosgw-admin</command>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_curl_wait_timeout_ms</term>
     <listitem>
      <para>
       Timeout espresso in millisecondi per determinate chiamate <command>curl</command>. Il valore di default è 1000.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_copy_obj_progress</term>
     <listitem>
      <para>
       Abilita l'output dell'avanzamento dell'oggetto durante le operazioni di copia più lunghe. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_copy_obj_progress_every_bytes</term>
     <listitem>
      <para>
       Byte minimi tra gli output dell'avanzamento della copia. Il valore di default è 1024 * 1024.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_admin_entry</term>
     <listitem>
      <para>
       Punto di entrata di un URL della richiesta admin. L'impostazione di default è <literal>admin</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_content_length_compat</term>
     <listitem>
      <para>
       Abilita la gestione di compatibilità delle richieste FCGI con le opzioni CONTENT_LENGTH E HTTP_CONTENT_LENGTH impostate. L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_bucket_quota_ttl</term>
     <listitem>
      <para>
       Intervallo di tempo espresso in secondi durante il quale le informazioni sulla quota memorizzate nella cache sono attendibili. Dopo questo timeout, le informazioni sulla quota verranno recuperate nuovamente dal cluster. Il valore di default è 600.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_user_quota_bucket_sync_interval</term>
     <listitem>
      <para>
       Intervallo di tempo espresso in secondi durante il quale le informazioni sulla quota del compartimento vengono accumulate prima della sincronizzazione con il cluster. Durante questo intervallo, le altre istanze di Object Gateway non visualizzeranno le modifiche apportate alle statistiche sulla quota del compartimento relative alle operazioni su tale istanza. Il valore di default è 180.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_user_quota_sync_interval</term>
     <listitem>
      <para>
       Intervallo di tempo espresso in secondi durante il quale le informazioni sulla quota utenti vengono accumulate prima della sincronizzazione con il cluster. Durante questo intervallo, le altre istanze di Object Gateway non visualizzeranno le modifiche apportate alle statistiche sulla quota utenti relative alle operazioni su tale istanza. Il valore di default è 180.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_bucket_default_quota_max_objects</term>
     <listitem>
      <para>
       Numero massimo di default di oggetti per compartimento. Viene impostata per i nuovi utenti se non viene specificata nessuna quota e non ha effetto sugli utenti esistenti. Impostare questa variabile nelle sezioni client o global per applicarla automaticamente ai comandi <command>radosgw-admin</command>. Il valore di default è -1.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_bucket_default_quota_max_size</term>
     <listitem>
      <para>
       Capacità massima di default di ciascun compartimento espressa in byte. Viene impostata per i nuovi utenti se non viene specificata nessuna quota e non ha effetto sugli utenti esistenti. Il valore di default è -1.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_user_default_quota_max_objects</term>
     <listitem>
      <para>
       Numero massimo di default di oggetti per utente. Sono inclusi tutti gli oggetti in tutti i compartimenti di proprietà dell'utente. Viene impostata per i nuovi utenti se non viene specificata nessuna quota e non ha effetto sugli utenti esistenti. Il valore di default è -1.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_user_default_quota_max_size</term>
     <listitem>
      <para>
       Valore delle dimensioni massime della quota utenti espresso in byte impostato per i nuovi utenti se non viene specificata nessun'altra quota. Non ha effetto sugli utenti esistenti. Il valore di default è -1.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_verify_ssl</term>
     <listitem>
      <para>
       Verifica i certificati SSL durante la creazione delle richieste. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_max_chunk_size</term>
     <listitem>
      <para>
       Dimensioni massime di una porzione di dati che verrà letta in una singola operazione. Se si aumenta il valore a 4 MB (4194304) si otterranno prestazioni migliori durante l'elaborazione di oggetti di grandi dimensioni. Il valore di default è 128 kB (131072).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <variablelist>
    <title>Impostazioni multisito</title>
    <varlistentry>
     <term>rgw_zone</term>
     <listitem>
      <para>
       Nome della zona per l'istanza del gateway. Se non viene impostata nessuna zona, è possibile configurare un valore di default in tutto il cluster con il comando <command>radosgw-admin zone default</command>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_zonegroup</term>
     <listitem>
      <para>
       Nome del gruppo di zone per l'istanza del gateway. Se non viene impostato nessun gruppo di zone, è possibile configurare un valore di default in tutto il cluster con il comando <command>radosgw-admin zonegroup default</command>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_realm</term>
     <listitem>
      <para>
       Nome del dominio per l'istanza del gateway. Se non viene impostato nessun dominio, è possibile configurare un valore di default in tutto il cluster con il comando <command>radosgw-admin realm default</command>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_run_sync_thread</term>
     <listitem>
      <para>
       Se nel dominio sono presenti altre zone da cui eseguire la sincronizzazione, generare dei thread per gestire la sincronizzazione dei dati e dei metadati. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_data_log_window</term>
     <listitem>
      <para>
       Finestra delle voci del log dei dati in secondi. Il valore di default è 30.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_data_log_changes_size</term>
     <listitem>
      <para>
       Numero di voci nella memoria da mettere in attesa per il log delle modifiche dei dati. Il valore di default è 1000.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_data_log_obj_prefix</term>
     <listitem>
      <para>
       Prefisso del nome di oggetto del log dei dati. L'impostazione di default è "data_log".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_data_log_num_shards</term>
     <listitem>
      <para>
       Numero di partizioni (oggetti) su cui conservare il log delle modifiche dei dati. Il valore di default è 128.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_md_log_max_shards</term>
     <listitem>
      <para>
       Numero massimo di partizioni per il log dei metadati. Il valore di default è 64.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <variablelist>
    <title>Impostazioni Swift</title>
    <varlistentry>
     <term>rgw_enforce_swift_acls</term>
     <listitem>
      <para>
       Applica le impostazioni dell'elenco di controllo dell'accesso (ACL) Swift. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_swift_token_expiration</term>
     <listitem>
      <para>
       Tempo espresso in secondi per la scadenza di un token Swift. Il valore di default è 24 * 3600.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_swift_url</term>
     <listitem>
      <para>
       URL dell'API Swift di Ceph Object Gateway.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_swift_url_prefix</term>
     <listitem>
      <para>
       Prefisso URL dello StorageURL Swift che precede la porzione di testo "/v1". Ciò consente di eseguire più istanze del gateway sullo stesso host. Per ragioni di compatibilità, se per questa variabile di configurazione non viene impostato alcun valore, verrà utilizzato il valore "/swift" di default. Utilizzare il prefisso esplicito "/" come inizio dello StorageURL dalla radice.
      </para>
      <warning>
       <para>
        Questa opzione non funzionerà se viene impostata su "/" e se l'API S3 è abilitata. Tenere presente che la disabilitazione di S3 non consentirà la distribuzione di Object Gateway nella configurazione multisito.
       </para>
      </warning>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_swift_auth_url</term>
     <listitem>
      <para>
       URL di default per la verifica dei token di autenticazione v1 quando l'autenticazione Swift interna non è utilizzata.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_swift_auth_entry</term>
     <listitem>
      <para>
       Punto di entrata di un URL di autenticazione Swift. L'impostazione di default è <literal>auth</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_swift_versioning_enabled</term>
     <listitem>
      <para>
       Abilita il controllo versioni dell'oggetto dell'API Object Storage di OpenStack. Ciò consente ai client di inserire l'attributo <literal>X-Versions-Location</literal> sui container di cui deve essere creata una versione. L'attributo specifica il nome del container in cui sono memorizzate le versioni archiviate. Deve essere di proprietà dello stesso utente del container con versione per motivi di verifica del controllo dell'accesso (gli ACL <emphasis>non</emphasis> sono presi in considerazione). Non è possibile creare una versione per tali container con il meccanismo di controllo versioni dell'oggetto S3. L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <variablelist>
    <title>Impostazioni del logging</title>
    <varlistentry>
     <term>rgw_log_nonexistent_bucket</term>
     <listitem>
      <para>
       Abilita Object Gateway per il logging di una richiesta relativa a un compartimento inesistente. L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_log_object_name</term>
     <listitem>
      <para>
       Formato di registrazione di un nome oggetto. Per i dettagli sugli identificatori del formato, consultare la documentazione <command>man 1 date</command>. L'impostazione di default è <literal>%Y-%m-%d-%H-%i-%n</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_log_object_name_utc</term>
     <listitem>
      <para>
       Specifica se nel nome oggetto registrato è inclusa l'ora UTC. Se è impostata su <literal>false</literal> (default), viene utilizzata l'ora locale.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_usage_max_shards</term>
     <listitem>
      <para>
       Numero massimo di partizioni per la registrazione dell'utilizzo. Il valore di default è 32.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_usage_max_user_shards</term>
     <listitem>
      <para>
       Numero massimo di partizioni utilizzate per la registrazione dell'utilizzo di un singolo utente. Il valore di default è 1.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_enable_ops_log</term>
     <listitem>
      <para>
       Abilita la registrazione di ciascuna operazione Object Gateway riuscita. L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_enable_usage_log</term>
     <listitem>
      <para>
       Abilita il log di utilizzo. L'impostazione di default è <literal>false</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_ops_log_rados</term>
     <listitem>
      <para>
       Specifica se scrivere il log delle operazioni sul back-end del cluster di memorizzazione Ceph. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_ops_log_socket_path</term>
     <listitem>
      <para>
       Socket del dominio Unix per i log delle operazioni di scrittura.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_ops_log_data_backlog</term>
     <listitem>
      <para>
       Dimensioni dei dati massime del backlog dei dati per i log delle operazioni scritte su un socket del dominio Unix. Il valore di default è 5 &lt;&lt; 20.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_usage_log_flush_threshold</term>
     <listitem>
      <para>
       Numero di voci modificate unite nel log di utilizzo prima dello svuotamento sincrono. Il valore di default è 1024.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_usage_log_tick_interval</term>
     <listitem>
      <para>
       Svuota il log di utilizzo in sospeso ogni "n" secondi. Il valore di default è 30.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_log_http_headers</term>
     <listitem>
      <para>
       Elenco con valori separati da virgole delle intestazioni HTTP da includere nelle voci del log. I nomi delle intestazioni non fanno distinzione tra lettere maiuscole e minuscole e utilizzano il nome completo dell'intestazione con le parole separate da caratteri di sottolineatura. Ad esempio, "http_x_forwarded_for", "http_x_special_k".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_intent_log_object_name</term>
     <listitem>
      <para>
       Formato di registrazione del nome oggetto dell'intent log. Per i dettagli sugli identificatori del formato, consultare la documentazione <command>man 1 date</command>. L'impostazione di default è "%Y-%m-%d-%i-%n".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_intent_log_object_name_utc</term>
     <listitem>
      <para>
       Specifica se nel nome oggetto dell'intent log è inclusa l'ora UTC. Se è impostata su <literal>false</literal> (default), viene utilizzata l'ora locale.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <variablelist>
    <title>Impostazioni Keystone</title>
    <varlistentry>
     <term>rgw_keystone_url</term>
     <listitem>
      <para>
       URL del server Keystone.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_api_version</term>
     <listitem>
      <para>
       Versione (2 o 3) di OpenStack Identity API da utilizzare per la comunicazione con il server Keystone. Il valore di default è 2.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_admin_domain</term>
     <listitem>
      <para>
       Nome del dominio OpenStack con privilegi di amministratore quando è in uso OpenStack Identity API v3.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_admin_project</term>
     <listitem>
      <para>
       Nome del progetto OpenStack con privilegi di amministratore quando è in uso OpenStack Identity API v3. Se non viene impostata, verrà utilizzato il valore di <command>rgw keystone admin tenant</command>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_admin_token</term>
     <listitem>
      <para>
       Token amministratore Keystone (segreto condiviso). In Object Gateway, l'autenticazione tramite il token amministratore ha la priorità sull'autenticazione con le credenziali di amministratore (opzioni <option>rgw keystone admin user</option>, <option>rgw keystone admin password</option>, <option>rgw keystone admin tenant</option>, <option>rgw keystone admin project</option> e <option>rgw keystone admin domain</option>). La funzione del token amministratore è considerata obsoleta.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_admin_tenant</term>
     <listitem>
      <para>
       Nome del tenant OpenStack con privilegi di amministratore (tenant del servizio) quando è in uso OpenStack Identity API v2.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_admin_user</term>
     <listitem>
      <para>
       Nome dell'utente OpenStack con privilegi di amministratore per l'autenticazione Keystone (utente del servizio) quando è in uso OpenStack Identity API v2.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_admin_password</term>
     <listitem>
      <para>
       Password dell'utente amministratore OpenStack quando è in uso OpenStack Identity API v2.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_accepted_roles</term>
     <listitem>
      <para>
       Ruoli richiesti per provvedere alle richieste. L'impostazione di default è "Member, admin".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_token_cache_size</term>
     <listitem>
      <para>
       Numero massimo di voci in ciascuna cache dei token Keystone. Il valore di default è 10000.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_revocation_interval</term>
     <listitem>
      <para>
       Numero di secondi tra le verifiche della revoca dei token. Il valore di default è 15 * 60.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw_keystone_verify_ssl</term>
     <listitem>
      <para>
       Verifica i certificati SSL durante la creazione di richieste di token per Keystone. L'impostazione di default è <literal>true</literal>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="sec-ceph-rgw-configuration-notes">
    <title>Note aggiuntive</title>
    <variablelist>
     <varlistentry>
      <term>rgw_dns_name</term>
      <listitem>
       <para>
        Consente ai client di utilizzare i compartimenti di tipo <literal>vhost</literal>.
       </para>
       <para>
        L'accesso di tipo <literal>vhost</literal> fa riferimento all'uso di <replaceable>bucketname</replaceable>.<replaceable>s3-endpoint</replaceable>/<replaceable>object-path</replaceable>, diverso dall'accesso di tipo <literal>path</literal>: <replaceable>s3-endpoint</replaceable>/<replaceable>bucket</replaceable>/<replaceable>object</replaceable>.
       </para>
       <para>
        Se <literal>rgw dns name</literal> è impostato, verificare che il client S3 sia configurato sull'indirizzamento delle richieste all'endpoint specificato da <literal>rgw dns name</literal>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>

  <sect2 xml:id="config-ogw-http-frontends">
   <title>Configurazione dei front-end HTTP</title>
   <sect3 xml:id="config-http-beast">
    <title>Oggetto beast</title>
    <variablelist>
     <varlistentry>
      <term>port, ssl_port</term>
      <listitem>
       <para>
        Numeri di porte di attesa IPv4 e IPv6. È possibile specificare più numeri di porte:
       </para>
<screen>port=80 port=8000 ssl_port=8080</screen>
       <para>
        Il valore di default è 80.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>endpoint, ssl_endpoint</term>
      <listitem>
       <para>
        Indirizzi di attesa nel formato "address[:port]", dove l'indirizzo è una stringa di indirizzo IPv4 in formato decimale separato da punti o un indirizzo IPv6 in notazione esadecimale racchiuso tra parentesi quadre. Se viene specificato un endpoint IPv6, verranno attesi solo indirizzi IPv6. Il numero di porta facoltativo di default è 80 per <option>endpoint</option> e 443 per <option>ssl_endpoint</option>. È possibile specificare più indirizzi:
       </para>
<screen>
endpoint=[::1] endpoint=192.168.0.100:8000 ssl_endpoint=192.168.0.100:8080
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>ssl_private_key</term>
      <listitem>
       <para>
        Percorso facoltativo del file di chiave privata utilizzato per gli endpoint abilitati per SSL. Se non è specificato, viene utilizzato il file <option>ssl_certificate</option> come chiave privata.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>tcp_nodelay</term>
      <listitem>
       <para>
        Se specificata, l'opzione del socket disabiliterà l'algoritmo Nagle sulla connessione. Vale a dire che i pacchetti verranno inviati non appena possibile invece di attendere un buffer o un timeout completo.
       </para>
       <para>
        Il valore "1" disabilita l'algoritmo Nagle per tutti i socket.
       </para>
       <para>
        Il valore "0" mantiene abilitato l'algoritmo Nagle (default).
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <example>
     <title>Configurazione oggetto Beast di esempio</title>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set rgw.myrealm.myzone.ses-min1.kwwazo \
 rgw_frontends beast port=8000 ssl_port=443 \
 ssl_certificate=/etc/ssl/ssl.crt \
 error_log_file=/var/log/radosgw/beast.error.log
</screen>
<screen>
</screen>
    </example>
   </sect3>
   <sect3 xml:id="config-http-civetweb">
    <title>CivetWeb</title>
    <variablelist>
     <varlistentry>
      <term>porta</term>
      <listitem>
       <para>
        Numero di porta di attesa. Per le porte abilitate per SSL, aggiungere un suffisso "s" (ad esempio "443s"). Per associare un indirizzo IPv4 o IPv6 specifico, utilizzare il formato "address:port". È possibile specificare più endpoint aggiungendoli con il simbolo "+" o specificando diverse opzioni:
       </para>
<screen>
port=127.0.0.1:8000+443s
port=8000 port=443s
</screen>
       <para>
        Il valore di default è 7480.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>num_threads</term>
      <listitem>
       <para>
        Numero di thread generati da Civetweb per la gestione delle connessioni HTTP in entrata. Questa impostazione consente di limitare effettivamente il numero di connessioni simultanee di cui il front-end è in grado di occuparsi.
       </para>
       <para>
        Il valore di default è quello specificato dall'opzione <option>rgw_thread_pool_size</option>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>request_timeout_ms</term>
      <listitem>
       <para>
        Intervallo di tempo espresso in millisecondi durante il quale Civitweb resta in attesa di altri dati in entrata prima di abbandonare l'operazione.
       </para>
       <para>
        Il valore di default è 30.000 millisecondi.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>access_log_file</term>
      <listitem>
       <para>
        Percorso del file di log di accesso. È possibile specificare un percorso completo o un percorso relativo alla directory di lavoro attuale. Se non è specificato (default), gli accessi non vengono registrati.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>error_log_ file</term>
      <listitem>
       <para>
        Percorso del file di log degli errori. È possibile specificare un percorso completo o un percorso relativo alla directory di lavoro attuale. Se non è specificato (default), gli errori non vengono registrati.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <example>
     <title>Configurazione Civetweb di esempio in <filename>/etc/ceph/ceph.conf</filename></title>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set rgw.myrealm.myzone.ses-min2.ingabw \
 rgw_frontends civetweb port=8000+443s request_timeout_ms=30000 \
 error_log_file=/var/log/radosgw/civetweb.error.log
</screen>
    </example>
   </sect3>
   <sect3 xml:id="config-http-common-options">
    <title>Opzioni comuni</title>
    <variablelist>
     <varlistentry>
      <term>ssl_certificate</term>
      <listitem>
       <para>
        Percorso del file di certificato SSL utilizzato per gli endpoint abilitati per SSL.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>prefisso</term>
      <listitem>
       <para>
        Stringa di prefisso inserita nell'URI di tutte le richieste. Ad esempio, un front-end solo Swift può fornire un prefisso URI <literal>/swift</literal>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>
 </sect1>
</chapter>
