<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_user_cmdline.xml" version="5.0" xml:id="dashboard-user-roles">
 <title>Verwalten von Benutzern und Rollen über die Kommandozeile</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  In diesem Abschnitt wird die Verwaltung von Benutzerkonten erläutert, die im Ceph Dashboard verwendet werden. Hier erhalten Sie Hilfestellung für die Erstellung oder Bearbeitung von Benutzerkonten sowie für die Festlegung der richtigen Benutzerrollen und Berechtigungen.
 </para>
 <sect1 xml:id="dashboard-password-policy">
  <title>Verwalten der Passwortrichtlinie</title>

  <para>
   Standardmäßig ist die Passwortrichtlinienfunktion einschließlich der folgenden Prüfungen aktiviert:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Ist das Passwort länger als <emphasis>N</emphasis> Zeichen?
    </para>
   </listitem>
   <listitem>
    <para>
     Sind das alte und das neue Passwort identisch?
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Die Passwortrichtlinienfunktion kann komplett ein- oder ausgeschaltet werden:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-enabled <replaceable>true|false</replaceable></screen>

  <para>
   Die folgenden Einzelprüfungen können ein- oder ausgeschaltet werden:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-length-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-oldpwd-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-username-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-exclusion-list-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-complexity-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-sequential-chars-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-repetitive-chars-enabled <replaceable>true|false</replaceable>
</screen>

  <para>
   Darüber hinaus stehen zum Konfigurieren des Verhaltens der Passwortrichtlinie die folgenden Optionen zur Verfügung.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     Die minimale Passwortlänge (Standardwert ist 8):
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-length <replaceable>N</replaceable></screen>
   </listitem>
   <listitem>
    <para>
     Die minimale Passwortkomplexität (Standardwert ist 10):
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-complexity <replaceable>N</replaceable></screen>
    <para>
     Die Passwortkomplexität wird berechnet, indem jedes Zeichen im Passwort klassifiziert wird.
    </para>
   </listitem>
   <listitem>
    <para>
     Eine Liste mit kommagetrennten Wörtern, die nicht in einem Passwort verwendet werden dürfen:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-exclusion-list <replaceable>word</replaceable>[,...]</screen>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="dashboard-user-accounts">
  <title>Verwalten von Benutzerkonten</title>

  <para>
   Das Ceph Dashboard unterstützt die Verwaltung mehrerer Benutzerkonten. Jedes Benutzerkonto umfasst einen Benutzernamen, ein Passwort (in verschlüsselter Form mit <literal>bcrypt</literal> gespeichert), einen optionalen Namen und eine optionale E-Mail-Adresse.
  </para>

  <para>
   Die Benutzerkonten werden in der Konfigurationsdatenbank von Ceph Monitor gespeichert und für alle Ceph-Manager-Instanzen freigegeben.
  </para>

  <para>
   Mit folgenden Kommandos verwalten Sie die Benutzerkonten:
  </para>

  <variablelist>
   <varlistentry>
    <term>Vorhandene Benutzer abrufen:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Einen neuen Benutzer erstellen:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> -i [<replaceable>PASSWORD_FILE</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Einen Benutzer löschen:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Benutzerpasswörter ändern:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> -i <replaceable>PASSWORD_FILE</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Name und E-Mail-Adresse eines Benutzers bearbeiten:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Benutzer deaktivieren:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-disable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Benutzer aktivieren:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-enable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="dashboard-permissions">
  <title>Benutzerrollen und Berechtigungen</title>

  <para>
   In diesem Abschnitt erfahren Sie, welche Sicherheitsbereiche Sie einer Benutzerrolle zuweisen können, wie Sie Benutzerrollen verwalten und wie Sie sie den Benutzerkonten zuweisen.
  </para>

  <sect2 xml:id="dashboard-security-scopes">
   <title>Definieren von Sicherheitsbereichen</title>
   <para>
    Benutzerkonten sind mit einer Gruppe von Rollen verknüpft, mit der definiert wird, auf welche Teile des Dashboards der Benutzer zugreifen kann. Die Dashboard-Teile sind in einem <emphasis>Sicherheitsbereich</emphasis> gruppiert. Sicherheitsbereiche sind vordefiniert und statisch. Die folgenden Sicherheitsbereiche sind derzeit verfügbar:
   </para>
   <variablelist>
    <varlistentry>
     <term>hosts</term>
     <listitem>
      <para>
       Alle Funktionen für den Menüeintrag <guimenu>Hosts</guimenu>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>config-opt</term>
     <listitem>
      <para>
       Alle Funktionen für die Verwaltung der Ceph-Konfigurationsoptionen.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Speicherplatz auf dem Pool</term>
     <listitem>
      <para>
       Alle Funktionen für die Pool-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd</term>
     <listitem>
      <para>
       Alle Funktionen für die Ceph OSD-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>monitor</term>
     <listitem>
      <para>
       Alle Funktionen für die Ceph Monitor-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-image</term>
     <listitem>
      <para>
       Alle Funktionen für die Verwaltung von RADOS-Block-Device-Images.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-mirroring</term>
     <listitem>
      <para>
       Alle Funktionen für die Verwaltung der RADOS-Block-Device-Spiegelung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>iscsi</term>
     <listitem>
      <para>
       Alle Funktionen für die iSCSI-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw</term>
     <listitem>
      <para>
       Alle Funktionen für die Object-Gateway-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs</term>
     <listitem>
      <para>
       Alle Funktionen für die CephFS-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>manager</term>
     <listitem>
      <para>
       Alle Funktionen für die Ceph-Manager-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Protokoll</term>
     <listitem>
      <para>
       Alle Funktionen für die Verwaltung der Ceph-Protokolle.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>grafana</term>
     <listitem>
      <para>
       Alle Funktionen für den Grafana-Proxy.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>prometheus</term>
     <listitem>
      <para>
       Alle Funktionen für die Prometheus-Verwaltung.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>dashboard-settings</term>
     <listitem>
      <para>
       Zum Ändern der Dashboard-Einstellungen.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-user-roles-security-scope">
   <title>Festlegen von Benutzerrollen</title>
   <para>
    Eine <emphasis>Rolle</emphasis> bestimmt eine Reihe von Zuordnungen zwischen einem <emphasis>Sicherheitsbereich</emphasis> und einer Gruppe von <emphasis>Berechtigungen</emphasis>. Es gibt vier Arten von Berechtigungen: „read“, „create“, „update“ und „delete“.
   </para>
   <para>
    Im folgenden Beispiel wird eine Rolle festgelegt, bei der ein Benutzer die Berechtigungen „read“ und „create“ für Funktionen im Rahmen der Pool-Verwaltung sowie uneingeschränkte Berechtigungen für Funktionen im Rahmen der RBD-Image-Verwaltung besitzt:
   </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
   <para>
    Das Dashboard bietet bereits eine Gruppe vordefinierter Rollen, die als <emphasis>Systemrollen</emphasis> bezeichnet werden. Diese Rollen können Sie nach einer Neuinstallation des Ceph Dashboards sofort nutzen:
   </para>
   <variablelist>
    <varlistentry>
     <term>Administrator</term>
     <listitem>
      <para>
       Uneingeschränkte Berechtigungen für alle Sicherheitsbereiche.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nur-Lesen</term>
     <listitem>
      <para>
       Leseberechtigung für alle Sicherheitsbereiche mit Ausnahme der Dashboard-Einstellungen.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>block-manager</term>
     <listitem>
      <para>
       Uneingeschränkte Berechtigungen für die Bereiche „rbd-image“, „rbd-mirroring“ und „iscsi“.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw-manager</term>
     <listitem>
      <para>
       Uneingeschränkte Berechtigungen für den Bereich „rgw“.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cluster-manager</term>
     <listitem>
      <para>
       Uneingeschränkte Berechtigungen für die Bereiche „hosts“, „osd“, „monitor“, „manager“ und „config-opt“.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool-manager</term>
     <listitem>
      <para>
       Uneingeschränkte Berechtigungen für den Bereich „pool“.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs-manager</term>
     <listitem>
      <para>
       Uneingeschränkte Berechtigungen für den Bereich „cephfs“.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="dashboard-managing-custom-roles">
    <title>Verwalten benutzerdefinierter Rollen</title>
    <para>
     Mit folgenden Kommandos können Sie neue Benutzerrollen erstellen:
    </para>
    <variablelist>
     <varlistentry>
      <term>Eine neue Rolle erstellen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Eine Rolle löschen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Bereichsberechtigungen für eine Rolle festlegen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Bereichsberechtigungen einer Rolle löschen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-assigning-roles-user-accounts">
    <title>Zuweisen von Rollen zu Benutzerkonten</title>
    <para>
     Mit folgenden Kommandos weisen Sie die Rollen den Benutzern zu:
    </para>
    <variablelist>
     <varlistentry>
      <term>Benutzerrollen festlegen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Einem Benutzer zusätzliche Rollen zuweisen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Rollen eines Benutzers löschen:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
    <tip>
     <title>Bereinigen benutzerdefinierter Rollen</title>
     <para>
      Wenn Sie benutzerdefinierte Rollen erstellen und den Ceph-Cluster später mit dem Ausführungsprogramm <command>ceph.purge</command> bereinigen möchten, müssen Sie zunächst die benutzerdefinierten Rollen bereinigen. Weitere Informationen finden Sie im <xref linkend="ceph-cluster-purge"/>.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="example-create-user-custom-role">
    <title>Beispiel: Erstellen eines Benutzers und einer benutzerdefinierten Regel</title>
    <para>
     In diesem Abschnitt wird das Verfahren zum Erstellen eines Benutzerkontos veranschaulicht, das RBD-Images verwalten und den Ceph-Pool abrufen kann sowie den Nur-Lese-Zugriff auf alle anderen Bereiche erhält.
    </para>
    <procedure>
     <step>
      <para>
       Erstellen Sie einen neuen Benutzer namens <literal>tux</literal>:
      </para>
<screen>
 <prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
     </step>
     <step>
      <para>
       Erstellen Sie eine Rolle und legen Sie die Bereichsberechtigungen fest:
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
     </step>
     <step>
      <para>
       Ordnen Sie die Rollen dem Benutzer <literal>tux</literal> zu:
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-proxy-config">
  <title>Proxy-Konfiguration</title>

  <para>
   Wenn Sie eine feste URL für das Ceph Dashboard festlegen möchten oder wenn Sie keine direkten Verbindungen zu den Manager-Knoten zulassen möchten, können Sie einen Proxy einrichten, der eingehende Anfragen automatisch an die aktuell aktive <literal>ceph-mgr</literal>-Instanz weiterleitet.
  </para>

  <sect2 xml:id="dashboard-proxy">
   <title>Zugriff auf das Dashboard über Reverse-Proxys</title>
   <para>
    Wenn Sie über eine Reverse-Proxy-Konfiguration auf das Dashboard zugreifen, muss ggf. ein URL-Präfix angegeben werden. Mit der Einstellung <option>url_prefix</option> legen Sie fest, dass das Dashboard Hyperlinks mit Ihrem Präfix nutzen soll:
   </para>
<screen>
  <prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
  </screen>
   <para>
    Anschließend können Sie unter <literal>http://<replaceable>HOST_NAME</replaceable>:<replaceable>PORT_NUMBER</replaceable>/<replaceable>URL_PREFIX</replaceable>/</literal> auf das Dashboard zugreifen.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-disable-redirection">
   <title>Deaktivieren von Umleitungen</title>
   <para>
    Wenn sich das Ceph Dashboard hinter einem Lastausgleichsproxy wie HAProxy befindet, deaktivieren Sie das Weiterleitungsverhalten, um Situationen zu vermeiden, in denen die internen (nicht auflösbaren) URLs an den Frontend-Client veröffentlicht werden. Mit folgendem Kommando antwortet das Dashboard mit einem HTTP-Fehler (standardmäßig <literal>500</literal>), statt an das aktive Dashboard weiterzuleiten:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "error"
</screen>
   <para>
    Setzen Sie die Einstellung mit folgendem Kommando auf das standardmäßige Weiterleitungsverhalten zurück:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "redirect"
</screen>
  </sect2>

  <sect2 xml:id="dashboard-config-error-status">
   <title>Konfigurieren von Fehlerstatuscodes</title>
   <para>
    Wenn das Weiterleitungsverhalten deaktiviert ist, dann sollten Sie den HTTP-Statuscode von Standby-Dashboards anpassen. Führen Sie hierzu folgendes Kommando aus:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_error_status_code 503
</screen>
  </sect2>

  <sect2 xml:id="dashboard-haproxy-config">
   <title>Beispiel einer HAProxy-Konfiguration</title>
   <para>
    Im folgenden Beispiel wird ein TLS/SSL-Durchlauf mit HAProxy konfiguriert.
   </para>
   <note>
    <para>
     Die Konfiguration funktioniert unter den folgenden Bedingungen: Wenn das Dashboard ausfällt, erhält der Frontend-Client möglicherweise eine HTTP-Weiterleitungsantwort (<literal>303</literal>) und wird an einen nicht auflösbaren Host weitergeleitet.
    </para>
    <para>
     Dies geschieht, wenn die Ausfallsicherung während zweier HAProxy-Zustandsprüfungen auftritt. In dieser Situation antwortet der zuvor aktive Dashboard-Knoten nun mit einer 303, die auf den neuen aktiven Knoten zeigt. Um diese Situation zu vermeiden, sollten Sie erwägen, das Weiterleitungsverhalten auf Standby-Knoten zu deaktivieren.
    </para>
   </note>
<screen>
  defaults
    log global
    option log-health-checks
    timeout connect 5s
    timeout client 50s
    timeout server 450s

  frontend dashboard_front
    mode http
    bind *:80
    option httplog
    redirect scheme https code 301 if !{ ssl_fc }

  frontend dashboard_front_ssl
    mode tcp
    bind *:443
    option tcplog
    default_backend dashboard_back_ssl

  backend dashboard_back_ssl
    mode tcp
    option httpchk GET /
    http-check expect status 200
    server x <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server y <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server z <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-auditing">
  <title>Revision von API-Anforderungen</title>

  <para>
   Die REST-API des Ceph Dashboards kann PUT-, POST- und DELETE-Anforderungen im Ceph-Revisionsprotokoll festhalten. Die Protokollierung ist standardmäßig deaktiviert; mit folgendem Kommando können Sie sie jedoch aktivieren:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>

  <para>
   Nach der Aktivierung werden die folgenden Parameter für jede Anforderung protokolliert:
  </para>

  <variablelist>
   <varlistentry>
    <term>Von</term>
    <listitem>
     <para>
      Ursprung der Anforderung, z. B. „https://[::1]:44410“.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Pfad</term>
    <listitem>
     <para>
      Der REST API-Pfad, z. B <filename>/api/auth</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Methode</term>
    <listitem>
     <para>
      „PUT“, „POST“ oder „DELETE“.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>benutzer</term>
    <listitem>
     <para>
      Name des Benutzers (oder „None“ [Keine]).
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Beispiel für einen Protokolleintrag:
  </para>

<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>

  <tip>
   <title>Deaktivieren der Protokollierung der Anforderungsnutzlast</title>
   <para>
    Die Protokollierung der Anforderungsnutzlast (die Liste der Argumente und ihrer Werte) ist standardmäßig aktiviert. So können Sie sie deaktivieren:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
  </tip>
 </sect1>
 <sect1 xml:id="dashboard-config-nfs-ganesha">
  <title>Konfigurieren von NFS Ganesha im Ceph Dashboard</title>

  <para>
   Das Ceph Dashboard kann NFS-Ganesha-Exporte verwalten, die CephFS oder Object Gateway als Backstore verwenden. Das Dashboard verwaltet NFS-Ganesha-Konfigurationsdateien, die in RADOS-Objekten auf dem CephFS-Cluster gespeichert sind. NFS Ganesha muss einen Teil ihrer Konfiguration im Ceph-Cluster speichern.
  </para>

  <para>
   Konfigurieren Sie den Standort der Konfigurationsobjekte von NFS Ganesha mit folgendem Kommando:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>]</screen>

  <para>
   Sie können nun NFS-Ganesha-Exporte über das Ceph Dashboard verwalten.
  </para>

  <sect2 xml:id="dashboard-multi-config-nfs-ganesha">
   <title>Konfigurieren mehrerer NFS-Ganesha-Cluster</title>
   <para>
    Das Ceph Dashboard unterstützt die Verwaltung von NFS-Ganesha-Exporten, die zu verschiedenen NFS-Ganesha-Clustern gehören. Wir empfehlen, dass jeder NFS-Ganesha-Cluster seine Konfigurationsobjekte in einem anderen RADOS-Pool/Namespace speichert, um die Konfigurationen voneinander zu isolieren.
   </para>
   <para>
    Geben Sie mit folgendem Kommando die Speicherorte der Konfiguration der einzelnen NFS-Ganesha-Cluster an:
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>](,<replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>])*</screen>
   <para>
    Die <replaceable>cluster_id</replaceable> ist eine beliebige Zeichenkette, die den NFS-Ganesha-Cluster eindeutig identifiziert.
   </para>
   <para>
    Wenn Sie das Ceph Dashboard mit mehreren NFS-Ganesha-Clustern konfigurieren, können Sie in der Weboberfläche automatisch auswählen, zu welchem Cluster ein Export gehört.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-debug-plugin">
  <title>Plugins zur Fehlersuche</title>

  <para>
   Ceph-Dashboard-Plugins erweitern die Funktionalität des Dashboards. Das Plugin zur Fehlersuche ermöglicht die Anpassung des Verhaltens des Dashboards entsprechend dem Fehlersuchmodus. Es kann mit folgendem Kommando aktiviert, deaktiviert oder überprüft werden:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug status
Debug: 'disabled'
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug enable
Debug: 'enabled'
<prompt>cephuser@adm &gt; </prompt>dashboard debug disable
Debug: 'disabled'
</screen>

  <para>
   Es ist standardmäßig deaktiviert. Dies ist die empfohlene Einstellung für Produktionsbereitstellungen. Bei Bedarf kann der Fehlersuchmodus aktiviert werden, ohne dass ein Neustart erforderlich ist.
  </para>
 </sect1>
</chapter>
