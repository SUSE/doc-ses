<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="upgrade-to-pacific.xml" version="5.0" xml:id="upgrade-to-pacific">
 <title>Upgrade von SUSE Enterprise Storage 7 auf 7.1</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  In diesem Kapitel finden Sie die Schritte zum Upgrade von SUSE Enterprise Storage 7 auf Version 7.1.
 </para>
 <para>
  Das Upgrade umfasst die folgenden Aufgaben:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    Upgrade des zugrunde liegenden Betriebssystems SUSE Linux Enterprise Server 15 SP2 auf SUSE Linux Enterprise Server 15 SP3.
   </para>
  </listitem>
  <listitem>
   <para>
    Upgrade von Ceph Octopus auf Pacific.
   </para>
  </listitem>
 </itemizedlist>
 <sect1 xml:id="before-upgrade-7p">
  <title>Vor dem Aufrüsten</title>

  <para>
   Die folgenden Aufgaben <emphasis>müssen</emphasis> abgeschlossen sein, bevor Sie das Upgrade starten. Dies kann jederzeit während der Laufzeit von SUSE Enterprise Storage 7 erfolgen.
  </para>

  <sect2 xml:id="upgrade-consider-points-7p">
   <title>Zu berücksichtigende Aspekte</title>
   <para>
    Lesen Sie vor dem Upgrade unbedingt die folgenden Abschnitte durch, um sicherzustellen, dass Sie alle auszuführenden Aufgaben verstehen.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      <emphasis>Lesen Sie die Versionshinweise</emphasis>. Darin finden Sie zusätzliche Informationen zu den Änderungen, die seit der vorigen Version von SUSE Enterprise Storage vorgenommen wurden. Informieren Sie sich in den Versionshinweisen über Folgendes:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        Sind bei der Hardware besondere Überlegungen zu beachten?
       </para>
      </listitem>
      <listitem>
       <para>
        Wurden erhebliche Änderungen an den verwendeten Softwarepaketen vorgenommen?
       </para>
      </listitem>
      <listitem>
       <para>
        Gelten besondere Vorsichtsmaßnahmen für die vorliegende Installation?
       </para>
      </listitem>
     </itemizedlist>
     <para>
      In den Versionshinweisen finden Sie auch Informationen, die erst nach der Fertigstellung des Handbuchs bekannt wurden. Auch bekannte Probleme werden beschrieben.
     </para>
     <para>
      Die Versionshinweise zu SES 7.1 finden Sie online unter <link xlink:href="https://www.suse.com/releasenotes/"/>.
     </para>
     <para>
      Nach der Installation des Pakets <package>release-notes-ses</package> aus dem SES 7.1-Repository finden Sie die Versionshinweise zudem lokal im Verzeichnis <filename>/usr/share/doc/release-notes</filename> oder online unter <link xlink:href="https://www.suse.com/releasenotes/"/>.
     </para>
    </listitem>
    <listitem>
     <para>
      Lesen Sie <xref linkend="ses-deployment"/>, um sich mit <systemitem class="resource">ceph-salt</systemitem> und dem Ceph-Orchestrator vertraut zu machen, insbesondere die Informationen zu Servicespezifikationen.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="upgrade-backup-config-data-7p">
   <title>Sichern der Cluster-Konfiguration und -Daten</title>
   <para>
    Es wird dringend empfohlen, die gesamte Cluster-Konfiguration und alle Daten zu sichern, bevor Sie mit dem Upgrade beginnen. Anweisungen zur Sicherung aller Daten finden Sie im <xref linkend="cha-deployment-backup"/>.
   </para>
  </sect2>

  <sect2 xml:id="verify-previous-upgrade-patch-repos-7p">
   <title>Überprüfen des Zugriffs auf Software-Repositorys und Container-Images</title>
   <para>
    Stellen Sie sicher, dass alle Cluster-Knoten Zugriff auf die Software-Repositorys von SUSE Linux Enterprise Server 15 SP3 und SUSE Enterprise Storage 7.1 sowie auf die Registrierung von Container-Images haben.
   </para>
   <sect3 xml:id="verify-previous-upgrade-patch-repos-repos-7p">
    <title>Software-Repositorys</title>
    <para>
     Wenn alle Knoten bei SCC registriert sind, können Sie das Kommando <command>zypper migration</command> für das Upgrade verwenden. Weitere Informationen finden Sie in <link xlink:href="https://documentation.suse.com/sles/15-SP3/html/SLES-all/cha-upgrade-online.html#sec-upgrade-online-zypper"/>.
    </para>
    <para>
     Wenn Knoten <emphasis role="bold">nicht</emphasis> bei SCC registriert sind, deaktivieren Sie alle vorhandenen Software-Repositorys und fügen Sie sowohl das <literal>Pool</literal>- als auch das <literal>Updates</literal>-Repository für jede der folgenden Erweiterungen hinzu:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       SLE-Product-SLES/15-SP3
      </para>
     </listitem>
     <listitem>
      <para>
       SLE-Module-Basesystem/15-SP3
      </para>
     </listitem>
     <listitem>
      <para>
       SLE-Module-Server-Applications/15-SP3
      </para>
     </listitem>
     <listitem>
      <para>
       SUSE-Enterprise-Storage-7.1
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="verify-previous-upgrade-patch-repos-images-7p">
    <title>Container-Images</title>
    <para>
     Alle Cluster-Knoten benötigen Zugriff auf die Container-Image-Registrierung. In den meisten Fällen verwenden Sie die öffentliche SUSE-Registrierung unter <literal>registry.suse.com</literal>. Dafür benötigen Sie die folgenden Images:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       registry.suse.com/ses/7.1/ceph/ceph
      </para>
     </listitem>
     <listitem>
      <para>
       registry.suse.com/ses/7.1/ceph/grafana
      </para>
     </listitem>
     <listitem>
      <para>
       registry.suse.com/ses/7.1/ceph/prometheus-server
      </para>
     </listitem>
     <listitem>
      <para>
       registry.suse.com/ses/7.1/ceph/prometheus-node-exporter
      </para>
     </listitem>
     <listitem>
      <para>
       registry.suse.com/ses/7.1/ceph/prometheus-alertmanager
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Alternativ (z. B. für Air-Gap-Bereitstellungen) können Sie eine lokale Registrierung konfigurieren und überprüfen, ob Sie den richtigen Satz von Container-Images zur Verfügung haben. Weitere Details zum Konfigurieren einer lokalen Container-Image-Registrierung finden Sie in <xref linkend="deploy-cephadm-configure-registry"/>.
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="upgrade-cluster-nodes">
  <title>Migrieren von SUSE Linux Enterprise Server auf jedem Cluster-Knoten zu SUSE Linux Enterprise Server 15 SP3</title>

  <para>
   Wenn die Cluster-Knoten zur Verwendung des SUSE Customer Center konfiguriert sind, können Sie dazu das Kommando <command>zypper migration</command> ausführen.
  </para>

  <para>
   Wenn die Cluster-Knoten über manuell konfigurierte Software-Repositorys verfügen, müssen Sie die Knoten manuell aktualisieren.
  </para>

  <para>
   Weitere Informationen zum Upgrade von SUSE Linux Enterprise Server mithilfe von <command>zypper</command> finden Sie unter <link xlink:href="https://documentation.suse.com/sles/15-SP3/html/SLES-all/cha-upgrade-online.html#sec-upgrade-online-zypper"/>.
  </para>
 </sect1>
 <sect1 xml:id="upgrade-ses-packages">
  <title>Aktualisieren von SUSE Enterprise Storage-Paketen auf den Cluster-Knoten</title>

  <para>
   Zum Aktualisieren der SUSE Enterprise Storage-Pakete auf die neueste Version verwenden Sie das Kommando <command>ceph-salt update</command>. Weitere Einzelheiten finden Sie unter <xref linkend="cephadm-rolling-updates"/>.
  </para>
 </sect1>
 <sect1 xml:id="upgrade-ses-services">
  <title>Upgrade von vorhanden Ceph-Cluster-Services</title>

  <para>
   Führen Sie das Upgrade des gesamten Ceph-Clusters auf die Version Pacific durch, indem Sie folgendes Kommando auf dem Admin-Knoten ausführen:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph orch upgrade start --image registry.suse.com/ses/7.1/ceph/ceph</screen>
 </sect1>
</chapter>
