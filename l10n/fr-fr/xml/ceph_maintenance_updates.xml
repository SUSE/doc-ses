<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_maintenance_updates.xml" version="5.0">
 <title>Mises à jour de maintenance de Ceph basées sur les versions intermédiaires « Octopus » en amont</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>oui</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Plusieurs paquetages clés de SUSE Enterprise Storage 7 sont basés sur la série de versions Octopus de Ceph. Lorsque le projet Ceph (<link xlink:href="https://github.com/ceph/ceph"/>) publie de nouvelles versions intermédiaires dans la série Octopus, SUSE Enterprise Storage 7 est mis à jour pour garantir que le produit bénéficie des derniers rétroports de fonctionnalités et correctifs de bogues en amont.
 </para>
 <para>
  Ce chapitre contient des résumés des changements notables contenus dans chaque version intermédiaire en amont qui a été ou devrait être incluse dans le produit.
 </para>
 <bridgehead renderas="sect1">Version intermédiaire 15.2.5 d'Octopus</bridgehead>
 <para>
  La version intermédiaire 15.2.5 d'Octopus a apporté les correctifs et autres modifications suivants :
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CephFS : des stratégies de partitionnement statique automatique en sous-arborescences peuvent désormais être configurées à l'aide des nouveaux attributs étendus d'épinglage éphémère distribué et aléatoire sur les répertoires. Pour plus d'informations, reportez-vous à la documentation suivante : <link xlink:href="https://docs.ceph.com/docs/master/cephfs/multimds/"/>
   </para>
  </listitem>
  <listitem>
   <para>
    Les moniteurs disposent désormais d'une option de configuration <option>mon_osd_warn_num_repaired</option>, définie sur 10 par défaut. Si un OSD a réparé plus que ces nombreuses erreurs d'E/S dans les données stockées, un avertissement d'état de santé <literal>OSD_TOO_MANY_REPAIRS</literal> est généré.
   </para>
  </listitem>
  <listitem>
   <para>
    Désormais, lorsque des indicateurs <literal>no scrub</literal> et/ou <literal>no deep-scrub</literal> sont définis globalement ou par réserve, les nettoyages planifiés du type désactivé sont abandonnés. Tous les nettoyages lancés par l'utilisateur ne sont PAS interrompus.
   </para>
  </listitem>
  <listitem>
   <para>
    Résolution d'un problème d'optimisation des cartes OSD dans une grappe saine.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Version intermédiaire 15.2.4 d'Octopus</bridgehead>
 <para>
  La version intermédiaire 15.2.4 d'Octopus a apporté les correctifs et autres modifications suivants :
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10753 : rgw: assainissement des nouvelles lignes dans la propriété ExposeHeader  de s3 CORSConfiguration
   </para>
  </listitem>
  <listitem>
   <para>
    Object Gateway : les sous-commandes <command>radosgw-admin</command> relatives aux orphelins (<command>radosgw-admin orphans find</command>, <command>radosgw-admin orphans finish</command> et <command>radosgw-admin orphans list-jobs</command>) ont été abandonnées. Elles n'avaient pas fait l'objet d'une maintenance active, et comme elles stockent les résultats intermédiaires sur la grappe, elles pouvaient potentiellement remplir une grappe presque pleine. Elles ont été remplacées par <command>rgw-orphelin-list</command>, un outil actuellement considéré comme expérimental.
   </para>
  </listitem>
  <listitem>
   <para>
    RBD : l'objet de réserve RBD utilisé pour stocker la planification de la purge de la corbeille RBD s'appelle désormais <literal>rbd_trash_purge_schedule</literal> au lieu de <literal>rbd_trash_trash_purge_schedule</literal>. Les utilisateurs qui ont déjà commencé à utiliser la fonctionnalité de planification de purge de la corbeille RBD et qui ont configuré des planifications par réserve ou espace de noms doivent copier l'objet <literal>rbd_trash_trash_purge_schedule</literal> dans <literal>rbd_trash_purge_schedule</literal> avant la mise à niveau et supprimer <literal>rbd_trash_purge_schedule</literal> à l'aide des commandes suivantes dans chaque réserve et espace de noms RBD où une planification de purge de la corbeille avait été précédemment configurée :
   </para>
<screen>
rados -p <replaceable>pool-name</replaceable> [-N namespace] cp rbd_trash_trash_purge_schedule rbd_trash_purge_schedule
rados -p <replaceable>pool-name</replaceable> [-N namespace] rm rbd_trash_trash_purge_schedule
</screen>
   <para>
    Vous pouvez également utiliser tout autre moyen pratique permettant de restaurer la planification après la mise à niveau.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Version intermédiaire 15.2.3 d'Octopus</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    La version intermédiaire 15.2.3 d'Octopus était une version corrective destinée à résoudre un problème d'altération de WAL qui survenait lorsque les options <option>bluefs_preextend_wal_files</option> et <option>bluefs_buffered_io</option> étaient activées en même temps. Le correctif de la version 15.2.3 n'est qu'une mesure temporaire (définition de la valeur par défaut de <option>bluefs_preextend_wal_files</option> sur <literal>false</literal>). Le correctif permanent consistera à supprimer complètement l'option <option>bluefs_preextend_wal_files</option> : ce correctif arrivera probablement dans la version intermédiaire 15.2.6.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Version intermédiaire 15.2.2 d'Octopus</bridgehead>
 <para>
  La version intermédiaire 15.2.2 d'Octopus a corrigé une faille de sécurité :
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10736 : correction d'un contournement d'autorisation dans les MON et les MGR
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Version intermédiaire 15.2.1 d'Octopus</bridgehead>
 <para>
  La version intermédiaire 15.2.1 d'Octopus a résolu un problème qui entraînait le blocage des OSD en cas de mise à niveau rapide de Luminous (SES5.5) vers Nautilus (SES6), puis vers Octopus (SES7). Elle a également corrigé deux failles de sécurité qui étaient présentes dans la version initiale d'Octopus (15.2.0) :
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-1759 : correction du problème de réutilisation du nonce dans le mode sécurisé de msgr V2
   </para>
  </listitem>
  <listitem>
   <para>
    CVE-2020-1760 : correction du problème de XSS en raison du fractionnement des en-têtes dans RGW GetObject
   </para>
  </listitem>
 </itemizedlist>
</appendix>
