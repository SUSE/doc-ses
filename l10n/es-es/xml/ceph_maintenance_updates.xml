<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_maintenance_updates.xml" version="5.0">
 <title>Actualizaciones de mantenimiento de Ceph basadas en versiones secundarias superiores de Octopus</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sí</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Varios paquetes clave de SUSE Enterprise Storage 7 se basan en las distintas versiones de Octopus de Ceph. Cuando el proyecto Ceph (<link xlink:href="https://github.com/ceph/ceph"/>) publica nuevas versiones secundarias de la serie Octopus, SUSE Enterprise Storage 7 se actualiza para garantizar que el producto se beneficia de las últimas correcciones de solucionar errores y actualizaciones retroactivas de características de esas versiones.
 </para>
 <para>
  Este capítulo contiene un resumen de los principales cambios incluidos en cada versión secundaria posterior que se ha incluido en el producto, o que se tiene previsto incluir.
 </para>
 <bridgehead renderas="sect1">Octopus 15.2.5</bridgehead>
 <para>
  La versión 15.2.5 de Octopus aporta las siguientes correcciones y otros cambios:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CephFS: las directivas de partición de subárbol estático automáticas ahora se pueden configurar mediante los nuevos atributos extendidos de fijación efímera aleatoria y distribuida en los directorios. Para obtener más datos, consulte la documentación siguiente: <link xlink:href="https://docs.ceph.com/docs/master/cephfs/multimds/"/>
   </para>
  </listitem>
  <listitem>
   <para>
    Los monitores tienen ahora una opción de configuración <option>mon_osd_warn_num_repaired</option>, que está definida en 10 por defecto. Si algún OSD ha reparado más errores de E/S en los datos almacenados de los indicados por esta cifra, se genera una advertencia de estado <literal>OSD_TOO_MANY_REPAIRS</literal>.
   </para>
  </listitem>
  <listitem>
   <para>
    Ahora, si los indicadores <literal>no scrub</literal> o <literal>no deep-scrub</literal> se definen globalmente o por repositorio, la depuración programada del tipo inhabilitado se interrumpirán. Las depuraciones iniciadas por el usuario NO se interrumpen.
   </para>
  </listitem>
  <listitem>
   <para>
    Se ha solucionado un problema por el que osdmaps no se optimizaba en un clúster en buen estado.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.4</bridgehead>
 <para>
  La versión 15.2.4 de Octopus aporta las siguientes correcciones y otros cambios:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10753: rgw: se han saneado las nuevas líneas en el encabezado ExposeHeader de s3 CORSConfiguration
   </para>
  </listitem>
  <listitem>
   <para>
    Object Gateway: los subcomandos <command>radosgw-admin</command> relacionados con huérfanos (<command>radosgw-admin orphans find</command>, <command>radosgw-admin orphans finish</command> y <command>radosgw-admin orphans list-jobs</command>) han quedado obsoletos. No se han mantenido de forma activa y, dado que almacenan resultados intermedios en el clúster, podrían llegar a ocupar un clúster casi por completo. Se han sustituido por una herramienta, <command>rgw-orphan-list</command>, que actualmente se considera experimental.
   </para>
  </listitem>
  <listitem>
   <para>
    RBD: el nombre del objeto de repositorio RBD que se utiliza para almacenar la programación de limpieza de la papelera de RBD ha cambiado de <literal>rbd_trash_trash_purge_schedule</literal> a <literal>rbd_trash_purge_schedule</literal>. Los usuarios que ya han comenzado a utilizar la función de programación de limpieza de papelera de RBD y tienen programas por repositorio o por espacio de nombres configuradas deben copiar el objeto <literal>rbd_trash_trash_purge_schedule</literal> en <literal>rbd_trash_purge_schedule</literal> antes de la actualización y eliminar <literal>rbd_trash_purge_schedule</literal> mediante los comandos siguientes en cada repositorio RBD y espacio de nombres configurado anteriormente:
   </para>
<screen>
rados -p <replaceable>pool-name</replaceable> [-N namespace] cp rbd_trash_trash_purge_schedule rbd_trash_purge_schedule
rados -p <replaceable>pool-name</replaceable> [-N namespace] rm rbd_trash_trash_purge_schedule
</screen>
   <para>
    También puede utilizar cualquier otra forma conveniente de restaurar la programación después de la actualización.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.3</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    La versión 15.2.3 de Octopus era una versión Hot Fix para solucionar un problema en el que se detectaban daños en WAL cuando se habilitaban <option>bluefs_preextend_wal_files</option> y <option>bluefs_bufferen_io</option> al mismo tiempo. La corrección de 15.2.3 es solo una medida temporal (que cambia el valor por defecto de <option>bluefs_preextend_wal_files</option> a <literal>false</literal>). La solución permanente será eliminar por completo la opción <option>bluefs_preextend_wal_files</option>: lo más probable es que esta solución llegue en la versión 15.2.6.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.2</bridgehead>
 <para>
  La versión 15.2.2 de Octopus solucionó una vulnerabilidad de seguridad:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-10736: se ha corregido una omisión de autorización en MON y MGR.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Octopus 15.2.1</bridgehead>
 <para>
  La versión 15.2.1 de Octopus solucionó un problema por el cual la actualización rápida de Luminous (SES5.5) a Nautilus (SES6) a Octopus (SES7) provocaba que los OSD se bloquearan. Además, se aplicaron parches a dos vulnerabilidades de seguridad presentes en la versión inicial de Octopus (15.2.0):
 </para>
 <itemizedlist>
  <listitem>
   <para>
    CVE-2020-1759: se ha corregido la reutilización de nonce en el modo seguro de msgr V2.
   </para>
  </listitem>
  <listitem>
   <para>
    CVE-2020-1760: XSS corregido debido a la división de encabezado GetObject de RGW.
   </para>
  </listitem>
 </itemizedlist>
</appendix>
