<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="dashboard_user_cmdline.xml" version="5.0" xml:id="dashboard-user-roles">
 <title>Gestión de usuarios y funciones en la línea de comandos</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sí</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  En esta sección se describe cómo gestionar las cuentas de usuario utilizadas por la Ceph Dashboard. Sirve de ayuda para crear o modificar cuentas de usuario, así como para establecer las funciones y permisos de usuario adecuados.
 </para>
 <sect1 xml:id="dashboard-password-policy">
  <title>Gestión de la directiva de contraseñas</title>

  <para>
   Por defecto, la función de directiva de contraseñas está habilitada, incluidas las siguientes comprobaciones:
  </para>

  <itemizedlist>
   <listitem>
    <para>
     ¿La contraseña tiene más de <emphasis>N</emphasis> caracteres?
    </para>
   </listitem>
   <listitem>
    <para>
     ¿Son iguales la contraseña antigua y la nueva?
    </para>
   </listitem>
  </itemizedlist>

  <para>
   La función de directiva de contraseñas se puede activar o desactivar por completo:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-enabled <replaceable>true|false</replaceable></screen>

  <para>
   Las siguientes comprobaciones individuales se pueden activar o desactivar:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-length-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-oldpwd-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-username-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-exclusion-list-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-complexity-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-sequential-chars-enabled <replaceable>true|false</replaceable>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-check-repetitive-chars-enabled <replaceable>true|false</replaceable>
</screen>

  <para>
   Además, las siguientes opciones están disponibles para configurar el comportamiento de la directiva de contraseñas.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     La longitud mínima de la contraseña (por defecto es 8):
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-length <replaceable>N</replaceable></screen>
   </listitem>
   <listitem>
    <para>
     La complejidad mínima de la contraseña (por defecto es 10):
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-min-complexity <replaceable>N</replaceable></screen>
    <para>
     La complejidad de la contraseña se calcula clasificando cada carácter de la contraseña.
    </para>
   </listitem>
   <listitem>
    <para>
     Una lista de palabras separadas por comas que no se pueden utilizar en una contraseña:
    </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-pwd-policy-exclusion-list <replaceable>word</replaceable>[,...]</screen>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="dashboard-user-accounts">
  <title>Gestión de cuentas de usuario</title>

  <para>
   Ceph Dashboard admite la gestión de varias cuentas de usuario. Cada cuenta de usuario está formada por un nombre de usuario, una contraseña (almacenada cifrada mediante <literal>bcrypt</literal>), un nombre opcional y una dirección de correo electrónico opcional.
  </para>

  <para>
   Las cuentas de usuario se almacenan en la base de datos de configuración de Ceph Monitor y se comparten de forma global entre todas las instancias de Ceph Manager.
  </para>

  <para>
   Utilice los comandos siguientes para gestionar cuentas de usuario:
  </para>

  <variablelist>
   <varlistentry>
    <term>Mostrar usuarios existentes:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Crear un usuario:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Suprimir un usuario:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Cambiar la contraseña de un usuario:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Modificar el nombre y el correo electrónico de un usuario:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Inhabilitar un usuario:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-disable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Habilitar un usuario:</term>
    <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-enable <replaceable>USERNAME</replaceable>
</screen>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="dashboard-permissions">
  <title>Funciones y permisos de usuario</title>

  <para>
   En esta sección se describen los ámbitos de seguridad que puede asignar a una función de usuario, y se explica cómo gestionar funciones de usuario y cómo asignarlas a cuentas de usuario.
  </para>

  <sect2 xml:id="dashboard-security-scopes">
   <title>Definición de ámbitos de seguridad</title>
   <para>
    Las cuentas de usuario están asociadas a un conjunto de funciones que definen a qué partes de la consola puede tener acceso el usuario. Las distintas partes de la consola se agrupan dentro de un ámbito de <emphasis>seguridad</emphasis>. Los ámbitos de seguridad están predefinidos y son estáticos. Actualmente están disponibles los siguientes ámbitos de seguridad:
   </para>
   <variablelist>
    <varlistentry>
     <term>hosts</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la entrada del menú <guimenu>Hosts</guimenu>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>config-opt</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con las gestión de las opciones de configuración de Ceph.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de repositorios.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>osd</term>
     <listitem>
      <para>
       Incluye todas las funciones relacionadas con la gestión de Ceph OSD.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>monitor</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de Ceph Monitor.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-image</term>
     <listitem>
      <para>
       Incluye todas las funciones relacionadas con la gestión de imágenes de dispositivos de bloques RADOS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rbd-mirroring</term>
     <listitem>
      <para>
       Incluye todas las funciones relacionadas con la gestión de duplicados de dispositivos de bloques RADOS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>iscsi</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de Object Gateway.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de CephFS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>manager</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de Ceph Manager.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>log</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con la gestión de los registros de Ceph.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>grafana</term>
     <listitem>
      <para>
       Incluye todas las características relacionadas con el proxy de Grafana.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>prometheus</term>
     <listitem>
      <para>
       Incluye todas las funciones relacionadas con la gestión de alertas Prometheus.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>dashboard-settings</term>
     <listitem>
      <para>
       Permite cambiar la configuración de la consola.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-user-roles-security-scope">
   <title>Especificación de funciones de usuario</title>
   <para>
    Una <emphasis>función</emphasis> especifica un conjunto de asignaciones entre un <emphasis>ámbito de seguridad</emphasis> y un conjunto de <emphasis>permisos</emphasis>. Hay cuatro tipos de permisos: "leer", "crear", "actualizar" y "suprimir".
   </para>
   <para>
    En el ejemplo siguiente se especifica una función en la que un usuario tiene los permisos "leer" y "crear" para las características relacionadas con la gestión de repositorios, y tiene permisos completos para las características relacionadas con la gestión de imágenes RBD:
   </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
   <para>
    La consola ya proporciona un conjunto de funciones predefinidas que llamamos <emphasis>funciones del sistema</emphasis>. Puede usarlas de inmediato después de instalar la Ceph Dashboard:
   </para>
   <variablelist>
    <varlistentry>
     <term>administrator</term>
     <listitem>
      <para>
       Proporciona permisos completos para todos los ámbitos de seguridad.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>read-only</term>
     <listitem>
      <para>
       Proporciona permiso de lectura para todos los ámbitos de seguridad, excepto para la configuración de la consola.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>block-manager</term>
     <listitem>
      <para>
       Proporciona permisos completos para los ámbitos "rbd-image", "rbd-mirroring" e "iscsi".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>rgw-manager</term>
     <listitem>
      <para>
       Proporciona permisos completos para el ámbito "rgw".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cluster-manager</term>
     <listitem>
      <para>
       Proporciona permisos completos para los ámbitos "hosts", "osd", "monitor", "manager" y "config-opt".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>pool-manager</term>
     <listitem>
      <para>
       Proporciona permisos completos para el ámbito "pool".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>cephfs-manager</term>
     <listitem>
      <para>
       Proporciona permisos completos para el ámbito "cephfs".
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="dashboard-managing-custom-roles">
    <title>Gestión de funciones personalizadas</title>
    <para>
     Puede crear nuevas funciones de usuario mediante los siguientes comandos:
    </para>
    <variablelist>
     <varlistentry>
      <term>Crear una función:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Suprimir una función:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Añadir permisos de ámbito a una función:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Suprimir permisos de ámbito de una función:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-assigning-roles-user-accounts">
    <title>Asignación de funciones a cuentas de usuario</title>
    <para>
     Utilice los comandos siguientes para asignar funciones a los usuarios:
    </para>
    <variablelist>
     <varlistentry>
      <term>Definir funciones de usuario:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Añadir funciones adicionales a un usuario:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Suprimir funciones de un usuario:</term>
      <listitem>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
      </listitem>
     </varlistentry>
    </variablelist>
    <tip>
     <title>limpieza de funciones personalizadas</title>
     <para>
      Si crea funciones de usuario personalizadas y tiene previsto eliminar el clúster de Ceph con el runner <command>ceph.purge</command> más adelante, primero debe limpiar las funciones personalizadas. Más detalles en la <xref linkend="ceph-cluster-purge"/>
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="example-create-user-custom-role">
    <title>Ejemplo: creación de un usuario y una función personalizada</title>
    <para>
     En esta sección se describe un procedimiento para crear una cuenta de usuario capaz de gestionar imágenes RBD, ver y crear repositorios de Ceph y tener acceso de solo lectura a cualquier otro ámbito.
    </para>
    <procedure>
     <step>
      <para>
       Cree un usuario llamado <literal>tux</literal>:
      </para>
<screen>
 <prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
     </step>
     <step>
      <para>
       Cree una función y especifique los permisos de ámbito:
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
     </step>
     <step>
      <para>
       Asocie las funciones con el usuario <literal>tux</literal>:
      </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-proxy-config">
  <title>Configuración de proxy:</title>

  <para>
   Si desea establecer una URL fija para acceder a Ceph Dashboard, o si no desea permitir conexiones directas con los nodos del gestor, puede configurar un servidor proxy que reenvíe automáticamente las peticiones entrantes a la instancia de <literal>ceph-mgr</literal> activa.
  </para>

  <sect2 xml:id="dashboard-proxy">
   <title>Acceso a la consola con proxies inversos</title>
   <para>
    Si accede a la consola a través de una configuración de proxy inverso, es posible que deba darle servicio mediante un prefijo de URL. Para que la consola pueda usar hipervínculos que incluyan el prefijo, puede definir el valor de <option>url_prefix</option>:
   </para>
<screen>
  <prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
  </screen>
   <para>
    A continuación, podrá acceder a la consola en <literal>http://<replaceable>NOMBRE_HOST</replaceable>:<replaceable>NÚMERO_PUERTO</replaceable>/<replaceable>PREFIJO_URL</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-disable-redirection">
   <title>Inhabilitación de redirecciones</title>
   <para>
    Si Ceph Dashboard se encuentra detrás de un servidor proxy de equilibrio de carga como HAProxy, inhabilite el comportamiento de redirección para evitar situaciones en las que las URL internas (que no se pueden resolver) se publiquen en el cliente de procesador frontal. Utilice el comando siguiente para que la consola responda con un error HTTP (<literal>500</literal> por defecto) en lugar de redirigir a la consola activa:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "error"
</screen>
   <para>
    Para restablecer el ajuste al comportamiento de redirección por defecto, utilice el comando siguiente:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_behaviour "redirect"
</screen>
  </sect2>

  <sect2 xml:id="dashboard-config-error-status">
   <title>Configuración de códigos de estado de error</title>
   <para>
    Si el comportamiento de redirección está inhabilitado, debe personalizar el código de estado HTTP de las consolas en espera. Para ello, ejecute el comando siguiente:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph config set mgr mgr/dashboard/standby_error_status_code 503
</screen>
  </sect2>

  <sect2 xml:id="dashboard-haproxy-config">
   <title>Configuración de ejemplo de HAProxy</title>
   <para>
    El siguiente ejemplo de configuración es para la transferencia directa TLS/SSL mediante HAProxy.
   </para>
   <note>
    <para>
     La configuración funciona en las siguientes condiciones: si la consola falla, el cliente de procesador frontal puede recibir una respuesta de redirección HTTP (<literal>303</literal>) y se le redirigirá a un host que no se puede resolver.
    </para>
    <para>
     Esto ocurre cuando se produce un failover durante dos comprobaciones de estado de HAProxy. En este caso, el nodo de consola anteriormente activo responderá ahora con un 303, que señala al nuevo nodo activo. Para evitarlo, puede inhabilitar el comportamiento de redirección en los nodos en espera.
    </para>
   </note>
<screen>
  defaults
    log global
    option log-health-checks
    timeout connect 5s
    timeout client 50s
    timeout server 450s

  frontend dashboard_front
    mode http
    bind *:80
    option httplog
    redirect scheme https code 301 if !{ ssl_fc }

  frontend dashboard_front_ssl
    mode tcp
    bind *:443
    option tcplog
    default_backend dashboard_back_ssl

  backend dashboard_back_ssl
    mode tcp
    option httpchk GET /
    http-check expect status 200
    server x <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server y <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
    server z <replaceable>HOST</replaceable>:<replaceable>PORT</replaceable> ssl check verify none
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-auditing">
  <title>Auditoría de peticiones de API</title>

  <para>
   La API REST de Ceph Dashboard puede registrar peticiones PUT, POST y DELETE en el registro de auditoría de Ceph. El registro está inhabilitado por defecto, pero es posible habilitarlo con el siguiente comando:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>

  <para>
   Si está habilitado, se registran los parámetros siguientes por cada petición:
  </para>

  <variablelist>
   <varlistentry>
    <term>from</term>
    <listitem>
     <para>
      El origen de la petición, por ejemplo "https://[::1]:44410".
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>path</term>
    <listitem>
     <para>
      La vía de la API REST, por ejemplo <filename>/api/auth</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>method</term>
    <listitem>
     <para>
      "PUT", "POST" o "DELETE".
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>user</term>
    <listitem>
     <para>
      El nombre del usuario (o "Ninguno").
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Una entrada de registro de ejemplo tiene este aspecto:
  </para>

<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>

  <tip>
   <title>inhabilitación del registro de la carga útil de la petición</title>
   <para>
    El registro de la carga útil de la petición (la lista de argumentos y sus valores) está habilitado por defecto. Puede inhabilitarlo de la siguiente manera:
   </para>
<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
  </tip>
 </sect1>
 <sect1 xml:id="dashboard-config-nfs-ganesha">
  <title>Configuración de NFS Ganesha en Ceph Dashboard</title>

  <para>
   Ceph Dashboard puede gestionar las exportaciones de NFS Ganesha que utilizan CephFS u Object Gateway como almacén secundario. La consola gestiona los archivos de configuración de NFS Ganesha almacenados en objetos RADOS en el clúster de CephFS. NFS Ganesha debe almacenar parte de su configuración en el clúster de Ceph.
  </para>

  <para>
   Ejecute el comando siguiente para configurar la ubicación del objeto de configuración de NFS Ganesha:
  </para>

<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>]</screen>

  <para>
   Ahora puede gestionar las exportaciones de NFS Ganesha mediante Ceph Dashboard.
  </para>

  <sect2 xml:id="dashboard-multi-config-nfs-ganesha">
   <title>Configuración de varios clústeres de NFS Ganesha</title>
   <para>
    Ceph Dashboard admite la gestión de exportaciones de NFS Ganesha que pertenecen a diferentes clústeres de NFS Ganesha. Se recomienda que cada clúster de NFS Ganesha almacene sus objetos de configuración en un repositorio o espacio de nombres RADOS diferente para aislar las configuraciones entre sí.
   </para>
   <para>
    Utilice el comando siguiente para especificar las ubicaciones de la configuración de cada clúster de NFS Ganesha:
   </para>
<screen><prompt>cephuser@adm &gt; </prompt>ceph dashboard set-ganesha-clusters-rados-pool-namespace <replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>](,<replaceable>cluster_id</replaceable>:<replaceable>pool_name</replaceable>[/<replaceable>namespace</replaceable>])*</screen>
   <para>
    La cadena <replaceable>cluster_id</replaceable> es arbitraria e identifica de forma exclusiva el clúster de NFS Ganesha.
   </para>
   <para>
    Al configurar Ceph Dashboard con varios clústeres de NFS Ganesha, la interfaz de usuario Web permite elegir automáticamente a qué clúster pertenece una exportación.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-debug-plugin">
  <title>Depuración de complementos</title>

  <para>
   Los complementos de Ceph Dashboard amplían la funcionalidad de la consola. El complemento de depuración permite personalizar el comportamiento de la consola según el modo de depuración. Puede habilitarse, inhabilitarse o comprobarse con el comando siguiente:
  </para>

<screen>
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug status
Debug: 'disabled'
<prompt>cephuser@adm &gt; </prompt>ceph dashboard debug enable
Debug: 'enabled'
<prompt>cephuser@adm &gt; </prompt>dashboard debug disable
Debug: 'disabled'
</screen>

  <para>
   Por defecto, está inhabilitado. Este es el valor recomendado para las distribuciones de producción. Si es necesario, se puede habilitar el modo de depuración sin necesidad de reiniciar.
  </para>
 </sect1>
</chapter>
