<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_ceph_iscsi.xml" version="5.0" xml:id="cha-ceph-iscsi">
 <title>Ceph iSCSI Gateway</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sì</dm:translation>
   <dm:release>SES 7</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Questo capitolo è incentrato sui task amministrativi correlati a iSCSI Gateway. Per la procedura di distribuzione, fare riferimento a <xref linkend="deploy-cephadm-day2-service-igw"/>.
 </para>
 <sect1 xml:id="ceph-iscsi-connect">
  <title>Destinazioni gestite <systemitem class="daemon">ceph-iscsi</systemitem></title>

  <para>
   Questo capitolo illustra come eseguire la connessione a destinazioni gestite <systemitem class="daemon">ceph-iscsi</systemitem> da client sui quali è in esecuzione Linux, Microsoft Windows o VMware.
  </para>

  <sect2 xml:id="ceph-iscsi-connect-linux">
   <title>Connessione a <systemitem>open-iscsi</systemitem></title>
   <para>
    La connessione a destinazioni iSCSI supportate da <systemitem class="daemon">ceph-iscsi</systemitem> con <systemitem>open-iscsi</systemitem> è un processo a due passaggi. Innanzi tutto l'iniziatore deve rilevare le destinazioni iSCSI disponibili sull'host gateway, quindi deve eseguire il login e mappare le unità logiche (LU) disponibili.
   </para>
   <para>
    Per entrambi i passaggi è richiesto che il daemon <systemitem>open-iscsi</systemitem> sia in esecuzione. Il modo in cui si avvia il daemon <systemitem>open-iscsi</systemitem> dipende dalla distribuzione Linux corrente:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Sugli host SUSE Linux Enterprise Server (SLES) e Red Hat Enterprise Linux (RHEL), eseguire <command>systemctl start iscsid</command> (o <command>service iscsid start</command> se <command>systemctl</command> non è disponibile).
     </para>
    </listitem>
    <listitem>
     <para>
      Sugli host Debian e Ubuntu, eseguire <command>systemctl start open-iscsi</command> (o <command>service open-iscsi start</command>).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Se sull'host dell'iniziatore viene eseguito SUSE Linux Enterprise Server, consultare la pagina all'indirizzo <link xlink:href="https://documentation.suse.com/sles/15-SP1/single-html/SLES-storage/#sec-iscsi-initiator"/> per ulteriori informazioni su come eseguire la connessione a una destinazione iSCSI.
   </para>
   <para>
    Per qualsiasi altra distribuzione Linux che supporta <systemitem>open-iscsi</systemitem>, procedere per rilevare le destinazioni sul gateway <systemitem class="daemon">ceph-iscsi</systemitem> in uso (in questo esempio viene utilizzato iscsi1.example.com come indirizzo del portale; per l'accesso multipath ripetere i passaggi con iscsi2.example.com):
   </para>
<screen><prompt role="root">root # </prompt>iscsiadm -m discovery -t sendtargets -p iscsi1.example.com
192.168.124.104:3260,1 iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol</screen>
   <para>
    Quindi, eseguire il login al portale. Se il login viene completato correttamente, tutte le unità logiche supportate da RBD presenti sul portale saranno immediatamente disponibili sul bus SCSI del sistema:
   </para>
<screen><prompt role="root">root # </prompt>iscsiadm -m node -p iscsi1.example.com --login
Logging in to [iface: default, target: iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260] (multiple)
Login to [iface: default, target: iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260] successful.</screen>
   <para>
    Ripetere il processo per gli altri indirizzi IP o host del portale. 
   </para>
   <para>
    Se nel sistema è installata l'utility <systemitem>lsscsi</systemitem>, utilizzarla per enumerare i dispositivi SCSI disponibili nel sistema:
   </para>
<screen>lsscsi
[8:0:0:0]    disk    SUSE     RBD              4.0   /dev/sde
[9:0:0:0]    disk    SUSE     RBD              4.0   /dev/sdf</screen>
   <para>
    In una configurazione multipath (dove due dispositivi iSCSI connessi rappresentano un'unica e medesima unità logica), è inoltre possibile esaminare lo stato del dispositivo multipath con l'utility <systemitem>multipath</systemitem>:
   </para>
<screen><prompt role="root">root # </prompt>multipath -ll
360014050cf9dcfcb2603933ac3298dca dm-9 SUSE,RBD
size=49G features='0' hwhandler='0' wp=rw
|-+- policy='service-time 0' prio=1 status=active
| `- 8:0:0:0 sde 8:64 active ready running
`-+- policy='service-time 0' prio=1 status=enabled
`- 9:0:0:0 sdf 8:80 active ready running</screen>
   <para>
    Adesso è possibile utilizzare il dispositivo multipath come qualsiasi dispositivo di blocco. Ad esempio, è possibile utilizzare il dispositivo come volume fisico per Linux Logical Volume Management (LVM) oppure è possibile creare semplicemente un file system su di esso. Nell'esempio riportato di seguito è illustrato come creare un file system XFS su un volume iSCSI multipath appena connesso:
   </para>
<screen><prompt role="root">root # </prompt>mkfs -t xfs /dev/mapper/360014050cf9dcfcb2603933ac3298dca
log stripe unit (4194304 bytes) is too large (maximum is 256KiB)
log stripe unit adjusted to 32KiB
meta-data=/dev/mapper/360014050cf9dcfcb2603933ac3298dca isize=256    agcount=17, agsize=799744 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0
data     =                       bsize=4096   blocks=12800000, imaxpct=25
         =                       sunit=1024   swidth=1024 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=0
log      =internal log           bsize=4096   blocks=6256, version=2
         =                       sectsz=512   sunit=8 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0</screen>
   <para>
    Poiché XFS è un file system non in cluster, è possibile montarlo solo su un singolo nodo dell'iniziatore iSCSI in un determinato momento.
   </para>
   <para>
    Se ogni volta che si desidera interrompere l'uso delle unità logiche iSCSI associate a una determinata destinazione, eseguire il comando seguente:
   </para>
<screen><prompt role="root">root # </prompt>iscsiadm -m node -p iscsi1.example.com --logout
Logging out of session [sid: 18, iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260]
Logout of [sid: 18, target: iqn.2003-01.org.linux-iscsi.iscsi.<replaceable>SYSTEM-ARCH</replaceable>:testvol, portal: 192.168.124.104,3260] successful.</screen>
   <para>
    Come con la rilevazione e il login, è necessario ripetere la procedura di logout per tutti gli indirizzi IP o i nomi host del portale.
   </para>
   <sect3 xml:id="ceph-iscsi-connect-linux-multipath">
    <title>Configurazione multipath</title>
    <para>
     La configurazione multipath viene aggiornata sui client o sugli iniziatori ed è indipendente da qualsiasi configurazione <systemitem class="daemon">ceph-iscsi</systemitem>. Selezionare una strategia prima di utilizzare la memorizzazione a blocchi. Dopo aver modificato <filename>/etc/multipath.conf</filename>, riavviare <systemitem>multipathd</systemitem> con
    </para>
<screen><prompt role="root">root # </prompt>systemctl restart multipathd</screen>
    <para>
     Per una configurazione attiva-passiva con nomi intuitivi, aggiungere
    </para>
<screen>defaults {
  user_friendly_names yes
}</screen>
    <para>
     a <filename>/etc/multipath.conf</filename>. Dopo aver connesso le destinazioni, eseguire
    </para>
<screen><prompt role="root">root # </prompt>multipath -ll
mpathd (36001405dbb561b2b5e439f0aed2f8e1e) dm-0 SUSE,RBD
size=2.0G features='0' hwhandler='0' wp=rw
|-+- policy='service-time 0' prio=1 status=active
| `- 2:0:0:3 sdl 8:176 active ready running
|-+- policy='service-time 0' prio=1 status=enabled
| `- 3:0:0:3 sdj 8:144 active ready running
`-+- policy='service-time 0' prio=1 status=enabled
  `- 4:0:0:3 sdk 8:160 active ready running</screen>
    <para>
     Notare lo stato di ciascun collegamento. Per una configurazione attiva-attiva, aggiungere
    </para>
<screen>defaults {
  user_friendly_names yes
}

devices {
  device {
    vendor "(LIO-ORG|SUSE)"
    product "RBD"
    path_grouping_policy "multibus"
    path_checker "tur"
    features "0"
    hardware_handler "1 alua"
    prio "alua"
    failback "immediate"
    rr_weight "uniform"
    no_path_retry 12
    rr_min_io 100
  }
}</screen>
    <para>
     a <filename>/etc/multipath.conf</filename>. Riavviare <systemitem>multipathd</systemitem> ed eseguire
    </para>
<screen><prompt role="root">root # </prompt>multipath -ll
mpathd (36001405dbb561b2b5e439f0aed2f8e1e) dm-3 SUSE,RBD
size=2.0G features='1 queue_if_no_path' hwhandler='1 alua' wp=rw
`-+- policy='service-time 0' prio=50 status=active
  |- 4:0:0:3 sdj 8:144 active ready running
  |- 3:0:0:3 sdk 8:160 active ready running
  `- 2:0:0:3 sdl 8:176 active ready running</screen>
   </sect3>
  </sect2>

  <sect2 xml:id="ceph-iscsi-connect-win">
   <title>Connessione di Microsoft Windows (iniziatore iSCSI Microsoft)</title>
   <para>
    Per eseguire la connessione a una destinazione iSCSI SUSE Enterprise Storage da un server Windows 2012, seguire la procedura indicata di seguito:
   </para>
   <procedure>
    <step>
     <para>
      Aprire Windows Server Manager. Da Dashboard, selezionare <menuchoice><guimenu>Tools (Strumenti)</guimenu><guimenu>iSCSI Initiator (Iniziatore iSCSI)</guimenu></menuchoice>. Viene visualizzata la finestra di dialogo <guimenu>iSCSI Initiator Properties (Proprietà iniziatore iSCSI)</guimenu>. Selezionare la scheda <guimenu>Rilevazione</guimenu>:
     </para>
     <figure>
      <title>Proprietà iniziatore iSCSI</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-initiator-props.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-initiator-props.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Nella finestra di dialogo <guimenu>Discover Target Portal (Rileva portale di destinazione)</guimenu> immettere il nome host o l'indirizzo IP della destinazione nel campo <guimenu>Target (Destinazione)</guimenu>, quindi fare clic su <guimenu>OK</guimenu>:
     </para>
     <figure>
      <title>Rilevazione portale di destinazione</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-target-ip.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-target-ip.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Ripetere il processo per tutti gli altri nomi host o indirizzi IP del gateway Al termine, rivedere l'elenco <guimenu>Portali di destinazione</guimenu>:
     </para>
     <figure>
      <title>Portali di destinazione</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-target-ip-list.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-target-ip-list.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Quindi, passare alla scheda <guimenu>Destinazioni</guimenu> e rivedere le destinazioni rilevate.
     </para>
     <figure>
      <title>Destinazioni</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-targets.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-targets.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Fare clic su <guimenu>Esegui connessione</guimenu> nella scheda <guimenu>Destinazioni</guimenu>. Viene visualizzata la finestra di dialogo <guimenu>Connect To Target (Connetti a destinazione)</guimenu>. Selezionare la casella di controllo <guimenu>Enable Multi-path (Abilita multipath)</guimenu> per abilitare I/O multipath (MPIO), quindi fare clic su <guimenu>OK</guimenu>:
     </para>
    </step>
    <step>
     <para>
      Quando si chiude la finestra di dialogo <guimenu>Connect to Target (Connetti a destinazione)</guimenu>, selezionare <guimenu>Properties (Proprietà)</guimenu> per rivedere le proprietà della destinazione:
     </para>
     <figure>
      <title>Proprietà destinazione iSCSI</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-target-properties.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-target-properties.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Selezionare <guimenu>Dispositivi</guimenu> e fare clic su <guimenu>MPIO</guimenu> per rivedere la configurazione multipath I/O:
     </para>
     <figure>
      <title>Dettagli dispositivo</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-device-details.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-device-details.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      L'impostazione di default per <guimenu>Policy di bilanciamento del carico</guimenu> è <guimenu>Round Robin con sottoinsieme</guimenu>. Se si preferisce una configurazione solo failover, modificare l'impostazione in <guimenu>Solo failover</guimenu>.
     </para>
    </step>
   </procedure>
   <para>
    In tal modo si conclude la configurazione dell'iniziatore iSCSI. I volumi iSCSI adesso sono disponibili come qualsiasi altro dispositivo SCSI ed è possibile inizializzarli per utilizzarli come volumi e unità. Fare clic su <guimenu>OK</guimenu> per chiudere la finestra di dialogo <guimenu>iSCSI Initiator Properties (Proprietà iniziatore iSCSI)</guimenu> e continuare con il ruolo<guimenu> File and Storage Services (Servizi file e memorizzazione)</guimenu> nel dashboard di <guimenu>Server Manager</guimenu>.
   </para>
   <para>
    Osservare il volume appena connesso. Viene identificato come <emphasis>SUSE RBD SCSI Multi-Path Drive (Unità multipath SCSI RBD SUSE)</emphasis> sul bus iSCSI e inizialmente è contrassegnato con lo stato <emphasis>Offline</emphasis> e un tipo di tabella delle partizioni <emphasis>Unknown (Sconosciuta)</emphasis>. Se il nuovo volume non viene visualizzato immediatamente, selezionare <guimenu>Rescan Storage (Effettua di nuovo scansione memorizzazione)</guimenu> dalla casella di riepilogo <guimenu>Tasks (Task)</guimenu> per effettuare di nuovo la scansione del bus iSCSI.
   </para>
   <procedure>
    <step>
     <para>
      Fare clic con il pulsante destro del mouse sul volume iSCSI e selezionare <guimenu>New Volume (Nuovo volume)</guimenu> dal menu di scelta rapida. Viene visualizzata la <guimenu>New Volume Wizard (Procedura guidata per il nuovo volume)</guimenu>. Fare clic su <guimenu>Avanti</guimenu>, evidenziare il volume iSCSI appena connesso e fare clic su <guimenu>Avanti</guimenu> per iniziare.
     </para>
     <figure>
      <title>Procedura guidata per il nuovo volume</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-volume-wizard.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-volume-wizard.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Inizialmente il dispositivo è vuoto e non contiene una tabella delle partizioni. Quando richiesto, confermare la finestra di dialogo in cui viene indicato che il volume verrà inizializzato con una tabella delle partizioni GPT:
     </para>
     <figure>
      <title>Prompt del disco offline</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-win-prompt1.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-win-prompt1.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Selezionare le dimensioni del volume. Di norma si utilizza l'intera capacità del dispositivo. Assegnare quindi una lettera di unità o un nome directory in cui sarà disponibile il volume appena creato. Quindi, selezionare un a file system da creare sul nuovo volume e infine confermare le selezioni con <guimenu>Crea</guimenu> per completare la creazione del volume:
     </para>
     <figure>
      <title>Conferma selezioni volume</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-volume-confirm.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-volume-confirm.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      Al termine del processo, rivedere i risultati e fare clic su <guimenu>Chiudi</guimenu> per concludere l'inizializzazione dell'unità. Una volta completata l'inizializzazione, il volume (e il rispettivo file system NTFS) diventa disponibile come un'unità locale appena inizializzata.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="ceph-iscsi-connect-vmware">
   <title>Connessione di VMware</title>
   <para/>
   <procedure>
    <step>
     <para>
      Per eseguire la connessione a volumi iSCSI gestiti da <systemitem class="daemon">ceph-iscsi</systemitem>, è necessario che sia configurato un adattatore software iSCSI. Se nella configurazione vSphere non è presente alcun adattatore di questo tipo, crearne uno selezionando <menuchoice><guimenu>Configurazione</guimenu><guimenu>Adattatori di memorizzazione</guimenu> <guimenu>Aggiungi</guimenu><guimenu>iSCSI Software initiator (Iniziatore software iSCSI)</guimenu></menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Quando disponibili, selezionare le proprietà dell'adattatore facendo clic con il pulsante destro del mouse sull'adattatore e selezionando <guimenu>Proprietà</guimenu> dal menu di scelta rapida:
     </para>
     <figure>
      <title>Proprietà iniziatore iSCSI</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi_vmware_adapter_props.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi_vmware_adapter_props.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Nella finestra di dialogo <guimenu>iSCSI Software Initiator (Iniziatore software iSCSI)</guimenu>, fare clic sul pulsante <guimenu>Configure (Configura)</guimenu>. Accedere quindi alla scheda <guimenu>Dynamic Discovery (Rilevazione dinamica)</guimenu> e selezionare <guimenu>Add (Aggiungi)</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Immettere l'indirizzo IP o il nome host del gateway iSCSI <systemitem class="daemon">ceph-iscsi</systemitem>. Se si eseguono più servizi iSCSI Gateway in una configurazione di failover, ripetere il passaggio per tutti i gateway che vengono attivati.
     </para>
     <figure>
      <title>Aggiunta del server di destinazione</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-add-target.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-add-target.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      Una volta eseguito l'accesso a tutti i servizi iSCSI Gateway, fare clic su <guimenu>OK</guimenu> nella finestra di dialogo per iniziare una nuova scansione dell'adattatore iSCSI.
     </para>
    </step>
    <step>
     <para>
      Al completamento della nuova scansione, il nuovo dispositivo iSCSI viene visualizzato sotto l'elenco <guimenu>Adattatori di memorizzazione</guimenu> nel riquadro <guimenu>Dettagli</guimenu>. Per i dispositivi multipath adesso è possibile fare clic con il pulsante destro del mouse sull'adattatore e selezionare <guimenu>Gestisci percorsi</guimenu> nel menu di scelta rapida:
     </para>
     <figure>
      <title>Gestione dei dispositivi multipath</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-multipath.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-multipath.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      Adesso dovrebbero essere visualizzati tutti i percorsi con un indicatore luminoso verde in corrispondenza dello <guimenu>Stato</guimenu>. Uno dei percorsi deve essere contrassegnato come <guimenu>Attivo (I/O)</guimenu> e tutti gli altri semplicemente come <guimenu>Attivo</guimenu>:
     </para>
     <figure>
      <title>Elenco dei percorsi per multipath</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-paths.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-paths.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
    <step>
     <para>
      Adesso è possibile passare da <guimenu>Adattatori di memorizzazione</guimenu> all'elemento etichettato <guimenu>Storage (Memorizzazione)</guimenu>. Nell'angolo in alto a destra del riquadro, selezionare <guimenu>Add Storage... (Aggiungi memorizzazione...)</guimenu> per visualizzare la finestra di dialogo <guimenu>Add Storage (Aggiungi memorizzazione)</guimenu>. Quindi, selezionare <guimenu>Disk/LUN (Disco/LUN)</guimenu> e fare clic su <guimenu>Avanti</guimenu>. Il dispositivo iSCSI appena creato viene visualizzato nell'elenco <guimenu>Seleziona disco/LUN</guimenu>. Selezionarlo e fare clic su <guimenu>Avanti</guimenu> per continuare:
     </para>
     <figure>
      <title>Finestra di dialogo Aggiungi memorizzazione</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-add-storage-dialog.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-add-storage-dialog.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      Fare clic su <guimenu>Avanti</guimenu> per accettare il layout del disco di default disk.
     </para>
    </step>
    <step>
     <para>
      Nel riquadro <guimenu>Properties (Proprietà)</guimenu>, assegnare un nome al nuovo archivio dati e fare clic su <guimenu>Next (Avanti)</guimenu>. Accettare l'impostazione di default per utilizzare l'intero spazio del volume per l'archivio dati o selezionare <guimenu>Custom Space Setting (Impostazione spazio personalizzato)</guimenu> per un archivio dati più piccolo:
     </para>
     <figure>
      <title>Impostazione spazio personalizzato</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-custom-datastore.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-custom-datastore.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      Fare clic su <guimenu>Finish (Fine)</guimenu> per completare la creazione dell'archivio dati.
     </para>
     <para>
      Il nuovo archivio dati viene visualizzato nell'elenco degli archivi dati ed è possibile selezionarlo per recuperare i dettagli. Adesso è possibile utilizzare il volume iSCSI supportato <systemitem class="daemon">ceph-iscsi</systemitem> come qualsiasi altro archivio dati vSphere.
     </para>
     <figure>
      <title>Panoramica dell'archivio dati iSCSI</title>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="iscsi-vmware-overview.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="iscsi-vmware-overview.png" width="70%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </figure>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="ceph-iscsi-conclude">
  <title>Conclusioni</title>

  <para>
   <systemitem class="daemon">ceph-iscsi</systemitem> è un componente chiave di SUSE Enterprise Storage 7 che consente di accedere a uno storage a blocchi distribuito e altamente disponibile da qualsiasi server o client in grado di leggere il protocollo iSCSI. Mediante l'uso di <systemitem class="daemon">ceph-iscsi</systemitem> su uno o più host gateway iSCSI, le immagini Ceph RBD diventano disponibili come unità logiche (LU) associate a destinazioni iSCSI, cui è possibile accedere nella modalità facoltativa di bilanciamento del carico ad elevata disponibilità.
  </para>

  <para>
   Poiché tutta la configurazione <systemitem class="daemon">ceph-iscsi</systemitem> è memorizzata nell'archivio dati Ceph RADOS, gli host gateway <systemitem class="daemon">ceph-iscsi</systemitem> sono di conseguenza sprovvisti di stato permanente, pertanto è possibile sostituirli, aumentarli o ridurli in base alle esigenze. Come risultato, SUSE Enterprise Storage 7 consente ai clienti SUSE di eseguire una tecnologia di storage aziendale effettivamente distribuita, altamente disponibile, resiliente e con funzioni di riparazione automatica sull'hardware utilizzato e su una piattaforma interamente open source.
  </para>
 </sect1>
</chapter>
