<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_gui_dashboard.xml" version="5.0" xml:id="ceph-dashboard">
 <title>Ceph Dashboard</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sí</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Ceph Dashboard es un módulo que añade una aplicación integrada de supervisión y administración basada en Web a Ceph Manager (consulte <xref linkend="storage-intro-core-nodes"/> para obtener más detalles sobre Ceph Manager). Ya no es necesario conocer comandos complejos relacionados con Ceph para gestionar y supervisar el clúster de Ceph. Puede utilizar la intuitiva interfaz Web de Ceph Dashboard o su API REST integrada.
 </para>
 <para>
  Ceph Dashboard se habilita y configura automáticamente con la fase 3 de DeepSea durante el procedimiento de distribución (consulte <xref linkend="ceph-install-stack"/>). En un clúster de Ceph con varias instancias de Ceph Manager, solo la consola que se ejecuta en el daemon de Ceph Manager activo actualmente atenderá las peticiones entrantes. Al acceder al puerto TCP de la consola en cualquiera de las otras instancias de Ceph Manager que estén actualmente en espera se realizará una redirección HTTP (303) a la dirección URL de la consola de Ceph Manager actualmente activa. De esta manera, puede dirigir su navegador a cualquiera de las instancias de Ceph Manager para acceder a la consola. Tenga en cuenta este comportamiento al proteger el acceso con un cortafuegos o al planear la configuración de HA.
 </para>
 <sect1 xml:id="dashboard-webui-general">
  <title>Interfaz de usuario Web de la consola</title>

  <sect2 xml:id="dashboard-webui-login">
   <title>Entrada</title>
   <para>
    Para entrar a la sesión en la aplicación Web de la consola, dirija el explorador a su dirección URL, incluido el número de puerto. Para localizar su dirección, ejecute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr services | grep dashboard
"dashboard": "https://ses-dash-node.example.com:8443/",
</screen>
   <figure>
    <title>Pantalla de entrada a Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Necesita una cuenta de usuario para poder entrar en la aplicación Web de la consola. DeepSea crea automáticamente un usuario "admin" por defecto con privilegios de administrador. Si decide entrar con el usuario "admin" por defecto, para recuperar la contraseña correspondiente, ejecute:
   </para>
<screen>
<prompt>root@master # </prompt>salt-call grains.get dashboard_creds
</screen>
   <tip>
    <title>cuenta de usuario personalizada</title>
    <para>
     Si no desea utilizar la cuenta "admin" por defecto para acceder a Ceph Dashboard, cree una cuenta de usuario personalizada con privilegios de administrador. Consulte la <xref linkend="dashboard-user-roles"/> para obtener más información.
    </para>
   </tip>
   <para>
    La interfaz de usuario de la consola se divide gráficamente en varios <emphasis>bloques:</emphasis> el <emphasis>menú de utilidades</emphasis>, el <emphasis>menú principal</emphasis> y el <emphasis>panel de contenidos</emphasis> principal.
   </para>
   <figure>
    <title>Página de inicio de Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-util-menu">
   <title>Menú de utilidades</title>
   <para>
    La parte superior derecha de la pantalla contiene un menú de utilidades. Incluye tareas generales relacionadas más con la consola que con el clúster de Ceph. Al hacer clic en sus elementos, puede acceder a los siguientes temas:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Cambiar el idioma de la interfaz de usuario de la consola. Puede elegir entre alemán, checo, chino, español, francés, indonesio, inglés o portugués.
     </para>
    </listitem>
    <listitem>
     <para>
      Mostrar una lista de tareas relacionadas con Ceph que se ejecutan en segundo plano.
     </para>
    </listitem>
    <listitem>
     <para>
      Ver y borrar las notificaciones recientes de la consola.
     </para>
    </listitem>
    <listitem>
     <para>
      Mostrar una lista de enlaces con información sobre la consola, su documentación completa y una visión general de la API REST.
     </para>
    </listitem>
    <listitem>
     <para>
      Gestionar los usuarios y las funciones de usuario de la consola. Consulte la <xref linkend="dashboard-user-roles"/> para obtener una descripción más detallada de la línea de comandos.
     </para>
    </listitem>
    <listitem>
     <para>
      Salir de la sesión de la consola.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-main-menu">
   <title>Menú principal</title>
   <para>
    El menú principal de la consola ocupa la parte superior izquierda de la pantalla. Abarca los siguientes contenidos:
   </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>Consola</guimenu></term>
     <listitem>
      <para>
       Vuelva a la página de inicio de Ceph Dashboard.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Clúster</guimenu></term>
     <listitem>
      <para>
       Muestra información detallada sobre la configuración general del clúster y el mapa de CRUSH, sus hosts, los Ceph OSD, los monitores Ceph Monitor y el contenido de un archivo de registro.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Repositorios</guimenu></term>
     <listitem>
      <para>
       Permite ver y gestionar repositorios de clústeres.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Bloque</guimenu></term>
     <listitem>
      <para>
       Permite ver y gestionar dispositivos de bloques y sus exportaciones iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>NFS</guimenu></term>
     <listitem>
      <para>
       Permite ver y gestionar las distribuciones de NFS Ganesha.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Sistemas de archivos</guimenu></term>
     <listitem>
      <para>
       Permite ver y gestionar sistemas de archivos CephFS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Object Gateway</guimenu></term>
     <listitem>
      <para>
       Permite ver y gestionar los daemons, usuarios y depósitos de Object Gateway.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-cpane">
   <title>El panel de contenidos</title>
   <para>
    El panel de contenidos ocupa gran parte de la pantalla de la consola. La página de inicio de la consola muestra numerosos widgets útiles para informar brevemente sobre el estado actual del clúster, su capacidad y el rendimiento.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-ui-common">
   <title>Características comunes de la interfaz del usuario Web</title>
   <para>
    En Ceph Dashboard se suele trabajar con <emphasis>listas</emphasis>; por ejemplo, listas de repositorios, nodos OSD o dispositivos RBD. Todas las listas se actualizan automáticamente por defecto cada 5 segundos. Los widgets comunes siguientes ayudan a gestionar o a ajustar estas listas:
   </para>
   <para>
    Haga clic en <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/> </imageobject> </inlinemediaobject> para activar una actualización manual de la lista.
   </para>
   <para>
    Haga clic en <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> para mostrar u ocultar columnas individuales.
   </para>
   <para>
    Haga clic en <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/> </imageobject> </inlinemediaobject> y seleccione el número de filas que desea mostrar en cada página.
   </para>
   <para>
    Haga clic dentro de <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/> </imageobject> </inlinemediaobject> y filtre las filas escribiendo una cadena de búsqueda.
   </para>
   <para>
    Use <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/> </imageobject> </inlinemediaobject> para cambiar la página que se muestra si la lista se extiende por varias páginas.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-widgets">
   <title>Widgets de consola</title>
   <para>
    Cada widget de consola muestra información de estado específica relacionada con un aspecto específico de un clúster de Ceph en ejecución. Algunos widgets son enlaces activos y, después de hacer clic en ellos, le redirigirán a una página con detalles sobre el tema que representan.
   </para>
   <tip>
    <title>obtener más información al pasar el ratón</title>
    <para>
     Algunos widgets gráficos muestran más detalles al mover el ratón sobre ellos.
    </para>
   </tip>
   <sect3 xml:id="dashboard-widgets-status">
    <title>Widgets de estado</title>
    <para>
     Los widgets de <guimenu>estado</guimenu> ofrecen una breve descripción general sobre el estado actual del clúster.
    </para>
    <figure>
     <title>Widgets de estado</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Estado del clúster</guimenu></term>
      <listitem>
       <para>
        Presenta información básica sobre el estado del clúster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Monitores</guimenu></term>
      <listitem>
       <para>
        Muestra el número de monitores en ejecución y su quórum.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>OSDs</guimenu></term>
      <listitem>
       <para>
        Muestra el número total de OSD, así como el número de OSD con los estados "up" e "in".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Daemons de gestor</guimenu></term>
      <listitem>
       <para>
        Muestra el número de daemons de Ceph Manager activos y en espera.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Hosts</guimenu></term>
      <listitem>
       <para>
        Muestra el número total de nodos del clúster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Pasarelas Object Gateway</guimenu></term>
      <listitem>
       <para>
        Muestra el número de pasarelas Object Gateway en ejecución.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Servidores de metadatos</guimenu></term>
      <listitem>
       <para>
        Muestra el número de servidores de metadatos.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Pasarelas iSCSI Gateway</guimenu></term>
      <listitem>
       <para>
        Muestra el número de pasarelas iSCSI Gateway configuradas.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-performance">
    <title>Widgets de rendimiento</title>
    <para>
     Los widgets de <guimenu>rendimiento</guimenu> muestran datos básicos de rendimiento de los clientes de Ceph.
    </para>
    <figure>
     <title>Widgets de rendimiento</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>IOPS de cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Rendimiento del cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Lectura/escritura de cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Rendimiento de recuperación</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Depuración</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-capacity">
    <title>Widgets de capacidad</title>
    <para>
     Los widgets de <guimenu>capacidad</guimenu> muestran información breve sobre la capacidad de almacenamiento.
    </para>
    <figure>
     <title>Widgets de capacidad</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Repositorios</guimenu></term>
      <listitem>
       <para>
        Muestra el número de repositorios del clúster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Capacidad en bruto</guimenu></term>
      <listitem>
       <para>
        Muestra la proporción de capacidad de almacenamiento en bruto utilizada y disponible.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Objetos</guimenu></term>
      <listitem>
       <para>
        Muestra el número de objetos de datos almacenados en el clúster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Grupos de colocación por OSD</guimenu></term>
      <listitem>
       <para>
        Muestra el número de grupos de colocación por OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Estado del grupo de colocación</guimenu></term>
      <listitem>
       <para>
        Muestra un gráfico de los grupos de colocación según su estado.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-mgmt">
  <title>Gestión de usuarios y funciones de la consola</title>

  <para>
   En la <xref linkend="dashboard-user-roles"/> ya se describió la gestión de usuarios de la consola que se realiza mediante los comandos de Ceph en la línea de comandos.
  </para>

  <para>
   En esta sección se describe cómo gestionar cuentas de usuario mediante la interfaz de usuario Web de la consola.
  </para>

  <sect2 xml:id="dashboard-listing-users">
   <title>Listas de usuarios</title>
   <para>
    Haga clic en <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> en el menú de utilidades y seleccione <guimenu>Gestión de usuarios</guimenu>.
   </para>
   <para>
    La lista contiene el nombre de usuario, el nombre completo, el correo electrónico y la lista de funciones asignadas de cada usuario.
   </para>
   <figure>
    <title>Gestión de usuarios</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-users">
   <title>Adición de nuevos usuarios</title>
   <para>
    Haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda del encabezado de la tabla para añadir un nuevo usuario. Introduzca su nombre de usuario, contraseña y, opcionalmente, un nombre completo y un correo electrónico.
   </para>
   <figure>
    <title>Adición de un usuario</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Haga clic en el icono de lápiz pequeño para asignar funciones predefinidas al usuario. Para confirmar, haga clic en <guimenu>Crear usuario</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-users">
   <title>Edición de usuarios</title>
   <para>
    Haga clic en la fila de un usuario y seleccione <guimenu>Editar</guimenu> para modificar los detalles del usuario. Para confirmar, haga clic en <guimenu>Actualizar usuario</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-users">
   <title>Supresión de usuarios</title>
   <para>
    Para suprimir la cuenta del usuario, haga clic en la fila de un usuario y seleccione <guimenu>Suprimir</guimenu>. Active la casilla de verificación <guimenu>Sí, seguro</guimenu> y haga clic en <guimenu>Suprimir usuario</guimenu> para confirmar.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-listing-user-roles">
   <title>Listado de las funciones de usuario</title>
   <para>
    Haga clic en <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> en el menú de utilidades y seleccione <guimenu>Gestión de usuarios</guimenu>. A continuación, haga clic en la pestaña <guimenu>Funciones</guimenu>.
   </para>
   <para>
    La lista contiene el nombre y la descripción de cada función e indica si se trata de una función del sistema.
   </para>
   <figure>
    <title>Funciones del usuario</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-roles">
   <title>Adición de funciones personalizadas</title>
   <para>
    Haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda del encabezado de la tabla para añadir una nueva función personalizada. Escriba su nombre y descripción y establezca los permisos necesarios para cada tema individual.
   </para>
   <tip>
    <title>limpieza de funciones personalizadas</title>
    <para>
     Si crea funciones de usuario personalizadas y tiene previsto eliminar el clúster de Ceph con el runner <command>ceph.purge</command> más adelante, primero debe limpiar las funciones personalizadas. Más detalles en <xref linkend="deepsea-ceph-purge"/>
    </para>
   </tip>
   <figure>
    <title>Adición de una función</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>activación múltiple</title>
    <para>
     Al activar la casilla de verificación que precede al nombre del tema, se activan todos los permisos para ese tema. Al activar la casilla de verificación <guimenu>Todos</guimenu> se activan todos los permisos para todos los temas.
    </para>
   </tip>
   <para>
    Para confirmar, haga clic en <guimenu>Crear función</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-roles">
   <title>Edición de funciones personalizadas</title>
   <para>
    Haga clic en la fila de una función personalizada y seleccione <guimenu>Editar</guimenu> en la parte superior izquierda del encabezado de la tabla para editar una descripción y los permisos de la función personalizada. Para confirmar, haga clic en <guimenu>Actualizar función</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-roles">
   <title>Supresión de funciones personalizadas</title>
   <para>
    Para suprimir la función, haga clic en la fila de una función y seleccione <guimenu>Suprimir</guimenu>. Active la casilla de verificación <guimenu>Sí, seguro</guimenu> y haga clic en <guimenu>Suprimir función</guimenu> para confirmar.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster">
  <title>Visualización de los elementos internos del clúster</title>

  <para>
   El elemento de menú <guimenu>Clúster</guimenu> permite ver información detallada sobre los hosts de clúster de Ceph, los OSD, los MON, el mapa de CRUSH y el contenido de los archivos de registro.
  </para>

  <sect2 xml:id="dashboard-cluster-hosts">
   <title>Nodos de clúster</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>Hosts</guimenu></menuchoice> para ver una lista de nodos de clúster.
   </para>
   <figure>
    <title>Hosts</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Haga clic en un nombre de nodo en la columna <guimenu>Nombre de host</guimenu> para ver los detalles de rendimiento del nodo.
   </para>
   <para>
    La columna <guimenu>Servicios</guimenu> muestra todos los daemons que se ejecutan en cada nodo relacionado. Haga clic en un nombre de daemon para ver su configuración detallada.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-monitors">
   <title>Monitores Ceph Monitor</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>Monitores</guimenu></menuchoice> para ver una lista de nodos de clúster con monitores de Ceph en ejecución. La lista incluye el número de clasificación de cada monitor, la dirección IP pública y el número de sesiones abiertas.
   </para>
   <para>
    La lista se divide en dos tablas: una para los monitores Ceph Monitor que <emphasis>cumplen</emphasis> el quórum y la segunda para los que <emphasis>no</emphasis> lo hacen.
   </para>
   <para>
    Haga clic en un nombre de nodo en la columna <guimenu>Nombre</guimenu> para ver la configuración relacionada de Ceph Monitor.
   </para>
   <para>
    La tabla <guimenu>Estado</guimenu> muestra estadísticas generales sobre los monitores Ceph Monitor en ejecución.
   </para>
   <figure>
    <title>Monitores Ceph Monitor</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-osds">
   <title>Daemons Ceph OSD</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>OSDs</guimenu></menuchoice> para ver una lista de nodos con daemons/discos OSD en ejecución. La lista incluye el nombre de cada nodo, su estado, el número de grupos de colocación, el tamaño, el uso, el gráfico de lecturas/escrituras en el tiempo y la tasa de operaciones de lectura/escritura por segundo.
   </para>
   <figure>
    <title>Daemons Ceph OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Haga clic en <guimenu>Establecer indicadores de todo el clúster</guimenu> en el encabezado de la tabla para abrir una ventana emergente con una lista de indicadores que se aplican a todo el clúster. Puede activar o desactivar indicadores individuales. Para confirmar, haga clic en <guimenu>Enviar.</guimenu>
   </para>
   <figure>
    <title>Indicadores OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Haga clic en <guimenu>Establecer prioridad de recuperación de todo el clúster</guimenu> en el encabezado de la tabla para abrir una ventana emergente con una lista de prioridades de recuperación de OSD que se aplican a todo el clúster. Puede activar el perfil de prioridad preferido y ajustar los valores individuales a continuación. Para confirmar, haga clic en <guimenu>Enviar.</guimenu>
   </para>
   <figure>
    <title>Prioridad de recuperación de OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Haga clic en un nombre de nodo en la columna <guimenu>Host</guimenu> para ver una tabla extendida con detalles sobre la configuración y el rendimiento de OSD. En las distintas pestañas, es posible ver listas de <guimenu>atributos</guimenu>, <guimenu>metadatos</guimenu>, <guimenu>contadores de rendimiento</guimenu> y un <guimenu>histograma</guimenu> gráfico de lecturas y escrituras.
   </para>
   <figure>
    <title>Detalles de OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>realización de tareas específicas en OSD</title>
    <para>
     Después de hacer clic en un nombre de nodo de OSD, su fila cambia ligeramente de color en la tabla, lo que significa que ahora puede realizar una tarea en el nodo. Haga clic en la flecha hacia abajo en la parte superior izquierda del encabezado de la tabla y seleccione una tarea para realizarla, por ejemplo, <guimenu>Borrado seguro profundo.</guimenu> Opcionalmente, puede introducir un valor necesario para la tarea y confirmar para ejecutarla en el nodo.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dahsboard-cluster-config">
   <title>Configuración del clúster</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>Configuración</guimenu></menuchoice> para ver una lista completa de las opciones de configuración del clúster de Ceph. La lista contiene el nombre de la opción, una descripción breve y sus valores actuales y por defecto.
   </para>
   <figure>
    <title>Configuración del clúster</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Haga clic en una fila de opciones específica para resaltar y ver información detallada sobre la opción, como su tipo de valor, los valores mínimos y máximos permitidos, si se puede actualizar en el tiempo de ejecución y mucho más.
   </para>
   <para>
    Después de resaltar una opción específica, puede editar sus valores haciendo clic en el botón <guimenu>Editar</guimenu> en la parte superior izquierda del encabezado de la tabla. Para confirmar los cambios, haga clic en <guimenu>Guardar.</guimenu>
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-crushmap">
   <title>Mapa de CRUSH</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>Mapa de CRUSH</guimenu></menuchoice> para ver un mapa de CRUSH del clúster. Para obtener información general sobre los mapas de CRUSH, consulte la <xref linkend="op-crush"/>.
   </para>
   <para>
    Haga clic en la raíz, los nodos o los OSD individuales para ver información más detallada, como el peso de CRUSH, la profundidad del árbol de mapa, la clase de dispositivo del OSD y mucho más.
   </para>
   <figure>
    <title>Mapa de CRUSH</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-mgr-plugins">
   <title>Módulos de gestor</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>Módulos de gestor</guimenu></menuchoice> para ver una lista de los módulos de Ceph Manager disponibles. Cada línea está formada por nombre de módulo e información sobre si está habilitado actualmente.
   </para>
   <figure>
    <title>Módulos de gestor</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Después de resaltar un módulo específico, puede ver su configuración detallada en la tabla <guimenu>Detalles</guimenu>. Para editar los detalles, haciendo clic en <guimenu>Editar</guimenu> en la parte superior izquierda del encabezado de la tabla. Para confirmar los cambios, haga clic en <guimenu>Actualizar.</guimenu>
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-logs">
   <title>Registros</title>
   <para>
    Haga clic en <menuchoice><guimenu>Clúster</guimenu><guimenu>Registros</guimenu></menuchoice> para ver una lista de las entradas de registro recientes del clúster. Cada línea está formada por una marca de tiempo, el tipo de la entrada de registro y el propio mensaje registrado.
   </para>
   <para>
    Haga clic en la pestaña <guimenu>Registros de auditoría</guimenu> para ver las entradas de registro del subsistema de auditoría. Consulte en la <xref linkend="dashboard-auditing"/> los comandos necesarios para habilitar o inhabilitar la auditoría.
   </para>
   <figure>
    <title>Registros</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-pools">
  <title>Gestión de repositorios</title>

  <tip>
   <title>más información sobre los repositorios</title>
   <para>
    Para obtener información general sobre los repositorios de Ceph, consulte el <xref linkend="ceph-pools"/>. Para obtener información específica sobre los repositorios codificados de borrado, consulte el <xref linkend="cha-ceph-erasure"/>.
   </para>
  </tip>

  <para>
   Para ver una lista de todos los repositorios disponibles, haga clic en <guimenu>Repositorios</guimenu> en el menú principal.
  </para>

  <para>
   La lista muestra el nombre y el tipo del repositorio, la aplicación relacionada, el estado del grupo de colocación, el tamaño de réplica, el perfil codificado de borrado, el uso y las estadísticas de lectura y escritura.
  </para>

  <figure>
   <title>Lista de repositorios</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Para ver información más detallada sobre un repositorio, active su fila en la tabla.
  </para>

  <sect2 xml:id="dashboard-pools-create">
   <title>Adición de un repositorio nuevo</title>
   <para>
    Para añadir un nuevo repositorio, haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda de la tabla de repositorios. En el formulario del repositorio puede escribir el nombre y el tipo del repositorio, el número de grupos de colocación e información adicional, como las aplicaciones del repositorio y el modo y el algoritmo de compresión. El propio formulario calcula el número de grupos de colocación que mejor se adapta a este repositorio específico. El cálculo se basa en la cantidad de OSD del clúster y el tipo de repositorio seleccionado con su configuración específica. Si se define manualmente el número de grupos de colocación, el número calculado se sustituirá. Para confirmar, haga clic en <guimenu>Crear repositorio.</guimenu>
   </para>
   <figure>
    <title>Adición de un repositorio nuevo</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-pools-delete">
   <title>Supresión de repositorios</title>
   <para>
    Para suprimir un repositorio, haga clic en su fila en la tabla y haga clic en <guimenu>Suprimir</guimenu> en la parte superior izquierda de la tabla de repositorios.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-pools-edit">
   <title>Edición de las opciones de un repositorio</title>
   <para>
    Para editar las opciones de un repositorio, haga clic en su fila en la tabla y seleccione <guimenu>Editar</guimenu> en la parte superior izquierda de la tabla de repositorios.
   </para>
   <para>
    Puede cambiar el nombre del repositorio, aumentar el número de grupos de colocación, cambiar la lista de aplicaciones del repositorio y la configuración de compresión. Para confirmar, haga clic en <guimenu>Editar repositorio.</guimenu>
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-rbds">
  <title>Gestión de dispositivos de bloques RADOS</title>

  <para>
   Para mostrar todos los dispositivos de bloques RADOS (RBD) disponibles, haga clic en <menuchoice><guimenu>Bloque</guimenu><guimenu>Imágenes</guimenu></menuchoice> en el menú principal.
  </para>

  <para>
   La lista muestra información breve sobre el dispositivo, como el nombre del dispositivo, el nombre del repositorio relacionado, el tamaño del dispositivo y el número y el tamaño de los objetos del dispositivo.
  </para>

  <figure>
   <title>Lista de imágenes de RBD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dashboard-rbds-details">
   <title>Visualización de detalles de los RBD</title>
   <para>
    Para ver información más detallada sobre un dispositivo, haga clic en su fila en la tabla:
   </para>
   <figure>
    <title>Detalles de RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-configuration">
   <title>Visualización de la configuración de RBD</title>
   <para>
    Para ver la configuración detallada de un dispositivo, haga clic en su fila en la tabla y, a continuación, en la pestaña <guimenu>Configuración</guimenu> de la tabla inferior:
   </para>
   <figure>
    <title>Configuración de RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-create">
   <title>Creación de RBD</title>
   <para>
    Para añadir un dispositivo nuevo, haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda del encabezado de la tabla y haga lo siguiente en la pantalla <guimenu>Crear RBD:</guimenu>
   </para>
   <figure>
    <title>Adición de un RBD nuevo</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Introduzca el nombre del dispositivo nuevo. Consulte el <xref linkend="sysreq-naming"/> para conocer las limitaciones a la hora de asignar un nombre.
     </para>
    </step>
    <step>
     <para>
      Seleccione el repositorio con la aplicación "rbd" asignada desde el que se creará el nuevo dispositivo RBD.
     </para>
    </step>
    <step>
     <para>
      Especifique el tamaño del nuevo dispositivo.
     </para>
    </step>
    <step>
     <para>
      Especifique las opciones adicionales para el dispositivo. Para ajustar los parámetros del dispositivo, haga clic en <guimenu>Avanzado</guimenu> e introduzca valores para el tamaño del objeto, la unidad de repartición o el recuento de repartición. Para especificar los límites de calidad de servicio (QoS), haga clic en <guimenu>Calidad del servicio</guimenu> e introdúzcalos.
     </para>
    </step>
    <step>
     <para>
      Para confirmar, haga clic en <guimenu>Crear RBD.</guimenu>
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dashboard-rbd-delete">
   <title>Supresión de RBD</title>
   <para>
    Para suprimir un dispositivo, haga clic en su fila en la tabla y haga clic en <guimenu>Suprimir</guimenu> en la parte superior izquierda del encabezado de la tabla. Para confirmar, haga clic en <guimenu>Suprimir RBD.</guimenu>
   </para>
   <tip>
    <title>traslado de los RBD al depósito</title>
    <para>
     Suprimir un RBD es una acción irreversible. Si en su lugar, usa la opción <guimenu>Mover al depósito,</guimenu> podrá restaurar el dispositivo más adelante seleccionándolo en la pestaña <guimenu>Papelera</guimenu> de la tabla principal y haciendo clic en <guimenu>Restaurar</guimenu> en la parte superior izquierda del encabezado de la tabla.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-rbds-snapshots">
   <title>Instantáneas de dispositivos de bloques RADOS</title>
   <para>
    Para crear una instantánea de dispositivo de bloque RADOS, haga clic en la fila del dispositivo en la tabla y, en la pestaña <guimenu>Instantáneas</guimenu> situada bajo la tabla principal, haga clic en <guimenu>Crear</guimenu> en la parte superior izquierda del encabezado de la tabla. Escriba el nombre de la instantánea y haga clic en <guimenu>Crear instantánea</guimenu> para confirmar.
   </para>
   <para>
    Después de seleccionar una instantánea, puede realizar acciones adicionales en el dispositivo, como cambiar su nombre, protegerlo, clonarlo, copiarlo o suprimirlo. La opción <guimenu>Rollback</guimenu> (Deshacer) restaura el estado del dispositivo de la instantánea actual.
   </para>
   <figure>
    <title>Instantáneas RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-iscsi">
   <title>Gestión de pasarelas iSCSI Gateway</title>
   <tip>
    <title>más información sobre las pasarelas iSCSI Gateway</title>
    <para>
     Para obtener información general sobre las pasarelas iSCSI Gateway, consulte el <xref linkend="cha-ceph-as-iscsi"/> y el <xref linkend="cha-ceph-iscsi"/>.
    </para>
   </tip>
   <para>
    Para mostrar todas las pasarelas disponibles y las imágenes asignadas, haga clic en <menuchoice><guimenu>Bloque</guimenu><guimenu>iSCSI</guimenu></menuchoice> en el menú principal. Se abre una pestaña <guimenu>Resumen,</guimenu> que muestra las pasarelas iSCSI Gateway configuradas actualmente y las imágenes de RBD asignadas.
   </para>
   <para>
    La tabla <guimenu>Puertas de enlace iSCSI</guimenu> muestra el estado de cada pasarela, el número de destinos iSCSI y el número de sesiones. La tabla <guimenu>Imágenes</guimenu> muestra el nombre de cada imagen asignada, el nombre del repositorio relacionado, el tipo de almacén y otros detalles estadísticos.
   </para>
   <para>
    La pestaña <guimenu>Destinos</guimenu> muestra los destinos iSCSI configurados actualmente.
   </para>
   <figure>
    <title>Lista de destinos iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Para ver información más detallada sobre un destino, haga clic en su fila en la tabla. Se abre un esquema estructurado en forma de árbol con los discos, los portales, los iniciadores y los grupos incluidos. Haga clic en un elemento para expandirlo y ver su contenido detallado, opcionalmente con la configuración relacionada en la tabla de la derecha.
   </para>
   <figure>
    <title>Detalles de destino iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-iscsi-create">
    <title>Adición de destinos iSCSI</title>
    <para>
     Para añadir un destino iSCSI nuevo, haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda de la tabla <guimenu>Destinos</guimenu> e introduzca la información necesaria.
    </para>
    <figure>
     <title>Adición de un destino nuevo</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       Escriba la dirección de destino de la nueva pasarela.
      </para>
     </step>
     <step>
      <para>
       Haga clic en <guimenu>Añadir portal</guimenu> y seleccione uno o varios portales iSCSI de la lista.
      </para>
     </step>
     <step>
      <para>
       Haga clic en <guimenu>Añadir imagen</guimenu> y seleccione una o varias imágenes RBD para la pasarela.
      </para>
     </step>
     <step>
      <para>
       Si necesita utilizar autenticación para acceder a la pasarela, marque la casilla de verificación <guimenu>Autenticación</guimenu> e introduzca las credenciales. Encontrará opciones de autenticación más avanzadas después de activar <guimenu>Autenticación mutua</guimenu> y <guimenu>Autenticación de descubrimiento</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Para confirmar, haga clic en <guimenu>Crear destino.</guimenu>
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-edit">
    <title>Edición de destinos iSCSI</title>
    <para>
     Para editar un destino iSCSI existente, haga clic en su fila en la tabla <guimenu>Destinos</guimenu> y haga clic en <guimenu>Editar</guimenu> en la parte superior izquierda de la tabla.
    </para>
    <para>
     A continuación, puede modificar el destino iSCSI, añadir o suprimir portales y añadir o suprimir imágenes RBD relacionadas. También puede ajustar la información de autenticación para la pasarela.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-delete">
    <title>Supresión de destinos iSCSI</title>
    <para>
     Para suprimir un destino iSCSI, haga clic en su fila en la tabla y haga clic en <guimenu>Suprimir</guimenu> en la parte superior izquierda de la tabla de pasarelas. Active la casilla de verificación <guimenu>Sí, seguro</guimenu> y haga clic en <guimenu>Suprimir iSCSI</guimenu> para confirmar.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-qos">
   <title>Calidad del servicio (QoS) de un RBD</title>
   <tip>
    <title>información adicional</title>
    <para>
     Para obtener información general y una descripción de las opciones de configuración de QoS de un RDB, consulte la <xref linkend="rbd-qos"/>.
    </para>
   </tip>
   <para>
    Las opciones de QoS se pueden configurar en diferentes niveles.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Globalmente
     </para>
    </listitem>
    <listitem>
     <para>
      En cada repositorio
     </para>
    </listitem>
    <listitem>
     <para>
      En cada imagen
     </para>
    </listitem>
   </itemizedlist>
   <para>
    La configuración <emphasis>global</emphasis> se encuentra en la parte superior de la lista y se utiliza para todas las imágenes de RBD recién creadas y para aquellas imágenes que no sustituyen estos valores en la capa del repositorio o de la imagen de RBD. Un valor especificado globalmente se puede sustituir en cada repositorio o imagen. Las opciones especificadas en un repositorio se aplicarán a todas las imágenes de RBD de ese repositorio a menos que se sustituyan por una opción de configuración definida en una imagen. Las opciones especificadas en una imagen sustituyen a las opciones especificadas en un repositorio y a las especificadas globalmente.
   </para>
   <para>
    De esta manera, es posible definir valores por defecto globalmente, adaptarlos para todas las imágenes de RBD de un repositorio específico y sustituir la configuración del repositorio para imágenes de RBD individuales.
   </para>
   <sect3 xml:id="dash-rbd-qos-global">
    <title>Configuración global de opciones</title>
    <para>
     Para configurar opciones de RBD de forma global, seleccione <menuchoice><guimenu>Clúster</guimenu> <guimenu>Configuración</guimenu></menuchoice> en el menú principal.
    </para>
    <para>
     Para mostrar todas las opciones de configuración global disponibles, haga clic en <menuchoice><guimenu>Nivel</guimenu> <guimenu>Avanzado</guimenu></menuchoice>. A continuación, los resultados de la tabla se pueden filtrar por "rbd_qos" en el campo de búsqueda. Esto muestra todas las opciones de configuración disponibles para QoS. Para cambiar un valor, haga clic en su fila en la tabla y seleccione <guimenu>Editar</guimenu> en la parte superior izquierda de la tabla. El recuadro de diálogo <guimenu>Editar</guimenu> contiene seis campos diferentes para especificar valores. Los valores de la opción de configuración de RBD se deben indicar en el recuadro de texto <guimenu>mgr</guimenu>. Tenga en cuenta que, a diferencia de otros recuadros de diálogo, este no permite especificar el valor en unidades según convenga. Debe establecer estos valores en bytes o IOPS, dependiendo de la opción que esté editando.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-create">
    <title>Configuración de opciones en un nuevo repositorio</title>
    <para>
     Para crear un nuevo repositorio y configurar las opciones de configuración de RBD en él, haga clic en <menuchoice><guimenu>Repositorios</guimenu> <guimenu>Crear</guimenu></menuchoice>. Seleccione <guimenu>replicado</guimenu> como tipo de repositorio. A continuación, deberá añadir la etiqueta de aplicación <guimenu>rbd</guimenu> al repositorio para poder configurar las opciones de QoS de RBD.
    </para>
    <note>
     <para>
      No es posible configurar las opciones de configuración de QoS de RBD en un repositorio codificado de borrado. Para configurar las opciones de QoS de RBD para los repositorios codificados de borrado, debe editar el repositorio de metadatos replicados de una imagen RBD. A continuación, la configuración se aplicará al repositorio codificado de borrado de esa imagen.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-edit">
    <title>Configuración de opciones en un repositorio existente</title>
    <para>
     Para configurar las opciones de QoS de RBD en un repositorio existente, haga clic en <guimenu>Repositorios</guimenu>, haga clic en la fila del repositorio en la tabla y seleccione <guimenu>Editar</guimenu> en la parte superior izquierda de la tabla.
    </para>
    <para>
     Debería ver la sección <guimenu>Configuración de RBD</guimenu> en el recuadro de diálogo, seguida de una sección <guimenu>Calidad del servicio</guimenu>.
    </para>
    <note>
     <para>
      Si no ve las secciones <guimenu>Configuración de RBD</guimenu> ni <guimenu>Calidad del servicio</guimenu>, es probable que esté editando un repositorio <emphasis>codificado de borrado</emphasis>, que no se puede usar para establecer opciones de configuración de RBD, o bien que el repositorio no esté configurado para que las imágenes RBD lo puedan usar. En este último caso, asigne la etiqueta de aplicación <guimenu>rbd</guimenu> al repositorio y aparecerán las secciones de configuración correspondientes.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-qos">
    <title>Opciones de configuración</title>
    <para>
     Haga clic en el signo + de <guimenu>Calidad del servicio</guimenu> para abrir todas las opciones de configuración disponibles. Aparecerá una lista de todas las opciones disponibles. Las unidades de las opciones de configuración ya se muestran en los recuadros de texto. En el caso de las opciones de bytes por segundo (BPS), es posible utilizar accesos directos tales como "1M" o "5G". Se convertirán automáticamente a "1 MB/s" y "5 GB/s", respectivamente.
    </para>
    <para>
     Al hacer clic en el botón de restablecimiento situado a la derecha de cada recuadro de texto, se eliminará cualquier valor establecido en el repositorio. Esta acción no elimina los valores de configuración de las opciones configuradas globalmente o en una imagen RBD.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-create">
    <title>Creación de opciones de QoS de RBD con una imagen RBD nueva</title>
    <para>
     Para crear una imagen RBD con las opciones de QoS de RBD establecidas en esa imagen, seleccione <menuchoice><guimenu>Bloque</guimenu> <guimenu>Imágenes</guimenu></menuchoice> y haga clic en <guimenu>Crear</guimenu>. Haga clic en <guimenu>Avanzado</guimenu> para expandir la sección de configuración avanzada. Haga clic en <guimenu>Calidad del servicio</guimenu> para abrir todas las opciones de configuración disponibles.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-edit">
    <title>Edición de las opciones de QoS de RBD en imágenes existentes</title>
    <para>
     Para editar las opciones de QoS de RBD en una imagen existente, seleccione <menuchoice><guimenu>Bloque</guimenu> <guimenu>Imágenes</guimenu></menuchoice>, haga clic en la fila del repositorio en la tabla y, por último, haga clic en <guimenu>Editar</guimenu>. Aparecerá el recuadro de diálogo de edición. Haga clic en <guimenu>Avanzado</guimenu> para expandir la sección de configuración avanzada. Haga clic en <guimenu>Calidad del servicio</guimenu> para abrir todas las opciones de configuración disponibles.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-copy">
    <title>Cambio de las opciones de configuración al copiar o clonar imágenes</title>
    <para>
     Si se clona o se copia una imagen RBD, los valores establecidos en esa imagen en particular también se copiarán por defecto. Si desea cambiarlos durante la copia o la clonación, puede hacerlo especificando los valores de configuración actualizados en el recuadro de diálogo correspondiente, del mismo modo que cuando se crear o se edita una imagen RBD. Al realizar esta acción, solo establecerá (o restablecerá) los valores de la imagen RBD que se va a copiar o clonar. Esta operación no cambia ni la configuración de la imagen RBD de origen ni la configuración global.
    </para>
    <para>
     Si decide restablecer el valor de la opción durante la copia o clonación, no se establecerá ningún valor para esa opción en esa imagen. Eso significa que cualquier valor de esa opción especificada para el repositorio padre se usará si el repositorio padre tiene el valor configurado. De lo contrario, se usará el valor por defecto global.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-mirror">
   <title>Duplicación de un RBD</title>
   <tip>
    <title>información general</title>
    <para>
     Para obtener información general y el enfoque de la línea de comandos para duplicar un dispositivo de bloques RADOS, consulte la <xref linkend="ceph-rbd-mirror"/>.
    </para>
   </tip>
   <para>
    Puede usar Ceph Dashboard para configurar la réplica de imágenes RBD entre dos o más clústeres.
   </para>
   <sect3 xml:id="rbd-mirror-primary-secondary">
    <title>Clúster primario y clústeres secundarios</title>
    <para>
     El clúster <emphasis>primario</emphasis> es aquél donde se crea el repositorio original con imágenes. Los clústeres <emphasis>secundarios</emphasis> son aquellos donde se replican el repositorio o las imágenes desde el clúster <emphasis>primario</emphasis>.
    </para>
    <note>
     <title>nomenclatura relativa</title>
     <para>
      Los términos <emphasis>primario</emphasis> y <emphasis>secundario</emphasis> pueden ser relativos en el contexto de la réplica, ya que están más relacionados con los repositorios individuales que con los clústeres. Por ejemplo, en la réplica bidireccional, un repositorio se puede duplicar desde el clúster <emphasis>primario</emphasis> al <emphasis>secundario</emphasis>, mientras que otro repositorio se puede duplicar desde el clúster <emphasis>secundario</emphasis> al <emphasis>primario</emphasis>.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="rbd-mirroring-replication-modes">
    <title>Modos de réplica</title>
    <para>
     Hay dos modos para replicar datos:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Mediante el modo de <emphasis>repositorio</emphasis>, se replican todas las imágenes RBD de un repositorio.
      </para>
     </listitem>
     <listitem>
      <para>
       Con el modo de <emphasis>imagen</emphasis>, puede activar la duplicación solo de imágenes concretas de un repositorio.
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui-daemon">
    <title>Configuración del daemon <systemitem class="daemon">rbd-mirror</systemitem></title>
    <para>
     El daemon <systemitem class="daemon">rbd-mirror</systemitem> realiza la réplica de los datos del clúster. Para instalarlo, configurarlo y ejecutarlo siga estos pasos:
    </para>
    <procedure>
     <step>
      <para>
       El daemon <systemitem class="daemon">rbd-mirror</systemitem> debe ejecutarse en uno de los nodos del clúster <emphasis>secundario</emphasis> que no sea el nodo de administración. Dado que no se instala por defecto, debe instalarlo:
      </para>
<screen><prompt>root@minion &gt; </prompt>zypper install rbd-mirror</screen>
     </step>
     <step>
      <para>
       En clúster <emphasis>primario</emphasis>, cree un ID de usuario de Ceph único para el proceso del daemon <systemitem class="daemon">rbd-mirror</systemitem>. En este ejemplo, usaremos "uid1" como ID de usuario:
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd'
[client.rbd-mirror.uid1]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       En el nodo donde instaló previamente el paquete
       <package>rbd-mirror</package> en el clúster <emphasis>secundario</emphasis>, cree el mismo usuario de Ceph y guarde el resultado en un anillo de claves:
      </para>
<screen><prompt>root@minion &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd' \
 &gt; /etc/ceph/ceph.client.rbd-mirror.uid1.keyring</screen>
     </step>
     <step>
      <para>
       En el mismo nodo, habilite y ejecute el servicio <systemitem class="daemon">rbd-mirror</systemitem>:
      </para>
<screen><prompt>root@minion &gt; </prompt>systemctl enable ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl start ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl status ceph-rbd-mirror@rbd-mirror.uid1
● ceph-rbd-mirror@rbd-mirror.uid1.service - Ceph rbd mirror daemon
   Loaded: loaded (/usr/lib/systemd/system/ceph-rbd-mirror@.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2019-10-04 07:48:53 EDT; 2 days ago
 Main PID: 212434 (rbd-mirror)
    Tasks: 47
   CGroup: /system.slice/system-ceph\x2drbd\x2dmirror.slice/ceph-rbd-mirror@rbd-mirror.uid1.service
           └─212434 /usr/bin/rbd-mirror -f --cluster ceph --id rbd-mirror.test --setuser ceph --setgroup ceph

Oct 04 07:48:53 doc-ses6min4 systemd[1]: Started Ceph rbd mirror daemon.
</screen>
     </step>
     <step>
      <para>
       En Ceph Dashboard del clúster <emphasis>secundario</emphasis>, diríjase a <menuchoice><guimenu>Bloque</guimenu><guimenu>Duplicación</guimenu></menuchoice>. La tabla <guimenu>Daemons</guimenu> de la izquierda muestra los daemons <systemitem>rbd-mirror</systemitem> que se ejecutan activamente y su estado.
      </para>
      <figure>
       <title>Ejecución de daemons <systemitem class="daemon">rbd-mirror</systemitem></title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui">
    <title>Configuración de la réplica de repositorios en Ceph Dashboard</title>
    <para>
     El daemon <systemitem class="daemon">rbd-mirror</systemitem> debe tener acceso al clúster primario para poder duplicar imágenes RBD. Por lo tanto, debe crear una cuenta de usuario <emphasis>peer</emphasis> (par) de Ceph en el clúster primario e informar al clúster secundario sobre su anillo de claves:
    </para>
    <procedure>
     <step>
      <para>
       En el clúster <emphasis>primario</emphasis>, cree un nuevo usuario "client.rbd-mirror-peer" que se usará para replicar los datos:
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror-peer \
 mon 'profile rbd' osd 'profile rbd'
[client.rbd-mirror-peer]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       Tanto en el clúster <emphasis>primario</emphasis> como en el <emphasis>secundario</emphasis>, cree un repositorio con un nombre idéntico y asígneles la aplicación "rbd". Consulte la <xref linkend="dashboard-pools-create"/> para obtener más información sobre cómo crear un repositorio.
      </para>
      <figure>
       <title>Creación de un repositorio con la aplicación RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Tanto en la consola <emphasis>primaria</emphasis> como en la <emphasis>secundaria</emphasis> del clúster, diríjase a <menuchoice><guimenu>Bloque</guimenu><guimenu>Duplicación</guimenu></menuchoice>. En la tabla <guimenu>Repositorio</guimenu> de la derecha, haga clic en el nombre del repositorio que desea replicar y, después de hacer clic en <guimenu>Editar modo</guimenu>, seleccione el modo de réplica. En este ejemplo, trabajaremos con un modo de réplica de <emphasis>repositorio</emphasis>, lo que significa que se replicarán todas las imágenes de un repositorio determinado. Para confirmar, haga clic en <guimenu>Actualizar.</guimenu>
      </para>
      <figure>
       <title>Configuración del modo de réplica</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <important>
       <title>error o advertencia en el clúster primario</title>
       <para>
        Después de actualizar el modo de réplica, aparecerá un indicador de error o advertencia en la columna correspondiente de la derecha. Esto se debe a que el repositorio no tiene asignado todavía ningún usuario par para la réplica. Ignore este indicador para el clúster <emphasis>primario</emphasis>, ya que solo se asignará un usuario par al clúster <emphasis>secundario</emphasis>.
       </para>
      </important>
     </step>
     <step>
      <para>
       En la consola del clúster <emphasis>secundario</emphasis>, diríjase a <menuchoice><guimenu>Bloque</guimenu><guimenu>Duplicación</guimenu></menuchoice>. Registre el anillo de claves del usuario "client.rbd-mirror-peer" en el repositorio duplicado haciendo clic en el nombre del repositorio y seleccionando <guimenu>Añadir par</guimenu>. Proporcione los detalles del clúster <emphasis>primario</emphasis>:
      </para>
      <figure>
       <title>Adición de credenciales de par</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <variablelist>
       <varlistentry>
        <term><guimenu>Nombre del clúster</guimenu></term>
        <listitem>
         <para>
          Se trata de una cadena arbitraria exclusiva que identifica al clúster primario; por ejemplo, "primario". El nombre del clúster debe ser distinto del nombre real del clúster secundario.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>ID de CephX</guimenu></term>
        <listitem>
         <para>
          El ID de usuario de Ceph que creó como par de duplicación. En este ejemplo es "rbd-mirror-peer".
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Direcciones de monitores</guimenu></term>
        <listitem>
         <para>
          Lista separada por comas de direcciones IP o nombres de host de los nodos de Ceph Monitor del clúster primario.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Clave de CephX</guimenu></term>
        <listitem>
         <para>
          La clave relacionada con el ID de usuario par. Puede recuperarla ejecutando el siguiente comando de ejemplo en el clúster primario:
         </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth print_key client.rbd-mirror-peer</screen>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Para confirmar, haga clic en <guimenu>Enviar.</guimenu>
      </para>
      <figure>
       <title>Lista de repositorios replicados</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-test">
    <title>Verificación del funcionamiento de la réplica de la imagen RBD</title>
    <para>
     Cuando el daemon <systemitem class="daemon">rbd-mirror</systemitem> esté en ejecución y la réplica de la imagen RBD esté configurada en Ceph Dashboard, podrá verificar si la réplica realmente funciona:
    </para>
    <procedure>
     <step>
      <para>
       En Ceph Dashboard del clúster <emphasis>primario</emphasis>, cree una imagen RBD cuyo repositorio primario sea el repositorio que ya creó con fines de réplica. Habilite las funciones <option>Bloqueo exclusivo</option> y <option>En diario</option> de la imagen. Consulte la <xref linkend="dashboard-rbds-create"/> para obtener más información sobre cómo crear imágenes RBD.
      </para>
      <figure>
       <title>Nueva imagen RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Después de crear la imagen que desea replicar, abra la Ceph Dashboard del clúster <emphasis>secundario</emphasis> y diríjase a <menuchoice><guimenu>Bloque</guimenu><guimenu>Duplicación</guimenu></menuchoice>. La tabla <guimenu>Repositorios</guimenu> de la derecha reflejará el cambio en el número de imágenes de <guimenu>N.º remotos</guimenu> y sincronizará el número de imágenes de <guimenu>N.º locales</guimenu>.
      </para>
      <figure>
       <title>Nueva imagen RBD sincronizada</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <tip>
       <title>progreso de la réplica</title>
       <para>
        La tabla <guimenu>Imágenes</guimenu> de la parte inferior de la página muestra el estado de la réplica de las imágenes RBD. La pestaña <guimenu>Problemas</guimenu> incluye los problemas que se han podido producir, <guimenu>Sincronización</guimenu> muestra el progreso de la réplica de la imagen y <guimenu>Listo</guimenu> muestra todas las imágenes cuya réplica se ha realizado correctamente.
       </para>
       <figure>
        <title>Estado de réplica de las imágenes RBD</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </tip>
     </step>
     <step>
      <para>
       En el clúster <emphasis>primario</emphasis>, escriba datos en la imagen RBD. En la Ceph Dashboard del clúster <emphasis>secundario</emphasis>, diríjase a <menuchoice><guimenu>Bloque</guimenu><guimenu>Imágenes</guimenu></menuchoice> y supervise si el tamaño de la imagen correspondiente aumenta a medida que se escriben los datos en el clúster primario.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dash-webui-nfs">
  <title>Gestión de NFS Ganesha</title>

  <tip>
   <title>más información sobre NFS Ganesha</title>
   <para>
    Para obtener información general sobre NFS Ganesha, consulte el <xref linkend="cha-ceph-nfsganesha"/>.
   </para>
  </tip>

  <para>
   Para mostrar todas las exportaciones NFS disponibles, haga clic en <guimenu>NFS</guimenu> en el menú principal.
  </para>

  <para>
   La lista muestra el directorio de cada exportación, el nombre de host del daemon, el tipo de procesador final de almacenamiento y el tipo de acceso.
  </para>

  <figure>
   <title>Lista de exportaciones NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Para ver información más detallada sobre una exportación NFS, haga clic en su fila en la tabla:
  </para>

  <figure>
   <title>Detalles de la exportación NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dash-webui-nfs-create">
   <title>Adición de exportaciones NFS</title>
   <para>
    Para añadir una exportación NFS nueva, haga clic en <guimenu>Add</guimenu> (Añadir) en la esquina superior izquierda de la tabla de exportaciones e introduzca la información necesaria.
   </para>
   <figure>
    <title>Adición de una exportación NFS nueva</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Seleccione uno o más daemons NFS Ganesha que ejecutarán la exportación.
     </para>
    </step>
    <step>
     <para>
      Seleccione un procesador final de almacenamiento: <guimenu>CephFS</guimenu> u <guimenu>Object Gateway</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Seleccione un ID de usuario y otras opciones relacionadas con el procesador final de almacenamiento.
     </para>
    </step>
    <step>
     <para>
      Introduzca la vía de la exportación NFS. Si el directorio no existe en el servidor, se creará.
     </para>
    </step>
    <step>
     <para>
      Especifique las demás opciones relacionadas con NFS, como la versión del protocolo NFS compatible, las opciones de Pseudo, el tipo de acceso, la opción de squash o el protocolo de transporte.
     </para>
    </step>
    <step>
     <para>
      Si necesita limitar el acceso solo a determinados clientes, haga clic en <guimenu>Add clients</guimenu> (Añadir clientes) y añada sus direcciones IP junto con el tipo de acceso y las opciones de squash.
     </para>
    </step>
    <step>
     <para>
      Para confirmar, haga clic en <guimenu>Enviar.</guimenu>
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-delete">
   <title>Supresión de exportaciones NFS</title>
   <para>
    Para suprimir una exportación, haga clic en su fila en la tabla y seleccione <guimenu>Suprimir</guimenu> en la parte superior izquierda de la tabla de exportaciones.
   </para>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-edit">
   <title>Edición de exportaciones NFS</title>
   <para>
    Para editar una exportación existente, haga clic en su fila en la tabla y haga clic en <guimenu>Editar</guimenu> en la parte superior izquierda de la tabla de exportaciones.
   </para>
   <para>
    A continuación, puede ajustar todos los detalles de la exportación NFS.
   </para>
   <figure>
    <title>Edición de una exportación NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-mds">
  <title>Gestión de los sistemas de archivos de Ceph</title>

  <tip>
   <title>información adicional</title>
   <para>
    Para obtener información detallada sobre CephFS, consulte el <xref linkend="cha-ceph-cephfs"/>
   </para>
  </tip>

  <sect2 xml:id="dashboard-mds-overview">
   <title>Visualización del resumen de CephFS</title>
   <para>
    Haga clic en <guimenu>Sistemas de archivos</guimenu> en el menú principal para ver un resumen de los sistemas de archivos configurados. La tabla principal muestra el nombre de cada sistema de archivos, la fecha de creación y si está habilitado o no.
   </para>
   <para>
    Al hacer clic en una fila de sistema de archivos de la tabla, se muestran detalles sobre su rango y los repositorios añadidos al sistema de archivos.
   </para>
   <figure>
    <title>Detalles de CephFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    En la parte inferior de la pantalla, se muestran estadísticas con el número de inodos MDS relacionados y las peticiones del cliente, recopiladas en tiempo real.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-ogw">
  <title>Gestión de pasarelas Object Gateway</title>

  <tip>
   <title>más información sobre las pasarelas Object Gateway</title>
   <para>
    Para obtener información general sobre Object Gateway, consulte el <xref linkend="cha-ceph-gw"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-ogw-view">
   <title>Visualización de pasarelas Object Gateway</title>
   <para>
    Para ver una lista de pasarelas Object Gateway configuradas, haga clic en <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Daemons</guimenu></menuchoice>. La lista incluye el ID de la pasarela, el nombre de host del nodo del clúster donde se ejecuta el daemon de la pasarela y el número de versión de la pasarela.
   </para>
   <para>
    Haga clic en la fila de una pasarela en la tabla para ver información detallada. La pestaña <guimenu>Contadores de rendimiento</guimenu> muestra detalles sobre las operaciones de lectura y escritura y las estadísticas de caché.
   </para>
   <figure>
    <title>Detalles de la pasarela</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-ogw-user">
   <title>Gestión de usuarios de Object Gateway</title>
   <para>
    Haga clic en <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Usuarios</guimenu></menuchoice> para ver una lista de los usuarios existentes de Object Gateway.
   </para>
   <para>
    Haga clic en la fila de un usuario en la tabla para ver detalles sobre la cuenta del usuario; por ejemplo, la información de estado o detalles sobre la cuota de usuario y depósito.
   </para>
   <figure>
    <title>Usuarios de Gateway</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-ogw-user-create">
    <title>Adición de un nuevo usuario de Gateway</title>
    <para>
     Para añadir un nuevo usuario de Gateway, haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda del encabezado de la tabla. Rellene sus credenciales, los detalles sobre la clave de S3 y la cuota de usuario/depósito y, a continuación, haga clic en <guimenu>Añadir</guimenu> para confirmar.
    </para>
    <figure>
     <title>Adición de un nuevo usuario de Gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-delete">
    <title>Supresión de usuarios de Gateway</title>
    <para>
     Para suprimir un usuario de Gateway, haga clic en la fila del usuario en la tabla y seleccione <guimenu>Suprimir</guimenu> en la parte superior izquierda del encabezado de la tabla. Active la casilla de verificación <guimenu>Sí, seguro</guimenu> y haga clic en <guimenu>Suprimir usuario</guimenu> para confirmar.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-edit">
    <title>Edición de los detalles de usuario de Gateway</title>
    <para>
     Para cambiar los detalles de un usuario de Gateway, haga clic en la fila del usuario en la tabla y seleccione <guimenu>Editar</guimenu> en la parte superior izquierda del encabezado de la tabla.
    </para>
    <para>
     Puede modificar la información básica o adicional del usuario, como sus capacidades, las claves, los subusuarios y la información de cuota. Para confirmar, haga clic en <guimenu>Actualizar.</guimenu>
    </para>
    <para>
     La pestaña <guimenu>Claves</guimenu> incluye una lista de solo lectura de los usuarios de la pasarela y sus claves de acceso y secreta. Para ver las claves, haga clic en el nombre de un usuario en la lista y, a continuación, seleccione <guimenu>Mostrar</guimenu> en la parte superior izquierda del encabezado de la tabla. En recuadro de diálogo <guimenu>Clave S3</guimenu>, haga clic en el icono del "ojo" para mostrar las claves, o bien haga clic en el icono del portapapeles para copiar la clave relacionada en el portapapeles.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-ogw-bucket">
   <title>Gestión de los depósitos de Object Gateway</title>
   <para>
    Los depósitos de Object Gateway (OGW) implementan la funcionalidad de los contenedores de OpenStack Swift. Los depósitos de Object Gateway sirven como contenedores para almacenar objetos de datos.
   </para>
   <para>
    Haga clic en <menuchoice><guimenu>Object Gateway </guimenu><guimenu>Papeleras</guimenu></menuchoice> para ver una lista de depósitos de OGW.
   </para>
   <sect3 xml:id="dashboard-ogw-bucket-create">
    <title>Adición de un depósito</title>
    <para>
     Para añadir un depósito de OGW, haga clic en <guimenu>Añadir</guimenu> en la parte superior izquierda del encabezado de la tabla. Escriba el nombre del depósito y seleccione su propietario. Para confirmar, haga clic en <guimenu>Añadir.</guimenu>
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-view">
    <title>Visualización de detalles del depósito</title>
    <para>
     Para ver información detallada sobre un depósito de OGW, haga clic en su fila en la tabla.
    </para>
    <figure>
     <title>Detalles del depósito de Gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <tip>
     <title>cuota de depósito</title>
     <para>
      Debajo de la tabla <guimenu>Detalles</guimenu>, puede encontrar detalles sobre la configuración de la cuota de depósito.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-edit">
    <title>Actualización del propietario de un depósito</title>
    <para>
     Haga clic en la fila de un depósito en la tabla y seleccione <guimenu>Editar</guimenu> en la parte superior izquierda del encabezado de la tabla.
    </para>
    <para>
     Actualice el propietario del depósito y haga clic en <guimenu>Actualizar</guimenu> para confirmar.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-delete">
    <title>Supresión de un depósito</title>
    <para>
     Para suprimir un depósito de OGW, haga clic en su fila en la tabla y seleccione <guimenu>Suprimir</guimenu> en la parte superior izquierda del encabezado de la tabla. Active la casilla de verificación <guimenu>Sí, seguro</guimenu> y haga clic en <guimenu>Suprimir depósito</guimenu> para confirmar.
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-initial-configuration">
  <title>Configuración manual</title>

  <para>
   En esta sección se presenta información avanzada para los usuarios que prefieren configurar manualmente los valores de la consola en la línea de comandos.
  </para>

  <sect2 xml:id="dashboard-ssl">
   <title>Compatibilidad TLS/SSL</title>
   <para>
    Todas las conexiones HTTP a la consola están protegidas por defecto con SSL/TLS. Una conexión segura requiere un certificado SSL. Puede usar un certificado autofirmado o generar un certificado y hacer que una entidad de certificación (CA) conocida lo firme.
   </para>
   <tip>
    <title>inhabilitación de SSL</title>
    <para>
     A veces puede ser necesario inhabilitar SSL por algún motivo. Por ejemplo, si la consola se ejecuta mediante un proxy que no admite SSL.
    </para>
    <para>
     Tenga cuidado al inhabilitar SSL, ya que los <emphasis role="bold">nombres de usuario y las contraseñas</emphasis> se enviarán a la consola <emphasis role="bold">sin cifrar</emphasis>.
    </para>
    <para>
     Para inhabilitar SSL, ejecute:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/ssl false
</screen>
   </tip>
   <tip>
    <title>reinicio de los procesos de Ceph Manager</title>
    <para>
     Debe reiniciar los procesos de Ceph Manager manualmente después de cambiar el certificado SSL y la clave. Puede hacerlo ejecutando:
    </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph mgr fail<replaceable>ACTIVE-MANAGER-NAME</replaceable></screen>
    <para>
     o inhabilitando y volviendo a habilitar el módulo de consola, lo que también activa que el gestor se vuelva a reproducir a sí mismo:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr module disable dashboard
<prompt>cephadm@adm &gt; </prompt>ceph mgr module enable dashboard
</screen>
   </tip>
   <sect3 xml:id="self-sign-certificates">
    <title>Certificados autofirmados</title>
    <para>
     Crear un certificado autofirmado para establecer comunicaciones seguras es sencillo. Es una manera rápida de conseguir poner en funcionamiento la consola.
    </para>
    <note>
     <title>advertencias de los navegadores Web</title>
     <para>
      La mayoría de los navegadores Web producen una advertencia sobre los certificados autofirmados y requerirán que se confirmen explícitamente antes de establecer una conexión segura con la consola.
     </para>
    </note>
    <para>
     Para generar e instalar un certificado autofirmado, utilice el siguiente comando integrado:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard create-self-signed-cert
</screen>
   </sect3>
   <sect3 xml:id="cert-sign-CA">
    <title>Certificados firmados por una CA</title>
    <para>
     Para proteger correctamente la conexión a la consola y eliminar las advertencias de los navegadores Web sobre los certificados autofirmados, se recomienda usar un certificado firmado por una CA.
    </para>
    <para>
     Puede generar un par de claves de certificado con un comando similar al siguiente:
    </para>
<screen>
<prompt>root # </prompt>openssl req -new -nodes -x509 \
  -subj "/O=IT/CN=ceph-mgr-dashboard" -days 3650 \
  -keyout dashboard.key -out dashboard.crt -extensions v3_ca
</screen>
    <para>
     El comando anterior genera los archivos <filename>dashboard.key</filename> y <filename>dashboard.crt</filename>. Después de que una CA haya firmado el archivo <filename>dashboard.crt</filename>, habilítelo para todas las instancias de Ceph Manager ejecutando los comandos siguientes:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/key -i dashboard.key
</screen>
    <tip>
     <title>certificados diferentes para cada instancia de Manager</title>
     <para>
      Si necesita certificados diferentes para cada instancia de Ceph Manager, modifique los comandos e incluya el nombre de la instancia de la siguiente manera. Sustituya <replaceable>NAME</replaceable> por el nombre de la instancia de Ceph Manager (normalmente es el nombre de host relacionado):
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/key -i dashboard.key
</screen>
    </tip>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-hostname-port">
   <title>Nombre del host y el número de puerto</title>
   <para>
    La aplicación Web de Ceph Dashboard se vincula a una dirección TCP/IP y a un puerto TCP específicos. Por defecto, la instancia de Ceph Manager activa actualmente donde se aloja la consola se vincula al puerto TCP 8443 (o al 8080 si SSL está inhabilitado).
   </para>
   <para>
    La aplicación Web de la consola se vincula por defecto a "::", que corresponde a todas las direcciones IPv4 e IPv6 disponibles. Es posible cambiar la dirección IP y el número de puerto de la aplicación Web para que se apliquen a todas las instancias de Ceph Manager mediante los siguientes comandos:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   <tip>
    <title>configuración por separado de instancias de Ceph Manager</title>
    <para>
     Dado que cada daemon <systemitem class="daemon">ceph-mgr</systemitem> aloja su propia instancia de la consola, es posible que deba configurarlos por separado. Cambie la dirección IP y el número de puerto de una instancia específica del gestor mediante los comandos siguientes (sustituya <replaceable>NAME</replaceable> por el ID de la instancia de <systemitem class="daemon">ceph-mgr</systemitem>):
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   </tip>
   <tip>
    <title>lista de puestos finales configurados</title>
    <para>
     El comando <command>ceph mgr services</command> muestra todos los puestos finales que están configurados actualmente. Busque la clave "dashboard" para obtener la dirección URL con la que acceder a la consola.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-username-password">
   <title>Nombre de usuario y contraseña</title>
   <para>
    Si no desea utilizar la cuenta de administrador por defecto, cree una cuenta de usuario diferente y asóciela con al menos una función. Proporcionamos un conjunto de funciones de sistema predefinidos que puede usar. Para obtener más información, consulte la <xref linkend="dashboard-user-roles"/>.
   </para>
   <para>
    Para crear un usuario con privilegios de administrador, utilice el comando siguiente:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USER_NAME</replaceable> <replaceable>PASSWORD</replaceable> administrator
</screen>
  </sect2>

  <sect2 xml:id="dashboard-ogw-enabling">
   <title>Habilitación del front-end de gestión de Object Gateway</title>
   <para>
    Para utilizar la funcionalidad de gestión de Object Gateway de la consola, debe proporcionar las credenciales de entrada de un usuario con el indicador "system" habilitado:
   </para>
   <procedure>
    <step>
     <para>
      Si no tiene ningún usuario con el indicador "system", cree uno:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user create --uid=<replaceable>USER_ID</replaceable> --display-name=<replaceable>DISPLAY_NAME</replaceable> --system
</screen>
     <para>
      Tome nota de las claves "access_key" y "secret_key" del resultado del comando.
     </para>
    </step>
    <step>
     <para>
      También puede obtener las credenciales de un usuario existente mediante el comando <command>radosgw-admin</command>:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user info --uid=<replaceable>USER_ID</replaceable>
</screen>
    </step>
    <step>
     <para>
      Proporcione las credenciales recibidas a la consola:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-access-key <replaceable>ACCESS_KEY</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-secret-key <replaceable>SECRET_KEY</replaceable>
</screen>
    </step>
   </procedure>
   <para>
    Se deben tener en cuenta varios puntos:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      El nombre de host y el número de puerto de Object Gateway se determinan automáticamente.
     </para>
    </listitem>
    <listitem>
     <para>
      Si se utilizan varias zonas, el host se determinará automáticamente dentro del grupo de zonas maestras y la zona maestra. Esto es suficiente para la mayoría de configuraciones, pero en algunas circunstancias es posible que sea necesario definir el nombre de host y el puerto manualmente:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-host <replaceable>HOST</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-port <replaceable>PORT</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Podría necesitar estos ajustes adicionales:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-scheme <replaceable>SCHEME</replaceable>  # http or https
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-admin-resource <replaceable>ADMIN_RESOURCE</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-user-id <replaceable>USER_ID</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Si utiliza un certificado autofirmado (<xref linkend="dashboard-ssl"/>) en la configuración de Object Gateway, inhabilite la verificación del certificado en la consola para evitar que se rechacen conexiones debido a que haya certificados firmados por una CA desconocida o a que no coincidan con el nombre de host:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-ssl-verify False
</screen>
    </listitem>
    <listitem>
     <para>
      Si Object Gateway tarda demasiado en procesar las peticiones y se agota el tiempo de espera en la consola, el valor del tiempo de espera se puede ajustar (por defecto es de 45 segundos):
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rest-requests-timeout <replaceable>SECONDS</replaceable>
</screen>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-sso">
   <title>Habilitación de Single Sign-On</title>
   <para>
    <emphasis>Single Sign-On</emphasis> (SSO) es un método de control de acceso que permite a los usuarios entrar a la sesión mediante un único identificador y una contraseña en varias aplicaciones simultáneamente.
   </para>
   <para>
    Ceph Dashboard admite la autenticación externa de usuarios a través del protocolo SAML 2.0. Dado que la <emphasis>autorización</emphasis> la sigue realizando la consola, primero debe crear cuentas de usuario y asociarlas a las funciones deseadas. Sin embargo, el proceso de <emphasis>autenticación</emphasis> lo puede realizar un <emphasis>proveedor de identidades</emphasis> (IdP) existente.
   </para>
   <para>
    Para configurar Single Sign-On, utilice el siguiente comando:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso setup saml2 <replaceable>CEPH_DASHBOARD_BASE_URL</replaceable> \
 <replaceable>IDP_METADATA</replaceable> <replaceable>IDP_USERNAME_ATTRIBUTE</replaceable> \
 <replaceable>IDP_ENTITY_ID</replaceable> <replaceable>SP_X_509_CERT</replaceable> \
 <replaceable>SP_PRIVATE_KEY</replaceable>
</screen>
   <para>
    Parámetros:
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>CEPH_DASHBOARD_BASE_URL</replaceable></term>
     <listitem>
      <para>
       La URL base desde la que se puede acceder a la Ceph Dashboard (por ejemplo, "https://consolaceph.local").
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_METADATA</replaceable></term>
     <listitem>
      <para>
       La URL, la vía o el contenido del XML de metadatos del IdP (por ejemplo, "https://miidp/metadatos").
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_USERNAME_ATTRIBUTE</replaceable></term>
     <listitem>
      <para>
       Opcional. El atributo que se usará para obtener el nombre de usuario de la respuesta de autenticación. El valor por defecto es "uid".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_ENTITY_ID</replaceable></term>
     <listitem>
      <para>
       Opcional. Se usa cuando existe más de un ID de entidad en los metadatos del IdP.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>SP_X_509_CERT</replaceable> / <replaceable>SP_PRIVATE_KEY</replaceable></term>
     <listitem>
      <para>
       Opcional. Vía o contenido del certificado que usará la Ceph Dashboard (el proveedor de servicios) para la firma y el cifrado.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>peticiones SAML</title>
    <para>
     Este patrón irá seguido del valor del emisor de las peticiones SAML:
    </para>
<screen>
<replaceable>CEPH_DASHBOARD_BASE_URL</replaceable>/auth/saml2/metadata
</screen>
   </note>
   <para>
    Para mostrar la configuración actual de SAML 2.0, ejecute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso show saml2
</screen>
   <para>
    Para inhabilitar Single Sign-On, ejecute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso disable
</screen>
   <para>
    Para comprobar si SSO está habilitado, ejecute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso status
</screen>
   <para>
    Para habilitar SSO, ejecute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso enable saml2
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-roles">
  <title>Gestión de usuarios y funciones en la línea de comandos</title>

  <para>
   En esta sección se describe cómo gestionar las cuentas de usuario utilizadas por la Ceph Dashboard. Sirve de ayuda para crear o modificar cuentas de usuario, así como para establecer las funciones y permisos de usuario adecuados.
  </para>

  <sect2 xml:id="dahsboard-user-accounts">
   <title>Cuentas de usuario</title>
   <para>
    Ceph Dashboard admite la gestión de varias cuentas de usuario. Cada cuenta de usuario está formada por un nombre de usuario, una contraseña (almacenada cifrada mediante <literal>bcrypt</literal>), un nombre opcional y una dirección de correo electrónico opcional.
   </para>
   <para>
    Las cuentas de usuario se almacenan en la base de datos de configuración de Ceph Monitor y se comparten de forma global entre todas las instancias de Ceph Manager.
   </para>
   <para>
    Utilice los comandos siguientes para gestionar cuentas de usuario:
   </para>
   <variablelist>
    <varlistentry>
     <term>Mostrar usuarios existentes:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Crear un usuario:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Suprimir un usuario:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Cambiar la contraseña de un usuario:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Modificar el nombre y el correo electrónico de un usuario:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-permissions">
   <title>Funciones y permisos de usuario</title>
   <para>
    En esta sección se describen los ámbitos de seguridad que puede asignar a una función de usuario, y se explica cómo gestionar funciones de usuario y cómo asignarlas a cuentas de usuario.
   </para>
   <sect3>
    <title>Ámbitos de seguridad</title>
    <para>
     Las cuentas de usuario están asociadas a un conjunto de funciones que definen a qué partes de la consola puede tener acceso el usuario. Las distintas partes de la consola se agrupan dentro de un ámbito de <emphasis>seguridad</emphasis>. Los ámbitos de seguridad están predefinidos y son estáticos. Actualmente están disponibles los siguientes ámbitos de seguridad:
    </para>
    <variablelist>
     <varlistentry>
      <term>hosts</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la entrada del menú <guimenu>Hosts</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>config-opt</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con las gestión de las opciones de configuración de Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de repositorios.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>osd</term>
      <listitem>
       <para>
        Incluye todas las funciones relacionadas con la gestión de Ceph OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>monitor</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de Ceph Monitor.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-image</term>
      <listitem>
       <para>
        Incluye todas las funciones relacionadas con la gestión de imágenes de dispositivos de bloques RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-mirroring</term>
      <listitem>
       <para>
        Incluye todas las funciones relacionadas con la gestión de duplicados de dispositivos de bloques RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>iscsi</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de iSCSI.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de Object Gateway.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de CephFS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>manager</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de Ceph Manager.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>log</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con la gestión de los registros de Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>grafana</term>
      <listitem>
       <para>
        Incluye todas las características relacionadas con el proxy de Grafana.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>dashboard-settings</term>
      <listitem>
       <para>
        Permite cambiar la configuración de la consola.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3>
    <title>Funciones del usuario</title>
    <para>
     Una <emphasis>función</emphasis> especifica un conjunto de asignaciones entre un <emphasis>ámbito de seguridad</emphasis> y un conjunto de <emphasis>permisos</emphasis>. Hay cuatro tipos de permisos: "leer", "crear", "actualizar" y "suprimir".
    </para>
    <para>
     En el ejemplo siguiente se especifica una función en la que un usuario tiene los permisos "leer" y "crear" para las características relacionadas con la gestión de repositorios, y tiene permisos completos para las características relacionadas con la gestión de imágenes de RBD:
    </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
    <para>
     La consola ya proporciona un conjunto de funciones predefinidas que llamamos <emphasis>funciones del sistema</emphasis>. Puede usarlas de inmediato después de instalar la Ceph Dashboard:
    </para>
    <variablelist>
     <varlistentry>
      <term>administrator</term>
      <listitem>
       <para>
        Proporciona permisos completos para todos los ámbitos de seguridad.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>read-only</term>
      <listitem>
       <para>
        Proporciona permiso de lectura para todos los ámbitos de seguridad, excepto para la configuración de la consola.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>block-manager</term>
      <listitem>
       <para>
        Proporciona permisos completos para los ámbitos "rbd-image", "rbd-mirroring" e "iscsi".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw-manager</term>
      <listitem>
       <para>
        Proporciona permisos completos para el ámbito "rgw".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cluster-manager</term>
      <listitem>
       <para>
        Proporciona permisos completos para los ámbitos "hosts", "osd", "monitor", "manager" y "config-opt".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool-manager</term>
      <listitem>
       <para>
        Proporciona permisos completos para el ámbito "pool".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs-manager</term>
      <listitem>
       <para>
        Proporciona permisos completos para el ámbito "cephfs".
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <sect4>
     <title>Gestión de funciones personalizadas</title>
     <para>
      Puede crear nuevas funciones de usuario mediante los siguientes comandos:
     </para>
     <variablelist>
      <varlistentry>
       <term>Crear una función:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Suprimir una función:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Añadir permisos de ámbito a una función:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Suprimir permisos de ámbito de una función:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
    </sect4>
    <sect4>
     <title>Asignación de funciones a cuentas de usuario</title>
     <para>
      Utilice los comandos siguientes para asignar funciones a los usuarios:
     </para>
     <variablelist>
      <varlistentry>
       <term>Definir funciones de usuario:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Añadir funciones adicionales a un usuario:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Suprimir funciones de un usuario:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>limpieza de funciones personalizadas</title>
      <para>
       Si crea funciones de usuario personalizadas y tiene previsto eliminar el clúster de Ceph con el runner <command>ceph.purge</command> más adelante, primero debe limpiar las funciones personalizadas. Más detalles en la <xref linkend="deepsea-ceph-purge"/>
      </para>
     </tip>
    </sect4>
    <sect4>
     <title>Ejemplo: Creación de un usuario y una función personalizada</title>
     <para>
      En esta sección se describe un procedimiento para crear una cuenta de usuario capaz de gestionar imágenes RBD, ver y crear repositorios de Ceph y tener acceso de solo lectura a cualquier otro ámbito.
     </para>
     <procedure>
      <step>
       <para>
        Cree un usuario llamado "tux":
       </para>
<screen>
 <prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
      </step>
      <step>
       <para>
        Cree una función y especifique los permisos de ámbito:
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
      </step>
      <step>
       <para>
        Asocie las funciones con el usuario "tux":
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
      </step>
     </procedure>
    </sect4>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-proxy">
   <title>Proxies inversos</title>
   <para>
    Si accede a la consola a través de una configuración de proxy inverso, es posible que deba darle servicio mediante un prefijo de URL. Para que la consola pueda usar hipervínculos que incluyan el prefijo, puede definir el valor de <option>url_prefix</option>:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
</screen>
   <para>
    A continuación, podrá acceder a la consola en <literal>http://<replaceable>NOMBRE_HOST</replaceable>:<replaceable>NÚMERO_PUERTO</replaceable>/<replaceable>PREFIJO_URL</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-auditing">
   <title>Auditoría</title>
   <para>
    La API REST de Ceph Dashboard puede registrar peticiones PUT, POST y DELETE en el registro de auditoría de Ceph. El registro está inhabilitado por defecto, pero es posible habilitarlo con el siguiente comando:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>
   <para>
    Si está habilitado, se registran los parámetros siguientes por cada petición:
   </para>
   <variablelist>
    <varlistentry>
     <term>from</term>
     <listitem>
      <para>
       El origen de la petición, por ejemplo "https://::1]:44410".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>path</term>
     <listitem>
      <para>
       La vía de la API REST, por ejemplo "/api/auth".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>method</term>
     <listitem>
      <para>
       "PUT", "POST" o "DELETE".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user</term>
     <listitem>
      <para>
       El nombre del usuario (o "Ninguno").
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Una entrada de registro de ejemplo tiene este aspecto:
   </para>
<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>
   <tip>
    <title>inhabilitación del registro de la carga útil de la petición</title>
    <para>
     El registro de la carga útil de la petición (la lista de argumentos y sus valores) está habilitado por defecto. Puede inhabilitarlo de la siguiente manera:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
   </tip>
  </sect2>
 </sect1>
</chapter>
