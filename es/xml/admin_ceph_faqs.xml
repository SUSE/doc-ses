<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_ceph_faqs.xml" version="5.0" xml:id="storage-faqs">
 <title>Preguntas más frecuentes</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sí</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para/>
 <sect1 xml:id="storage-bp-tuneups-pg-num">
  <title>¿Cómo afecta el número de grupos de colocación al rendimiento del clúster?</title>

  <para>
   Cuando el clúster se llena al 70 % o al 80 %, es el momento de añadir más OSD. Cuando aumente el número de OSD, puede plantearse aumentar también el número de grupos de colocación.
  </para>

  <warning>
   <para>
    Cambiar el número de grupos de colocación provoca muchísima transferencia de datos dentro del clúster.
   </para>
  </warning>

  <para>
   Calcular el valor óptimo del clúster recién redimensionado es una tarea compleja.
  </para>

  <para>
   Un número elevado de grupos de colocación crea pequeños bloques de datos. Esto acelera la recuperación tras un fallo del OSD, pero supone una gran cantidad de carga en los nodos de monitor, ya que son los responsables de calcular la ubicación de los datos.
  </para>

  <para>
   Por otra parte, un número reducido de grupos de colocación tarda más tiempo y supone un mayor volumen de transferencia de datos a la hora de recuperarse tras un fallo del OSD, pero no impone tanta carga en los nodos de monitor como la que se necesita para calcular las ubicaciones del menor número de bloques (aunque estos sean mayores).
  </para>

  <para>
   Encontrará más información sobre el número óptimo de grupos de colocación para el clúster en la <xref linkend="op-pgs-pg-num"/>.
  </para>
 </sect1>
 <sect1 xml:id="storage-bp-tuneups-mix-ssd">
  <title>¿Puedo utilizar unidades SSD y discos duros en el mismo clúster?</title>

  <para>
   Las unidades de estado sólido (SSD) son, por lo general, más rápidas que los discos duros. Si combina los dos tipos de discos para la misma operación de escritura, la escritura de los datos en el disco SSD se ralentiza debido al rendimiento del disco duro. Por lo tanto, <emphasis>nunca debe combinar unidades SSD y discos duros</emphasis> para la escritura de datos que sigan <emphasis>la misma regla</emphasis> (consulte la <xref linkend="datamgm-rules"/> para obtener más información sobre las reglas para almacenar datos).
  </para>

  <para>
   Por lo general, hay dos casos en los que usar unidades SSD y discos duros en el mismo clúster tiene sentido:
  </para>

  <orderedlist spacing="normal">
   <listitem>
    <para>
     Si usa cada tipo de disco para escribir datos que siguen reglas distintas. En ese caso, deberá disponer de una regla independiente para el disco SSD y otra para el disco duro.
    </para>
   </listitem>
   <listitem>
    <para>
     Si usa cada tipo de disco para un propósito concreto. Por ejemplo, el disco SSD para el diario y el disco duro para almacenar los datos.
    </para>
   </listitem>
  </orderedlist>
 </sect1>
 <sect1 xml:id="storage-bp-tuneups-ssd-tradeoffs">
  <title>¿Cuáles son las ventajas y desventajas de usar un diario en una unidad SSD?</title>

  <para>
   Usar unidades SSD para los diarios de OSD es mejor para el rendimiento, ya que los diarios suelen suponer un cuello de botella para los OSD que usan solo discos duros. Las unidades SSD a menudo se utilizan para compartir diarios de varios OSD.
  </para>

  <para>
   A continuación encontrará una lista de las posibles desventajas que puede suponer usar unidades SSD para el diario de OSD.
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Los discos SSD son más caros que los discos duros. Pero, como un diario de OSD solo requiere hasta 6 GB de espacio de disco, el precio puede no ser tan importante.
    </para>
   </listitem>
   <listitem>
    <para>
     Los discos SSD consumen ranuras de almacenamiento que se pueden utilizar para un disco duro de gran tamaño que permita ampliar la capacidad del clúster.
    </para>
   </listitem>
   <listitem>
    <para>
     Los discos SSD tienen ciclos de escritura reducidos en comparación con los discos duros, pero las tecnologías modernas están empezando a solucionar el problema.
    </para>
   </listitem>
   <listitem>
    <para>
     Si comparte más diarios en el mismo disco SSD, se arriesga a perder todos los OSD relacionados si el disco SSD falla. Esto requerirá mover un gran volumen de datos para reequilibrar el clúster.
    </para>
   </listitem>
   <listitem>
    <para>
     Es más complejo conectar en caliente (HotPlug) discos, dado que la asignación de datos no se realiza en una relación de 1 a 1 entre el OSD que falla y el disco de diario.
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="storage-bp-monitoring-diskfails">
  <title>¿Qué ocurre cuando un disco falla?</title>

  <para>
   Cuando un disco con datos del clúster almacenado tiene un problema de hardware y no funciona, sucede lo siguiente:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     El OSD relacionado se detiene por fallo y se quita automáticamente del clúster.
    </para>
   </listitem>
   <listitem>
    <para>
     Los datos del disco que ha fallado se replican a otro OSD del clúster a partir de otras copias de los mismos datos almacenadas en los otros OSD.
    </para>
   </listitem>
   <listitem>
    <para>
     A continuación, debe eliminar el disco del mapa de CRUSH del clúster y retirar físicamente el hardware del host.
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="storage-bp-monitoring-journalfails">
  <title>¿Qué ocurre cuando un disco de diario falla?</title>

  <para>
   Ceph se puede configurar para que almacene diarios o para que realice una escritura anticipada de los registros en dispositivos independientes de los OSD. Cuando se produce un fallo en un disco dedicado a diario, los OSD relacionados también fallan (consulte la <xref linkend="storage-bp-monitoring-diskfails"/>).
  </para>

  <warning>
   <title>alojamiento de varios diarios en un mismo disco</title>
   <para>
    Para mejorar el rendimiento, puede utilizar un disco rápido (por ejemplo, SSD) para almacenar las particiones de diario de varios OSD. No se recomienda alojar diarios para más de cuatro OSD en un mismo disco, dado que en caso de fallo del disco de los diarios, se arriesga a perder los datos almacenados de todos los OSD relacionados.
   </para>
  </warning>
 </sect1>
</chapter>
