<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_maintenance_updates.xml" version="5.0">
 <title>Aggiornamenti alla manutenzione di Ceph basati sulle release intermedie upstream "Nautilus"</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:editurl>https://github.com/SUSE/doc-ses/edit/master/xml/</dm:editurl>
   <dm:maintainer>tbazant@suse.com</dm:maintainer>
   <dm:status>modifica</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>sì</dm:translation>
   <dm:languages/>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Molti pacchetti di chiavi di SUSE Enterprise Storage 6 si basano sulle serie di release Nautilus di Ceph. Quando vengono pubblicate dal progetto Ceph (<link xlink:href="https://github.com/ceph/ceph"/>) nuove release intermedie nella serie Nautilus, SUSE Enterprise Storage 6 viene aggiornato con le correzioni di bug e i backport delle funzioni upstream più recenti.
 </para>
 <para>
  Questo capitolo contiene un riepilogo delle modifiche principali presenti in ogni release intermedia upstream che sono state o che verranno incluse nel prodotto.
 </para>
 <bridgehead renderas="sect1">Release intermedia Nautilus 14.2.4</bridgehead>
 <para>
  Questa release intermedia corregge una grave regressione introdotta nella release intermedia 14.2.3. Questa regressione non riguardava i clienti di SUSE Enterprise Storage poiché non sono state rilasciate versioni del prodotto basate sulla release 14.2.3.
 </para>
 <bridgehead renderas="sect1">Release intermedia Nautilus 14.2.3</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    È stata risolta una vulnerabilità Denial of Service in base alla quale un client non autenticato di Ceph Object Gateway era in grado di attivare un arresto anomalo a partire da un'eccezione non rilevata.
   </para>
  </listitem>
  <listitem>
   <para>
    I client librbd basati su Nautilus possono adesso aprire immagini sui cluster Jewel.
   </para>
  </listitem>
  <listitem>
   <para>
    L'Object Gateway <option>num_rados_handles</option> è stato rimosso. Se si utilizzava un valore di <option>num_rados_handles</option> superiore a 1, moltiplicare i parametri <option>objecter_inflight_ops</option> e <option>objecter_inflight_op_bytes</option> correnti per il parametro <option>num_rados_handles</option> precedente per ottenere lo stesso comportamento di limitazione.
   </para>
  </listitem>
  <listitem>
   <para>
    La modalità protetta del protocollo Messenger v2 non è più sperimentale in questa release, ma è adesso la modalità di connessione preferita dei monitor.
   </para>
  </listitem>
  <listitem>
   <para>
    Il valore di <option>osd_deep_scrub_large_omap_object_key_threshold</option> è stato ridotto per agevolare il rilevamento di un oggetto con un numero elevato di chiavi omap.
   </para>
  </listitem>
  <listitem>
   <para>
    Il Ceph Dashboard adesso supporta la funzione di disattivazione delle notifiche di Prometheus.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Release intermedia Nautilus 14.2.2</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    I comandi correlati a <literal>no{up,down,in,out}</literal> sono stati rinnovati. Adesso, è possibile impostare i flag <literal>no{up,down,in,out}</literal> in due modi: tramite il comando precedente,
   </para>
<screen>ceph osd [un]set <replaceable>FLAG</replaceable></screen>
   <para>
    che li imposta sull'intero cluster, e tramite il nuovo comando,
   </para>
<screen>ceph osd [un]set-group <replaceable>FLAGS</replaceable> <replaceable>WHO</replaceable></screen>
   <para>
    che li imposta in batch a livello di granularità di ogni nodo crush o classe di dispositivi.
   </para>
  </listitem>
  <listitem>
   <para>
    <command>radosgw-admin</command> introduce due sottocomandi che consentono di gestire gli oggetti scaduti-inattivi che potrebbero essere lasciati da parte dopo il ripartizionamento di un compartimento nelle versioni precedenti di Object Gateway. Un sottocomando consente di visualizzare un elenco di tali oggetti, mentre l'altro di eliminarli.
   </para>
  </listitem>
  <listitem>
   <para>
    Nelle release precedenti di Nautilus (14.2.1 e 14.2.0) si verifica un problema per cui la distribuzione di un nuovo OSD BlueStore Nautilus singolo in un cluster aggiornato (ovvero un OSD distribuito originariamente prima di Nautilus) interrompe le statistiche sull'utilizzo del pool generate da <command>ceph df</command>. Fin quando non viene completato il nuovo processo di provisioning o l'aggiornamento di tutti gli OSD (tramite<command>ceph-bluestore-tool repair</command>), le statistiche del pool mostreranno valori inferiori rispetto a quelli effettivi. Questo problema è stato risolto nella release 14.2.2, in cui il cluster passa all'utilizzo delle statistiche per pool più precise soltanto dopo che <emphasis>tutti</emphasis> gli OSD dispongono della release 14.2.2 o successive, vengono contrassegnati come storage di blocco e ne viene completato l'aggiornamento se sono stati creati precedentemente a Nautilus.
   </para>
  </listitem>
  <listitem>
   <para>
    Il valore di default di <option>mon_crush_min_required_version</option> è stato modificato da <literal>firefly</literal> a <literal>hammer</literal> e di conseguenza il cluster genererà un avviso sullo stato se gli elementi ottimizzabili CRUSH sono meno recenti del valore Hammer. Si tratta in genere di una ridotta quantità di dati (tuttavia diversa da zero) che verrà ribilanciata con il passaggio agli elementi ottimizzabili Hammer.
   </para>
   <para>
    Se possibile, si consiglia di impostare il client meno recente consentito su <literal>hammer</literal> o successivi. Per visualizzare il client meno recente consentito attuale, eseguire:
   </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph osd dump | grep min_compat_client</screen>
   <para>
    Se il valore attuale è precedente a <literal>hammer</literal>, eseguire il comando riportato di seguito per determinare se questa modifica può essere apportata in sicurezza verificando che non siano presenti client precedenti a Hammer connessi al cluster:
   </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph features</screen>
   <para>
    In Hammer è stato introdotto il tipo di compartimento CRUSH <literal>straw2</literal> più recente. Se si verifica che tutti i client sono di tipo Hammer o più recenti, è consentito l'utilizzo delle nuove funzioni supportate soltanto per i compartimenti <literal>straw2</literal>, inclusa la modalità <literal>crush-compat</literal> per il servizio di bilanciamento (<xref linkend="mgr-modules-balancer"/>).
   </para>
  </listitem>
 </itemizedlist>
 <para>
  All'indirizzo <link xlink:href="https://download.suse.com/Download?buildid=D38A7mekBz4~"/> è possibile trovare informazioni dettagliate sulla patch
 </para>
 <bridgehead renderas="sect1">Release intermedia Nautilus 14.2.1</bridgehead>
 <para>
  È la prima release intermedia successiva alla release originale di Nautilus (14.2.0). La versione originale ("General Availability" o "GA") di SUSE Enterprise Storage 6 era basata su questa release intermedia.
 </para>
</appendix>
