<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_gui_dashboard.xml" version="5.0" xml:id="ceph-dashboard">
 <title>Ceph Dashboard</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sì</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Il Ceph Dashboard è un modulo che consente di integrare in Ceph Manager un'applicazione di amministrazione e monitoraggio basata sul Web. Per ulteriori dettagli su Ceph Manager, consultare questo riferimento: <xref linkend="storage-intro-core-nodes"/>. Per gestire e monitorare il cluster Ceph, non è più necessario conoscere i complessi comandi di Ceph. È possibile utilizzare l'intuitiva interfaccia Web o l'API REST integrata del Ceph Dashboard.
 </para>
 <para>
  Durante la procedura di distribuzione, il Ceph Dashboard viene abilitato e configurato automaticamente con la fase 3 di DeepSea (consultare questo riferimento: <xref linkend="ceph-install-stack"/>). In un cluster Ceph con più istanze di Ceph Manager, soltanto il dashboard in esecuzione sul daemon Ceph Manager attualmente attivo provvede alle richieste in entrata. L'accesso alla porta TCP del dashboard su qualsiasi altra istanza di Ceph Manager attualmente in standby comporterà un reindirizzamento HTTP (303) all'URL del dashboard di Ceph Manager attualmente attivo. In questo modo, per accedere al dashboard, è possibile puntare il browser in uso verso un'istanza qualsiasi di Ceph Manager. Tenere presente questo comportamento durante la protezione dell'accesso tramite firewall o la pianificazione della configurazione ad alta disponibilità.
 </para>
 <sect1 xml:id="dashboard-webui-general">
  <title>Interfaccia utente Web del dashboard</title>

  <sect2 xml:id="dashboard-webui-login">
   <title>Login</title>
   <para>
    Per eseguire il login all'applicazione Web del dashboard, puntare il browser verso il relativo URL includendo il numero di porta. È possibile trovare l'indirizzo eseguendo
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr services | grep dashboard
"dashboard": "https://ses-dash-node.example.com:8443/",
</screen>
   <figure>
    <title>Schermata di login del Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Per eseguire il login all'applicazione Web del dashboard, è necessario un account utente. In DeepSea viene creato automaticamente un utente "admin" di default con privilegi di amministratore. Se si decide di eseguire il login con l'utente "admin" di default, recuperare la password corrispondente eseguendo
   </para>
<screen>
<prompt>root@master # </prompt>salt-call grains.get dashboard_creds
</screen>
   <tip>
    <title>account utente personalizzato</title>
    <para>
     Se non si desidera utilizzare l'account "admin" di default per accedere al Ceph Dashboard, creare un account utente personalizzato con privilegi di amministratore. Per ulteriori dettagli, fare riferimento alla <xref linkend="dashboard-user-roles"/>.
    </para>
   </tip>
   <para>
    L'interfaccia utente del dashboard è divisa graficamente in più <emphasis>blocchi</emphasis>: il <emphasis>menu dell'utility</emphasis>, il <emphasis>menu principale</emphasis> e il <emphasis>pannello dei contenuti</emphasis> principale.
   </para>
   <figure>
    <title>Home page del Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-util-menu">
   <title>Menu dell'utility</title>
   <para>
    Il menu dell'utility occupa la parte superiore destra della schermata e include i task generali correlati più al dashboard che al cluster Ceph. Facendo clic sulle voci di questo menu, è possibile:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Modificare la lingua dell'interfaccia utente del dashboard. È possibile scegliere tra ceco, inglese, tedesco, spagnolo, francese, portoghese, cinese o indonesiano.
     </para>
    </listitem>
    <listitem>
     <para>
      Visualizzare un elenco dei task correlati a Ceph in esecuzione in background.
     </para>
    </listitem>
    <listitem>
     <para>
      Visualizzare e cancellare le notifiche recenti del dashboard.
     </para>
    </listitem>
    <listitem>
     <para>
      Visualizzare un elenco dei collegamenti per accedere alle informazioni sul dashboard, alla relativa documentazione completa e alla panoramica sull'API REST.
     </para>
    </listitem>
    <listitem>
     <para>
      Gestire gli utenti e i ruoli dell'utente del dashboard. Fare riferimento alla <xref linkend="dashboard-user-roles"/> per descrizioni più dettagliate della riga di comando.
     </para>
    </listitem>
    <listitem>
     <para>
      Eseguire il logout dal dashboard.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-main-menu">
   <title>Menu principale</title>
   <para>
    Il menu principale del dashboard occupa la parte superiore sinistra della schermata e copre gli argomenti seguenti:
   </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>Dashboard</guimenu></term>
     <listitem>
      <para>
       Per tornare alla home page del Ceph Dashboard.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Cluster</guimenu></term>
     <listitem>
      <para>
       Per visualizzare le informazioni dettagliate sulla configurazione complessiva del cluster e della mappa CRUSH, i relativi host, i Ceph OSD, i Ceph Monitor e i contenuti dei file di log.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Pool</guimenu></term>
     <listitem>
      <para>
       Per visualizzare e gestire i pool del cluster.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Blocco</guimenu></term>
     <listitem>
      <para>
       Per visualizzare e gestire i dispositivi di blocco e le relative esportazioni iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>NFS</guimenu></term>
     <listitem>
      <para>
       Per visualizzare e gestire le distribuzioni di NFS Ganesha.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>File system</guimenu></term>
     <listitem>
      <para>
       Per visualizzare e gestire i CephFS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Object Gateway</guimenu></term>
     <listitem>
      <para>
       Per visualizzare e gestire i daemon, gli utenti e i compartimenti di Object Gateway.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-cpane">
   <title>Il pannello dei contenuti</title>
   <para>
    Il pannello dei contenuti occupa la parte principale della schermata del dashboard. Nella home page del dashboard sono mostrati molti widget utili con informazioni sintetiche sullo stato corrente del cluster, sulla capacità e sulle prestazioni.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-ui-common">
   <title>Funzioni interfaccia utente Web comuni</title>
   <para>
    Spesso nel Ceph Dashboard si utilizzano <emphasis>elenchi</emphasis>: ad esempio, elenchi di pool, nodi OSD o dispositivi RBD. Tutti gli elenchi si aggiornano automaticamente per default ogni 5 secondi. I seguenti widget comuni consentono di gestire o regolare tali elenchi:
   </para>
   <para>
    Fare clic su <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> per attivare un aggiornamento manuale dell'elenco.
   </para>
   <para>
    Fare clic su <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> per visualizzare o nascondere colonne della tabella individuali.
   </para>
   <para>
    Fare clic su <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> e selezionare il numero di righe da visualizzare in un'unica pagina.
   </para>
   <para>
    Fare clic all'interno di <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> e filtrare le righe digitando la stringa da ricercare.
   </para>
   <para>
    Utilizzare <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> per modificare la pagina attualmente visualizzata se l'elenco è distribuito su più pagine.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-widgets">
   <title>Widget del dashboard</title>
   <para>
    Ogni widget del dashboard mostra specifiche informazioni sullo stato relative a un determinato aspetto di un cluster Ceph in esecuzione. Alcuni widget sono collegamenti attivi che, dopo essere stati selezionati, reindirizzano l'utente a una pagina dettagliata dell'argomento a cui fanno riferimento.
   </para>
   <tip>
    <title>ulteriori dettagli al passaggio del mouse</title>
    <para>
     Passando il mouse sopra alcuni widget grafici, è possibile visualizzare ulteriori dettagli.
    </para>
   </tip>
   <sect3 xml:id="dashboard-widgets-status">
    <title>Widget Stato</title>
    <para>
     I widget <guimenu>Stato</guimenu> forniscono una breve panoramica sullo stato corrente del cluster.
    </para>
    <figure>
     <title>Widget Stato</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Stato del cluster</guimenu></term>
      <listitem>
       <para>
        Mostra le informazioni di base sullo stato del cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Monitor</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di monitor in esecuzione e il relativo quorum.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>OSD</guimenu></term>
      <listitem>
       <para>
        Mostra il numero totale di OSD, oltre al numero di OSD negli stati "up" e "in".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Manager Daemon</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di Ceph Manager Daemon attivi e in standby.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Hosts</guimenu></term>
      <listitem>
       <para>
        Mostra il numero totale di nodi del cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Object Gateway</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di Object Gateway in esecuzione.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Metadata Server</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di server di metadati.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>iSCSI Gateway</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di iSCSI Gateway configurati.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-performance">
    <title>Widget Prestazioni</title>
    <para>
     I widget <guimenu>Prestazioni</guimenu> fanno riferimento ai dati di base sulle prestazioni dei client Ceph.
    </para>
    <figure>
     <title>Widget Prestazioni</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>IOPS client</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Velocità effettiva client</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Lettura/scrittura client</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Velocità effettiva di recupero</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Pulitura</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-capacity">
    <title>Widget Capacità</title>
    <para>
     I widget <guimenu>Capacità</guimenu> mostrano brevi informazioni sulla capacità di storage.
    </para>
    <figure>
     <title>Widget Capacità</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Pool</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di pool nel cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Capacità di base</guimenu></term>
      <listitem>
       <para>
        Mostra il rapporto tra la capacità di storage nominale disponibile e quella utilizzata.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Oggetti</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di oggetti dati memorizzati nel cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Gruppi di posizionamento per OSD</guimenu></term>
      <listitem>
       <para>
        Mostra il numero di gruppi di posizionamento per OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Stato gruppo di posizionamento</guimenu></term>
      <listitem>
       <para>
        Visualizza un grafico dei gruppi di posizionamento in base al relativo stato.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-mgmt">
  <title>Gestione dei ruoli e degli utenti del dashboard</title>

  <para>
   La gestione degli utenti del dashboard tramite i comandi di Ceph sulla riga di comando è già stata illustrata nella <xref linkend="dashboard-user-roles"/>.
  </para>

  <para>
   Questa sezione descrive come gestire gli account utente tramite l'interfaccia utente Web del dashboard.
  </para>

  <sect2 xml:id="dashboard-listing-users">
   <title>Elenco degli utenti</title>
   <para>
    Fare clic su <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> nel menu dell'utility e selezionare <guimenu>Gestione utenti</guimenu>.
   </para>
   <para>
    L'elenco contiene il nome utente, il nome completo, l'e-mail e l'elenco dei ruoli assegnati di ciascun utente.
   </para>
   <figure>
    <title>Gestione utenti</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-users">
   <title>Aggiunta di nuovi utenti</title>
   <para>
    Fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nell'intestazione della tabella per aggiungere un nuovo utente. Immettere il nome utente e la password e facoltativamente il nome completo e l'e-mail.
   </para>
   <figure>
    <title>Aggiunta di un utente</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Selezionare l'icona a forma di penna per assegnare i ruoli predefiniti all'utente. Confermare con <guimenu>Create User</guimenu> (Crea utente).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-users">
   <title>Modifica degli utenti</title>
   <para>
    Fare clic sulla riga di tabella corrispondente a un utente e selezionare <guimenu>Modifica</guimenu> per modificarne i dettagli. Confermare con <guimenu>Aggiorna utente</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-users">
   <title>Eliminazione di utenti</title>
   <para>
    Fare clic sulla riga di tabella corrispondente a un utente e selezionare <guimenu>Elimina</guimenu> per eliminare l'account utente. Attivare la casella di controllo <guimenu>Sì</guimenu> e confermare con <guimenu>Delete User</guimenu> (Elimina utente).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-listing-user-roles">
   <title>Elenco dei ruoli dell'utente</title>
   <para>
    Fare clic su <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> nel menu dell'utility e selezionare <guimenu>Gestione utenti</guimenu>. Quindi, fare clic sulla scheda <guimenu>Ruoli</guimenu>.
   </para>
   <para>
    L'elenco contiene il nome e la descrizione di ciascun ruolo e indica se si tratta di un ruolo di sistema.
   </para>
   <figure>
    <title>Ruoli dell'utente</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-roles">
   <title>Aggiunta di ruoli personalizzati</title>
   <para>
    Fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nell'intestazione della tabella per aggiungere un nuovo ruolo personalizzato. Immettere il nome e la descrizione e impostare le autorizzazioni necessarie per i singoli argomenti.
   </para>
   <tip>
    <title>eliminazione definitiva dei ruoli personalizzati</title>
    <para>
     Se si creano ruoli dell'utente personalizzati e si intende rimuovere il cluster Ceph con lo strumento di esecuzione <command>ceph.purge</command> in un secondo momento, è necessario innanzitutto eliminare definitivamente i ruoli personalizzati. Ulteriori dettagli sono disponibili nella <xref linkend="deepsea-ceph-purge"/>.
    </para>
   </tip>
   <figure>
    <title>Aggiunta di un ruolo</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>attivazione multipla</title>
    <para>
     Tramite l'attivazione della casella di controllo accanto al nome dell'argomento, si attivano tutte le autorizzazioni correlate a quest'ultimo. Se si attiva la casella di controllo <guimenu>Tutto</guimenu>, si attivano tutte le autorizzazioni correlate a tutti gli argomenti.
    </para>
   </tip>
   <para>
    Confermare con <guimenu>Create Role</guimenu> (Crea ruolo).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-roles">
   <title>Modifica dei ruoli personalizzati</title>
   <para>
    Fare clic sulla riga di tabella corrispondente a un ruolo e selezionare <guimenu>Modifica</guimenu> in alto a sinistra nell'intestazione della tabella per modificare la descrizione e le autorizzazioni del ruolo personalizzato. Confermare con <guimenu>Update Role</guimenu> (Aggiorna ruolo).
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-roles">
   <title>Eliminazione dei ruoli personalizzati</title>
   <para>
    Fare clic sulla riga di tabella corrispondente a un ruolo e selezionare <guimenu>Elimina</guimenu> per eliminare il ruolo. Attivare la casella di controllo <guimenu>Sì</guimenu> e confermare con <guimenu>Delete Role</guimenu> (Elimina ruolo).
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster">
  <title>Visualizzazione degli elementi interni del cluster</title>

  <para>
   La voce di menu <guimenu>Cluster</guimenu> consente di visualizzare informazioni dettagliate su host, OSD, MON, mappa CRUSH e sui contenuti dei file di log del cluster Ceph.
  </para>

  <sect2 xml:id="dashboard-cluster-hosts">
   <title>Nodi del cluster</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>Host</guimenu></menuchoice> per visualizzare un elenco dei nodi del cluster.
   </para>
   <figure>
    <title>Hosts</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Fare clic sul nome di un nodo nella colonna <guimenu>Nome host</guimenu> per visualizzare i dettagli sulle prestazioni del nodo.
   </para>
   <para>
    Nella colonna <guimenu>Servizi</guimenu> sono elencati tutti i daemon in esecuzione in ogni nodo correlato. Fare clic sul nome di un daemon per visualizzare la relativa configurazione dettagliata.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-monitors">
   <title>Ceph Monitor</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>Monitor</guimenu></menuchoice> per visualizzare un elenco dei nodi del cluster con Ceph Monitor in esecuzione. Nell'elenco sono inclusi il numero della classificazione, l'indirizzo IP pubblico e il numero di sessioni aperte di ogni monitor.
   </para>
   <para>
    L'elenco è diviso in due tabelle: una per i Ceph Monitor che <emphasis>si trovano</emphasis> nel quorum e un'altra per i Ceph Monitor che <emphasis>non si trovano</emphasis> nel quorum.
   </para>
   <para>
    Fare clic sul nome di un nodo nella colonna <guimenu>Nome</guimenu> per visualizzare la configurazione del Ceph Monitor correlato.
   </para>
   <para>
    Nella tabella <guimenu>Stato</guimenu> sono riportate le statistiche generali relative ai Ceph Monitor in esecuzione.
   </para>
   <figure>
    <title>Ceph Monitor</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-osds">
   <title>Ceph OSD</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>OSD</guimenu></menuchoice> per visualizzare un elenco dei nodi con dischi/daemon OSD in esecuzione. Nell'elenco sono inclusi il nome, lo stato, il numero di gruppi di posizionamento, le dimensioni, l'utilizzo, il grafico delle operazioni di lettura/scrittura nel tempo e la frequenza delle operazioni di lettura/scrittura al secondo di ogni nodo.
   </para>
   <figure>
    <title>Ceph OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Fare clic su <guimenu>Set Cluster-wide Flags</guimenu> (Imposta flag in tutto il cluster) nell'intestazione della tabella per far apparire una finestra con un elenco dei flag che si applicano all'intero cluster. È possibile attivare o disattivare i singoli flag e confermare con <guimenu>Invia</guimenu>.
   </para>
   <figure>
    <title>Flag OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Fare clic su <guimenu>Set Cluster-wide Recovery Priority</guimenu> (Imposta priorità di recupero in tutto il cluster) nell'intestazione della tabella per aprire una finestra popup con un elenco delle priorità di recupero degli OSD che si applicano all'intero cluster. È possibile attivare il profilo di priorità preferito e ottimizzare i singoli valori di seguito. Confermare con <guimenu>Invia</guimenu>.
   </para>
   <figure>
    <title>Priorità di recupero OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Fare clic sul nome di un nodo nella colonna <guimenu>Host</guimenu> per visualizzare una tabella estesa con i dettagli sulle prestazioni e sull'impostazione dell'OSD. Sfogliando le diverse schede, è possibile visualizzare gli elenchi <guimenu>Attributi</guimenu>, <guimenu>Metadati</guimenu>, <guimenu>Contatore delle prestazioni</guimenu> e un <guimenu>Istogramma</guimenu> delle operazioni di lettura e di scrittura.
   </para>
   <figure>
    <title>Dettagli OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>esecuzione di task specifici sugli OSD</title>
    <para>
     Dopo aver fatto clic sul nome di un nodo OSD, la relativa riga di tabella cambia leggermente colore, per indicare che è possibile eseguire un task sul nodo. Fare clic sulla freccia in giù in alto a sinistra nell'intestazione della tabella e selezionare un task da eseguire, ad esempio <guimenu>Pulitura approfondita</guimenu>. Se si desidera, immettere un valore obbligatorio per il task e confermare per eseguirlo sul nodo.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dahsboard-cluster-config">
   <title>Configurazione del cluster</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>Configurazione</guimenu></menuchoice> per visualizzare un elenco completo delle opzioni di configurazione del cluster Ceph. L'elenco contiene il nome dell'opzione, una sua breve descrizione e i valori correnti e di default.
   </para>
   <figure>
    <title>Configurazione del cluster</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Fare clic su una specifica riga di opzione per evidenziare e visualizzare le relative informazioni dettagliate, come il tipo di valore, i valori minimo e massimo consentiti, la possibilità di aggiornamento al runtime e molto altro.
   </para>
   <para>
    Dopo aver evidenziato un'opzione specifica, è possibile modificarne i valori facendo clic sul pulsante <guimenu>Modifica</guimenu> in alto a sinistra nell'intestazione della tabella. Confermare le modifiche con <guimenu>Salva</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-crushmap">
   <title>Mappa CRUSH</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>Mappa CRUSH</guimenu></menuchoice> per visualizzare una mappa CRUSH del cluster. Per ulteriori informazioni generali sulle mappe CRUSH, fare riferimento alla <xref linkend="op-crush"/>.
   </para>
   <para>
    Fare clic sulla radice, sui nodi o sui singoli OSD per visualizzare altri dettagli, come il peso crush, la profondità nell'albero della mappa, la classe di dispositivi dell'OSD e molto altro.
   </para>
   <figure>
    <title>Mappa CRUSH</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-mgr-plugins">
   <title>Moduli Manager</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>Moduli Manager</guimenu></menuchoice> per visualizzare un elenco dei moduli Ceph Manager disponibili. Ogni riga contiene il nome del modulo e informazioni sul suo stato di abilitazione o disabilitazione.
   </para>
   <figure>
    <title>Moduli Manager</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Dopo aver evidenziato un modulo specifico, è possibile visualizzare le relative impostazioni dettagliate nella tabella <guimenu>Dettagli</guimenu> riportata di seguito. Modificarle facendo clic sul pulsante <guimenu>Modifica</guimenu> in alto a sinistra nell'intestazione della tabella. Confermare le modifiche con <guimenu>Aggiorna</guimenu>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-logs">
   <title>Log</title>
   <para>
    Fare clic su <menuchoice><guimenu>Cluster</guimenu><guimenu>Log</guimenu></menuchoice> per visualizzare un elenco delle voci di log recenti del cluster. Ogni riga contiene la registrazione dell'orario, il tipo di voce del log e il messaggio registrato.
   </para>
   <para>
    Fare clic sulla scheda <guimenu>Log delle revisioni</guimenu> per visualizzare le voci di log del sottosistema di revisione. Fare riferimento alla <xref linkend="dashboard-auditing"/> per i comandi di abilitazione o disabilitazione della revisione.
   </para>
   <figure>
    <title>Log</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-pools">
  <title>Gestione dei pool</title>

  <tip>
   <title>ulteriori informazioni sui pool</title>
   <para>
    Per informazioni generali sui pool Ceph, fare riferimento a <xref linkend="ceph-pools"/>. Per informazioni specifiche sui pool con codice di cancellazione, fare riferimento al <xref linkend="cha-ceph-erasure"/>.
   </para>
  </tip>

  <para>
   Per elencare tutti i pool disponibili, fare clic su <guimenu>Pools (Pool)</guimenu> nel menu principale.
  </para>

  <para>
   Nell'elenco sono visualizzati il nome, il tipo, l'applicazione correlata, lo stato del gruppo di posizionamento, le dimensioni della replica, il profilo con codice di cancellazione, l'utilizzo e le statistiche di lettura/scrittura relativi a ciascun pool.
  </para>

  <figure>
   <title>Elenco di pool</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Per visualizzare altri dettagli su un pool, attivare la relativa riga di tabella.
  </para>

  <sect2 xml:id="dashboard-pools-create">
   <title>Aggiunta di un nuovo pool</title>
   <para>
    Per aggiungere un nuovo pool, fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nella tabella dei pool. Nel modulo del pool è possibile immettere il nome, il tipo, il numero di gruppi di posizionamento del pool, nonché ulteriori informazioni come le applicazioni, la modalità di compressione e l'algoritmo del pool. Tale modulo calcola in anticipo il numero di gruppi di posizionamento più adatto per il pool specifico. Tale calcolo si basa sul numero di OSD nel cluster e sul tipo di pool selezionato con le relative impostazioni specifiche. Non appena viene impostato manualmente, il numero dei gruppi di posizionamento viene sostituito da un numero calcolato. Confermare con <guimenu>Create pool</guimenu> (Crea pool).
   </para>
   <figure>
    <title>Aggiunta di un nuovo pool</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-pools-delete">
   <title>Eliminazione di pool</title>
   <para>
    Per eliminare un pool, fare clic sulla relativa riga di tabella e su <guimenu>Elimina</guimenu> in alto a sinistra nella tabella dei pool.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-pools-edit">
   <title>Modifica delle opzioni di un pool</title>
   <para>
    Per modificare le opzioni di un pool, fare clic sulla relativa riga di tabella e selezionare <guimenu>Modifica</guimenu> in alto a sinistra nella tabella dei pool.
   </para>
   <para>
    È possibile modificare il nome del pool, aumentare il numero di gruppi di posizionamento e modificare l'elenco delle applicazioni e delle impostazioni di compressione del pool. Confermare con <guimenu>Edit pool</guimenu> (Modifica pool).
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-rbds">
  <title>Gestione dei dispositivi di blocco RADOS</title>

  <para>
   Per visualizzare un elenco di tutti i dispositivi di blocco RADOS (RBD) disponibili, fare clic su <menuchoice><guimenu>Blocco</guimenu><guimenu>Immagini</guimenu></menuchoice> nel menu principale.
  </para>

  <para>
   Nell'elenco sono riportate brevi informazioni sul dispositivo, come il nome di quest'ultimo, il nome del pool correlato, le dimensioni del dispositivo e il numero e le dimensioni degli oggetti al suo interno.
  </para>

  <figure>
   <title>Elenco delle immagini RBD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dashboard-rbds-details">
   <title>Visualizzazione dei dettagli sugli RBD</title>
   <para>
    Per visualizzare altri dettagli su un dispositivo, fare clic sulla relativa riga nella tabella:
   </para>
   <figure>
    <title>Dettagli RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-configuration">
   <title>Visualizzazione della configurazione dell'RBD</title>
   <para>
    Per visualizzare la configurazione dettagliata di un dispositivo, fare clic sulla relativa riga nella tabella e sulla scheda <guimenu>Configurazione</guimenu> nella tabella inferiore:
   </para>
   <figure>
    <title>Configurazione RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-create">
   <title>Creazione di RBD</title>
   <para>
    Per aggiungere un nuovo dispositivo, fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nell'intestazione della tabella ed eseguire le operazioni seguenti nella schermata <guimenu>Create RBD</guimenu> (Crea RBD):
   </para>
   <figure>
    <title>Aggiunta di un nuovo RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Immettere il nome del nuovo dispositivo. Per le restrizioni di denominazione, fare riferimento a <xref linkend="sysreq-naming"/>.
     </para>
    </step>
    <step>
     <para>
      Selezionare il pool con l'applicazione "rbd" assegnata da cui verrà creato il dispositivo RBD.
     </para>
    </step>
    <step>
     <para>
      Specificare le dimensioni del nuovo dispositivo.
     </para>
    </step>
    <step>
     <para>
      Specificare le opzioni aggiuntive per il dispositivo. Per ottimizzare i parametri del dispositivo, fare clic su <guimenu>Avanzate</guimenu> e immettere i valori relativi alle dimensioni dell'oggetto, all'unità di striping o al numero di striping. Per immettere i limiti di qualità del servizio (QoS, Quality of Service), fare clic su <guimenu>Qualità di servizio</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Confermare con <guimenu>Create RBD</guimenu> (Crea RBD).
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dashboard-rbd-delete">
   <title>Eliminazione di RBD</title>
   <para>
    Per eliminare un dispositivo, fare clic sulla relativa riga nella tabella e selezionare <guimenu>Elimina</guimenu> in alto a sinistra nell'intestazione della tabella. Confermare l'eliminazione con <guimenu>Delete RBD</guimenu> (Elimina RBD).
   </para>
   <tip>
    <title>spostamento degli RBD nel cestino</title>
    <para>
     L'eliminazione di un RBD è un'azione irreversibile. Se invece si seleziona l'opzione <guimenu>Sposta nel cestino</guimenu>, è possibile ripristinare il dispositivo in un secondo momento selezionandolo nella scheda <guimenu>Cestino</guimenu> della tabella principale e facendo clic su <guimenu>Ripristina</guimenu> in alto a sinistra nell'intestazione della tabella.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-rbds-snapshots">
   <title>Snapshot dei RADOS Block Device (dispositivi di blocco RADOS)</title>
   <para>
    Per creare una snapshot di un dispositivo di blocco RADOS, fare clic sulla relativa riga di tabella e, nella scheda <guimenu>Snapshot</guimenu> sotto la tabella principale, fare clic su <guimenu>Crea</guimenu> in alto a sinistra nell'intestazione della tabella. Immettere il nome della snapshot e confermare con <guimenu>Create Snapshot</guimenu> (Crea snapshot).
   </para>
   <para>
    Dopo aver selezionato una snapshot, è possibile eseguire ulteriori azioni sul dispositivo, ad esempio rinominarlo, proteggerlo, clonarlo, copiarlo o eliminarlo. L'opzione <guimenu>Rollback</guimenu> consente di ripristinare lo stato del dispositivo dallo snapshot attuale.
   </para>
   <figure>
    <title>Snapshot RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-iscsi">
   <title>Gestione di iSCSI Gateway</title>
   <tip>
    <title>ulteriori informazioni sugli iSCSI Gateway</title>
    <para>
     Per ulteriori informazioni generali sugli iSCSI Gateway, fare riferimento a <xref linkend="cha-ceph-as-iscsi"/> e <xref linkend="cha-ceph-iscsi"/>.
    </para>
   </tip>
   <para>
    Per visualizzare un elenco di tutti i gateway e le immagini mappate disponibili, fare clic su <menuchoice><guimenu>Blocco</guimenu><guimenu>iSCSI</guimenu></menuchoice> nel menu principale. Si apre la scheda <guimenu>Panoramica</guimenu>, in cui vengono elencati gli iSCSI Gateway attualmente configurati e le immagini RBD mappate.
   </para>
   <para>
    Nella tabella dei <guimenu>gateway</guimenu> sono elencati lo stato, il numero di destinazioni iSCSI e il numero di sessioni di ogni gateway. Nella tabella <guimenu>Immagini</guimenu> sono elencati il nome, il nome del pool correlato, il tipo di backstore e altri dettagli statistici di ciascuna immagine mappata.
   </para>
   <para>
    Nella scheda <guimenu>Destinazioni</guimenu> sono elencate le destinazioni iSCSI attualmente configurate.
   </para>
   <figure>
    <title>Elenco delle destinazioni iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Per visualizzare altri dettagli su una destinazione, fare clic sulla relativa riga di tabella. Si apre uno schema con struttura ad albero in cui sono elencati i dischi, i portali, gli iniziatori e i gruppi. Fare clic su un elemento per espanderlo e visualizzare i relativi contenuti dettagliati, facoltativamente insieme alla configurazione correlata, nella tabella a destra.
   </para>
   <figure>
    <title>Dettagli sulla destinazione iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-iscsi-create">
    <title>Aggiunta di destinazioni iSCSI</title>
    <para>
     Per aggiungere una nuova destinazione iSCSI, fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nella tabella <guimenu>Destinazioni</guimenu> e immettere le informazioni richieste.
    </para>
    <figure>
     <title>Aggiunta di una nuova destinazione</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       Immettere l'indirizzo di destinazione del nuovo gateway.
      </para>
     </step>
     <step>
      <para>
       Fare clic su <guimenu>Add portal (Aggiungi portale)</guimenu> e selezionare uno o più portali iSCSI dall'elenco.
      </para>
     </step>
     <step>
      <para>
       Fare clic su <guimenu>Add image (Aggiungi immagine)</guimenu> e selezionare una o più immagini RBD per il gateway.
      </para>
     </step>
     <step>
      <para>
       Se è necessario utilizzare l'autenticazione per accedere al gateway, attivare la casella di controllo <guimenu>Authentication (Autenticazione)</guimenu> e immettere le credenziali. Ulteriori opzioni di autenticazione avanzata sono disponibili dopo l'attivazione di <guimenu>Mutual authentication (Autenticazione reciproca)</guimenu> e <guimenu>Discovery authentication (Autenticazione di rilevazione)</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Confermare con <guimenu>Create Target</guimenu> (Crea destinazione).
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-edit">
    <title>Modifica di destinazioni iSCSI</title>
    <para>
     Per modificare una destinazione iSCSI esistente, fare clic sulla relativa riga nella tabella<guimenu>Destinazioni</guimenu>, quindi su <guimenu>Modifica</guimenu> in alto a sinistra nella tabella.
    </para>
    <para>
     È quindi possibile modificare la destinazione iSCSI, aggiungere o eliminare portali e aggiungere o eliminare immagini RBD correlate. È inoltre possibile regolare le informazioni di autenticazione per il gateway.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-delete">
    <title>Eliminazione di destinazioni iSCSI</title>
    <para>
     Per eliminare una destinazione iSCSI, fare clic sulla relativa riga di tabella e selezionare <guimenu>Elimina</guimenu> in alto a sinistra nella tabella dei gateway. Attivare la casella <guimenu>Sì</guimenu> e confermare con <guimenu>Delete iSCSI</guimenu> (Elimina iSCSI).
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-qos">
   <title>Qualità di servizio (QoS) RBD</title>
   <tip>
    <title>per ulteriori informazioni</title>
    <para>
     Per ulteriori informazioni generali e per una descrizione delle opzioni di configurazione QoS RBD, fare riferimento alla <xref linkend="rbd-qos"/>.
    </para>
   </tip>
   <para>
    È possibile configurare le opzioni QoS a livelli diversi.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Globalmente
     </para>
    </listitem>
    <listitem>
     <para>
      Per ogni singolo pool
     </para>
    </listitem>
    <listitem>
     <para>
      Per ogni singola immagine
     </para>
    </listitem>
   </itemizedlist>
   <para>
    La configurazione <emphasis>globale</emphasis> si trova in cima all'elenco e verrà utilizzata per tutte le immagini RBD di nuova creazione e per quelle immagini che non ignorano tali valori sul livello di pool o di immagine RBD. Un valore di opzione specificato globalmente può essere ignorato per ogni singolo pool o per ogni singola immagine. Le opzioni specificate in un pool verranno applicate a tutte le immagini RBD di tale pool a meno che non siano sostituite da un'opzione di configurazione impostata in un'immagine. Le opzioni specificate in un'immagine sostituiranno quelle specificate globalmente e quelle specificate in un pool.
   </para>
   <para>
    In questo modo, è possibile definire i valori di default globalmente, adattarli a tutte le immagini RBD di un pool specifico e sostituire la configurazione del pool per le singole immagini RBD.
   </para>
   <sect3 xml:id="dash-rbd-qos-global">
    <title>Configurazione delle opzioni a livello globale</title>
    <para>
     Per configurare le opzioni RBD a livello globale, selezionare <menuchoice><guimenu>Cluster</guimenu>
     <guimenu>Configurazione</guimenu></menuchoice> nel menu principale.
    </para>
    <para>
     Per visualizzare un elenco di tutte le opzioni di configurazione globali disponibili, fare clic su <menuchoice><guimenu>Livello</guimenu>
     <guimenu>Avanzate</guimenu></menuchoice>. Quindi, filtrare i risultati della tabella applicando il filtro "rbd_qos" nel campo di ricerca per visualizzare un elenco di tutte le opzioni di configurazione disponibili per QoS. Per modificare un valore, fare clic sulla relativa riga di tabella e selezionare <guimenu>Modifica</guimenu> in alto a sinistra nella tabella. La finestra di dialogo <guimenu>Modifica</guimenu> contiene sei campi diversi tramite cui è possibile specificare i valori. I valori dell'opzione di configurazione RBD sono obbligatori nella casella di testo <guimenu>mgr</guimenu>. Tenere presente che, a differenza di altre finestre di dialogo, questa non consente di specificare il valore nelle unità adeguate. È necessario impostare tali valori in byte o IOPS, a seconda dell'opzione che si sta modificando.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-create">
    <title>Configurazione delle opzioni in un nuovo pool</title>
    <para>
     Per creare un nuovo pool e configurarvi le opzioni di configurazione RBD, fare clic su <menuchoice><guimenu>Pool</guimenu>
     <guimenu>Crea</guimenu></menuchoice>. Selezionare <guimenu>replicated</guimenu> (replicato) come tipo di pool. Sarà quindi necessario aggiungere il tag applicazione <guimenu>rbd</guimenu> al pool per poter configurare le opzioni QoS RBD.
    </para>
    <note>
     <para>
      Non è possibile configurare le opzioni di configurazione QoS RBD sui pool con codice di cancellazione. A questo scopo, è necessario modificare il pool dei metadati replicato di un'immagine RBD. La configurazione verrà quindi applicata al pool di dati con codice di cancellazione di tale immagine.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-edit">
    <title>Configurazione delle opzioni in un pool esistente</title>
    <para>
     Per configurare le opzioni QoS RBD in un pool esistente, fare clic su <guimenu>Pool</guimenu>, quindi sulla riga di tabella corrispondente al pool e selezionare <guimenu>Modifica</guimenu> in alto a sinistra nella tabella.
    </para>
    <para>
     Dovrebbe aprirsi la sezione <guimenu>Configurazione RBD</guimenu> nella finestra di dialogo, seguita dalla sezione <guimenu>Qualità di servizio</guimenu>.
    </para>
    <note>
     <para>
      Se le sezioni <guimenu>Configurazione RBD</guimenu> o <guimenu>Qualità di servizio</guimenu> non vengono visualizzate, è possibile che si stia modificando un pool con codice di cancellazione (<emphasis>erasure coded</emphasis>), il quale non può essere utilizzato per impostare le opzioni di configurazione RBD, o che il pool non sia configurato per l'utilizzo da parte delle immagini RBD. Nell'ultimo caso, assegnare il tag applicazione <guimenu>rbd</guimenu> al pool per visualizzare le sezioni di configurazione corrispondenti.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-qos">
    <title>Opzioni di configurazione</title>
    <para>
     Fare clic su <guimenu>Qualità di servizio +</guimenu> per espandere le opzioni di configurazione. Verrà visualizzato un elenco di tutte le opzioni disponibili. Le unità delle opzioni di configurazione sono già visualizzate nelle caselle di testo. Se si seleziona l'opzione dei byte per secondo (BPS), è possibile utilizzare scorciatoie come "1M" o "5G". Tali valori verranno convertiti automaticamente in "1 MB/s" e "5 GB/s" rispettivamente.
    </para>
    <para>
     Se si fa clic sul pulsante di reimpostazione a destra di ciascuna casella di testo, i valori impostati nel pool verranno rimossi. Questa azione non rimuove i valori di configurazione delle opzioni configurate a livello globale o in un'immagine RBD.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-create">
    <title>Creazione delle opzioni QoS RBD con una nuova immagine RBD</title>
    <para>
     Per creare un'immagine RBD con le opzioni QoS RBD impostate in quest'ultima, selezionare <menuchoice><guimenu>Blocco</guimenu>
     <guimenu>Immagini</guimenu></menuchoice> e fare clic su <guimenu>Crea</guimenu>. Fare clic su <guimenu>Avanzate</guimenu> per espandere la sezione di configurazione avanzata. Fare clic su <guimenu>Qualità di servizio</guimenu> per aprire tutte le opzioni di configurazione disponibili.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-edit">
    <title>Modifica delle opzioni QoS RBD sulle immagini esistenti</title>
    <para>
     Per modificare le opzioni QoS RBD in un'immagine esistente, selezionare <menuchoice><guimenu>Blocco</guimenu>
     <guimenu>Immagini</guimenu></menuchoice>, fare clic sulla riga di tabella corrispondente al pool e quindi su <guimenu>Modifica</guimenu>. Verrà visualizzata la finestra di dialogo per la modifica. Fare clic su <guimenu>Avanzate</guimenu> per espandere la sezione di configurazione avanzata. Fare clic su <guimenu>Qualità di servizio</guimenu> per aprire tutte le opzioni di configurazione disponibili.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-copy">
    <title>Modifica delle opzioni di configurazione durante la copia o la clonazione delle immagini</title>
    <para>
     Se un'immagine RBD viene clonata o copiata, per default verranno copiati anche i valori impostati in tale immagine. Se si desidera modificarli durante la copia o la clonazione, specificare i valori di configurazione aggiornati nella finestra di dialogo di copia/clonazione seguendo gli stessi passaggi della procedura di creazione o modifica di un'immagine RBD. Questa operazione consente di impostare (o reimpostare) soltanto i valori dell'immagine RBD copiata o clonata e non influisce sulla configurazione dell'immagine RBD di origine o sulla configurazione globale.
    </para>
    <para>
     Se si sceglie di reimpostare il valore di opzione durante la procedura di copia/clonazione, nell'immagine non verrà impostato alcun valore per tale opzione. Ciò vuol dire che verrà utilizzato il valore di tale opzione specificato per il pool superiore se in quest'ultimo è stato configurato tale valore. In caso contrario, verrà utilizzata l'impostazione di default globale.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-mirror">
   <title>Copia speculare RBD</title>
   <tip>
    <title>informazioni generali</title>
    <para>
     Per informazioni generali e sull'approccio della riga di comando alla copia speculare del dispositivo di blocco RADOS, fare riferimento alla <xref linkend="ceph-rbd-mirror"/>.
    </para>
   </tip>
   <para>
    È possibile utilizzare il Ceph Dashboard per configurare la replica delle immagini RBD tra due o più cluster.
   </para>
   <sect3 xml:id="rbd-mirror-primary-secondary">
    <title>Cluster primari e secondari</title>
    <para>
     Nel cluster <emphasis>primario</emphasis> viene creato il pool originale con le immagini. Nei cluster <emphasis>secondari</emphasis> vengono replicati il pool/le immagini dal cluster <emphasis>primario</emphasis>.
    </para>
    <note>
     <title>denominazione relativa</title>
     <para>
      I termini <emphasis>primario</emphasis> e <emphasis>secondario</emphasis> possono essere relativi nel contesto della replica, perché fanno riferimento più ai singoli pool che ai cluster. Ad esempio, nella replica bidirezionale, è possibile eseguire la copia speculare di un pool dal cluster <emphasis>primario</emphasis> a quello <emphasis>secondario</emphasis> mentre è in corso la copia speculare di un altro pool dal cluster <emphasis>secondario</emphasis> a quello <emphasis>primario</emphasis>.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="rbd-mirroring-replication-modes">
    <title>Modalità di replica</title>
    <para>
     Sono disponibili due modalità di replica dei dati:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Tramite la modalità <emphasis>pool</emphasis>, vengono replicate tutte le immagini RBD in un pool.
      </para>
     </listitem>
     <listitem>
      <para>
       Tramite la modalità <emphasis>immagine</emphasis>, è possibile attivare la copia speculare soltanto di immagini specifiche in un pool.
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui-daemon">
    <title>Configurazione del daemon <systemitem class="daemon">rbd-mirror</systemitem></title>
    <para>
     Il daemon <systemitem class="daemon">rbd-mirror</systemitem> esegue la replica effettiva dei dati del cluster. Per installarlo, configurarlo ed eseguirlo, seguire la procedura indicata di seguito:
    </para>
    <procedure>
     <step>
      <para>
       Il daemon <systemitem class="daemon">rbd-mirror</systemitem> deve essere eseguito in uno dei nodi nel cluster <emphasis>secondario</emphasis> diverso dal nodo admin. Installarlo (non è installato per default):
      </para>
<screen><prompt>root@minion &gt; </prompt>zypper install rbd-mirror</screen>
     </step>
     <step>
      <para>
       Sul cluster <emphasis>primario</emphasis>, creare un ID utente Ceph univoco per il processo del daemon <systemitem class="daemon">rbd-mirror</systemitem>. In questo esempio, verrà utilizzato l'ID utente "uid1":
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd'
[client.rbd-mirror.uid1]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       Nel nodo in cui in precedenza è stato installato il pacchetto
       <package>rbd-mirror</package> nel cluster <emphasis>secondario</emphasis>, creare lo stesso utente Ceph e salvare l'output in un portachiavi:
      </para>
<screen><prompt>root@minion &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd' \
 &gt; /etc/ceph/ceph.client.rbd-mirror.uid1.keyring</screen>
     </step>
     <step>
      <para>
       Nello stesso nodo, abilitare ed eseguire il servizio <systemitem class="daemon">rbd-mirror</systemitem>:
      </para>
<screen><prompt>root@minion &gt; </prompt>systemctl enable ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl start ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl status ceph-rbd-mirror@rbd-mirror.uid1
● ceph-rbd-mirror@rbd-mirror.uid1.service - Ceph rbd mirror daemon
   Loaded: loaded (/usr/lib/systemd/system/ceph-rbd-mirror@.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2019-10-04 07:48:53 EDT; 2 days ago
 Main PID: 212434 (rbd-mirror)
    Tasks: 47
   CGroup: /system.slice/system-ceph\x2drbd\x2dmirror.slice/ceph-rbd-mirror@rbd-mirror.uid1.service
           └─212434 /usr/bin/rbd-mirror -f --cluster ceph --id rbd-mirror.test --setuser ceph --setgroup ceph

Oct 04 07:48:53 doc-ses6min4 systemd[1]: Started Ceph rbd mirror daemon.
</screen>
     </step>
     <step>
      <para>
       Nel Ceph Dashboard del cluster <emphasis>secondario</emphasis>, andare a <menuchoice><guimenu>Blocco</guimenu><guimenu>Esecuzione della copia speculare</guimenu></menuchoice>. Nella tabella <guimenu>Daemon</guimenu> a sinistra vengono mostrati i daemon <systemitem>rbd-mirror</systemitem> in esecuzione e il relativo stato.
      </para>
      <figure>
       <title>Esecuzione dei daemon <systemitem class="daemon">rbd-mirror</systemitem></title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui">
    <title>Configurazione della replica dei pool nel Ceph Dashboard</title>
    <para>
     Il daemon <systemitem class="daemon">rbd-mirror</systemitem> deve disporre dell'accesso al cluster primario per poter eseguire la copia speculare delle immagini RBD. Pertanto, è necessario creare un account utente Ceph <emphasis>peer</emphasis> nel cluster primario e informare il cluster secondario del relativo portachiavi:
    </para>
    <procedure>
     <step>
      <para>
       Nel cluster <emphasis>primario</emphasis>, creare un nuovo utente "client.rbd-mirror-peer" che verrà utilizzato per la replica dei dati:
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror-peer \
 mon 'profile rbd' osd 'profile rbd'
[client.rbd-mirror-peer]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       Nel cluster <emphasis>primario</emphasis> e <emphasis>secondario</emphasis>, creare un pool con un nome identico e assegnarvi l'applicazione "rbd". Per ulteriori dettagli sulla creazione di un nuovo pool, fare riferimento alla <xref linkend="dashboard-pools-create"/>.
      </para>
      <figure>
       <title>Creazione di un pool con l'applicazione RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Nei dashboard del cluster <emphasis>primario</emphasis> e <emphasis>secondario</emphasis>, andare a <menuchoice><guimenu>Blocco</guimenu><guimenu>Esecuzione della copia speculare</guimenu></menuchoice>. Nella tabella <guimenu>Pool</guimenu> a destra, fare clic sul nome del pool da replicare e, dopo aver fatto clic su <guimenu>Modalità di modifica</guimenu>, selezionare la modalità di replica. In questo esempio, verrà utilizzata la modalità di replica <emphasis>pool</emphasis>, che indica che verranno replicate tutte le immagini all'interno di un determinato pool. Confermare con <guimenu>Aggiorna</guimenu>.
      </para>
      <figure>
       <title>Configurazione della modalità di replica</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <important>
       <title>errore o avviso nel cluster primario</title>
       <para>
        In seguito all'aggiornamento della modalità di replica, verrà visualizzato un errore o un flag di avviso nella colonna destra corrispondente. Ciò si verifica perché al pool non è stato ancora assegnato nessun utente peer per la replica. Ignorare questo flag per il cluster <emphasis>primario</emphasis> poiché l'utente peer viene assegnato soltanto al cluster <emphasis>secondario</emphasis>.
       </para>
      </important>
     </step>
     <step>
      <para>
       Nel dashboard del cluster <emphasis>secondario</emphasis>, andare a <menuchoice><guimenu>Blocco</guimenu><guimenu>Esecuzione della copia speculare</guimenu></menuchoice>. Registrare il portachiavi utente "client.rbd-mirror-peer" nel pool in copia speculare facendo clic sul nome del pool e selezionando <guimenu>Aggiungi peer</guimenu>. Specificare i dettagli del cluster <emphasis>primario</emphasis>:
      </para>
      <figure>
       <title>Aggiunta delle credenziali del peer</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <variablelist>
       <varlistentry>
        <term><guimenu>Nome cluster</guimenu></term>
        <listitem>
         <para>
          Stringa univoca arbitraria che identifica il cluster primario come "primary". Il nome del cluster deve essere diverso dal nome reale del cluster secondario.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>ID CephX</guimenu></term>
        <listitem>
         <para>
          ID utente Ceph creato come peer in copia speculare. In questo esempio è "rbd-mirror-peer".
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Indirizzi dei monitor</guimenu></term>
        <listitem>
         <para>
          Elenco separato da virgole degli indirizzi IP/nomi host dei nodi di Ceph Monitor del cluster primario.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Chiave CephX</guimenu></term>
        <listitem>
         <para>
          Chiave correlata all'ID utente peer. È possibile recuperarla eseguendo sul cluster primario il comando di esempio seguente:
         </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth print_key client.rbd-mirror-peer</screen>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Confermare con <guimenu>Invia</guimenu>.
      </para>
      <figure>
       <title>Elenco dei pool replicati</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-test">
    <title>Verifica del funzionamento della replica dell'immagine RBD</title>
    <para>
     Una volta che il daemon <systemitem class="daemon">rbd-mirror</systemitem> è in esecuzione e la replica dell'immagine RBD è configurata nel Ceph Dashboard, è il momento di verificare il funzionamento della replica:
    </para>
    <procedure>
     <step>
      <para>
       Nel Ceph Dashboard del cluster <emphasis>primario</emphasis>, creare un'immagine RBD per fare in modo che il relativo pool superiore sia quello già creato per scopi di replica. Abilitare le funzioni <option>Blocco esclusivo</option> e <option>Journaling</option> per l'immagine. Per i dettagli sulla creazione delle immagini RBD, fare riferimento alla <xref linkend="dashboard-rbds-create"/>.
      </para>
      <figure>
       <title>Nuova immagine RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Dopo aver creato l'immagine che si desidera replicare, aprire il Ceph Dashboard del cluster <emphasis>secondario</emphasis> e andare a <menuchoice><guimenu>Blocco</guimenu><guimenu>Esecuzione della copia speculare</guimenu></menuchoice>. La tabella <guimenu>Pool</guimenu> a destra rifletterà la modifica del numero di immagini <guimenu># Remoto</guimenu> e sincronizzerà il numero di immagini <guimenu># Locale</guimenu>.
      </para>
      <figure>
       <title>Nuova immagine RBD sincronizzata</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <tip>
       <title>avanzamento della replica</title>
       <para>
        Nella tabella <guimenu>Immagini</guimenu> in basso nella pagina viene mostrato lo stato della replica delle immagini RBD. La scheda <guimenu>Problemi</guimenu> include i possibili problemi, la scheda <guimenu>Sincronizzazione in corso</guimenu> visualizza l'avanzamento della replica dell'immagine e la scheda <guimenu>Pronto</guimenu> elenca tutte le immagini di cui è riuscita la replica.
       </para>
       <figure>
        <title>Stato della replica delle immagini RBD</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </tip>
     </step>
     <step>
      <para>
       Nel cluster <emphasis>primario</emphasis>, scrivere i dati nell'immagine RBD. Nel Ceph Dashboard del cluster <emphasis>secondario</emphasis>, andare a <menuchoice><guimenu>Blocco</guimenu><guimenu>Immagini</guimenu></menuchoice> e controllare se le dimensioni dell'immagine corrispondente aumentano via via che i dati vengono scritti nel cluster primario.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dash-webui-nfs">
  <title>Gestione di NFS Ganesha</title>

  <tip>
   <title>ulteriori informazioni su NFS Ganesha</title>
   <para>
    Per informazioni generali su NFS Ganesha, fare riferimento a <xref linkend="cha-ceph-nfsganesha"/>.
   </para>
  </tip>

  <para>
   Per elencare tutte le esportazioni NFS disponibili, fare clic su <guimenu>NFS</guimenu> nel menu principale.
  </para>

  <para>
   Nell'elenco sono visualizzati la directory, il nome host del daemon, il tipo di back-end di storage e il tipo di accesso di ciascuna esportazione.
  </para>

  <figure>
   <title>Elenco di esportazioni NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Per visualizzare altri dettagli su un'esportazione NFS, fare clic sulla relativa riga di tabella.
  </para>

  <figure>
   <title>Dettagli esportazione NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dash-webui-nfs-create">
   <title>Aggiunta di esportazioni NFS</title>
   <para>
    Per aggiungere una nuova esportazione NFS, fare clic su <guimenu>Add (Aggiungi)</guimenu> in alto a sinistra della tabella delle esportazioni e immettere le informazioni richieste.
   </para>
   <figure>
    <title>Aggiunta di una nuova esportazione NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Selezionare uno o più daemon NFS Ganesha che eseguiranno l'esportazione.
     </para>
    </step>
    <step>
     <para>
      Selezionare un back-end di storage, ossia <guimenu>CephFS</guimenu> oppure <guimenu>Object Gateway</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Selezionare un ID utente e altre opzioni di back-end.
     </para>
    </step>
    <step>
     <para>
      Immettere il percorso della directory per l'esportazione NFS. Se la directory non esiste sul server, questa verrà creata.
     </para>
    </step>
    <step>
     <para>
      Specificare altre opzioni correlate a NFS, come la versione del protocollo NFS supportata, l'opzione pseudo, il tipo di accesso, il tipo di squash o il protocollo di trasporto.
     </para>
    </step>
    <step>
     <para>
      Se è necessario limitare l'accesso solo a client specifici, fare clic su <guimenu>Add clients (Aggiungi client)</guimenu> e aggiungere i rispettivi indirizzi IP insieme alle opzioni del tipo di accesso e di squashing.
     </para>
    </step>
    <step>
     <para>
      Confermare con <guimenu>Submit (Invia)</guimenu>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-delete">
   <title>Eliminazione di esportazioni NFS</title>
   <para>
    Per eliminare un'esportazione, fare clic sulla relativa riga di tabella e selezionare <guimenu>Elimina</guimenu> in alto a sinistra nella tabella delle esportazioni.
   </para>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-edit">
   <title>Modifica di esportazioni NFS</title>
   <para>
    Per modificare un'esportazione esistente, fare clic sulla relativa riga di tabella e su <guimenu>Modifica</guimenu> in alto a sinistra nella tabella delle esportazioni.
   </para>
   <para>
    Quindi, è possibile regolare tutti i dettagli dell'esportazione NFS.
   </para>
   <figure>
    <title>Modifica di un'esportazione NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-mds">
  <title>Gestione di file system Ceph</title>

  <tip>
   <title>per ulteriori informazioni</title>
   <para>
    Per informazioni dettagliate su CephFS, fare riferimento al <xref linkend="cha-ceph-cephfs"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-mds-overview">
   <title>Visualizzazione della panoramica su CephFS</title>
   <para>
    Fare clic su <guimenu>File system</guimenu> nel menu principale per visualizzare la panoramica dei file system configurati. Nella tabella principale viene mostrato il nome e la data di creazione di ciascun file system e informazioni sul relativo stato di abilitazione o disabilitazione.
   </para>
   <para>
    Facendo clic sulla riga di tabella corrispondente a un file system, sarà possibile visualizzare i dettagli sulla classificazione e sui pool aggiunti a quest'ultimo.
   </para>
   <figure>
    <title>Dettagli CephFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Nella parte inferiore della schermata, è possibile visualizzare le statistiche con il numero in tempo reale degli inode MDS e delle richieste client correlati.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-ogw">
  <title>Gestione degli Object Gateway</title>

  <tip>
   <title>ulteriori informazioni su Object Gateway</title>
   <para>
    Per ulteriori informazioni generali su Object Gateway, fare riferimento al <xref linkend="cha-ceph-gw"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-ogw-view">
   <title>Visualizzazione degli Object Gateway</title>
   <para>
    Fare clic su <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Daemon</guimenu></menuchoice> per visualizzare un elenco degli Object Gateway configurati. L'elenco include l'ID del gateway, il nome host del nodo del cluster su cui è in esecuzione il daemon del gateway e il numero di versione del gateway.
   </para>
   <para>
    Per visualizzare informazioni dettagliate sul gateway, fare clic sulla relativa riga di tabella. Nella scheda <guimenu>Contatori delle prestazioni</guimenu> vengono mostrati i dettagli delle operazioni di lettura/scrittura e le statistiche sulla cache.
   </para>
   <figure>
    <title>Dettagli del gateway</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-ogw-user">
   <title>Gestione degli utenti di Object Gateway</title>
   <para>
    Fare clic su <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Utenti</guimenu></menuchoice> per visualizzare un elenco degli utenti di Object Gateway esistenti.
   </para>
   <para>
    Fare clic sulla riga di tabella corrispondente a un utente per visualizzare i dettagli dell'account utente, ad esempio le informazioni sullo stato o i dettagli della quota utenti e compartimenti.
   </para>
   <figure>
    <title>Utenti Gateway</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-ogw-user-create">
    <title>Aggiunta di un nuovo utente Gateway</title>
    <para>
     Per aggiungere un nuovo utente Gateway, fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nell'intestazione della tabella. Inserire le credenziali, i dettagli della chiave S3 e della quota utenti/compartimenti, quindi confermare con <guimenu>Aggiungi</guimenu>.
    </para>
    <figure>
     <title>Aggiunta di un nuovo utente Gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-delete">
    <title>Eliminazione di utenti Gateway</title>
    <para>
     Per eliminare un utente Gateway, fare clic sulla relativa riga di tabella e selezionare <guimenu>Elimina</guimenu> in alto a sinistra nell'intestazione della tabella. Attivare la casella di controllo <guimenu>Sì</guimenu> e confermare con <guimenu>Delete User</guimenu> (Elimina utente).
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-edit">
    <title>Modifica dei dettagli di un utente Gateway</title>
    <para>
     Per modificare i dettagli dell'utente Gateway, fare clic sulla relativa riga di tabella e selezionare <guimenu>Modifica</guimenu> in alto a sinistra nell'intestazione della tabella.
    </para>
    <para>
     Modificare le informazioni di base o aggiuntive dell'utente, come le informazioni su capacità, chiavi, sottoutenti e quota. Confermare con <guimenu>Aggiorna</guimenu>.
    </para>
    <para>
     Nella scheda <guimenu>Chiavi</guimenu> è incluso un elenco di sola lettura degli utenti Gateway e delle relative chiavi segrete e di accesso. Per visualizzare le chiavi, fare clic su un nome utente nell'elenco e selezionare <guimenu>Mostra</guimenu> in alto a sinistra nell'intestazione della tabella. Nella finestra di dialogo <guimenu>Chiave S3</guimenu>, fare clic sull'icona a forma di occhio per rendere visibili le chiavi oppure sull'icona degli appunti per copiare la chiave correlata negli appunti.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-ogw-bucket">
   <title>Gestione dei compartimenti Object Gateway</title>
   <para>
    I compartimenti Object Gateway (OGW) implementano la funzionalità dei container di OpenStack Swift e fungono da container per la memorizzazione degli oggetti dati.
   </para>
   <para>
    Fare clic su <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Compartimenti</guimenu></menuchoice> per visualizzare un elenco dei compartimenti OGW.
   </para>
   <sect3 xml:id="dashboard-ogw-bucket-create">
    <title>Aggiunta di un nuovo compartimento</title>
    <para>
     Per aggiungere un nuovo compartimento OGW, fare clic su <guimenu>Aggiungi</guimenu> in alto a sinistra nell'intestazione della tabella. Immettere il nome del compartimento e selezionarne il proprietario. Confermare con <guimenu>Aggiungi</guimenu>.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-view">
    <title>Visualizzazione dei dettagli compartimento</title>
    <para>
     Per visualizzare informazioni dettagliate su un compartimento OGW, fare clic sulla relativa riga di tabella.
    </para>
    <figure>
     <title>Dettagli compartimento gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <tip>
     <title>quota compartimento</title>
     <para>
      Sotto la tabella <guimenu>Dettagli</guimenu>, è possibile trovare i dettagli delle impostazioni relative alla quota compartimenti.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-edit">
    <title>Aggiornamento del proprietario di un compartimento</title>
    <para>
     Fare clic su una riga di tabella corrispondente a un compartimento e selezionare <guimenu>Modifica</guimenu> in alto a sinistra nell'intestazione della tabella.
    </para>
    <para>
     Aggiornare il proprietario del compartimento e confermare con <guimenu>Aggiorna</guimenu>.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-delete">
    <title>Eliminazione di un compartimento</title>
    <para>
     Per eliminare un compartimento OGW, fare clic sulla relativa riga di tabella e selezionare <guimenu>Elimina</guimenu> in alto a sinistra nell'intestazione della tabella. Attivare la casella di controllo <guimenu>Sì</guimenu> e confermare con <guimenu>Delete bucket</guimenu> (Elimina compartimento).
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-initial-configuration">
  <title>Configurazione manuale</title>

  <para>
   Questa sezione fornisce informazioni avanzate per gli utenti che preferiscono configurare manualmente le impostazioni del dashboard nella riga di comando.
  </para>

  <sect2 xml:id="dashboard-ssl">
   <title>Supporto TLS/SSL</title>
   <para>
    Per default, tutte le connessioni HTTP al dashboard sono protette da SSL/TLS. Per la connessione sicura è necessario un certificato SSL. È possibile utilizzare un certificato firmato da se stessi o generarne uno e farlo firmare da un'autorità di certificazione (CA) nota.
   </para>
   <tip>
    <title>disabilitazione di SSL</title>
    <para>
     In alcune situazioni, potrebbe essere opportuno disabilitare il supporto SSL. Ad esempio, se il dashboard è in esecuzione dietro un proxy che non supporta SSL.
    </para>
    <para>
     Prestare attenzione quando si disabilita SSL poiché <emphasis role="bold">i nomi utente e le password</emphasis> verranno inviati al dashboard <emphasis role="bold">senza cifratura</emphasis>.
    </para>
    <para>
     Per disabilitare SSL eseguire:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/ssl false
</screen>
   </tip>
   <tip>
    <title>riavvio dei processi di Ceph Manager</title>
    <para>
     In seguito alla modifica del certificato e della chiave SSL, è necessario riavviare manualmente i processi di Ceph Manager. Per farlo, eseguire
    </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph mgr fail<replaceable>ACTIVE-MANAGER-NAME</replaceable></screen>
    <para>
     o disabilitare e riabilitare il modulo del dashboard (questa azione comporta inoltre la rigenerazione del manager):
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr module disable dashboard
<prompt>cephadm@adm &gt; </prompt>ceph mgr module enable dashboard
</screen>
   </tip>
   <sect3 xml:id="self-sign-certificates">
    <title>Certificati firmati da se stessi</title>
    <para>
     La procedura di creazione di un certificato firmato da se stessi per la comunicazione sicura è semplice. In questo modo è possibile rendere operativo il dashboard più rapidamente.
    </para>
    <note>
     <title>complain dei browser Web</title>
     <para>
      La maggior parte dei browser Web creerà un complain relativo al certificato firmato da se stessi e richiederà una conferma esplicita prima di stabilire una connessione sicura al dashboard.
     </para>
    </note>
    <para>
     Per generare e installare un certificato firmato da se stessi, utilizzare il seguente comando integrato:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard create-self-signed-cert
</screen>
   </sect3>
   <sect3 xml:id="cert-sign-CA">
    <title>Certificati firmati dalla CA</title>
    <para>
     Per proteggere correttamente la connessione al dashboard ed eliminare i complain del browser Web per i certificati firmati da se stessi, si consiglia di utilizzare un certificato firmato da una CA.
    </para>
    <para>
     È possibile generare una coppia di chiavi di certificato con un comando simile al seguente:
    </para>
<screen>
<prompt>root # </prompt>openssl req -new -nodes -x509 \
  -subj "/O=IT/CN=ceph-mgr-dashboard" -days 3650 \
  -keyout dashboard.key -out dashboard.crt -extensions v3_ca
</screen>
    <para>
     Il comando riportato sopra consente di generare i file <filename>dashboard.key</filename> e <filename>dashboard.crt</filename>. Dopo aver ottenuto il file <filename>dashboard.crt</filename> firmato dalla CA, abilitarlo per tutte le istanze di Ceph Manager eseguendo i comandi seguenti:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/key -i dashboard.key
</screen>
    <tip>
     <title>certificati diversi per ogni istanza del Manager</title>
     <para>
      Se sono richiesti certificati diversi per ogni istanza di Ceph Manager, modificare i comandi e includere il nome dell'istanza come segue. Sostituire <replaceable>NAME</replaceable> con il nome dell'istanza di Ceph Manager (in genere il nome host correlato):
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/key -i dashboard.key
</screen>
    </tip>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-hostname-port">
   <title>Nome host e numero di porta</title>
   <para>
    L'applicazione Web del Ceph Dashboard è associata a un indirizzo TCP/IP e a una porta TCP specifici. Per default, il Ceph Manager attualmente attivo che ospita il dashboard è associato alla porta TCP 8443 (o alla porta 8080 se SSL è disabilitato).
   </para>
   <para>
    Per default, l'applicazione Web del dashboard è associata a "::", che corrisponde a tutti gli indirizzi IPv4 e IPv6 disponibili. È possibile modificare l'indirizzo IP e il numero di porta dell'applicazione Web per fare in modo che vengano applicati a tutte le istanze di Ceph Manager utilizzando i comandi seguenti:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   <tip>
    <title>configurazione delle istanze di Ceph Manager separatamente</title>
    <para>
     Dal momento che ogni daemon <systemitem class="daemon">ceph-mgr</systemitem> ospita la propria istanza del dashboard, potrebbe essere necessario configurare separatamente tali istanze. Modificare l'indirizzo IP e il numero di porta di un'istanza del Manager specifica utilizzando i comandi seguenti (sostituire <replaceable>NAME</replaceable> con l'ID dell'istanza <systemitem class="daemon">ceph-mgr</systemitem>):
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   </tip>
   <tip>
    <title>elenco degli endpoint configurati</title>
    <para>
     Il comando <command>ceph mgr services</command> consente di visualizzare tutti gli endpoint attualmente configurati. Cercare la chiave "dashboard" per ottenere l'URL per l'accesso al dashboard.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-username-password">
   <title>nome utente e password</title>
   <para>
    Se non si desidera utilizzare l'account amministratore di default, creare un account utente diverso e associarlo almeno a un ruolo. Viene fornito un set di ruoli di sistema predefiniti che è possibile utilizzare. Per ulteriori informazioni, fare riferimento a <xref linkend="dashboard-user-roles"/>.
   </para>
   <para>
    Per creare un utente con privilegi di amministratore, utilizzare il comando seguente:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USER_NAME</replaceable> <replaceable>PASSWORD</replaceable> administrator
</screen>
  </sect2>

  <sect2 xml:id="dashboard-ogw-enabling">
   <title>Abilitazione del front-end di gestione di Object Gateway</title>
   <para>
    Per utilizzare la funzionalità di gestione di Object Gateway del dashboard, è necessario specificare le credenziali di login di un utente con il flag "system" abilitato:
   </para>
   <procedure>
    <step>
     <para>
      Se non si dispone di un utente con il flag "system", crearne uno:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user create --uid=<replaceable>USER_ID</replaceable> --display-name=<replaceable>DISPLAY_NAME</replaceable> --system
</screen>
     <para>
      Annotare le chiavi "access_key" e "secret_key" nell'output del comando.
     </para>
    </step>
    <step>
     <para>
      È possibile inoltre ottenere le credenziali di un utente esistente utilizzando il comando <command>radosgw-admin</command>:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user info --uid=<replaceable>USER_ID</replaceable>
</screen>
    </step>
    <step>
     <para>
      Immettere le credenziali ricevute sul dashboard:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-access-key <replaceable>ACCESS_KEY</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-secret-key <replaceable>SECRET_KEY</replaceable>
</screen>
    </step>
   </procedure>
   <para>
    Vi sono diversi aspetti da considerare:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Il nome host e il numero di porta di Object Gateway vengono determinati automaticamente.
     </para>
    </listitem>
    <listitem>
     <para>
      Se sono utilizzate più zone, l'host all'interno del gruppo di zone master e della zona master verrà determinato automaticamente. Queste impostazioni sono sufficienti per la maggior parte delle configurazioni, ma in alcuni casi è consigliabile impostare manualmente il nome host e la porta:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-host <replaceable>HOST</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-port <replaceable>PORT</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Potrebbero essere necessarie queste impostazioni aggiuntive:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-scheme <replaceable>SCHEME</replaceable>  # http or https
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-admin-resource <replaceable>ADMIN_RESOURCE</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-user-id <replaceable>USER_ID</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Se si utilizza un certificato firmato da se stessi (<xref linkend="dashboard-ssl"/>) nella configurazione Object Gateway, disabilitare la verifica del certificato nel dashboard per evitare connessioni rifiutate a causa di certificati firmati da una CA sconosciuta o non corrispondenti al nome host:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-ssl-verify False
</screen>
    </listitem>
    <listitem>
     <para>
      Se Object Gateway impiega troppo tempo per elaborare le richieste e si verificano timeout sul dashboard, è possibile modificare il valore di timeout (impostato per default su 45 secondi):
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rest-requests-timeout <replaceable>SECONDS</replaceable>
</screen>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-sso">
   <title>Abilitazione di Single Sign-On</title>
   <para>
    <emphasis>Single Sign-On</emphasis> (SSO) è un metodo di controllo dell'accesso che consente agli utenti di eseguire contemporaneamente il login su più applicazioni utilizzando un solo ID e una sola password.
   </para>
   <para>
    Il Ceph Dashboard supporta l'autenticazione esterna degli utenti tramite il protocollo SAML 2.0. Dal momento che l'<emphasis>autorizzazione</emphasis> viene comunque eseguita dal dashboard, è necessario innanzitutto creare gli account utente e associarli ai ruoli desiderati. Tuttavia, il processo di <emphasis>autenticazione</emphasis> può essere eseguito da un <emphasis>provider di identità</emphasis> (IdP) esistente.
   </para>
   <para>
    Per configurare Single Sign-On, utilizzare il comando seguente:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso setup saml2 <replaceable>CEPH_DASHBOARD_BASE_URL</replaceable> \
 <replaceable>IDP_METADATA</replaceable> <replaceable>IDP_USERNAME_ATTRIBUTE</replaceable> \
 <replaceable>IDP_ENTITY_ID</replaceable> <replaceable>SP_X_509_CERT</replaceable> \
 <replaceable>SP_PRIVATE_KEY</replaceable>
</screen>
   <para>
    Parametri:
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>CEPH_DASHBOARD_BASE_URL</replaceable></term>
     <listitem>
      <para>
       URL di base da cui è accessibile il Ceph Dashboard (ad esempio "https://cephdashboard.local").
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_METADATA</replaceable></term>
     <listitem>
      <para>
       URL, percorso del file o contenuto del file XML dei metadati dell'IdP (ad esempio "https://myidp/metadata").
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_USERNAME_ATTRIBUTE</replaceable></term>
     <listitem>
      <para>
       Facoltativo. Attributo che verrà utilizzato per ottenere il nome utente dalla risposta di autenticazione. L'impostazione di default è "uid".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_ENTITY_ID</replaceable></term>
     <listitem>
      <para>
       Facoltativo. Utilizzare quando è presente più di un'entità ID sui metadati dell'IdP.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>SP_X_509_CERT</replaceable> / <replaceable>SP_PRIVATE_KEY</replaceable></term>
     <listitem>
      <para>
       Facoltativo. Percorso del file o contenuto del certificato che verrà utilizzato dal Ceph Dashboard (provider di servizi) per l'accesso e la cifratura.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>richieste SAML</title>
    <para>
     Il valore dell'autorità di certificazione delle richieste SAML seguirà questo modello:
    </para>
<screen>
<replaceable>CEPH_DASHBOARD_BASE_URL</replaceable>/auth/saml2/metadata
</screen>
   </note>
   <para>
    Per visualizzare la configurazione SAML 2.0 corrente, eseguire:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso show saml2
</screen>
   <para>
    Per disabilitare Single Sign-On, eseguire:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso disable
</screen>
   <para>
    Per verificare se SSO è abilitato, eseguire:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso status
</screen>
   <para>
    Per abilitare SSO eseguire:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso enable saml2
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-roles">
  <title>Gestione di utenti e ruoli sulla riga di comando</title>

  <para>
   Questa sezione descrive come gestire gli account utente utilizzati dal Ceph Dashboard e fornisce informazioni sulla creazione o modifica degli account utente, nonché sull'impostazione dei ruoli dell'utente e delle autorizzazioni corretti.
  </para>

  <sect2 xml:id="dahsboard-user-accounts">
   <title>Conti utente</title>
   <para>
    Il Ceph Dashboard supporta la gestione di più account utente. Ogni account utente include un nome utente, una password (memorizzata in formato cifrato tramite il comando <literal>bcrypt</literal>), un nome facoltativo e un indirizzo e-mail facoltativo.
   </para>
   <para>
    Gli account utente sono memorizzati nel database di configurazione di Ceph Monitor e sono condivisi a livello globale su tutte le istanze di Ceph Manager.
   </para>
   <para>
    Utilizzare i comandi seguenti per gestire gli account utente:
   </para>
   <variablelist>
    <varlistentry>
     <term>Per mostrare gli utenti esistenti:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Per creare un nuovo utente:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Per eliminare un utente:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Per modificare la password di un utente:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Per modificare il nome e l'e-mail di un utente:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-permissions">
   <title>Ruoli e autorizzazioni dell'utente</title>
   <para>
    Questa sezione descrive gli ambiti di sicurezza che è possibile assegnare a un ruolo dell'utente e come gestire i ruoli dell'utente e assegnarli agli account utente.
   </para>
   <sect3>
    <title>Ambiti di sicurezza</title>
    <para>
     Gli account utente sono associati a un set di ruoli che definiscono le parti del dashboard accessibili dall'utente. Le parti del dashboard sono raggruppate all'interno di un ambito di <emphasis>sicurezza</emphasis>. Gli ambiti di sicurezza sono predefiniti e statici. Attualmente sono disponibili gli ambiti di sicurezza seguenti:
    </para>
    <variablelist>
     <varlistentry>
      <term>hosts</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla voce di menu <guimenu>Host</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>config-opt</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione delle opzioni di configurazione di Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione del pool.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>osd</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione di Ceph OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>monitor</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione di Ceph Monitor.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-image</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione delle immagini del dispositivo di blocco RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-mirroring</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione della copia speculare del dispositivo di blocco RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>iscsi</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione di iSCSI.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione di Object Gateway.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione di CephFS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>manager</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione di Ceph Manager.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>log</term>
      <listitem>
       <para>
        Include tutte le funzioni relative alla gestione dei log di Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>grafana</term>
      <listitem>
       <para>
        Include tutte le funzioni relative al proxy Grafana.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>dashboard-settings</term>
      <listitem>
       <para>
        Modifica le impostazioni del dashboard.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3>
    <title>Ruoli dell'utente</title>
    <para>
     Un <emphasis>ruolo</emphasis> consente di specificare un set di mappature tra un <emphasis>ambito di sicurezza</emphasis> e un set di <emphasis>autorizzazioni</emphasis>. Vi sono quattro tipi di autorizzazioni: "read" (lettura), "create" (creazione), "update" (aggiornamento) e "delete" (eliminazione).
    </para>
    <para>
     Nell'esempio seguente viene specificato un ruolo in cui l'utente dispone delle autorizzazioni "read" e "create" per le funzioni relative alla gestione del pool e delle autorizzazioni complete per le funzioni relative alla gestione delle immagini RBD:
    </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
    <para>
     Nel dashboard è già fornito un set di ruoli predefiniti denominati <emphasis>ruoli di sistema</emphasis>. È possibile utilizzarli immediatamente dopo l'installazione da zero del Ceph Dashboard:
    </para>
    <variablelist>
     <varlistentry>
      <term>amministratore</term>
      <listitem>
       <para>
        Fornisce le autorizzazioni complete per tutti gli ambiti di sicurezza.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>sola lettura</term>
      <listitem>
       <para>
        Fornisce l'autorizzazione in lettura per tutti gli ambiti di sicurezza a eccezione delle impostazioni del dashboard.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>block-manager</term>
      <listitem>
       <para>
        Fornisce le autorizzazioni complete per gli ambiti "rbd-image", "rbd-mirroring" e "iscsi".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw-manager</term>
      <listitem>
       <para>
        Fornisce le autorizzazioni complete per l'ambito "rgw".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cluster-manager</term>
      <listitem>
       <para>
        Fornisce le autorizzazioni complete per gli ambiti "hosts", "osd", "monitor", "manager" e "config-opt".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool-manager</term>
      <listitem>
       <para>
        Fornisce le autorizzazioni complete per l'ambito "pool".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs-manager</term>
      <listitem>
       <para>
        Fornisce le autorizzazioni complete per l'ambito "cephfs".
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <sect4>
     <title>Gestione dei ruoli personalizzati</title>
     <para>
      È possibile creare nuovi ruoli dell'utente utilizzando i comandi seguenti:
     </para>
     <variablelist>
      <varlistentry>
       <term>Per creare un nuovo ruolo:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Per eliminare un ruolo:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Per aggiungere autorizzazioni di ambito a un ruolo:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Per eliminare le autorizzazioni di ambito da un ruolo:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
    </sect4>
    <sect4>
     <title>Assegnazione dei ruoli agli account utente</title>
     <para>
      Utilizzare i comandi seguenti per assegnare i ruoli agli utenti:
     </para>
     <variablelist>
      <varlistentry>
       <term>Per impostare i ruoli dell'utente:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Per aggiungere ulteriori ruoli a un utente:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Per eliminare i ruoli da un utente:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>eliminazione definitiva dei ruoli personalizzati</title>
      <para>
       Se si creano ruoli dell'utente personalizzati e si intende rimuovere il cluster Ceph con lo strumento di esecuzione <command>ceph.purge</command> in un secondo momento, è necessario innanzitutto eliminare definitivamente i ruoli personalizzati. Ulteriori dettagli sono disponibili nella <xref linkend="deepsea-ceph-purge"/>.
      </para>
     </tip>
    </sect4>
    <sect4>
     <title>Esempio: creazione di un utente e di un ruolo personalizzato</title>
     <para>
      Questa sezione illustra la procedura di creazione di un account utente in grado di gestire le immagini RBD, visualizzare e creare pool Ceph e con l'accesso in sola lettura a qualsiasi altro ambito.
     </para>
     <procedure>
      <step>
       <para>
        Creare un utente denominato "tux":
       </para>
<screen>
 <prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
      </step>
      <step>
       <para>
        Creare un ruolo e specificare le autorizzazioni di ambito:
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
      </step>
      <step>
       <para>
        Associare i ruoli all'utente "tux":
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
      </step>
     </procedure>
    </sect4>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-proxy">
   <title>Proxy inversi</title>
   <para>
    Se si effettua l'accesso al dashboard tramite una configurazione di proxy inverso, potrebbe essere necessario fornirlo tramite un prefisso URL. Per fare in modo che il dashboard utilizzi i collegamenti ipertestuali che includono il prefisso specificato, è possibile configurare l'impostazione <option>url_prefix</option>:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
</screen>
   <para>
    Quindi, è possibile accedere al dashboard all'indirizzo <literal>http://<replaceable>HOST_NAME</replaceable>:<replaceable>PORT_NUMBER</replaceable>/<replaceable>URL_PREFIX</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-auditing">
   <title>Revisione</title>
   <para>
    L'API REST del Ceph Dashboard è in grado di registrare le richieste PUT, POST e DELETE sul log di revisione di Ceph. La funzione di registrazione è disabilita per default, ma è possibile abilitarla con il comando seguente:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>
   <para>
    Se abilitata, per ciascuna richiesta vengono registrati i parametri seguenti:
   </para>
   <variablelist>
    <varlistentry>
     <term>from</term>
     <listitem>
      <para>
       Origine della richiesta, ad esempio "https://[::1]:44410".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>percorso</term>
     <listitem>
      <para>
       Percorso dell'API REST, ad esempio "/api/auth".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>method</term>
     <listitem>
      <para>
       "PUT", "POST" o "DELETE".
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user</term>
     <listitem>
      <para>
       Nome dell'utente (o "None").
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Una voce di log di esempio ha il seguente aspetto:
   </para>
<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>
   <tip>
    <title>disabilitazione della registrazione del payload della richiesta</title>
    <para>
     La registrazione del payload della richiesta (l'elenco degli argomenti e dei relativi valori) è abilitata per default. È possibile disabilitarla nel modo seguente:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
   </tip>
  </sect2>
 </sect1>
</chapter>
