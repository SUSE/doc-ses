<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_ceph_faqs.xml" version="5.0" xml:id="storage-faqs">
 <title>Domande frequenti</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:translation>sì</dm:translation>
        <dm:release>SES 5</dm:release>
      </dm:docmanager>
    </info>
    <para/>
 <sect1 xml:id="storage-bp-tuneups-pg-num">
  <title>In che modo il numero dei gruppi di posizionamento influisce sulle prestazioni del cluster?</title>

  <para>
   Quando il cluster è pieno dal 70% all'80%, è il momento di aggiungervi altri OSD. Quando si aumenta il numero di OSD, si può considerare di aumentare anche il numero dei gruppi di posizionamento.
  </para>

  <warning>
   <para>
    La modifica del numero dei gruppi di posizionamento provoca il trasferimento di una grande quantità di dati nel cluster.
   </para>
  </warning>

  <para>
   Il calcolo del valore ottimale per il cluster appena ridimensionato è un task complesso.
  </para>

  <para>
   Un numero elevato di gruppi di posizionamento genera piccole porzioni di dati. In tal modo si velocizza il recupero dopo un errore dell'OSD, ma aumenta il carico sui nodi di monitoraggio in quanto questi sono responsabili del calcolo dell'ubicazione dei dati.
  </para>

  <para>
   D'altro canto, un numero basso di gruppi di posizionamento richiede più tempo per il trasferimento dei dati da recuperare dopo un errore dell'OSD, ma non impone un carico così eccessivo sui nodi di monitoraggio in quanto questi devono calcolare le ubicazioni per meno porzioni di dati (ma di dimensioni maggiori).
  </para>

  <para>
   Per ulteriori informazioni sul numero ottimale di gruppi di posizionamento per il cluster è possibile utilizzare la <link xlink:href="http://ceph.com/pgcalc/">calcolatrice online</link>.
  </para>
 </sect1>
 <sect1 xml:id="storage-bp-tuneups-mix-ssd">
  <title>È possibile utilizzare SSD e dischi rigidi sullo stesso cluster?</title>

  <para>
   I dischi a stato solido (SSD) in genere sono più veloci rispetto a dischi rigidi. Se si combinano i due tipi di dischi per la stessa operazione di scrittura, la scrittura dei dati nel disco SSD verrà rallentata dal disco rigido. Pertanto, <emphasis>non mischiare mai SSD e dischi rigidi</emphasis> per la scrittura di dati secondo <emphasis>la stessa regola</emphasis> (per ulteriori informazioni sulle regole di memorizzazione dei dati, vedere <xref linkend="datamgm-rules"/>).
  </para>

  <para>
   In genere vi sono due casi in cui l'utilizzo di SSD e disco rigido sullo stesso cluster è sensato:
  </para>

  <orderedlist spacing="normal">
   <listitem>
    <para>
     Utilizzare ciascun tipo di disco per scrivere dati secondo regole diverse. Quindi è necessario disporre di una regola separata per il disco SSD e un'altra per il disco rigido.
    </para>
   </listitem>
   <listitem>
    <para>
     Utilizzare ciascun tipo di disco per uno scopo specifico. Ad esempio utilizzare il disco SSD per il journal e il disco rigido per la memorizzazione dei dati.
    </para>
   </listitem>
  </orderedlist>
 </sect1>
 <sect1 xml:id="storage-bp-tuneups-ssd-tradeoffs">
  <title>Quali sono i vantaggi e gli svantaggi che comporta l'utilizzo di un journal su un disco SSD?</title>

  <para>
   L'utilizzo di SSD per i journal OSD offre prestazioni migliori in quanto di solito il journal rappresenta il collo di bottiglia per OSD con solo disco rigido. Spesso si utilizzano gli SSD per condividere i journal di diversi OSD.
  </para>

  <para>
   Di seguito è riportato un esempio di possibili svantaggi derivanti dall'utilizzo di SSD per il journal OSD:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     I dischi SSD sono più costosi rispetto ai dischi rigidi. Ma poiché on journal OSD richiede solo fino a 6 GB di spazio su disco, il prezzo può non essere così cruciale.
    </para>
   </listitem>
   <listitem>
    <para>
     Il disco SSD consuma slot di memorizzazione che potrebbe altrimenti essere utilizzato da un disco rigido di grandi dimensioni per estendere la capacità del cluster.
    </para>
   </listitem>
   <listitem>
    <para>
     I dischi SSD presentano cicli di scrittura ridotti rispetto ai dischi rigidi, ma le tecnologie moderne stanno iniziando a eliminare il problema.
    </para>
   </listitem>
   <listitem>
    <para>
     Se si condividono più journal sullo stesso disco SSD, si rischia di perdere tutti gli OSD correlati dopo un errore del disco SSD. Ciò richiederà lo spostamento di grandi quantità di dati per ribilanciare il cluster.
    </para>
   </listitem>
   <listitem>
    <para>
     Il collegamento a caldo dei dischi diventa più complesso poiché la mappatura dei dati non è 1:1 nell'OSD non riuscito e nel disco del journal.
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="storage-bp-monitoring-diskfails">
  <title>Che cosa succede in caso di errore di un disco?</title>

  <para>
   Quando si riscontra un problema di hardware in un disco con dati cluster memorizzati e questo non funziona, si verifica lo scenario seguente:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     L'OSD correlato si è bloccato e viene automaticamente rimosso dal cluster.
    </para>
   </listitem>
   <listitem>
    <para>
     Il dati del disco con errore vengono replicati in un altro OSD nel cluster da altre copie degli stessi dati memorizzati in altri OSD.
    </para>
   </listitem>
   <listitem>
    <para>
     Si deve quindi rimuovere il disco dalla mappa CRUSH del cluster e fisicamente dall'hardware host.
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="storage-bp-monitoring-journalfails">
  <title>Che cosa succede in caso di errore di un disco del journal?</title>

  <para>
   È possibile configurare Ceph in modo che vengano memorizzati i journal o che esegua la scrittura prima dei log ne dispositivi separati dagli OSD. Quando un disco dedicato a un journal viene meno, anche gli OSD correlati si bloccano (vedere <xref linkend="storage-bp-monitoring-diskfails"/>).
  </para>

  <warning>
   <title>hosting di più journal su un disco</title>
   <para>
    Per ottenere massime prestazioni, è possibile utilizzare un disco veloce (come un SSD) per memorizzare partizioni del journal per diversi OSD. Si sconsiglia di eseguire l'hosting dei journal per più di 4 OSD su un unico disco, perché in caso di errore di disco dei journal si rischia di perdere i dati memorizzati per tutti i dischi OSD correlati.
   </para>
  </warning>
 </sect1>
</chapter>
