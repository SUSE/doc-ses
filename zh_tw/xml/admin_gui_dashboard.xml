<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_gui_dashboard.xml" version="5.0" xml:id="ceph-dashboard">
 <title>Ceph Dashboard</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>是</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Ceph Dashboard 是一個模組，它新增了一個內建的 Web 式監控和管理應用程式至 Ceph 管理員 (如需 Ceph 管理員的更多詳細資料，請參閱<xref linkend="storage-intro-core-nodes"/>)。現在，您不必瞭解複雜的 Ceph 相關指令，便可輕鬆管理和監控您的 Ceph 叢集。您可以使用 Ceph Dashboard 的直觀 Web 介面，也可以使用其內建的 REST API。
 </para>
 <para>
  在部署程序中的 DeepSea 階段 3，系統會自動啟用和設定 Ceph Dashboard (請參閱<xref linkend="ceph-install-stack"/>)。在具有多個 Ceph 管理員例項的 Ceph 叢集中，只有目前使用中的 Ceph 管理員精靈上執行的儀表板會處理內送要求。系統會將存取任何其他目前待命中 Ceph 管理員例項上的儀表板 TCP 連接埠的要求進行 HTTP 重新導向 (303)，轉至目前使用中 Ceph 管理員的儀表板 URL。如此，無論您將瀏覽器指向任何 Ceph 管理員例項，都可以存取該儀表板。在利用防火牆保障存取安全或規劃 HA 設定時，請考慮此種行為。
 </para>
 <sect1 xml:id="dashboard-webui-general">
  <title>儀表板的 Web 使用者介面</title>

  <sect2 xml:id="dashboard-webui-login">
   <title>登入</title>
   <para>
    若要登入儀表板 Web 應用程式，請將瀏覽器指向其 URL，包括連接埠號碼。您可以透過執行以下指令找到其網址
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr services | grep dashboard
"dashboard": "https://ses-dash-node.example.com:8443/",
</screen>
   <figure>
    <title>Ceph Dashboard 登入畫面</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    您需要有使用者帳戶才能登入儀表板 Web 應用程式。DeepSea 會為您建立一個擁有管理員權限的預設使用者「admin」。如果您決定使用預設「admin」使用者登入，請透過執行以下指令擷取相應密碼
   </para>
<screen>
<prompt>root@master # </prompt>salt-call grains.get dashboard_creds
</screen>
   <tip>
    <title>自訂使用者帳戶</title>
    <para>
     如果您不想使用預設「admin」帳戶存取 Ceph Dashboard，請建立擁有管理員權限的自訂使用者帳戶。如需更多詳細資料，請參閱 <xref linkend="dashboard-user-roles"/>。
    </para>
   </tip>
   <para>
    儀表板使用者介面在圖形上分為以下幾個<emphasis>區塊</emphasis>：<emphasis>公用程式功能表</emphasis>、<emphasis>主功能表</emphasis>和主<emphasis>內容窗格</emphasis>。
   </para>
   <figure>
    <title>Ceph Dashboard 首頁</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-util-menu">
   <title>公用程式功能表</title>
   <para>
    公用程式功能表位於螢幕右上方。該功能表包含與儀表板更為相關 (相較於 Ceph 叢集) 的一般任務。按一下相應項目可以存取以下主題：
   </para>
   <itemizedlist>
    <listitem>
     <para>
      變更儀表板使用者介面的語言。您可以選取捷克語、英語、德語、西班牙語、法語、葡萄牙語、中文或印尼語。
     </para>
    </listitem>
    <listitem>
     <para>
      顯示正在背景中執行的 Ceph 相關任務清單。
     </para>
    </listitem>
    <listitem>
     <para>
      檢視並清除最近的儀表板通知。
     </para>
    </listitem>
    <listitem>
     <para>
      顯示提供儀表板相關資訊、其完整文件及 REST API 綜覽的連結清單。
     </para>
    </listitem>
    <listitem>
     <para>
      管理儀表板的使用者和使用者角色。如需更詳細的指令行描述，請參閱<xref linkend="dashboard-user-roles"/>。
     </para>
    </listitem>
    <listitem>
     <para>
      登出儀表板。
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-main-menu">
   <title>主功能表</title>
   <para>
    儀表板的主功能表位於螢幕的左上方。它涵蓋下列主題：
   </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>儀表板</guimenu></term>
     <listitem>
      <para>
       回到 Ceph Dashboard 首頁。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>叢集</guimenu></term>
     <listitem>
      <para>
       檢視有關叢集的整體組態、CRUSH 地圖、叢集的主機、Ceph OSD、Ceph 監控程式及記錄檔案內容的詳細資訊。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>池</guimenu></term>
     <listitem>
      <para>
       檢視並管理叢集池。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>區塊</guimenu></term>
     <listitem>
      <para>
       檢視並管理區塊裝置及其 iSCSI 輸出。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>NFS</guimenu></term>
     <listitem>
      <para>
       檢視並管理 NFS Ganesha 部署。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Filesystems</guimenu></term>
     <listitem>
      <para>
       檢視並管理 CephFS。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>物件閘道</guimenu></term>
     <listitem>
      <para>
       檢視並管理物件閘道的精靈、使用者和桶。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-cpane">
   <title>內容窗格</title>
   <para>
    內容窗格佔據儀表板螢幕的主要部分。儀表板首頁上顯示了很多有用的工具集，為您提供叢集目前狀態、容量及效能的簡要資訊。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-ui-common">
   <title>常用 Web UI 功能</title>
   <para>
    在 Ceph Dashboard 中，您經常會用到<emphasis>清單</emphasis> — 例如，池清單、OSD 節點清單或 RBD 裝置清單。所有清單預設每 5 秒便會自動重新整理一次。下列常用工具集可協助您管理或調整這些清單：
   </para>
   <para>
    按一下 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 可手動觸發清單的重新整理。
   </para>
   <para>
    按一下 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 可顯示或隱藏表的個別欄。
   </para>
   <para>
    按一下 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 並選取要在一頁上顯示多少列。
   </para>
   <para>
    在 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 中按一下並輸入要搜尋的字串以過濾列。
   </para>
   <para>
    如果清單跨多頁顯示，可使用 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 來變更目前顯示的頁。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-widgets">
   <title>儀表板工具集</title>
   <para>
    每個儀表板工具集顯示與執行中 Ceph 叢集特定方面相關的特定狀態資訊。有些工具集是使用中連結，按一下它們會將您重新導向至其所代表主題的相關詳細頁面。
   </para>
   <tip>
    <title>滑鼠懸停時顯示更多詳細資料</title>
    <para>
     有些圖形工具集會在您將滑鼠移至其上時顯示更多詳細資料。
    </para>
   </tip>
   <sect3 xml:id="dashboard-widgets-status">
    <title>狀態工具集</title>
    <para>
     <guimenu>狀態</guimenu>工具集為您提供有關叢集目前狀態的簡要綜覽。
    </para>
    <figure>
     <title>狀態工具集</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>叢集狀態</guimenu></term>
      <listitem>
       <para>
        顯示有關叢集狀態的基本資訊。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>監控程式</guimenu></term>
      <listitem>
       <para>
        顯示執行中監控程式的數量及其仲裁。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>OSD</guimenu></term>
      <listitem>
       <para>
        顯示 OSD 的總數及處於「up」和「in」狀態的 OSD 數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>管理員精靈</guimenu></term>
      <listitem>
       <para>
        顯示使用中和待命 Ceph 管理員精靈的數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>主機</guimenu></term>
      <listitem>
       <para>
        顯示叢集節點的總數。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>物件閘道</guimenu></term>
      <listitem>
       <para>
        顯示執行中物件閘道的數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>中繼資料伺服器</guimenu></term>
      <listitem>
       <para>
        顯示中繼資料伺服器的數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>iSCSI 閘道</guimenu></term>
      <listitem>
       <para>
        顯示設定的 iSCSI 閘道的數量。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-performance">
    <title>效能工具集</title>
    <para>
     <guimenu>效能</guimenu>工具集提供 Ceph 用戶端的基本效能資料。
    </para>
    <figure>
     <title>效能工具集</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>用戶端 IOPS</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>用戶端輸送量</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>用戶端讀取/寫入</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>復原輸送量</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>整理</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-capacity">
    <title>容量工具集</title>
    <para>
     <guimenu>容量</guimenu>工具集顯示有關儲存容量的簡要資訊。
    </para>
    <figure>
     <title>容量工具集</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>池</guimenu></term>
      <listitem>
       <para>
        顯示叢集中池的數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>原始容量</guimenu></term>
      <listitem>
       <para>
        顯示已用與可用原始儲存容量的比率。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>物件</guimenu></term>
      <listitem>
       <para>
        顯示叢集中儲存的資料物件數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>每個 OSD 的 PG 數</guimenu></term>
      <listitem>
       <para>
        顯示每個 OSD 的放置群組數量。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>PG 狀態</guimenu></term>
      <listitem>
       <para>
        顯示依照狀態分組的放置群組圖表。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-mgmt">
  <title>管理儀表板使用者和角色</title>

  <para>
   如需在指令行上使用 Ceph 指令執行儀表板使用者管理的說明，請參閱<xref linkend="dashboard-user-roles"/>。
  </para>

  <para>
   本節介紹如何使用儀表板 Web 使用者介面來管理使用者帳戶。
  </para>

  <sect2 xml:id="dashboard-listing-users">
   <title>列出使用者</title>
   <para>
    按一下公用程式功能表中的 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject>，然後選取<guimenu>使用者管理</guimenu>。
   </para>
   <para>
    該清單包含每個使用者的使用者名稱、全名、電子郵件及為其指定的角色清單。
   </para>
   <figure>
    <title>使用者管理</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-users">
   <title>新增新使用者</title>
   <para>
    按一下表標題左上方的<guimenu>新增</guimenu>可新增新使用者。輸入其使用者名稱、密碼、全名 (選擇性) 和電子郵件。
   </para>
   <figure>
    <title>新增使用者</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    按一下鉛筆小圖示可為使用者指定預先定義的角色。按一下<guimenu>建立使用者</guimenu>進行確認。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-users">
   <title>編輯使用者</title>
   <para>
    按一下使用者表中對應的列，然後選取<guimenu>編輯</guimenu>可編輯使用者的詳細資料。按一下<guimenu>更新使用者</guimenu>進行確認。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-users">
   <title>刪除使用者</title>
   <para>
    按一下使用者表中對應的列，然後選取<guimenu>刪除</guimenu>可刪除使用者帳戶。啟用<guimenu>是的，我確定</guimenu>核取方塊，然後按一下<guimenu>刪除使用者</guimenu>進行確認。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-listing-user-roles">
   <title>列出使用者角色</title>
   <para>
    按一下公用程式功能表中的 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject>，然後選取<guimenu>使用者管理</guimenu>。然後按一下<guimenu>角色</guimenu>索引標籤。
   </para>
   <para>
    該清單包含每個角色的名稱、描述及其是否屬於系統角色。
   </para>
   <figure>
    <title>使用者職能</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-roles">
   <title>新增自訂角色</title>
   <para>
    按一下表標題左上方的<guimenu>新增</guimenu>可新增新的自訂角色。輸入其名稱、描述並設定針對個別主題的必需許可權。
   </para>
   <tip>
    <title>清除自訂角色</title>
    <para>
     如果您建立了自訂使用者角色，並打算以後使用 <command>ceph.purge</command> 執行程式移除 Ceph 叢集，則需要先清除自訂角色。如需更多詳細資料，請參閱<xref linkend="deepsea-ceph-purge"/>。
    </para>
   </tip>
   <figure>
    <title>新增角色</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>多項目啟用</title>
    <para>
     透過啟用主題名稱前的核取方塊，您可以啟用針對該主題的所有許可權。透過啟用<guimenu>全部</guimenu>核取方塊，您可以啟用針對所有主題的所有許可權。
    </para>
   </tip>
   <para>
    按一下<guimenu>建立角色</guimenu>進行確認。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-roles">
   <title>編輯自訂角色</title>
   <para>
    按一下自訂角色表中對應的列，然後選取表標題左上方的<guimenu>編輯</guimenu>，即可編輯自訂角色的描述和許可權。按一下<guimenu>更新角色</guimenu>進行確認。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-roles">
   <title>刪除自訂角色</title>
   <para>
    按一下角色表中對應的列，然後選取<guimenu>刪除</guimenu>可刪除角色。啟用<guimenu>是的，我確定</guimenu>核取方塊，然後按一下<guimenu>刪除角色</guimenu>進行確認。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster">
  <title>檢視叢集內部</title>

  <para>
   <guimenu>叢集</guimenu>功能表項目可讓您檢視有關 Ceph 叢集主機、OSD、MON、CRUSH 地圖和記錄檔案內容的詳細資訊。
  </para>

  <sect2 xml:id="dashboard-cluster-hosts">
   <title>叢集節點</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>主機</guimenu></menuchoice>可檢視叢集節點清單。
   </para>
   <figure>
    <title>Hosts (主機)</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    按一下<guimenu>主機名稱</guimenu>欄中的節點名稱可檢視該節點的效能詳細資料。
   </para>
   <para>
    <guimenu>服務</guimenu>欄中會列出每個相關節點上的所有執行中精靈。按一下精靈名稱可檢視其詳細組態。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-monitors">
   <title>Ceph 監控程式</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>監控程式</guimenu></menuchoice>可檢視具有執行中 Ceph 監控程式的叢集節點清單。該清單包含每個監控程式的階層編號、外部 IP 位址和開啟的工作階段數量。
   </para>
   <para>
    清單分為兩個表：一個表顯示<emphasis>屬於</emphasis>仲裁成員的 Ceph 監控程式，另一個表顯示<emphasis>不屬於</emphasis>仲裁成員的 Ceph 監控程式。
   </para>
   <para>
    按一下<guimenu>名稱</guimenu>欄中的節點名稱可檢視相關的 Ceph 監控程式組態。
   </para>
   <para>
    <guimenu>狀態</guimenu>表顯示有關執行中 Ceph 監控程式的一般統計資料。
   </para>
   <figure>
    <title>Ceph 監控程式</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-osds">
   <title>Ceph OSD</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>OSD</guimenu></menuchoice> 可檢視具有執行中 OSD 精靈/磁碟的節點清單。該清單包含每個節點的名稱、狀態、放置群組數量、大小、使用率、不同時間的讀取/寫入圖表，以及每秒讀取/寫入操作次數比率。
   </para>
   <figure>
    <title>Ceph OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    按一下表標題中的<guimenu>設定叢集範圍的旗標</guimenu>，會開啟一個快顯視窗，其中會列出適用於整個叢集的旗標。您可以啟用或停用個別旗標，然後按一下<guimenu>提交</guimenu>進行確認。
   </para>
   <figure>
    <title>OSD 旗標</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    按一下表標題中的<guimenu>設定叢集範圍的復原優先程度</guimenu>，會開啟一個快顯視窗，其中會列出適用於整個叢集的 OSD 復原優先程度。您可以啟用偏好的優先程度設定檔，並對下面的個別值進行微調。按一下<guimenu>提交</guimenu>以確認。
   </para>
   <figure>
    <title>OSD 復原優先程度</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    按一下<guimenu>主機</guimenu>欄中的節點名稱，可檢視含有 OSD 設定和效能詳細資料的擴充表。您可以在數個索引標籤之間切換，以便查看<guimenu>屬性</guimenu>、<guimenu>中繼資料</guimenu>、<guimenu>效能計數器</guimenu>清單，以及讀取/寫入操作次數的圖形<guimenu>長條圖</guimenu>。
   </para>
   <figure>
    <title>OSD 詳細資料</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>在 OSD 上執行特定任務</title>
    <para>
     按一下 OSD 節點名稱後，表中該節點對應的列的色彩會發生細微變化，這表示您現在可以在該節點上執行任務了。按一下表標題左上方的向下箭頭，然後選取要執行的任務，例如<guimenu>深層整理</guimenu>。為任務輸入所需的值 (選擇性)，然後確認在節點上執行該任務。
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dahsboard-cluster-config">
   <title>磁簇組態</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>組態</guimenu></menuchoice>可檢視 Ceph 叢集組態選項的完整清單。該清單包含選項的名稱、其簡短描述，以及選項的目前值和預設值。
   </para>
   <figure>
    <title>磁簇組態</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    按一下特定選項列可反白并查看該選項的詳細資訊，例如其數值類型、允許的最大和最小值、是否可在執行時期更新等等。
   </para>
   <para>
    反白特定選項後，您可以透過按一下表標題左上方的<guimenu>編輯</guimenu>按鈕來編輯它的值。按一下<guimenu>儲存</guimenu>確認變更。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-crushmap">
   <title>CRUSH 地圖</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>CRUSH 地圖</guimenu></menuchoice>可檢視叢集的 CRUSH 地圖。如需 CRUSH 地圖的更多一般資訊，請參閱<xref linkend="op-crush"/>。
   </para>
   <para>
    按一下根、節點或個別 OSD 可檢視更多詳細資訊，例如 CRUSH 權數、地圖樹狀結構的深度、OSD 的裝置類別等等。
   </para>
   <figure>
    <title>CRUSH 地圖</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-mgr-plugins">
   <title>管理員模組</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>管理員模組</guimenu></menuchoice>可檢視可用 Ceph 管理員模組的清單。每行包含模組名稱以及該模組目前啟用與否的資訊。
   </para>
   <figure>
    <title>管理員模組</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    反白特定模組後，您可以在下面的<guimenu>詳細資料</guimenu>表中查看其詳細設定。按一下表標題左上方的<guimenu>編輯</guimenu>按鈕可進行編輯。按一下<guimenu>更新</guimenu>確認變更。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-logs">
   <title>記錄</title>
   <para>
    按一下<menuchoice><guimenu>叢集</guimenu><guimenu>記錄</guimenu></menuchoice>可檢視叢集的最近記錄項目清單。每行包含一個時戳、記錄項目的類型及自身所記錄的訊息。
   </para>
   <para>
    按一下<guimenu>稽核記錄</guimenu>索引標籤可檢視稽核子系統的記錄項目。如需啟用或停用稽核的指令，請參閱<xref linkend="dashboard-auditing"/>。
   </para>
   <figure>
    <title>記錄</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-pools">
  <title>管理池</title>

  <tip>
   <title>池的更多資訊</title>
   <para>
    如需 Ceph 池的更多一般資訊，請參閱<xref linkend="ceph-pools"/>。如需糾刪碼池特定的資訊，請參閱<xref linkend="cha-ceph-erasure"/>。
   </para>
  </tip>

  <para>
   若要列出所有可用的池，請按一下主功能表中的 <guimenu>Pools</guimenu> (池)。
  </para>

  <para>
   該清單顯示每個池的名稱、類型、相關應用程式、放置群組狀態、複本大小、糾刪碼設定檔、使用率，以及讀取/寫入統計資料。
  </para>

  <figure>
   <title>池清單</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   若要檢視有關池的更多詳細資訊，請啟用表中對應的列。
  </para>

  <sect2 xml:id="dashboard-pools-create">
   <title>新增新池</title>
   <para>
    若要新增新池，請按一下池表左上方的<guimenu>新增</guimenu>。您可以在池表單中輸入池的名稱、類型、放置群組數量及其他資訊，例如池的應用程式、壓縮模式和演算法。池表單會自行預先計算最適合此特定池的放置群組數量。計算以叢集中的 OSD 數量和所選池類型及其特定設定為依據。如果手動設定了放置群組數量，計算出的數量會取代設定的數量。按一下<guimenu>建立池</guimenu>進行確認。
   </para>
   <figure>
    <title>新增新池</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-pools-delete">
   <title>刪除池</title>
   <para>
    若要刪除某個池，請按一下表中對應的列，然後按一下池表左上方的<guimenu>刪除</guimenu>。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-pools-edit">
   <title>編輯池的選項</title>
   <para>
    若要編輯某個池的選項，請按一下表中對應的列，然後選取池表左上方的<guimenu>編輯</guimenu>。
   </para>
   <para>
    您可以變更池的名稱、增加放置群組的數量、變更池的應用程式清單和壓縮設定。按一下<guimenu>編輯池</guimenu>進行確認。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-rbds">
  <title>管理 RADOS 區塊裝置</title>

  <para>
   若要列出所有可用的 RADOS 區塊裝置 (RBD)，請按一下主功能表中的<menuchoice><guimenu>區塊裝置</guimenu><guimenu>影像</guimenu></menuchoice>。
  </para>

  <para>
   該清單顯示有關裝置的簡要資訊，例如裝置的名稱、相關池名稱、裝置大小、裝置上物件的數量和大小。
  </para>

  <figure>
   <title>RBD 影像清單</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dashboard-rbds-details">
   <title>檢視有關 RBD 的詳細資料</title>
   <para>
    若要檢視某部裝置的更多詳細資訊，請按一下表中對應的列：
   </para>
   <figure>
    <title>RBD 詳細資料</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-configuration">
   <title>檢視 RBD 的組態</title>
   <para>
    若要檢視某部裝置的詳細組態，請按一下表中對應的列，然後按一下下方表中的<guimenu>組態</guimenu>索引標籤：
   </para>
   <figure>
    <title>RBD 組態</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-create">
   <title>建立 RBD</title>
   <para>
    若要新增新裝置，請按一下表標題左上方的<guimenu>新增</guimenu>，然後在<guimenu>建立 RBD</guimenu> 螢幕上執行以下操作：
   </para>
   <figure>
    <title>新增新的 RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      輸入新裝置的名稱。請參閱<xref linkend="sysreq-naming"/>以瞭解命名限制。
     </para>
    </step>
    <step>
     <para>
      選取要在其中建立新 RBD 裝置且指定了「rbd」應用程式的池。
     </para>
    </step>
    <step>
     <para>
      指定新裝置的大小。
     </para>
    </step>
    <step>
     <para>
      為裝置指定其他選項。若要微調裝置參數，請按一下<guimenu>進階</guimenu>，然後輸入物件大小、分割單位或分割計數的值。若要輸入服務品質 (QoS) 限制，請按一下<guimenu>服務品質</guimenu>，然後輸入限制。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>建立 RBD</guimenu> 進行確認。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dashboard-rbd-delete">
   <title>刪除 RBD</title>
   <para>
    若要刪除某部裝置，請按一下表中對應的列，然後選取表標題左上方的<guimenu>刪除</guimenu>按一下<guimenu>刪除 RBD</guimenu> 確認刪除。
   </para>
   <tip>
    <title>將 RBD 移至垃圾桶</title>
    <para>
     刪除 RBD 的動作無法復原。如果您選擇將裝置<guimenu>移至垃圾桶</guimenu>，那麼稍後還可以將其還原，只需在主表的<guimenu>垃圾桶</guimenu>索引標籤上選取該裝置，然後按一下表標題左上方的<guimenu>還原</guimenu>。
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-rbds-snapshots">
   <title>RADOS 區塊裝置快照</title>
   <para>
    若要建立 RADOS 區塊裝置快照，請按一下表中裝置對應的列，然後在主表下的<guimenu>快照</guimenu>索引標籤中，按一下表標題左上方的<guimenu>建立</guimenu>。輸入快照的名稱，然後按一下<guimenu>建立快照</guimenu>進行確認。
   </para>
   <para>
    選取快照後，您可以在裝置上執行其他動作，例如重新命名、保護、克隆、複製或刪除。<guimenu>復原</guimenu>可根據目前的快照還原裝置的狀態。
   </para>
   <figure>
    <title>RBD 快照</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-iscsi">
   <title>管理 iSCSI 閘道</title>
   <tip>
    <title>iSCSI 閘道的更多資訊</title>
    <para>
     如需 iSCSI 閘道的更多一般資訊，請參閱<xref linkend="cha-ceph-as-iscsi"/>和<xref linkend="cha-ceph-iscsi"/>。
    </para>
   </tip>
   <para>
    若要列出所有可用閘道和對應的影像，請按一下主功能表中的<menuchoice><guimenu>區塊</guimenu><guimenu>iSCSI</guimenu></menuchoice>。<guimenu>綜覽</guimenu>索引標籤即會開啟，列出目前設定的 iSCSI 閘道和對應的 RBD 影像。
   </para>
   <para>
    <guimenu>閘道</guimenu>表列出每個閘道的狀態、iSCSI 目標數量及工作階段數量。<guimenu>影像</guimenu>表列出每個對應影像的名稱、相關池名稱、後備儲存類別，以及其他統計資料詳細資訊。
   </para>
   <para>
    <guimenu>目標</guimenu>索引標籤列出目前設定的 iSCSI 目標。
   </para>
   <figure>
    <title>iSCSI 目標清單</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    若要檢視有關某個目標的更多詳細資料，請按一下表中對應的列。一個樹狀結構綱要即會開啟，列出磁碟、入口網站、啟動器和群組。按一下某一項可將其展開並檢視詳細內容，右側的表中也可能會顯示其相關組態。
   </para>
   <figure>
    <title>iSCSI 目標詳細資料</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-iscsi-create">
    <title>新增 iSCSI 目標</title>
    <para>
     若要新增新的 iSCSI 目標，請按一下<guimenu>目標</guimenu>表左上方的<guimenu>新增</guimenu>，並輸入所需資訊。
    </para>
    <figure>
     <title>新增新目標</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       輸入新閘道的目標位址。
      </para>
     </step>
     <step>
      <para>
       按一下<guimenu>新增入口網站</guimenu>，然後從清單中選取一或多個 iSCSI 入口網站。
      </para>
     </step>
     <step>
      <para>
       按一下<guimenu>新增影像</guimenu>，然後為閘道選取一或多個 RBD 影像。
      </para>
     </step>
     <step>
      <para>
       如果您需要使用驗證才能存取閘道，請選取<guimenu>驗證</guimenu> 核取方塊並輸入身分證明。選取<guimenu>雙向驗證</guimenu>和<guimenu>探查驗證</guimenu>之後，您可看到更多進階驗證選項。
      </para>
     </step>
     <step>
      <para>
       按一下<guimenu>建立目標</guimenu>進行確認。
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-edit">
    <title>編輯 iSCSI 目標</title>
    <para>
     若要編輯某個現有 iSCSI 目標，請按一下<guimenu>目標</guimenu>表中對應的列，然後按一下表左上方的<guimenu>編輯</guimenu>。
    </para>
    <para>
     然後，您便可以修改 iSCSI 目標、新增或刪除入口網站，以及新增或刪除相關 RBD 影像。您還可以調整閘道的驗證資訊。
    </para>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-delete">
    <title>刪除 iSCSI 目標</title>
    <para>
     若要刪除某個 iSCSI 目標，請按一下表中對應的列，然後選取閘道表左上方的<guimenu>刪除</guimenu>。啟用<guimenu>是的，我確定</guimenu>，然後按一下<guimenu>刪除 iSCSI</guimenu> 進行確認。
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-qos">
   <title>RBD 服務品質 (QoS)</title>
   <tip>
    <title>更多資訊</title>
    <para>
     如需 RBD QoS 組態選項的更多一般資訊和描述，請參閱<xref linkend="rbd-qos"/>。
    </para>
   </tip>
   <para>
    您可以在不同層級設定 QoS 選項。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      全域
     </para>
    </listitem>
    <listitem>
     <para>
      基於每個池
     </para>
    </listitem>
    <listitem>
     <para>
      基於每個影像
     </para>
    </listitem>
   </itemizedlist>
   <para>
    <emphasis>全域</emphasis>組態位於清單頂部，將用於所有新建立的 RBD 影像，以及不會覆寫池或 RBD 影像層相應值的影像。基於每個池或影像設定的值可能會覆寫全域指定的選項值。對某個池指定的選項將適用於該池的所有 RBD 影像，除非對影像設定的組態選項覆寫了池選項。對影像指定的選項將覆寫對池指定的選項以及全域指定的選項。
   </para>
   <para>
    因此可以如此操作：全域定義預設值，對預設值進行調整以適合特定池的所有 RBD 影像，然後覆寫個別 RBD 影像的池組態。
   </para>
   <sect3 xml:id="dash-rbd-qos-global">
    <title>全域設定選項</title>
    <para>
     若要全域設定 RBD 選項，請在主功能表中選取<menuchoice><guimenu>叢集</guimenu>
     <guimenu>組態</guimenu></menuchoice>。
    </para>
    <para>
     若要列出所有可用的全域組態選項，請按一下<menuchoice><guimenu>層級</guimenu>
     <guimenu>進階</guimenu></menuchoice>。然後在搜尋欄位中過濾「rbd_qos」，以過濾表的結果。QoS 的所有可用組態選項即會列出。若要變更某個值，請按一下表中對應的列，然後選取表左上方的<guimenu>編輯</guimenu>。<guimenu>編輯</guimenu>對話方塊包含 6 個不同的欄位供您指定值。在 <guimenu>mgr</guimenu> 文字方塊中，RBD 組態選項值是必填的。請注意，此對話方塊與其他對話方塊不同，不允許您使用方便的單位指定值。您只能使用位元組或 IOPS 單位設定這些值，具體取決於您要編輯的選項。
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-create">
    <title>對新池設定選項</title>
    <para>
     若要建立新池並對其設定 RBD 組態選項，請按一下<menuchoice><guimenu>池</guimenu>
     <guimenu>建立</guimenu></menuchoice>。選取<guimenu>複本</guimenu>做為池類型。然後，您需要將 <guimenu>rbd</guimenu> 應用程式標記新增至池，這樣才能設定 RBD QoS 選項。
    </para>
    <note>
     <para>
      對於糾刪碼池是無法設定 RBD QoS 組態選項的。若要為糾刪碼池設定 RBD QoS 選項，您需要編輯 RBD 影像的複本中繼資料池。該組態隨後將套用於該影像的糾刪碼資料池。
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-edit">
    <title>對現有池設定選項</title>
    <para>
     若要對某個現有池設定 RBD QoS 選項，請按一下<guimenu>池</guimenu>，然後按一下表中該池對應的列，並選取表左上方的<guimenu>編輯</guimenu>。
    </para>
    <para>
     對話方塊中應該就會顯示 <guimenu>RBD 組態</guimenu>區段，下方是<guimenu>服務品質</guimenu>區段。
    </para>
    <note>
     <para>
      如果 <guimenu>RBD 組態</guimenu>和<guimenu>服務品質</guimenu>區段均未顯示，則可能是因為您正在編輯無法用於設定 RBD 組態選項的<emphasis>糾刪碼</emphasis>池，或該池未設定為供 RBD 影像使用。在下一個案例中，將為池指定 <guimenu>rbd</guimenu> 應用程式標記，相應的組態區段將會顯示。
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-qos">
    <title>組態選項</title>
    <para>
     按一下<guimenu>服務品質 +</guimenu> 以展開組態選項。所有可用選項的清單即會顯示。文字方塊中已顯示組態選項的單位。對於任何每秒位元組數 (BPS) 選項，您可以選擇使用「1M」或「5G」之類的捷徑。系統會自動將其轉換為對應的「1 MB/s」和「5 GB/s」。
    </para>
    <para>
     按一下每個文字方塊右側的重設按鈕，將移除對該池設定的所有值。此操作不會移除全域設定或對 RBD 影像所設定選項的組態值。
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-create">
    <title>使用新 RBD 影像建立 RBD QoS 選項</title>
    <para>
     若要建立 RBD 影像並對該影像設定 RBD QoS 選項，請選取<menuchoice><guimenu>區塊</guimenu>
     <guimenu>影像</guimenu></menuchoice>，然後按一下<guimenu>建立</guimenu>。按一下<guimenu>進階</guimenu>可展開進階組態區段。按一下<guimenu>服務品質</guimenu>可開啟所有可用組態選項。
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-edit">
    <title>編輯現有影像的 RBD QoS 選項</title>
    <para>
     若要編輯現有影像的 RBD QoS 選項，請選取<menuchoice><guimenu>區塊</guimenu>
     <guimenu>影像</guimenu></menuchoice>，然後按一下表中該池對應的列，最後按一下<guimenu>編輯</guimenu>。編輯對話方塊隨即顯示。按一下<guimenu>進階</guimenu>可展開進階組態區段。按一下<guimenu>服務品質</guimenu>可開啟所有可用組態選項。
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-copy">
    <title>在複製或克隆影像時變更組態選項</title>
    <para>
     如果克隆或複製了 RBD 影像，系統預設還會複製對該特定影像設定的值。如果您想在複製或克隆期間變更這些值，可透過在複製/克隆對話方塊中指定更新的組態值來進行變更，此程序與建立或編輯 RBD 影像時的方式相同。執行此操作只能設定 (或重設) 所複製或克隆的 RBD 影像的值，無法變更來源 RBD 影像組態，也無法變更全域組態。
    </para>
    <para>
     如果您選擇在複製/克隆時重設選項值，系統將不會對該影像設定該選項的值。這表示系統將使用為父池指定的該選項的任何值 (如果為父池設定了相應值)。如果沒有為父池設定相應值，則將使用全域預設值。
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-mirror">
   <title>RBD 鏡像</title>
   <tip>
    <title>一般資訊</title>
    <para>
     如需 RADOS 區塊裝置鏡像的一般資訊和指令行方法，請參閱<xref linkend="ceph-rbd-mirror"/>。
    </para>
   </tip>
   <para>
    您可以使用 Ceph Dashboard 在兩個或更多叢集之間設定 RBD 影像複製。
   </para>
   <sect3 xml:id="rbd-mirror-primary-secondary">
    <title>主要叢集和次要叢集</title>
    <para>
     <emphasis>主要</emphasis>叢集是用於建立包含影像的原始池的叢集。<emphasis>次要</emphasis>叢集是用於從<emphasis>主要</emphasis>叢集複製池/影像的叢集。
    </para>
    <note>
     <title>相對命名</title>
     <para>
      在複製情境中，<emphasis>主要</emphasis>與<emphasis>次要</emphasis>這兩個術語有可能是相對的，因為相較於叢集來說，它們與個別池更為相關。例如，在雙向複製中，可將一個池從<emphasis>主要</emphasis>叢集鏡像到<emphasis>次要</emphasis>叢集，與此同時，也可以將另一個池從<emphasis>次要</emphasis>叢集鏡像到<emphasis>主要</emphasis>叢集。
     </para>
    </note>
   </sect3>
   <sect3 xml:id="rbd-mirroring-replication-modes">
    <title>複製模式</title>
    <para>
     資料複製有兩種模式：
    </para>
    <itemizedlist>
     <listitem>
      <para>
       使用<emphasis>池</emphasis>模式，您可以複製池中的所有 RBD 影像。
      </para>
     </listitem>
     <listitem>
      <para>
       使用<emphasis>影像</emphasis>模式，您可以僅啟用池中特定影像的鏡像。
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui-daemon">
    <title>設定 <systemitem class="daemon">rbd-mirror</systemitem> 精靈</title>
    <para>
     <systemitem class="daemon">rbd-mirror</systemitem> 精靈負責執行實際的叢集資料複製。若要安裝、設定以及執行該精靈，請執行以下步驟：
    </para>
    <procedure>
     <step>
      <para>
       需要在<emphasis>次要</emphasis>叢集管理節點以外的其他某個節點上執行 <systemitem class="daemon">rbd-mirror</systemitem> 精靈。系統預設不會安裝該精靈，因此需手動安裝：
      </para>
<screen><prompt>root@minion &gt; </prompt>zypper install rbd-mirror</screen>
     </step>
     <step>
      <para>
       在<emphasis>主要</emphasis>叢集上，為 <systemitem class="daemon">rbd-mirror</systemitem> 精靈程序建立唯一的 Ceph 使用者 ID。在此範例中，我們使用「uid1」做為使用者 ID：
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd'
[client.rbd-mirror.uid1]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       在您先前安裝了
       <package>rbd-mirror</package> 套件的<emphasis>次要</emphasis>叢集節點上，建立該 Ceph 使用者，並將輸出儲存到金鑰圈：
      </para>
<screen><prompt>root@minion &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd' \
 &gt; /etc/ceph/ceph.client.rbd-mirror.uid1.keyring</screen>
     </step>
     <step>
      <para>
       在同一節點上，啟用並執行 <systemitem class="daemon">rbd-mirror</systemitem> 服務：
      </para>
<screen><prompt>root@minion &gt; </prompt>systemctl enable ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl start ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl status ceph-rbd-mirror@rbd-mirror.uid1
● ceph-rbd-mirror@rbd-mirror.uid1.service - Ceph rbd mirror daemon
   Loaded: loaded (/usr/lib/systemd/system/ceph-rbd-mirror@.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2019-10-04 07:48:53 EDT; 2 days ago
 Main PID: 212434 (rbd-mirror)
    Tasks: 47
   CGroup: /system.slice/system-ceph\x2drbd\x2dmirror.slice/ceph-rbd-mirror@rbd-mirror.uid1.service
           └─212434 /usr/bin/rbd-mirror -f --cluster ceph --id rbd-mirror.test --setuser ceph --setgroup ceph

Oct 04 07:48:53 doc-ses6min4 systemd[1]: Started Ceph rbd mirror daemon.
</screen>
     </step>
     <step>
      <para>
       在<emphasis>次要</emphasis>叢集的 Ceph Dashboard 上，導覽至<menuchoice><guimenu>區塊</guimenu><guimenu>鏡像</guimenu></menuchoice>。<guimenu>精靈</guimenu>表的左側會顯示處於使用中狀態的執行中 <systemitem>rbd-mirror</systemitem> 精靈及其狀態。
      </para>
      <figure>
       <title>執行中 <systemitem class="daemon">rbd-mirror</systemitem> 精靈</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui">
    <title>在 Ceph Dashboard 中設定池複製</title>
    <para>
     <systemitem class="daemon">rbd-mirror￼</systemitem> 精靈需要擁有主要叢集的存取權，才能鏡像 RBD 影像。因此，您需要在主要叢集上建立<emphasis>對等</emphasis> Ceph 使用者帳戶，並告知次要叢集其金鑰圈資訊：
    </para>
    <procedure>
     <step>
      <para>
       在<emphasis>主要</emphasis>叢集上，建立將用於資料複製的新「client.rbd-mirror-peer」使用者：
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror-peer \
 mon 'profile rbd' osd 'profile rbd'
[client.rbd-mirror-peer]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       在<emphasis>主要</emphasis>和<emphasis>次要</emphasis>兩個叢集上，建立名稱相同的池，並為其指定「rbd」應用程式。如需建立新池的更多詳細資料，請參閱<xref linkend="dashboard-pools-create"/>。
      </para>
      <figure>
       <title>建立具有 RBD 應用程式的池</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       在<emphasis>主要</emphasis>和<emphasis>次要</emphasis>兩個叢集的儀表板上，導覽至<menuchoice><guimenu>區塊</guimenu><guimenu>鏡像</guimenu></menuchoice>。在<guimenu>池</guimenu>表右側按一下要複製的池的名稱，然後按一下<guimenu>編輯模式</guimenu>，並選取複製模式。在此範例中，我們將使用<emphasis>池</emphasis>複製模式，也就是說，將複製給定池中的所有影像。按一下<guimenu>更新</guimenu>進行確認。
      </para>
      <figure>
       <title>設定複製模式</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <important>
       <title>主要叢集上的錯誤或警告</title>
       <para>
        更新複製模式後，右側相應的欄中會顯示錯誤或警告旗標。這是因為尚未為池指定用於複製的對等使用者。對於<emphasis>主要</emphasis>叢集，請省略此旗標，因為我們僅需為<emphasis>次要</emphasis>叢集指定對等使用者。
       </para>
      </important>
     </step>
     <step>
      <para>
       在<emphasis>次要</emphasis>叢集的儀表板上，導覽至<menuchoice><guimenu>區塊</guimenu><guimenu>鏡像</guimenu></menuchoice>。按一下要鏡像的池名稱並選取<guimenu>新增對等</guimenu>，以便將「client.rbd-mirror-peer」使用者金鑰圈註冊到該池中。提供<emphasis>主要</emphasis>叢集的詳細資料：
      </para>
      <figure>
       <title>新增對等身分證明</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <variablelist>
       <varlistentry>
        <term><guimenu>叢集名稱</guimenu></term>
        <listitem>
         <para>
          用於識別主要叢集的任意唯一字串，例如「primary」。該叢集名稱不得與實際環境中次要叢集的名稱相同。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>CephX ID</guimenu></term>
        <listitem>
         <para>
          您建立做為鏡像對等的 Ceph 使用者 ID。此範例中為「rbd-mirror-peer」。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>監控程式位址</guimenu></term>
        <listitem>
         <para>
          主要叢集的 Ceph 監控程式節點的 IP 位址/主機名稱逗號分隔清單。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>CephX 金鑰</guimenu></term>
        <listitem>
         <para>
          與對等使用者 ID 相關的金鑰。您可以透過在主要叢集上執行以下範例指令來擷取該金鑰：
         </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth print_key client.rbd-mirror-peer</screen>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       按一下<guimenu>提交</guimenu>以確認。
      </para>
      <figure>
       <title>複本池清單</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-test">
    <title>確認 RBD 影像複製是否有效</title>
    <para>
     如果 <systemitem class="daemon">rbd-mirror</systemitem> 精靈正在執行，在 Ceph Dashboard 上設定 RBD 影像複製後，就需要確認複製實際上是否有效：
    </para>
    <procedure>
     <step>
      <para>
       在<emphasis>主要</emphasis>叢集的 Ceph Dashboard 上建立 RBD 影像，並將您已建立用於複製目的的池設為其父池。為影像啟用<option>獨佔鎖定</option>和<option>記錄</option>功能。如需如何建立 RBD 影像的詳細資料，請參閱<xref linkend="dashboard-rbds-create"/>。
      </para>
      <figure>
       <title>新 RBD 影像</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       建立要複製的影像後，開啟<emphasis>次要</emphasis>叢集的 Ceph Dashboard，並導覽至<menuchoice><guimenu>區塊</guimenu><guimenu>鏡像</guimenu></menuchoice>。右側的<guimenu>池</guimenu>表將在<guimenu>遠端數量</guimenu>中所示數量的影像中反映該變更，並會同步<guimenu>本地數量</guimenu>中所示數量的影像。
      </para>
      <figure>
       <title>同步的新 RBD 影像</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <tip>
       <title>複製進度</title>
       <para>
        頁面底部的<guimenu>影像</guimenu>表會顯示 RBD 影像的複製狀態。<guimenu>問題</guimenu>索引標籤包含可能的問題，<guimenu>正在同步</guimenu>索引標籤顯示影像複製的進度，<guimenu>準備就緒</guimenu>索引標籤列出所有已成功複製的影像。
       </para>
       <figure>
        <title>RBD 影像的複製狀態</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </tip>
     </step>
     <step>
      <para>
       在<emphasis>主要</emphasis>叢集上，將資料寫入 RBD 影像。在<emphasis>次要</emphasis>叢集的 Ceph Dashboard 上，導覽至<menuchoice><guimenu>區塊</guimenu><guimenu>影像</guimenu></menuchoice>，並監控相應影像大小的增長是否與主要叢集上寫入的資料一致。
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dash-webui-nfs">
  <title>管理 NFS Ganesha</title>

  <tip>
   <title>NFS Ganesha 的更多資訊</title>
   <para>
    如需 NFS Ganesha 的更多一般資訊，請參閱<xref linkend="cha-ceph-nfsganesha"/>。
   </para>
  </tip>

  <para>
   若要列出所有可用的 NFS 輸出項，請按一下主功能表中的 <guimenu>NFS</guimenu>。
  </para>

  <para>
   該清單會顯示每個輸出的目錄、精靈主機名稱、儲存後端類型以及存取類型。
  </para>

  <figure>
   <title>NFS 輸出項清單</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   若要檢視某個 NFS 輸出的更多詳細資訊，請按一下表中對應的列。
  </para>

  <figure>
   <title>NFS 輸出項詳細資料</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dash-webui-nfs-create">
   <title>新增 NFS 輸出項</title>
   <para>
    若要新增新的 NFS 輸出項，請按一下輸出項表左上方的<guimenu>新增</guimenu>並輸入所需的資訊。
   </para>
   <figure>
    <title>新增新的 NFS 輸出項</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      選取一或多個將執行輸出的 NFS Ganesha 精靈。
     </para>
    </step>
    <step>
     <para>
      選取儲存後端 — <guimenu>CephFS</guimenu> 或<guimenu>物件閘道</guimenu>。
     </para>
    </step>
    <step>
     <para>
      選取使用者 ID 及與後端相關的其他選項。
     </para>
    </step>
    <step>
     <para>
      輸入 NFS 輸出項的目錄路徑。如果該目錄在伺服器上不存在，系統將建立該目錄。
     </para>
    </step>
    <step>
     <para>
      指定與 NFS 相關的其他選項，例如支援的 NFS 通訊協定版本、虛擬、存取類型、匿名存取或傳輸通訊協定。
     </para>
    </step>
    <step>
     <para>
      如果您需要設定限制，以便僅允許特定的用戶端存取，請按一下<guimenu>新增用戶端</guimenu>，並新增它們的 IP 位址以及存取類型和匿名存取選項。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>提交</guimenu>以確認。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-delete">
   <title>刪除 NFS 輸出</title>
   <para>
    若要刪除某個輸出，請按一下表中對應的列，然後選取輸出表左上方的<guimenu>刪除</guimenu>。
   </para>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-edit">
   <title>編輯 NFS 輸出項</title>
   <para>
    若要編輯某個現有輸出，請按一下表中對應的列，然後按一下輸出表左上方的<guimenu>編輯</guimenu>。
   </para>
   <para>
    然後，您便可以調整 NFS 輸出項的所有詳細資料。
   </para>
   <figure>
    <title>編輯 NFS 輸出項</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-mds">
  <title>管理 Ceph 檔案系統</title>

  <tip>
   <title>更多資訊</title>
   <para>
    若要檢視有關 CephFS 的詳細資訊，請參閱<xref linkend="cha-ceph-cephfs"/>。
   </para>
  </tip>

  <sect2 xml:id="dashboard-mds-overview">
   <title>檢視 CephFS 綜覽</title>
   <para>
    在主功能表中按一下<guimenu>檔案系統</guimenu>可檢視所設定檔案系統的綜覽。主表會顯示每個檔案系統的名稱、建立日期，以及檔案系統是否已啟用。
   </para>
   <para>
    按一下表中某個檔案系統對應的列，可檢視其階層以及新增至其中的池的詳細資料。
   </para>
   <figure>
    <title>CephFS 詳細資料</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    您可在螢幕底部查看即時收集的相關 MDS Inode 及用戶端要求數量統計資料。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-ogw">
  <title>管理物件閘道</title>

  <tip>
   <title>物件閘道的更多資訊</title>
   <para>
    如需物件閘道的更多一般資訊，請參閱<xref linkend="cha-ceph-gw"/>。
   </para>
  </tip>

  <sect2 xml:id="dashboard-ogw-view">
   <title>檢視物件閘道</title>
   <para>
    若要檢視設定的物件閘道清單，請按一下<menuchoice><guimenu>物件閘道</guimenu><guimenu>精靈</guimenu></menuchoice>。該清單包含閘道的 ID、執行閘道精靈的叢集節點的主機名稱，以及閘道的版本號碼。
   </para>
   <para>
    按一下表中某個閘道對應的列可檢視該閘道的詳細資訊。<guimenu>效能計數器</guimenu>索引標籤顯示有關讀取/寫入操作及快取統計資料的詳細資料。
   </para>
   <figure>
    <title>閘道的詳細資料</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-ogw-user">
   <title>管理物件閘道使用者</title>
   <para>
    按一下<menuchoice><guimenu>物件閘道</guimenu><guimenu>使用者</guimenu></menuchoice>可檢視現有物件閘道使用者的清單。
   </para>
   <para>
    按一下表中某個使用者對應的列可檢視該使用者帳戶的詳細資料，例如狀態資訊或使用者定額及桶定額詳細資料。
   </para>
   <figure>
    <title>閘道使用者</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-ogw-user-create">
    <title>新增新閘道使用者</title>
    <para>
     若要新增新閘道使用者，請按一下表標題左上方的<guimenu>新增</guimenu>。填寫其身分證明、有關 S3 金鑰及使用者/桶定額的詳細資料，然後按一下<guimenu>新增</guimenu>進行確認。
    </para>
    <figure>
     <title>新增新閘道使用者</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-delete">
    <title>刪除閘道使用者</title>
    <para>
     若要刪除某個閘道使用者，請按一下表中使用者對應的列，然後選取表標題左上方的<guimenu>刪除</guimenu>。啟用<guimenu>是的，我確定</guimenu>核取方塊，然後按一下<guimenu>刪除使用者</guimenu>進行確認。
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-edit">
    <title>編輯閘道使用者詳細資料</title>
    <para>
     若要變更閘道使用者詳細資料，請按一下表中使用者對應的列，然後選取表標題左上方的<guimenu>編輯</guimenu>。
    </para>
    <para>
     修改基本或附加使用者資訊，例如其功能、金鑰、子使用者和定額資訊。按一下<guimenu>更新</guimenu>進行確認。
    </para>
    <para>
     <guimenu>金鑰</guimenu>索引標籤包含唯讀的閘道使用者清單，以及這些使用者的存取金鑰和機密金鑰。若要檢視這些金鑰，請按一下清單中的使用者名稱，然後選取表標題左上方的<guimenu>顯示</guimenu>。在 <guimenu>S3 金鑰</guimenu>對話方塊中，按一下眼睛圖示可顯示金鑰，按一下剪貼板圖示可將相關金鑰複製到剪貼板。
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-ogw-bucket">
   <title>管理物件閘道桶</title>
   <para>
    物件閘道 (OGW) 桶實作了 OpenStack Swift 容器的功能。物件閘道桶可充當儲存資料物件的容器。
   </para>
   <para>
    按一下<menuchoice><guimenu>物件閘道</guimenu><guimenu>桶</guimenu></menuchoice>可檢視 OGW 桶清單。
   </para>
   <sect3 xml:id="dashboard-ogw-bucket-create">
    <title>新增新的桶</title>
    <para>
     若要新增新 OGW 桶，請按一下表標題左上方的<guimenu>新增</guimenu>。輸入桶的名稱，並選取其擁有者。請按 <guimenu>新增</guimenu> 加以確認。
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-view">
    <title>檢視桶詳細資料</title>
    <para>
     若要檢視某個 OGW 桶的詳細資訊，請按一下表中對應的列。
    </para>
    <figure>
     <title>閘道桶詳細資料</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <tip>
     <title>桶定額</title>
     <para>
      您可以在<guimenu>詳細資料</guimenu>表下方查看桶定額設定的詳細資料。
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-edit">
    <title>更新桶的擁有者</title>
    <para>
     按一下表中某個桶對應的列，然後選取表標題左上方的<guimenu>編輯</guimenu>。
    </para>
    <para>
     更新桶的擁有者，然後按一下<guimenu>更新</guimenu>進行確認。
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-delete">
    <title>刪除桶</title>
    <para>
     若要刪除某個 OGW 桶，請按一下表中對應的列，然後選取表標題左上方的<guimenu>刪除</guimenu>。啟用<guimenu>是的，我確定</guimenu>核取方塊，然後按一下<guimenu>刪除桶</guimenu>進行確認。
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-initial-configuration">
  <title>手動組態</title>

  <para>
   本節為更喜歡在指令行上手動組態儀表板設定的使用者提供了進階資訊。
  </para>

  <sect2 xml:id="dashboard-ssl">
   <title>TLS/SSL 支援</title>
   <para>
    所有連至儀表板的 HTTP 連接預設都使用 SSL/TLS 來保障安全。安全連接需要 SSL 證書。您可以使用自行簽署的證書，也可以產生證書並讓知名證書管理中心 (CA) 簽署該證書。
   </para>
   <tip>
    <title>停用 SSL</title>
    <para>
     您可能會出於某種原因需要停用 SSL 支援。例如，如果儀表板是在不支援 SSL 的代理之後執行。
    </para>
    <para>
     停用 SSL 要慎重，因為停用 SSL 後，<emphasis role="bold">使用者名稱和密碼</emphasis>將以<emphasis role="bold">未加密</emphasis>的形式傳送至儀表板。
    </para>
    <para>
     若要停用 SSL，請執行以下指令：
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/ssl false
</screen>
   </tip>
   <tip>
    <title>重新啟動 Ceph 管理員程序</title>
    <para>
     變更 SSL 證書和金鑰後，您需要手動重新啟動 Ceph 管理員程序。您可以透過執行以下指令
    </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph mgr fail<replaceable>ACTIVE-MANAGER-NAME</replaceable></screen>
    <para>
     或停用儀表板模組之後再重新將其啟用的方式來執行此操作，如此還會觸發管理員自行重新繁衍：
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr module disable dashboard
<prompt>cephadm@adm &gt; </prompt>ceph mgr module enable dashboard
</screen>
   </tip>
   <sect3 xml:id="self-sign-certificates">
    <title>自行簽署的證書</title>
    <para>
     為了安全通訊而建立自行簽署的證書的過程非常簡單。採用這種方式可迅速讓儀表板執行起來。
    </para>
    <note>
     <title>網頁瀏覽器控訴</title>
     <para>
      大多數網頁瀏覽器都將對自行簽署的證書發起控訴，並需要在建立與儀表板的安全連接前進行明確確認。
     </para>
    </note>
    <para>
     若要產生並安裝自行簽署的證書，請使用以下內建指令：
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard create-self-signed-cert
</screen>
   </sect3>
   <sect3 xml:id="cert-sign-CA">
    <title>CA 簽署的證書</title>
    <para>
     為了正確保障連至儀表板的連接安全，以及消除網頁瀏覽器對自行簽署的證書的控訴，我們建議使用 CA 簽署的證書。
    </para>
    <para>
     您可以使用如下指令產生證書金鑰組：
    </para>
<screen>
<prompt>root # </prompt>openssl req -new -nodes -x509 \
  -subj "/O=IT/CN=ceph-mgr-dashboard" -days 3650 \
  -keyout dashboard.key -out dashboard.crt -extensions v3_ca
</screen>
    <para>
     以上指令會輸出 <filename>dashboard.key</filename> 和 <filename>dashboard.key.crt</filename> 檔案。獲得 CA 簽署的 <filename>dashboard.key.crt</filename> 檔案後，請執行以下指令為所有 Ceph 管理員例項啟用該證書：
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/key -i dashboard.key
</screen>
    <tip>
     <title>每個管理員例項使用不同的證書</title>
     <para>
      如果您需要為每個 Ceph 管理員例項使用不同的證書，請依如下所示修改指令，並在其中指定例項的名稱。以 Ceph 管理員例項的名稱 (通常是相關的主機名稱) 取代 <replaceable>NAME</replaceable>：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/key -i dashboard.key
</screen>
    </tip>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-hostname-port">
   <title>主機名稱和連接埠號碼</title>
   <para>
    Ceph Dashboard Web 應用程式結合至特定 TCP/IP 位址和 TCP 連接埠。依預設，代管儀表板的目前使用中 Ceph 管理員會結合至 TCP 連接埠 8443 (如果停用 SSL，則結合至 8080 連接埠)。
   </para>
   <para>
    儀表板 Web 應用程式預設結合至「::」，該符號表示所有可用的 IPv4 和 IPv6 位址。您可以使用以下指令變更 Web 應用程式的 IP 位址和連接埠號碼，以使它們適用於所有 Ceph 管理員例項：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   <tip>
    <title>單獨設定 Ceph 管理員例項</title>
    <para>
     因為每個 <systemitem class="daemon">ceph-mgr</systemitem> 精靈都代管著各自的儀表板例項，您可能需要單獨設定每個 Ceph 管理員例項。使用以下指令 (以 <systemitem class="daemon">ceph-mgr</systemitem> 例項的 ID 取代 <replaceable>NAME</replaceable>) 變更特定管理員例項的 IP 位址和連接埠號碼：
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   </tip>
   <tip>
    <title>列出設定的端點</title>
    <para>
     <command>ceph mgr services</command> 指令會顯示目前設定的所有端點。尋找「dashboard」鍵可獲取用於存取儀表板的 URL。
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-username-password">
   <title>使用者名稱與密碼</title>
   <para>
    如果您不想使用預設管理員帳戶，可建立其他使用者帳戶，並將其與至少一個角色相關聯。我們提供了一組預先定義的系統角色供您使用。如需詳細資訊，請參閱<xref linkend="dashboard-user-roles"/>。
   </para>
   <para>
    若要建立具有管理員權限的使用者，請使用以下指令：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USER_NAME</replaceable> <replaceable>PASSWORD</replaceable> administrator
</screen>
  </sect2>

  <sect2 xml:id="dashboard-ogw-enabling">
   <title>啟用物件閘道管理前端</title>
   <para>
    若要使用儀表板的物件閘道管理功能，您需要提供啟用了「system」旗標的使用者的登入身分證明：
   </para>
   <procedure>
    <step>
     <para>
      如果您沒有帶「system」旗標的使用者，請建立一個：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user create --uid=<replaceable>USER_ID</replaceable> --display-name=<replaceable>DISPLAY_NAME</replaceable> --system
</screen>
     <para>
      記下指令輸出中的「access_key」和「secret_key」金鑰。
     </para>
    </step>
    <step>
     <para>
      您還可以使用 <command>radosgw-admin</command> 指令來獲取現有使用者的身分證明：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user info --uid=<replaceable>USER_ID</replaceable>
</screen>
    </step>
    <step>
     <para>
      向儀表板提供收到的身分證明：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-access-key <replaceable>ACCESS_KEY</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-secret-key <replaceable>SECRET_KEY</replaceable>
</screen>
    </step>
   </procedure>
   <para>
    請注意以下幾點事項：
   </para>
   <itemizedlist>
    <listitem>
     <para>
      系統會自動確定物件閘道的主機名稱和連接埠號碼。
     </para>
    </listitem>
    <listitem>
     <para>
      如果使用多個區域，物件閘道會自動確定主區域群組和主區域內的主機。此方式足以符合大部分設定的需求，但在某些情況下，您可能需要手動設定主機名稱和連接埠：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-host <replaceable>HOST</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-port <replaceable>PORT</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      您可能需要進行的額外設定如下：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-scheme <replaceable>SCHEME</replaceable>  # http or https
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-admin-resource <replaceable>ADMIN_RESOURCE</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-user-id <replaceable>USER_ID</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      如果您在物件閘道設定中使用的是自行簽署的證書 (<xref linkend="dashboard-ssl"/>)，請在儀表板中停用證書驗證，以避免發生因證書是由未知 CA 簽署或與主機名稱不符而導致連接遭拒。
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-ssl-verify False
</screen>
    </listitem>
    <listitem>
     <para>
      如果物件閘道處理要求所花的時間過長，導致儀表板逾時，則可調整逾時值 (預設為 45 秒)：
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rest-requests-timeout <replaceable>SECONDS</replaceable>
</screen>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-sso">
   <title>啟用單一登入</title>
   <para>
    <emphasis>單一登入</emphasis> (SSO) 是一種允許使用者以單個 ID 和密碼同時登入多個應用程式的存取控制方法。
   </para>
   <para>
    Ceph Dashboard 支援透過 SAML 2.0 通訊協定對使用者進行外部驗證。由於仍由儀表板負責進行<emphasis>授權</emphasis>，因此您需要先建立使用者帳戶，並將其與所需角色相關聯。不過，可由現有<emphasis>身分提供者</emphasis> (IdP) 來執行<emphasis>驗證</emphasis>。
   </para>
   <para>
    若要設定單一登入，請使用以下指令：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso setup saml2 <replaceable>CEPH_DASHBOARD_BASE_URL</replaceable> \
 <replaceable>IDP_METADATA</replaceable> <replaceable>IDP_USERNAME_ATTRIBUTE</replaceable> \
 <replaceable>IDP_ENTITY_ID</replaceable> <replaceable>SP_X_509_CERT</replaceable> \
 <replaceable>SP_PRIVATE_KEY</replaceable>
</screen>
   <para>
    參數：
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>CEPH_DASHBOARD_BASE_URL</replaceable></term>
     <listitem>
      <para>
       可用於存取 Ceph Dashboard 的基本 URL (例如「https://cephdashboard.local」)。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_METADATA</replaceable></term>
     <listitem>
      <para>
       IdP 中繼資料 XML 的 URL、檔案路徑或內容 (例如「https://myidp/metadata」)。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_USERNAME_ATTRIBUTE</replaceable></term>
     <listitem>
      <para>
       選用。將用於從驗證回應中獲取使用者名稱的屬性。預設為「uid」。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_ENTITY_ID</replaceable></term>
     <listitem>
      <para>
       選用。當 IdP 中繼資料上存在多個實體 ID 時，請使用該參數。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>SP_X_509_CERT</replaceable> / <replaceable>SP_PRIVATE_KEY</replaceable></term>
     <listitem>
      <para>
       選用。Ceph Dashboard (服務提供者) 進行簽署和加密時將使用的證書的檔案路徑或內容。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>SAML 要求</title>
    <para>
     SAML 要求的發出者值將採用以下格式：
    </para>
<screen>
<replaceable>CEPH_DASHBOARD_BASE_URL</replaceable>/auth/saml2/metadata
</screen>
   </note>
   <para>
    若要顯示目前的 SAML 2.0 組態，請執行以下指令：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso show saml2
</screen>
   <para>
    若要停用單一登入，請執行以下指令：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso disable
</screen>
   <para>
    若要檢查是否啟用了 SSO，請執行以下指令：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso status
</screen>
   <para>
    若要啟用 SSO，請執行以下指令：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso enable saml2
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-roles">
  <title>在指令行上管理使用者和角色</title>

  <para>
   本節說明如何管理 Ceph Dashboard 使用的使用者帳戶。該工具可協助您建立或修改使用者帳戶，以及設定正確的使用者角色和許可權。
  </para>

  <sect2 xml:id="dahsboard-user-accounts">
   <title>使用者帳戶</title>
   <para>
    Ceph Dashboard 支援管理多個使用者帳戶。每個使用者帳戶包含使用者名稱、密碼 (使用 <literal>bcrypt</literal> 以加密形式儲存)、選用名稱和選用電子郵件地址。
   </para>
   <para>
    系統將使用者帳戶儲存在 Ceph 管理員的組態資料庫中，並在所有 Ceph 管理員例項之間全域共用該資訊。
   </para>
   <para>
    使用以下指令可管理使用者帳戶：
   </para>
   <variablelist>
    <varlistentry>
     <term>顯示現有使用者：</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>建立新使用者：</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>刪除使用者：</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>更改使用者的密碼:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>修改使用者名稱和電子郵件：</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-permissions">
   <title>使用者角色和許可權</title>
   <para>
    本節介紹您可為使用者角色指定的安全性範圍、如何管理使用者角色，以及如何為使用者帳戶指定角色。
   </para>
   <sect3>
    <title>安全性範圍</title>
    <para>
     使用者帳戶與一組角色相關聯，這些角色定義了該使用者可以存取儀表板的哪些部分。儀表板的各個部分均會劃分在某個<emphasis>安全性</emphasis>範圍內。安全性範圍已預先定義且固定不變。目前可用的安全性範圍如下：
    </para>
    <variablelist>
     <varlistentry>
      <term>hosts</term>
      <listitem>
       <para>
        包含與<guimenu>主機</guimenu>功能表項目相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>config-opt</term>
      <listitem>
       <para>
        包含與 Ceph 組態選項管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool</term>
      <listitem>
       <para>
        包含與池管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>osd</term>
      <listitem>
       <para>
        包含與 Ceph OSD 管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>monitor</term>
      <listitem>
       <para>
        包含與 Ceph 監控程式管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-image</term>
      <listitem>
       <para>
        包含與 RADOS 區塊裝置影像管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-mirroring</term>
      <listitem>
       <para>
        包含與 RADOS 區塊裝置鏡像管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>iscsi</term>
      <listitem>
       <para>
        包含與 iSCSI 管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw</term>
      <listitem>
       <para>
        包含與物件閘道管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs</term>
      <listitem>
       <para>
        包含與 CephFS 管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>manager</term>
      <listitem>
       <para>
        包含與 Ceph 管理員管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>log</term>
      <listitem>
       <para>
        包含與 Ceph 記錄管理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>grafana</term>
      <listitem>
       <para>
        包含與 Grafana 代理相關的所有功能。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>dashboard-settings</term>
      <listitem>
       <para>
        允許變更儀表板設定。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3>
    <title>使用者職能</title>
    <para>
     <emphasis>角色</emphasis>指定了一個<emphasis>安全性範圍</emphasis>與一組<emphasis>許可權</emphasis>之間的一組對應。許可權分為四種類型：「read」、「create」、「update」和「delete」。
    </para>
    <para>
     下面的範例指定了一個角色，具有該角色的使用者擁有池管理相關功能的「read」和「create」許可權，以及 RBD 影像管理相關功能的完整許可權：
    </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
    <para>
     儀表板提供了一組預先定義的角色，我們稱之為<emphasis>系統角色</emphasis>。全新安裝 Ceph Dashboard 後即可使用這些角色：
    </para>
    <variablelist>
     <varlistentry>
      <term>administrator</term>
      <listitem>
       <para>
        提供針對所有安全性範圍的完整許可權。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>read-only</term>
      <listitem>
       <para>
        提供針對儀表板設定以外的其他所有安全性範圍的 read 許可權。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>block-manager</term>
      <listitem>
       <para>
        提供針對「rbd-image」、「rbd-mirroring」和「iscsi」範圍的完整許可權。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw-manager</term>
      <listitem>
       <para>
        提供針對「rgw」範圍的完整許可權。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cluster-manager</term>
      <listitem>
       <para>
        提供針對「hosts」、「osd」、「monitor」、「manager」和「config-opt」範圍的完整許可權。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool-manager</term>
      <listitem>
       <para>
        提供針對「pool」範圍的完整許可權。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs-manager</term>
      <listitem>
       <para>
        提供針對「cephfs」範圍的完整許可權。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <sect4>
     <title>管理自訂角色</title>
     <para>
      您可以使用以下指令建立新使用者角色：
     </para>
     <variablelist>
      <varlistentry>
       <term>建立新角色：</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>刪除角色:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>新增範圍許可權至角色：</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>從角色中刪除範圍許可權：</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
    </sect4>
    <sect4>
     <title>為使用者帳戶指定角色</title>
     <para>
      使用以下指令可為使用者指定角色：
     </para>
     <variablelist>
      <varlistentry>
       <term>設定使用者角色：</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>新增其他角色至使用者：</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>刪除使用者的角色：</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>清除自訂角色</title>
      <para>
       如果您建立了自訂使用者角色，並打算以後使用 <command>ceph.purge</command> 執行程式移除 Ceph 叢集，則需要先清除自訂角色。如需更多詳細資料，請參閱<xref linkend="deepsea-ceph-purge"/>。
      </para>
     </tip>
    </sect4>
    <sect4>
     <title>範例：建立使用者和自訂角色</title>
     <para>
      本節說明建立具有以下功能的使用者帳戶的程序：可管理 RBD 影像、檢視和建立 Ceph 池，並擁有針對任何其他範圍的唯讀存取權。
     </para>
     <procedure>
      <step>
       <para>
        建立名為「tux」的新使用者：
       </para>
<screen>
 <prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
      </step>
      <step>
       <para>
        建立角色並指定範圍許可權：
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
      </step>
      <step>
       <para>
        將角色與「tux」使用者相關聯：
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
      </step>
     </procedure>
    </sect4>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-proxy">
   <title>反向代理</title>
   <para>
    如果您要透過反向代理組態存取儀表板，則可能需要使用 URL 字首來存取。若要讓儀表板使用包含您字首的超連結，您可以進行 <option>url_prefix</option> 設定：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
</screen>
   <para>
    然後，便可透過網址 <literal>http://<replaceable>HOST_NAME</replaceable>:<replaceable>PORT_NUMBER</replaceable>/<replaceable>URL_PREFIX</replaceable>/</literal> 來存取儀表板。
   </para>
  </sect2>

  <sect2 xml:id="dashboard-auditing">
   <title>稽核</title>
   <para>
    Ceph Dashboard 的 REST API 可將 PUT、POST 和 DELETE 要求記錄至 Ceph 稽核記錄中。記錄功能預設處於停用狀態，但您可使用以下指令將其啟用：
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>
   <para>
    如果記錄功能處於啟用狀態，將會記錄每個要求的以下參數：
   </para>
   <variablelist>
    <varlistentry>
     <term>from</term>
     <listitem>
      <para>
       要求的來源，例如「https://[::1]:44410」。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>path</term>
     <listitem>
      <para>
       REST API 路徑，例如「/api/auth」。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>method</term>
     <listitem>
      <para>
       「PUT」、「POST」或「DELETE」。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user</term>
     <listitem>
      <para>
       使用者的名稱 (或「None」)。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    範例記錄項目如下所示：
   </para>
<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>
   <tip>
    <title>停用記錄要求封包內容的功能</title>
    <para>
     要求封包內容 (引數及其值的清單) 的記錄功能預設處於啟用狀態。您可以依照如下方式停用該功能：
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
   </tip>
  </sect2>
 </sect1>
</chapter>
