<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_ceph_faqs.xml" version="5.0" xml:id="storage-faqs">
 <title>Häufig gestellte Fragen</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:editurl>https://github.com/SUSE/doc-ses/edit/maintenance/ses6/xml/</dm:editurl>
   <dm:translation>Ja</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para/>
 <sect1 xml:id="storage-bp-tuneups-pg-num">
  <title>Welchen Einfluss hat die Anzahl der Placement Groups auf die Cluster-Leistung?</title>

  <para>
   Wenn Ihr Cluster annähernd 70 % bis 80 % gefüllt ist, wird es Zeit, weitere OSDs hinzuzufügen. Wenn Sie die Anzahl der OSDs erhöhen, sollten Sie eventuell auch die Anzahl der Placement Groups erhöhen.
  </para>

  <warning>
   <para>
    Durch Ändern der Anzahl von PGs wird viel Datenverkehr im Cluster erzeugt.
   </para>
  </warning>

  <para>
   Die Berechnung des optimalen Werts für die neu geänderte Größe des Clusters ist eine komplexe Aufgabe.
  </para>

  <para>
   Eine hohe Anzahl von PGs erstellt kleine Datenblöcke. Dadurch wird die Wiederherstellung nach einem OSD-Ausfall beschleunigt, doch die Last für die Monitor Nodes wird erhöht, weil diese für die Berechnung der Datenspeicherorte zuständig sind.
  </para>

  <para>
   Andererseits beansprucht eine kleine Anzahl von PGs mehr Zeit und Datenverkehr zur Wiederherstellung nach einem OSD-Ausfall, belastet die Monitor Nodes jedoch weniger, weil diese Speicherorte für weniger (doch größere) Datenblöcke berechnen müssen.
  </para>

  <para>
   Weitere Informationen zur optimalen Anzahl von PGs für Ihren Cluster finden Sie in <xref linkend="op-pgs-pg-num"/>.
  </para>
 </sect1>
 <sect1 xml:id="storage-bp-tuneups-mix-ssd">
  <title>Kann ich SSDs und Festplatten am selben Cluster verwenden?</title>

  <para>
   Festkörperlaufwerke (SSDs) sind im Allgemeinen schneller als Festplatten. Wenn Sie beide Datenträgertypen für dieselben Schreiboperationen verwenden, wird das Schreiben von Daten an den SSD-Datenträger durch die Festplattenleistung verlangsamt. Daher sollten Sie <emphasis>niemals SSDs und Festplatten gleichzeitig</emphasis> für das Schreiben von Daten nach <emphasis>derselben Regel</emphasis> verwenden (weitere Informationen zu den Regeln für das Speichern von Daten finden Sie in <xref linkend="datamgm-rules"/>).
  </para>

  <para>
   In zwei Fällen ist es im Allgemeinen sinnvoll, SSD und Festplatte am selben Cluster zu verwenden:
  </para>

  <orderedlist spacing="normal">
   <listitem>
    <para>
     Verwenden Sie den jeweiligen Datenträgertyp zum Schreiben von Daten, die unterschiedliche Regeln befolgen. In diesem Fall benötigen Sie eine Regel für den SSD-Datenträger und eine andere Regel für die Festplatte.
    </para>
   </listitem>
   <listitem>
    <para>
     Verwenden Sie jeden Datenträgertyp zu einem bestimmten Zweck. Beispielsweise den SSD-Datenträger für das Journal und die Festplatte zum Speichern von Daten.
    </para>
   </listitem>
  </orderedlist>
 </sect1>
 <sect1 xml:id="storage-bp-tuneups-ssd-tradeoffs">
  <title>Welche Nachteile hat die Verwendung eines Journals am SSD?</title>

  <para>
   Für die Leistung ist es besser, SSDs für OSD-Journale zu verwenden, weil das Journal normalerweise der Engpass bei OSDs ist, die nur Festplatten verwenden. SSDs werden oft verwendet, um Journale von verschiedenen OSDs freizugeben.
  </para>

  <para>
   Nachfolgend sehen Sie eine Liste der potenziellen Nachteile der Verwendung von SSDs für OSD-Journale:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     SSD-Datenträger sind teurer als Festplatten. Da jedoch ein OSD-Journal nur maximal 6 GB Speicherplatz belegt, fällt der Preis wahrscheinlich nicht besonders ins Gewicht.
    </para>
   </listitem>
   <listitem>
    <para>
     Ein SSD-Datenträger verbraucht Speicher-Slots, die ansonsten von einer großen Festplatte zur Erweiterung der Cluster-Kapazität verwendet werden könnten.
    </para>
   </listitem>
   <listitem>
    <para>
     SSD-Datenträger haben kürzere Schreibzyklen als Festplatten, doch die moderne Technik beginnt allmählich, das Problem zu lösen.
    </para>
   </listitem>
   <listitem>
    <para>
     Wenn Sie mehrere Journale auf demselben SSD-Datenträger freigeben, riskieren Sie, alle entsprechenden OSDs nach Ausfall des SSD-Datenträgers zu verlieren. Daraufhin müssen viele Daten verschoben werden, um den Cluster neu auszugleichen.
    </para>
   </listitem>
   <listitem>
    <para>
     Hotplugging der Datenträger wird komplexer, weil die Datenzuordnung nicht 1:1 mit dem ausgefallenen OSD und dem Journal-Datenträger übereinstimmt.
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="storage-bp-monitoring-diskfails">
  <title>Was passiert, wenn ein Datenträger ausfällt?</title>

  <para>
   Wenn bei einem Datenträger mit einem gespeicherten Cluster ein Hardwareproblem auftritt und der Datenträger nicht mehr funktionsbereit ist, passiert Folgendes:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Der entsprechende OSD ist abgestürzt und wird automatisch aus dem Cluster entfernt.
    </para>
   </listitem>
   <listitem>
    <para>
     Die Daten des ausgefallenen Datenträgers werden auf einen anderen OSD im Cluster aus anderen Kopien derselben in anderen OSDs gespeicherten Daten reproduziert.
    </para>
   </listitem>
   <listitem>
    <para>
     Sie sollten dann den Datenträger aus der CRUSH Map des Clusters entfernen und auch physisch aus der Hosthardware.
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 xml:id="storage-bp-monitoring-journalfails">
  <title>Was passiert, wenn ein Journal-Datenträger ausfällt?</title>

  <para>
   Ceph kann so konfiguriert werden, dass Journale oder Write-Ahead-Protokolle auf von den OSDs getrennten Geräten gespeichert werden. Wenn ein dediziert für ein Journal verwendeter Datenträger ausfällt, fallen auch die entsprechenden OSDs aus (weitere Informationen hierzu finden Sie in <xref linkend="storage-bp-monitoring-diskfails"/>).
  </para>

  <warning>
   <title>Hosten mehrerer Journale auf einem Datenträger</title>
   <para>
    Zur Verbesserung der Leistung können Sie einen schnellen Datenträger (wie ein SSD) zum Speichern von Journalpartitionen für mehrere OSDs verwenden. Wir empfehlen, Journale für maximal vier OSDs auf einem Datenträger zu hosten, weil Sie ansonsten im Fall eines Ausfalls des Journaldatenträgers den Verlust der gespeicherten Daten für alle Datenträger der entsprechenden OSDs riskieren.
   </para>
  </warning>
 </sect1>
</chapter>
