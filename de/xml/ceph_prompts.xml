<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_prompts.xml" version="5.0">
 <title>Benutzerrechte und Kommandozeilen</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:maintainer>tbazant@suse.com</dm:maintainer>
   <dm:status>Bearbeiten</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>Ja</dm:translation>
   <dm:languages/>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Als Ceph Cluster-Administrator können Sie das Cluster-Verhalten mit bestimmten Kommandos konfigurieren und anpassen. Hierzu benötigen Sie verschiedene Arten von Kommandos:
 </para>
 <sect1>
  <title>Salt-/DeepSea-spezifische Kommandos</title>

  <para>
   Mit diesen Kommandos können Sie den Ceph Cluster implementieren oder aufrüsten, Kommandos auf mehreren (oder allen) Cluster Nodes gleichzeitig ausführen oder auch Cluster Nodes hinzufügen oder entfernen. Die Kommandos <command>salt</command>, <command>salt-run</command> und <command>deepsea</command> werden am häufigsten verwendet. Salt-Kommandos müssen auf dem Salt Master Node (siehe <xref linkend="deepsea-description"/>) als <systemitem class="username">root</systemitem> ausgeführt werden. Diese Kommandos werden in der folgenden Kommandozeile eingegeben:
  </para>

<screen>
<prompt>root@master # </prompt>
</screen>

  <para>
   Beispiel:
  </para>

<screen>
<prompt>root@master # </prompt>salt '*.example.net' test.ping
</screen>
 </sect1>
 <sect1>
  <title>Ceph-spezifische Kommandos</title>

  <para>
   Mit diesen systemnahen Kommandos können Sie alle Aspekte des Clusters und dessen Gateways über die Kommandozeile konfigurieren und abstimmen. <command>ceph</command>, <command>rbd</command>, <command>radosgw-admin</command> oder <command>crushtool</command> sind nur einige Beispiele.
  </para>

  <para>
   Zum Ausführen von Ceph-spezifischen Kommandos benötigen Sie den Lesezugriff auf einen Ceph-Schlüssel. Die Capabilities des Schlüssels definieren dann Ihre Rechte in der Ceph-Umgebung. Sie können die Ceph-Kommandos als <systemitem class="username">root</systemitem> (oder über <command>sudo</command>) ausführen und den uneingeschränkten Standard-Schlüsselbund „ceph.client.admin.key“ verwenden.
  </para>

  <para>
   Als sichere und empfohlene Alternative erstellen Sie je einen stärker eingeschränkten, individuellen Schlüssel für die einzelnen verwaltungsberechtigten Benutzer, den Sie dann in einem Verzeichnis ablegen, in dem die Benutzer ihn lesen können, beispielsweise:
  </para>

<screen>~/.ceph/ceph.client.<replaceable>USERNAME</replaceable>.keyring</screen>

  <tip>
   <title>Pfad der Ceph-Schlüssel</title>
   <para>
    Sollen ein benutzerdefinierter verwaltungsberechtigter Benutzer und Schlüsselbund verwendet werden, müssen Sie den Benutzernamen und den Pfad des Schlüssels bei jeder Ausführung des Kommandos <command>ceph</command> mit den Optionen <option>-n client angeben.<replaceable>USER_NAME</replaceable></option> und <option>--keyring <replaceable>PATH/TO/KEYRING</replaceable></option> angeben.
   </para>
   <para>
    Um dies zu vermeiden, nehmen Sie diese Optionen in die Variable <varname>CEPH_ARGS</varname>
    in den Dateien <filename>~/.bashrc</filename> der einzelnen Benutzer auf.
   </para>
  </tip>

  <para>
   Ceph-spezifische Kommandos können auf jedem Cluster Node ausgeführt werden; es wird jedoch empfohlen, sie ausschließlich auf dem Admin Node auszuführen. In dieser Dokumentation werden die Kommandos mit dem Benutzer <systemitem class="username">cephadm</systemitem> ausgeführt. Die Kommandozeile lautet daher:
  </para>

<screen>
<prompt>cephadm@adm &gt; </prompt>
</screen>

  <para>
   Beispiel:
  </para>

<screen>
<prompt>cephadm@adm &gt; </prompt>ceph auth list
</screen>

  <tip>
   <title>Kommandos für bestimmte Knoten</title>
   <para>
    Wenn Sie laut Dokumentation ein Kommando für einen Cluster Node mit einer bestimmten Rolle ausführen sollen, ist dies an der Bezeichnung der Kommandozeile ersichtlich. Beispiel:
   </para>
<screen>
<prompt>cephadm@mon &gt; </prompt>
</screen>
  </tip>
 </sect1>
 <sect1>
  <title>Allgemeine Linux-Kommandos</title>

  <para>
   Bei Linux-Kommandos, die nicht mit Ceph oder DeepSea zusammenhängen, z. B. <command>mount</command>, <command>cat</command> oder <command>openssl</command>, wird entweder <prompt>cephadm@adm &gt;</prompt>
   oder <prompt>root #</prompt> als Kommandozeile angezeigt, abhängig von den Berechtigungen, die für das betreffende Kommando erforderlich sind.
  </para>
 </sect1>
 <sect1>
  <title>Weitere Informationen</title>

  <para>
   Weitere Informationen zur Ceph-Schlüsselverwaltung finden Sie in <xref linkend="storage-cephx-keymgmt"/>.
  </para>
 </sect1>
</chapter>
