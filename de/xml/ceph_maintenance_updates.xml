<?xml version="1.0" encoding="UTF-8"?>
<appendix xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_maintenance_updates.xml" version="5.0">
 <title>Ceph-Wartungs-Updates auf der Grundlage von vorgeschalteten „Nautilus“-Unterversionen</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:maintainer>tbazant@suse.com</dm:maintainer>
   <dm:status>Bearbeiten</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>Ja</dm:translation>
   <dm:languages/>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Mehrere wesentliche Pakete in SUSE Enterprise Storage 6 beruhen auf der Nautilus-Versionsserie von Ceph. Wenn das Ceph-Projekt (<link xlink:href="https://github.com/ceph/ceph"/>) neue Unterversionen in der Nautilus-Serie veröffentlicht, wird SUSE Enterprise Storage 6 aktualisiert, damit das Produkt von den aktuellen vorgeschalteten Bugfixes und Funktions-Backports profitiert.
 </para>
 <para>
  In diesem Kapitel erhalten Sie einen Überblick über wichtige Änderungen in den einzelnen vorgeschalteten Unterversionen, die bereits in das Produkt aufgenommen wurden oder künftig aufgenommen werden.
 </para>
 <bridgehead renderas="sect1">Nautilus-Unterversion 14.2.4</bridgehead>
 <para>
  Diese Unterversion behebt einen schwerwiegenden Rückschritt, der sich in die Unterversion 14.2.3 eingeschlichen hatte. Dieser Rückschritt hat sich nicht auf SUSE Enterprise Storage-Kunden ausgewirkt, da wir keine Version auf der Grundlage von 14.2.3 veröffentlicht hatten.
 </para>
 <bridgehead renderas="sect1">Nautilus-Unterversion 14.2.3</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    Hier wurde eine Denial-of-Service-Schwachstelle repariert, bei der ein nichtauthentifizierter Client des Ceph Object Gateway einen Absturz aufgrund eines nicht erkannten Ausnahmefehlers auflösen konnte.
   </para>
  </listitem>
  <listitem>
   <para>
    librbd-Clients auf Nautilus-Basis können nunmehr Images in Jewel-Clustern öffnen.
   </para>
  </listitem>
  <listitem>
   <para>
    <option>num_rados_handles</option> wurde aus dem Object Gateway entfernt. Wenn Sie einen Wert größer 1 für <option>num_rados_handles</option> verwendet hatten, multiplizieren Sie die aktuellen Parameter <option>objecter_inflight_ops</option> und <option>objecter_inflight_op_bytes</option> mit dem bisherigen Wert für <option>num_rados_handles</option>. So erzielen Sie dieselbe Drosselung wie zuvor.
   </para>
  </listitem>
  <listitem>
   <para>
    Der sichere Modus des Messenger-v2-Protokolls ist ab dieser Version nicht mehr experimentell. Dieser Modus ist nunmehr der bevorzugte Verbindungsmodus für Monitors.
   </para>
  </listitem>
  <listitem>
   <para>
    <option>osd_deep_scrub_large_omap_object_key_threshold</option> wurde herabgesetzt, sodass ein Objekt mit zahlreichen omap-Schlüsseln leichter erkannt wird.
   </para>
  </listitem>
  <listitem>
   <para>
    Das Ceph Dashboard unterstützt nunmehr die Stummschaltung von Prometheus-Benachrichtigungen.
   </para>
  </listitem>
 </itemizedlist>
 <bridgehead renderas="sect1">Nautilus-Unterversion 14.2.2</bridgehead>
 <itemizedlist>
  <listitem>
   <para>
    Die Kommandos mit <literal>no{up,down,in,out}</literal> wurden überarbeitet. Die Flaggen für <literal>no{up,down,in,out}</literal> können nunmehr auf zwei Arten festgelegt werden: mit dem bisherigen Befehl
   </para>
<screen>ceph osd [un]set <replaceable>FLAG</replaceable></screen>
   <para>
    mit dem clusterweite Flaggen festgelegt werden, sowie mit dem neuen Befehl
   </para>
<screen>ceph osd [un]set-group <replaceable>FLAGS</replaceable> <replaceable>WHO</replaceable></screen>
   <para>
    mit dem die Flaggen gesammelt auf der Granularität eines Crush-Knotens oder einer Geräteklasse festgelegt werden.
   </para>
  </listitem>
  <listitem>
   <para>
    <command>radosgw-admin</command> erhält zwei Unterkommandos für die Verwaltung von abgelaufenen Objekten, die nach einem Bucket-Resharding in früheren Versionen des Object Gateway zurückgeblieben sind. Mit einem Unterkommando rufen Sie diese Objekte ab, mit dem zweiten löschen Sie sie.
   </para>
  </listitem>
  <listitem>
   <para>
    In früheren Nautilus-Versionen (14.2.1 und 14.2.0) gab es ein Problem, bei dem die von <command>ceph df</command> gemeldete Pool-Auslastungsstatistik durch die Implementierung eines einzelnen neuen Nautilus BlueStore-OSD in einem aufgerüsteten Cluster (also in einem Cluster, der ursprünglich vor Nautilus implementiert wurde) durcheinandergebracht wurde. Bis zur erneuten Bereitstellung oder Aktualisierung aller OSDs (mit <command>ceph-bluestore-tool repair</command>) sind die Werte in der Pool-Statistik niedriger als die tatsächlichen Werte. Dies wurde in Version 14.2.2 behoben, wobei der Cluster erst dann zur genaueren Statistik für die einzelnen Pools wechselt, wenn <emphasis>alle</emphasis> OSDs Version 14.2.2 aufweisen, mit der Blockspeicherung arbeiten und (falls sie vor Nautilus erstellt wurden) mit der Reparaturfunktion aktualisiert wurden.
   </para>
  </listitem>
  <listitem>
   <para>
    Der bisherige Standardwert <literal>firefly</literal> für <option>mon_crush_min_required_version</option> wurde durch <literal>hammer</literal> ersetzt, sodass der Cluster eine Zustandswarnung ausgibt, wenn die CRUSH-Tunables älter sind als Hammer. Im Allgemeinen wird nach der Umstellung auf Hammer-Tunables ein Ausgleich für eine geringe Datenmenge (größer null) vorgenommen.
   </para>
   <para>
    Stellen Sie den ältesten zulässigen Client nach Möglichkeit auf <literal>hammer</literal> (oder höher) ein. Mit folgendem Kommando ermitteln Sie den derzeit ältesten zulässigen Client:
   </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph osd dump | grep min_compat_client</screen>
   <para>
    Ist der aktuelle Wert älter als <literal>hammer</literal>, ermitteln Sie mit folgendem Kommando, ob diese Änderung gefahrlos durchgeführt werden kann (es dürfen keine Clients, die älter als Hammer sind, mit dem Cluster verbunden sein):
   </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph features</screen>
   <para>
    In Hammer wurde der neuere CRUSH-Bucket-Typ <literal>straw2</literal> eingeführt. Wenn alle Clients maximal so alt wie Hammer sind, können neue Funktionen verwendet werden, die ausschließlich für <literal>straw2</literal>-Buckets unterstützt werden, beispielsweise der Modus <literal>crush-compat</literal> für das Ausgleichsprogramm (<xref linkend="mgr-modules-balancer"/>).
   </para>
  </listitem>
 </itemizedlist>
 <para>
  Ausführliche Informationen zum Patch finden Sie unter <link xlink:href="https://download.suse.com/Download?buildid=D38A7mekBz4~"/>
 </para>
 <bridgehead renderas="sect1">Nautilus-Unterversion 14.2.1</bridgehead>
 <para>
  Dies war die erste Unterversion nach der ursprünglichen Nautilus-Version (14.2.0). Die ursprüngliche Version von SUSE Enterprise Storage 6 („General Availability“ oder „GA“) beruhte auf dieser Unterversion.
 </para>
</appendix>
