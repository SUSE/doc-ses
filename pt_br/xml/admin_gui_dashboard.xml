<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_gui_dashboard.xml" version="5.0" xml:id="ceph-dashboard">
 <title>Ceph Dashboard</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>sim</dm:translation>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  O Ceph Dashboard é um módulo que adiciona um aplicativo incorporado de monitoramento e administração com base na Web ao Ceph Manager (consulte o <xref linkend="storage-intro-core-nodes"/> para obter mais detalhes sobre o Ceph Manager). Você não precisa mais saber comandos complexos relacionados ao Ceph para gerenciar e monitorar o cluster do Ceph. Você pode usar a interface intuitiva da Web Ceph Dashboard ou a API REST incorporada. 
 </para>
 <para>
  O Ceph Dashboard é habilitado automaticamente e configurado com a fase 3 do DeepSea durante o procedimento de implantação (consulte o <xref linkend="ceph-install-stack"/>). Em um cluster do Ceph com várias instâncias do Ceph Manager, apenas o painel de controle em execução no daemon Ceph Manager ativo atualmente processará as solicitações recebidas. O acesso à porta TCP do painel de controle em qualquer uma das demais instâncias do Ceph Manager que estiverem em standby no momento resultará no redirecionamento HTTP (303) para o URL do painel de controle do Ceph Manager ativo atualmente. Dessa forma, você pode apontar seu navegador para qualquer uma das instâncias do Ceph Manager para acessar o painel de controle. Considere esse comportamento ao proteger o acesso com firewall ou planejar a configuração de HA.
 </para>
 <sect1 xml:id="dashboard-webui-general">
  <title>Interface do usuário da Web do painel de controle</title>

  <sect2 xml:id="dashboard-webui-login">
   <title>Login</title>
   <para>
    Para efetuar login no aplicativo Web do painel de controle, aponte seu navegador para o URL dele, incluindo o número da porta. Você pode encontrar o endereço executando
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr services | grep dashboard
"dashboard": "https://ses-dash-node.example.com:8443/",
</screen>
   <figure>
    <title>Tela de Login do Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_login.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Você precisa de uma conta de usuário para efetuar login no aplicativo Web do painel de controle. O DeepSea cria um usuário padrão “admin” com privilégios de administrador para você. Se você efetuar login com o usuário padrão “admin”, recupere a senha correspondente executando
   </para>
<screen>
<prompt>root@master # </prompt>salt-call grains.get dashboard_creds
</screen>
   <tip>
    <title>Conta de Usuário Personalizada</title>
    <para>
     Se você não deseja usar a conta padrão "admin" para acessar o Ceph Dashboard, crie uma conta de usuário personalizada com privilégios de administrador. Consulte a <xref linkend="dashboard-user-roles"/> para obter mais detalhes.
    </para>
   </tip>
   <para>
    A interface do usuário do painel de controle é dividida graficamente em vários <emphasis>blocos</emphasis>: o <emphasis>menu de utilitários</emphasis>, o <emphasis>menu principal</emphasis> e o <emphasis>painel de conteúdo</emphasis> principal.
   </para>
   <figure>
    <title>Home Page do Ceph Dashboard</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dashboard_homepage.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-util-menu">
   <title>Menu de utilitários</title>
   <para>
    A parte superior direita da tela contém um menu de utilitários. Ele inclui tarefas gerais relacionadas mais ao painel de controle do que ao cluster do Ceph. Ao clicar em seus itens, você pode acessar os seguintes tópicos:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Mudar o idioma da interface do usuário do painel de controle. Você pode escolher entre tcheco, inglês, alemão, espanhol, francês, português, chinês ou indonésio.
     </para>
    </listitem>
    <listitem>
     <para>
      Exibir uma lista de tarefas relacionadas ao Ceph que estão sendo executadas em segundo plano.
     </para>
    </listitem>
    <listitem>
     <para>
      Ver e apagar notificações recentes do painel de controle.
     </para>
    </listitem>
    <listitem>
     <para>
      Exibir uma lista de links que se referem às informações sobre o painel de controle, à documentação completa dele e a uma visão geral da respectiva API REST.
     </para>
    </listitem>
    <listitem>
     <para>
      Gerenciar os usuários e as funções de usuário do painel de controle. Consulte a <xref linkend="dashboard-user-roles"/> para ver descrições mais detalhadas de linhas de comando.
     </para>
    </listitem>
    <listitem>
     <para>
      Efetuar logout do painel de controle.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-main-menu">
   <title>Menu principal</title>
   <para>
    O menu principal do painel de controle ocupa a parte superior esquerda da tela. Ela abrange os seguintes tópicos:
   </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>Painel de controle</guimenu></term>
     <listitem>
      <para>
       Retornar à home page do Ceph Dashboard.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Cluster</guimenu></term>
     <listitem>
      <para>
       Ver informações detalhadas sobre a configuração geral do cluster e o Mapa CRUSH, seus hosts, Ceph OSDs, Ceph Monitors e o conteúdo de um arquivo de registro.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Pools</guimenu></term>
     <listitem>
      <para>
       Ver e gerenciar pools de cluster.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Bloquear</guimenu></term>
     <listitem>
      <para>
       Ver e gerenciar dispositivos de blocos e suas exportações iSCSI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>NFS</guimenu></term>
     <listitem>
      <para>
       Ver e gerenciar implantações do NFS Ganesha.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Sistemas de arquivos</guimenu></term>
     <listitem>
      <para>
       Ver e gerenciar CephFSs.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Object Gateway</guimenu></term>
     <listitem>
      <para>
       Ver e gerenciar daemons, usuários e compartimentos de memória do Object Gateway.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-cpane">
   <title>O painel de conteúdo</title>
   <para>
    O painel de conteúdo ocupa a parte principal da tela do painel de controle. A home page do painel de controle mostra muitos widgets úteis para informar você brevemente sobre as informações de status atual, capacidade e desempenho do cluster.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-ui-common">
   <title>Recursos comuns de IU da Web</title>
   <para>
    No Ceph Dashboard, você costuma trabalhar com <emphasis>listas</emphasis>. Por exemplo, listas de pools, nós OSD ou dispositivos RBD. Todas as listas se atualizarão automaticamente por padrão a cada 5 segundos. Os seguintes widgets comuns ajudam você a gerenciar ou ajustar essas listas:
   </para>
   <para>
    Clique em <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/> </imageobject> </inlinemediaobject> para acionar uma atualização manual da lista.
   </para>
   <para>
    Clique em <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> para exibir ou ocultar colunas individuais da tabela.
   </para>
   <para>
    Clique em <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/> </imageobject> </inlinemediaobject> e selecione quantas linhas serão exibidas em uma única página.
   </para>
   <para>
    Clique em <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/> </imageobject> </inlinemediaobject> e filtre as linhas digitando a string de pesquisa.
   </para>
   <para>
    Use <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/> </imageobject> </inlinemediaobject> para mudar a página exibida no momento, se a lista ocupar várias páginas.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-widgets">
   <title>Widgets do painel de controle</title>
   <para>
    Cada widget do painel de controle mostra informações de status específicas relacionadas a um determinado aspecto de um cluster do Ceph em execução. Alguns widgets são links ativos e, depois de clicar neles, redirecionarão você para uma página detalhada relacionada do tópico que eles representam.
   </para>
   <tip>
    <title>Mais detalhes e dicas de ferramenta</title>
    <para>
     Alguns widgets gráficos mostram mais detalhes quando você move o cursor do mouse sobre eles.
    </para>
   </tip>
   <sect3 xml:id="dashboard-widgets-status">
    <title>Widgets de status</title>
    <para>
     Os widgets de <guimenu>status</guimenu> apresentam uma breve visão geral do status atual do cluster.
    </para>
    <figure>
     <title>Widgets de status</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_status.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Status do Cluster</guimenu></term>
      <listitem>
       <para>
        Apresenta informações básicas sobre a saúde do cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Monitores</guimenu></term>
      <listitem>
       <para>
        Mostra o número de monitores em execução e o quorum deles.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>OSDs</guimenu></term>
      <listitem>
       <para>
        Mostra o número total de OSDs e o número de OSDs "ativos" e "dentro".
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Daemons do Gerenciador</guimenu></term>
      <listitem>
       <para>
        Mostra o número de daemons Ceph Manager ativos e em standby.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Hosts</guimenu></term>
      <listitem>
       <para>
        Mostra o número total de nós do cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Object Gateways</guimenu></term>
      <listitem>
       <para>
        Mostra o número de Object Gateways em execução.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Servidores de Metadados</guimenu></term>
      <listitem>
       <para>
        Mostra o número de Servidores de Metadados.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>iSCSI Gateway</guimenu></term>
      <listitem>
       <para>
        Mostra o número de gateways iSCSI configurados.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-performance">
    <title>Widgets de desempenho</title>
    <para>
     Os widgets de <guimenu>desempenho</guimenu> referem-se aos dados básicos de desempenho dos clientes do Ceph.
    </para>
    <figure>
     <title>Widgets de desempenho</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_perf.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>IOPS do Cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Throughput do Cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Leitura/Gravação do Cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Recuperação do Cliente</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Remoção</guimenu></term>
      <listitem>
       <para/>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="dashboard-widgets-capacity">
    <title>Widgets de capacidade</title>
    <para>
     Os widgets de <guimenu>capacidade</guimenu> mostram informações resumidas sobre a capacidade de armazenamento.
    </para>
    <figure>
     <title>Widgets de capacidade</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dashboard_widgets_capacity.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term><guimenu>Pools</guimenu></term>
      <listitem>
       <para>
        Mostra o número de pools no cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Capacidade Bruta</guimenu></term>
      <listitem>
       <para>
        Mostra a proporção de capacidade de armazenamento usado e bruto disponível.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Objetos</guimenu></term>
      <listitem>
       <para>
        Mostra o número de objetos de dados armazenados no cluster.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>PGs por OSD</guimenu></term>
      <listitem>
       <para>
        Mostra o número de grupos de posicionamento por OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Status do PG</guimenu></term>
      <listitem>
       <para>
        Exibe um gráfico dos grupos de posicionamento de acordo com o status deles.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-mgmt">
  <title>Gerenciando usuários e funções do painel de controle</title>

  <para>
   O gerenciamento de usuários do painel de controle realizado pelos comandos do Ceph na linha de comando já foi apresentado na <xref linkend="dashboard-user-roles"/>.
  </para>

  <para>
   Esta seção descreve como gerenciar as contas de usuário usando a interface do usuário da Web do painel de controle.
  </para>

  <sect2 xml:id="dashboard-listing-users">
   <title>Listando usuários</title>
   <para>
    Clique em <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> no menu de utilitários e selecione <guimenu>Gerenciamento de usuários</guimenu>.
   </para>
   <para>
    A lista contém o nome de usuário, o nome completo, o e-mail e a lista de funções atribuídas de cada usuário.
   </para>
   <figure>
    <title>Gerenciamento de usuários</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_users.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-users">
   <title>Adicionando novos usuários</title>
   <para>
    Clique em <guimenu>Adicionar</guimenu> na parte superior esquerda do cabeçalho da tabela para adicionar um novo usuário. Insira seu nome de usuário, senha e, opcionalmente, um nome completo e um e-mail.
   </para>
   <figure>
    <title>Adicionando um usuário</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_user_add.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Clique no ícone pequeno de caneta para atribuir funções predefinidas ao usuário. Clique em <guimenu>Criar usuário</guimenu> para confirmar.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-users">
   <title>Editando usuários</title>
   <para>
    Clique na linha da tabela de um usuário e selecione <guimenu>Editar</guimenu> para editar os detalhes sobre o usuário. Clique em <guimenu>Atualizar usuário</guimenu> para confirmar.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-users">
   <title>Apagando usuários</title>
   <para>
    Clique na linha da tabela de um usuário e selecione <guimenu>Excluir</guimenu> para apagar a conta de usuário. Ative a caixa de seleção <guimenu>Sim, desejo</guimenu> e clique em <guimenu>Excluir usuário</guimenu> para confirmar.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-listing-user-roles">
   <title>Listando funções de usuário</title>
   <para>
    Clique em <inlinemediaobject> <imageobject role="fo"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> <imageobject role="html"> <imagedata fileref="dash_icon_gear.png" width="1.3em" format="PNG"/> </imageobject> </inlinemediaobject> no menu de utilitários e selecione <guimenu>Gerenciamento de usuários</guimenu>. Em seguida, clique na guia <guimenu>Funções</guimenu>.
   </para>
   <para>
    A lista mostra o nome e a descrição de cada função e se é uma função do sistema.
   </para>
   <figure>
    <title>Funções do Usuário</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-adding-roles">
   <title>Adicionando funções personalizadas</title>
   <para>
    Clique em <guimenu>Adicionar</guimenu> na parte superior esquerda do cabeçalho da tabela para adicionar uma nova função personalizada. Insira o nome e a descrição dela e defina as permissões necessárias para tópicos individuais.
   </para>
   <tip>
    <title>Purgar Funções Personalizadas</title>
    <para>
     Se você cria funções de usuário personalizadas e posteriormente pretende remover o cluster do Ceph com o executor <command>ceph.purge</command>, precisa purgar primeiro as funções personalizadas. Encontre mais detalhes na <xref linkend="deepsea-ceph-purge"/>.
    </para>
   </tip>
   <figure>
    <title>Adição de uma Função</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_roles_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>Ativação Múltipla</title>
    <para>
     Ao ativar a caixa de seleção que antecede o nome do tópico, você ativa todas as permissões para esse tópico. Ao ativar a caixa de seleção <guimenu>Tudo</guimenu>, você ativa todas as permissões para todos os tópicos.
    </para>
   </tip>
   <para>
    Clique em <guimenu>Criar função</guimenu> para confirmar.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-editing-roles">
   <title>Editando funções personalizadas</title>
   <para>
    Clique na linha da tabela de uma função personalizada e selecione <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela para editar uma descrição e permissões da função personalizada. Clique em <guimenu>Atualizar função</guimenu> para confirmar.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-deleting-roles">
   <title>Apagando funções personalizadas</title>
   <para>
    Clique na linha da tabela de uma função e selecione <guimenu>Excluir</guimenu> para apagá-la. Ative a caixa de seleção <guimenu>Sim, desejo</guimenu> e clique em <guimenu>Excluir função</guimenu> para confirmar.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-cluster">
  <title>Vendo o conteúdo do cluster</title>

  <para>
   O item de menu <guimenu>Cluster</guimenu> permite ver informações detalhadas sobre hosts, OSDs, MONs, Mapa CRUSH e o conteúdo dos arquivos de registro do cluster do Ceph.
  </para>

  <sect2 xml:id="dashboard-cluster-hosts">
   <title>Nós do cluster</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Hosts</guimenu></menuchoice> para ver uma lista de nós do cluster.
   </para>
   <figure>
    <title>Hosts</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_hosts.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Clique no nome de um nó na coluna <guimenu>Nome de host</guimenu> para ver os detalhes de desempenho do nó.
   </para>
   <para>
    A coluna <guimenu>Serviços</guimenu> lista todos os daemons que estão em execução em cada nó relacionado. Clique no nome de um daemon para ver sua configuração detalhada.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-monitors">
   <title>Ceph Monitors</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Monitores</guimenu></menuchoice> para ver uma lista de nós do cluster com monitores do Ceph em execução. A lista inclui o número de classificação de cada monitor, o endereço IP público e número de sessões abertas.
   </para>
   <para>
    A lista é dividida em duas tabelas: uma para os Ceph Monitors que <emphasis>estão</emphasis> no quorum, e outra para os Ceph Monitors que <emphasis>não estão</emphasis> no quorum.
   </para>
   <para>
    Clique no nome de um nó na coluna <guimenu>Nome</guimenu> para ver a configuração do Ceph Monitor relacionado.
   </para>
   <para>
    A tabela <guimenu>Status</guimenu> mostra as estatísticas gerais dos Ceph Monitors em execução.
   </para>
   <figure>
    <title>Ceph Monitors</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mons.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-osds">
   <title>Ceph OSDs</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>OSDs</guimenu></menuchoice> para ver uma lista de nós com daemons/discos OSD em execução. A lista inclui nome, status, número de grupos de posicionamento, tamanho, uso, cronograma de leituras/gravações e taxa de operações de leitura/gravação por segundo de cada nó.
   </para>
   <figure>
    <title>Ceph OSDs</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Clique em <guimenu>Definir Flags de todo o Cluster</guimenu> no cabeçalho da tabela para exibir uma janela com uma lista de flags aplicáveis a todo o cluster. É possível ativar ou desativar flags individuais e clicar em <guimenu>Enviar</guimenu> para confirmar.
   </para>
   <figure>
    <title>Flags OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_flags.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Clique em <guimenu>Definir Prioridade de Recuperação de todo o Cluster</guimenu> no cabeçalho da tabela para abrir uma janela popup com uma lista de prioridades de recuperação de OSD aplicáveis a todo o cluster. É possível ativar o perfil de prioridade preferencial e ajustar os valores individuais a seguir. Clique em <guimenu>Submit</guimenu> (Enviar) para confirmar.
   </para>
   <figure>
    <title>Prioridade de Recuperação de OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_osds_recover.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Clique no nome de um nó na coluna <guimenu>Host</guimenu> para ver uma tabela estendida com detalhes sobre a configuração e o desempenho do OSD. Ao navegar pelas diversas guias, você pode ver listas de <guimenu>Atributos</guimenu> e de <guimenu>Metadados</guimenu>, um <guimenu>Contador de desempenho</guimenu> e um <guimenu>Histograma</guimenu> gráfico de leituras e gravações.
   </para>
   <figure>
    <title>Detalhes do OSD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_isd_details.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>Executar Tarefas Específicas em OSDs</title>
    <para>
     Após clicar no nome de um nó OSD, a linha dele na tabela mudará ligeiramente de cor, significando que agora você pode executar uma tarefa no nó. Clique na seta para baixo na parte superior esquerda do cabeçalho da tabela e selecione uma tarefa para execução, como <guimenu>Remoção Profunda</guimenu>. Você também pode inserir um valor necessário para a tarefa e confirmar para executá-la no nó.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dahsboard-cluster-config">
   <title>Configuração do cluster</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Configuração</guimenu></menuchoice> para ver uma lista completa de opções de configuração de cluster do Ceph. A lista contém o nome da opção, sua descrição resumida e seus valores atuais e padrão.
   </para>
   <figure>
    <title>Configuração do Cluster</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cluster_config.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Clique na linha de uma opção específica para realçar e ver informações detalhadas sobre ela, como tipo de valor, valores mínimos e máximos permitidos, se ela pode ser atualizada em tempo de execução e muito mais.
   </para>
   <para>
    Após realçar uma opção específica, você poderá editar o(s) valor(s) dela clicando no botão <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela. Clique em <guimenu>Salvar</guimenu> para confirmar as mudanças.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-crushmap">
   <title>Mapa CRUSH</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Mapa CRUSH</guimenu></menuchoice> para ver um Mapa CRUSH do cluster. Para obter mais informações gerais sobre Mapas CRUSH, consulte a <xref linkend="op-crush"/>.
   </para>
   <para>
    Clique em cada raiz, nó ou OSD para ver informações mais detalhadas, como peso do CRUSH, profundidade na árvore de mapa, classe de dispositivo do OSD e muitos mais.
   </para>
   <figure>
    <title>Mapa CRUSH</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_crushmap.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-cluster-mgr-plugins">
   <title>Módulos do gerenciador</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Módulos do gerenciador</guimenu></menuchoice> para ver uma lista dos módulos disponíveis do Ceph Manager. Cada linha consiste no nome do módulo e nas informações que indicam se ele está ou não habilitado no momento.
   </para>
   <figure>
    <title>Módulos do gerenciador</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_mgr_modules.png" width="50%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Após realçar um módulo específico, você poderá ver suas configurações detalhadas na tabela <guimenu>Detalhes</guimenu> a seguir. Para editá-las, clique no botão <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela. Clique em <guimenu>Atualizar</guimenu> para confirmar as mudanças.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-cluster-logs">
   <title>Registros</title>
   <para>
    Clique em <menuchoice><guimenu>Cluster</guimenu><guimenu>Registros</guimenu></menuchoice> para ver uma lista das entradas de registro recentes do cluster. Cada linha consiste em uma marcação de horário, no tipo de entrada de registro e na própria mensagem registrada.
   </para>
   <para>
    Clique na guia <guimenu>Registros de Auditoria</guimenu> para ver as entradas de registro do subsistema de auditoria. Consulte a <xref linkend="dashboard-auditing"/> para ver os comandos que habilitam ou desabilitam a auditoria.
   </para>
   <figure>
    <title>Registros</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_logs.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-pools">
  <title>Gerenciando pools</title>

  <tip>
   <title>Mais informações sobre pools</title>
   <para>
    Para obter mais informações gerais sobre os pools do Ceph, consulte o <xref linkend="ceph-pools"/>. Para obter informações específicas dos pools com codificação de eliminação, consulte o <xref linkend="cha-ceph-erasure"/>.
   </para>
  </tip>

  <para>
   Para listar todos os pools disponíveis, clique em <guimenu>Pools</guimenu> no menu principal.
  </para>

  <para>
   A lista mostra o nome, o tipo, o aplicativo relacionado, o status do grupo de posicionamento, o tamanho da réplica, o perfil com codificação de eliminação, o uso e as estatísticas de leitura/gravação de cada pool.
  </para>

  <figure>
   <title>Lista de pools</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Para ver informações mais detalhadas sobre um pool, ative a linha dele na tabela.
  </para>

  <sect2 xml:id="dashboard-pools-create">
   <title>Adicionando um novo pool</title>
   <para>
    Para adicionar um novo pool, clique em <guimenu>Adicionar</guimenu> na parte superior esquerda da tabela de pools. No formulário do pool, você pode inserir o nome, o tipo, o número de grupos de posicionamento e outras informações do pool, como aplicativos e modo e algoritmo de compactação. O próprio formulário do pool pré-calcula o número de grupos de posicionamento mais adequado a esse pool específico. O cálculo é baseado na quantidade de OSDs no cluster e no tipo de pool selecionado com suas configurações específicas. Assim que um número de grupos de posicionamento for definido manualmente, ele será substituído por um número calculado. Clique em <guimenu>Criar pool</guimenu> para confirmar.
   </para>
   <figure>
    <title>Adicionando um novo pool</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-pools-delete">
   <title>Apagando pools</title>
   <para>
    Para apagar um pool, clique na linha dele na tabela e clique em <guimenu>Excluir</guimenu> na parte superior esquerda da tabela de pools.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-pools-edit">
   <title>Editando opções de um pool</title>
   <para>
    Para editar as opções de um pool, clique na linha dele na tabela e selecione <guimenu>Editar</guimenu> na parte superior esquerda da tabela de pools.
   </para>
   <para>
    É possível mudar o nome do pool, aumentar o número de grupos de posicionamento, modificar a lista de aplicativos e as configurações de compactação do pool. Clique em <guimenu>Editar pool</guimenu> para confirmar.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-rbds">
  <title>Gerenciando dispositivos de blocos RADOS</title>

  <para>
   Para listar todos os Dispositivos de Blocos RADOS (RBDs, RADOS Block Devices) disponíveis, clique em <menuchoice><guimenu>Bloco</guimenu><guimenu>Imagens</guimenu></menuchoice> no menu principal.
  </para>

  <para>
   A lista mostra informações resumidas sobre o dispositivo, como nome, nome do pool relacionado, tamanho, número e tamanho dos objetos no dispositivo.
  </para>

  <figure>
   <title>Lista de Imagens RBD</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="dash_rbd_images.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dashboard-rbds-details">
   <title>Vendo detalhes sobre RBDs</title>
   <para>
    Para ver informações mais detalhadas sobre um dispositivo, clique na linha dele na tabela:
   </para>
   <figure>
    <title>Detalhes do RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_details.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-configuration">
   <title>Vendo a configuração do RBD</title>
   <para>
    Para ver a configuração detalhada de um dispositivo, clique na linha dele na tabela e, em seguida, na guia <guimenu>Configuração</guimenu> na tabela inferior:
   </para>
   <figure>
    <title>Configuração do RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_config.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-rbds-create">
   <title>Criando RBDs</title>
   <para>
    Para adicionar um novo dispositivo, clique em <guimenu>Adicionar</guimenu> na parte superior esquerda do cabeçalho da tabela e faça o seguinte na tela <guimenu>Criar RBD</guimenu>:
   </para>
   <figure>
    <title>Adicionando um novo RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbd_add.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Insira o nome do novo dispositivo. Consulte o <xref linkend="sysreq-naming"/> para saber as limitações de nomeação.
     </para>
    </step>
    <step>
     <para>
      Selecione o pool com o aplicativo “rbd” atribuído que será usado como base para criação do novo dispositivo RBD.
     </para>
    </step>
    <step>
     <para>
      Especifique o tamanho do novo dispositivo.
     </para>
    </step>
    <step>
     <para>
      Especifique outras opções para o dispositivo. Para ajustar os parâmetros do dispositivo, clique em <guimenu>Avançado</guimenu> e insira os valores para tamanho do objeto, unidade de distribuição ou total de distribuições. Para inserir limites de Qualidade do Serviço (QdS), clique em <guimenu>Qualidade do Serviço</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>Criar RBD</guimenu> para confirmar.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dashboard-rbd-delete">
   <title>Apagando RBDs</title>
   <para>
    Para apagar um dispositivo, clique na linha dele na tabela e selecione <guimenu>Excluir</guimenu> na parte superior esquerda do cabeçalho da tabela. Clique em <guimenu>Excluir RBD</guimenu> para confirmar a exclusão.
   </para>
   <tip>
    <title>Mover RBDs para o Lixo</title>
    <para>
     A exclusão de um RBD é uma ação irreversível. Em vez disso, se você <guimenu>Mover para Lixo</guimenu>, poderá restaurar o dispositivo posteriormente selecionando-o na guia <guimenu>Lixo</guimenu> da tabela principal e clicando em <guimenu>Restaurar</guimenu> na parte superior esquerda do cabeçalho da tabela.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-rbds-snapshots">
   <title>Instantâneos de dispositivo de blocos RADOS</title>
   <para>
    Para criar um instantâneo de Dispositivo de Blocos RADOS, clique na linha do dispositivo na tabela e, na guia <guimenu>Instantâneos</guimenu> abaixo da tabela principal, clique em <guimenu>Criar</guimenu> na parte superior esquerda do cabeçalho da tabela. Insira o nome do instantâneo e clique em <guimenu>Criar instantâneo</guimenu> para confirmar.
   </para>
   <para>
    Após selecionar um instantâneo, você poderá executar outras ações no dispositivo, como renomear, proteger, clonar, copiar ou apagar. <guimenu>Rollback</guimenu> restaura o estado do dispositivo com base no instantâneo atual.
   </para>
   <figure>
    <title>Instantâneos RBD</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_rbd_images_snapshots.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-iscsi">
   <title>Gerenciando iSCSI Gateways</title>
   <tip>
    <title>Mais informações sobre iSCSI Gateways</title>
    <para>
     Para obter mais informações gerais sobre iSCSI Gateways, consulte o <xref linkend="cha-ceph-as-iscsi"/> e o <xref linkend="cha-ceph-iscsi"/>.
    </para>
   </tip>
   <para>
    Para listar todos os gateways e imagens mapeadas disponíveis, clique em <menuchoice><guimenu>Bloco</guimenu><guimenu>iSCSI</guimenu></menuchoice> no menu principal. A guia <guimenu>Visão geral</guimenu> é aberta com a lista atual dos iSCSI Gateways configurados e das imagens RBD mapeadas.
   </para>
   <para>
    A tabela <guimenu>Gateways</guimenu> lista o estado de cada gateway, o número de destinos iSCSI e a quantidade de sessões. A tabela <guimenu>Imagens</guimenu> lista o nome de cada imagem mapeada, o tipo de backstore do nome do pool relacionado e outros detalhes estatísticos.
   </para>
   <para>
    A guia <guimenu>Destinos</guimenu> lista os destinos iSCSI configurados no momento.
   </para>
   <figure>
    <title>Lista de Destinos iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Para ver informações mais detalhadas sobre um destino, clique na linha dele na tabela. Um esquema estruturado em árvore é aberto com uma lista de discos, portais, iniciadores e grupos. Clique em um item para expndi-lo e ver seu conteúdo detalhado, opcionalmente com uma configuração relacionada na tabela à direita.
   </para>
   <figure>
    <title>Detalhes do Destino iSCSI</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-iscsi-create">
    <title>Adicionando destinos iSCSI</title>
    <para>
     Para adicionar um novo destino iSCSI, clique em <guimenu>Adicionar</guimenu> na parte superior esquerda da tabela <guimenu>Destinos</guimenu> e insira as informações necessárias.
    </para>
    <figure>
     <title>Adição de um Novo Destino</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       Digite o endereço de destino do novo gateway.
      </para>
     </step>
     <step>
      <para>
       Clique em <guimenu>Adicionar portal</guimenu> e selecione um ou vários portais iSCSI na lista.
      </para>
     </step>
     <step>
      <para>
       Clique em <guimenu>Adicionar imagem</guimenu> e selecione uma ou várias imagens RBD para o gateway.
      </para>
     </step>
     <step>
      <para>
       Se você precisa usar a autenticação para acessar o gateway, ative a caixa de seleção <guimenu>Autenticação</guimenu> e digite as credenciais. Você poderá encontrar opções de autenticação mais avançadas após ativar <guimenu>Autenticação mútua</guimenu> e <guimenu>Autenticação de descoberta</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Clique em <guimenu>Criar Destino</guimenu> para confirmar.
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-edit">
    <title>Editando destinos iSCSI</title>
    <para>
     Para editar um destino iSCSI existente, clique na linha dele na tabela <guimenu>Destinos</guimenu> e clique em <guimenu>Editar</guimenu> na parte superior esquerda da tabela.
    </para>
    <para>
     Em seguida, você pode modificar o destino iSCSI, adicionar ou apagar portais e adicionar ou apagar imagens RBD relacionadas. Você também pode ajustar as informações de autenticação para o gateway.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-iscsi-delete">
    <title>Apagando destinos iSCSI</title>
    <para>
     Para apagar um destino iSCSI, clique na linha dele na tabela e selecione <guimenu>Excluir</guimenu> na parte superior esquerda da tabela de gateways. Ative <guimenu>Sim, desejo</guimenu> e clique em <guimenu>Excluir iSCSI</guimenu> para confirmar.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-qos">
   <title>Qualidade do Serviço (QdS) do RBD</title>
   <tip>
    <title>Para obter mais informações</title>
    <para>
     Para obter mais informações gerais e uma descrição das opções de configuração de QdS do RBD, consulte a <xref linkend="rbd-qos"/>.
    </para>
   </tip>
   <para>
    É possível configurar as opções de QdS em diferentes níveis.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Globalmente
     </para>
    </listitem>
    <listitem>
     <para>
      Por pool
     </para>
    </listitem>
    <listitem>
     <para>
      Por imagem
     </para>
    </listitem>
   </itemizedlist>
   <para>
    A configuração <emphasis>global</emphasis> fica na parte superior da lista e será usada para todas as imagens RBD recém-criadas e para as imagens que não anulam esses valores no pool nem na camada da imagem RBD. Um valor de opção especificado globalmente pode ser anulado por pool ou por imagem. As opções especificadas em um pool serão aplicadas a todas as imagens RBD desse pool, exceto se forem anuladas por uma opção de configuração definida em um pool. As opções especificadas em uma imagem anularão as opções especificadas em um pool e globalmente.
   </para>
   <para>
    Dessa forma, é possível definir padrões globalmente, adaptá-los a todas as imagens RBD de um pool específico e anular a configuração do pool para imagens RBD individuais.
   </para>
   <sect3 xml:id="dash-rbd-qos-global">
    <title>Configurando opções globalmente</title>
    <para>
     Para configurar opções de RBD globalmente, selecione <menuchoice><guimenu>Cluster</guimenu> <guimenu>Configuração</guimenu></menuchoice> no menu principal.
    </para>
    <para>
     Para listar todas as opções de configuração global disponíveis, clique em <menuchoice><guimenu>Nível</guimenu> <guimenu>Avançado</guimenu></menuchoice>. Em seguida, filtre os resultados da tabela filtrando por “rbd_qos” no campo de pesquisa. Esse procedimento lista todas as opções de configuração disponíveis para QdS. Para mudar um valor, clique na linha dele na tabela e selecione <guimenu>Editar</guimenu> na parte superior esquerda da tabela. A caixa de diálogo <guimenu>Editar</guimenu> inclui seus campos diferentes para especificar valores. Os valores da opção de configuração do RBD são obrigatórios na caixa de texto <guimenu>mgr</guimenu>. Ao contrário das outras caixas de diálogo, observe que esta não permite especificar o valor em unidades convenientes. É necessário definir esses valores em bytes ou IOPS, dependendo da opção que você está editando.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-create">
    <title>Configurando opções em um novo pool</title>
    <para>
     Para criar um novo pool e definir opções de configuração do RBD nele, clique em <menuchoice><guimenu>Pools</guimenu> <guimenu>Criar</guimenu></menuchoice>. Selecione <guimenu>replicado</guimenu> como tipo de pool. Em seguida, você precisa adicionar a tag do aplicativo <guimenu>rbd</guimenu> ao pool para poder configurar as opções de QdS do RBD.
    </para>
    <note>
     <para>
      Não é possível definir opções de configuração de QdS do RBD em um pool com codificação de eliminação. Para definir opções de QdS do RBD para pools com codificação de eliminação, você precisa editar o pool replicado de metadados de uma imagem RBD. Na sequência, a configuração será aplicada ao pool de dados com codificação de eliminação dessa imagem.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-pool-edit">
    <title>Configurando opções em pool existente</title>
    <para>
     Para definir opções de QdS do RBD em um pool existente, clique em <guimenu>Pools</guimenu>, clique na linha do pool na tabela e selecione <guimenu>Editar</guimenu> na parte superior esquerda da tabela.
    </para>
    <para>
     Você deve ver a seção <guimenu>Configuração do RBD</guimenu> na caixa de diálogo, seguida de uma seção <guimenu>Qualidade do Serviço</guimenu>.
    </para>
    <note>
     <para>
      Se a seção <guimenu>Configuração do RBD</guimenu> ou <guimenu>Qualidade do Serviço</guimenu> não for exibida, provavelmente você estará editando um pool <emphasis>com codificação de eliminação</emphasis>, que não pode ser usado para definir opções de configuração do RBD, ou o pool não foi configurado para uso por imagens RBD. Neste último caso, atribua a tag do aplicativo <guimenu>rbd</guimenu> ao pool, e as seções de configuração correspondentes serão exibidas.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-qos">
    <title>Opções de configuração</title>
    <para>
     Clique em <guimenu>Qualidade do Serviço +</guimenu> para expandir as opções de configuração. Uma lista de todas as opções disponíveis será exibida. As unidades das opções de configuração já aparecem nas caixas de texto. No caso de qualqer opção de bytes por segundo (BPS, bytes per second), use atalhos como “1M” ou “5G”. Eles serão automaticamente convertidos em “1 MB/s” e “5 GB/s”, respectivamente.
    </para>
    <para>
     Ao clicar no botão de redefinição à direita de cada caixa de texto, qualquer valor definido no pool será removido. Isso não remove os valores de configuração das opções definidas globalmente ou em uma imagem RBD.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-create">
    <title>Criando opções de QdS do RBD com uma nova imagem RBD</title>
    <para>
     Para criar uma imagem RBD com opções de QdS do RBD definidas nela, selecione <menuchoice><guimenu>Bloco</guimenu> <guimenu>Imagens</guimenu></menuchoice> e clique em <guimenu>Criar</guimenu>. Clique em <guimenu>Avançado</guimenu> para expandir a seção de configuração avançada. Clique em <guimenu>Qualidade do Serviço</guimenu> para abrir todas as opções de configuração disponíveis.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-edit">
    <title>Editando opções de QdS do RBD em imagens existentes</title>
    <para>
     Para editar as opções de QdS do RBD em uma imagem existente, selecione <menuchoice><guimenu>Bloco</guimenu> <guimenu>Imagens</guimenu></menuchoice>, clique na linha do pool na tabela e, por último, clique em <guimenu>Editar</guimenu>. A caixa de diálogo de edição será exibida. Clique em <guimenu>Avançado</guimenu> para expandir a seção de configuração avançada. Clique em <guimenu>Qualidade do Serviço</guimenu> para abrir todas as opções de configuração disponíveis.
    </para>
   </sect3>
   <sect3 xml:id="dash-rbd-qos-image-copy">
    <title>Mudando as opções de configuração ao copiar ou clonar imagens</title>
    <para>
     Se uma imagem RBD for clonada ou copiada, os valores definidos nela também serão copiados por padrão. Para mudá-los durante a cópia ou clonagem, você pode especificar os valores de configuração atualizados na caixa de diálogo de cópia/clonagem da mesma forma que na criação ou edição de uma imagem RBD. Esse procedimento apenas definirá (ou redefinirá) os valores para a imagem RBD que é copiada ou clonada. Essa operação não muda a configuração da imagem RBD de origem nem a configuração global.
    </para>
    <para>
     Se você redefinir o valor da opção durante a cópia/clonagem, nenhum valor para essa opção será definido nessa imagem. Isso significa que qualquer valor dessa opção especificado para o pool pai será usado se o pool pai tiver o valor configurado. Do contrário, o padrão global será usado.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dash-rbd-mirror">
   <title>Espelhamento do RBD</title>
   <tip>
    <title>Informações Gerais</title>
    <para>
     Para obter informações gerais e a abordagem de linha de comando para espelhamento do Dispositivo de Blocos RADOS, consute a <xref linkend="ceph-rbd-mirror"/>.
    </para>
   </tip>
   <para>
    Você pode usar o Ceph Dashboard para configurar a replicação de imagens RBD entre dois ou mais clusters.
   </para>
   <sect3 xml:id="rbd-mirror-primary-secondary">
    <title>Cluster principal e cluster(s) secundário(s)</title>
    <para>
     O cluster <emphasis>principal</emphasis> é onde o pool original com as imagens é criado. O(s) cluster(s) <emphasis>secundário(s)</emphasis> é/são onde o pool/imagens são replicados do cluster <emphasis>principal</emphasis>.
    </para>
    <note>
     <title>Nomeação Relativa</title>
     <para>
      Os termos <emphasis>principal</emphasis> e <emphasis>secundário</emphasis> podem ser relativos no contexto de replicação porque estão mais relacionados aos pools individuais do que aos clusters. Por exemplo, na replicação de duas vias, é possível espelhar um pool do cluster <emphasis>principal</emphasis> para o <emphasis>secundário</emphasis>. É possível também espelhar outro pool do cluster <emphasis>secundário</emphasis> para o <emphasis>principal</emphasis>.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="rbd-mirroring-replication-modes">
    <title>Modos de replicação</title>
    <para>
     Há dois modos de replicação de dados:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Usando o modo <emphasis>pool</emphasis>, você replica todas as imagens RBD em um pool.
      </para>
     </listitem>
     <listitem>
      <para>
       Usando o modo <emphasis>imagem</emphasis>, você pode ativar o espelhamento apenas para imagem(ns) específica(s) em um pool.
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui-daemon">
    <title>Configurando o daemon <systemitem class="daemon">rbd-mirror</systemitem></title>
    <para>
     O daemon <systemitem class="daemon">rbd-mirror</systemitem> executa a replicação de dados do cluster real. Para instalá-lo, configurá-lo e executá-lo, siga estas etapas:
    </para>
    <procedure>
     <step>
      <para>
       O daemon <systemitem class="daemon">rbd-mirror</systemitem> precisa ser executado em um dos nós no cluster <emphasis>secundário</emphasis> que não seja o Nó de Admin. Como ele não é instalado por padrão, instale-o:
      </para>
<screen><prompt>root@minion &gt; </prompt>zypper install rbd-mirror</screen>
     </step>
     <step>
      <para>
       No cluster <emphasis>principal</emphasis>, crie um ID de usuário exclusivo do Ceph para o processo do daemon <systemitem class="daemon">rbd-mirror</systemitem>. Neste exemplo, usaremos “uid1” como o ID de usuário:
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd'
[client.rbd-mirror.uid1]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       No nó onde você já instalou o pacote
       <package>rbd-mirror</package> no cluster <emphasis>secundário</emphasis>, crie o mesmo usuário do Ceph e grave a saída em um chaveiro:
      </para>
<screen><prompt>root@minion &gt; </prompt>ceph auth get-or-create client.rbd-mirror.uid1 \
 mon 'profile rbd-mirror' osd 'profile rbd' \
 &gt; /etc/ceph/ceph.client.rbd-mirror.uid1.keyring</screen>
     </step>
     <step>
      <para>
       No mesmo nó, habilite e execute o serviço <systemitem class="daemon">rbd-mirror</systemitem>:
      </para>
<screen><prompt>root@minion &gt; </prompt>systemctl enable ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl start ceph-rbd-mirror@rbd-mirror.uid1
<prompt>root@minion &gt; </prompt>systemctl status ceph-rbd-mirror@rbd-mirror.uid1
● ceph-rbd-mirror@rbd-mirror.uid1.service - Ceph rbd mirror daemon
   Loaded: loaded (/usr/lib/systemd/system/ceph-rbd-mirror@.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2019-10-04 07:48:53 EDT; 2 days ago
 Main PID: 212434 (rbd-mirror)
    Tasks: 47
   CGroup: /system.slice/system-ceph\x2drbd\x2dmirror.slice/ceph-rbd-mirror@rbd-mirror.uid1.service
           └─212434 /usr/bin/rbd-mirror -f --cluster ceph --id rbd-mirror.test --setuser ceph --setgroup ceph

Oct 04 07:48:53 doc-ses6min4 systemd[1]: Started Ceph rbd mirror daemon.
</screen>
     </step>
     <step>
      <para>
       No Ceph Dashboard do cluster <emphasis>secundário</emphasis>, navegue até <menuchoice><guimenu>Bloco</guimenu><guimenu>Espelhamento</guimenu></menuchoice>. A tabela <guimenu>Daemons</guimenu> à esquerda mostra os daemons <systemitem>rbd-mirror</systemitem> em execução ativa e a saúde deles.
      </para>
      <figure>
       <title>Execução dos Daemons <systemitem class="daemon">rbd-mirror</systemitem></title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-daemon.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-gui">
    <title>Configurando a replicação do pool no Ceph Dashboard</title>
    <para>
     O daemon <systemitem class="daemon">rbd-mirror</systemitem> precisa ter acesso ao cluster principal para poder espelhar imagens RBD. Portanto, você precisa criar uma conta de usuário do Ceph <emphasis>peer</emphasis> no cluster principal e informar o cluster secundário sobre o chaveiro dele:
    </para>
    <procedure>
     <step>
      <para>
       No cluster <emphasis>principal</emphasis>, crie um novo usuário “client.rbd-mirror-peer” que será utilizado para replicação de dados:
      </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth get-or-create client.rbd-mirror-peer \
 mon 'profile rbd' osd 'profile rbd'
[client.rbd-mirror-peer]
	key = AQBbDJddZKLBIxAAdsmSCCjXoKwzGkGmCpUQ9g==</screen>
     </step>
     <step>
      <para>
       Em ambos os clusters <emphasis>principal</emphasis> e <emphasis>secundário</emphasis>, crie um pool com um nome idêntico e atribua o aplicativo “rbd” a ele. Consulte a <xref linkend="dashboard-pools-create"/> para obter mais detalhes sobre a criação de um novo pool.
      </para>
      <figure>
       <title>Criação de um Pool com Aplicativo RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Em ambos os painéis de controle dos clusters <emphasis>principal</emphasis> e <emphasis>secundário</emphasis>, navegue até <menuchoice><guimenu>Bloco</guimenu><guimenu>Espelhamento</guimenu></menuchoice>. Na tabela <guimenu>Pools</guimenu> à direita, clique no nome do pool que será replicado e, após clicar em <guimenu>Modo de Edição</guimenu>, selecione o modo de replicação. Neste exemplo, trabalharemos com um modo de replicação de <emphasis>pool</emphasis>, o que significa que todas as imagens em um determinado pool serão replicadas. Clique em <guimenu>Atualizar</guimenu> para confirmar.
      </para>
      <figure>
       <title>Configuração do Modo de Replicação</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-mode.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <important>
       <title>Erro ou Aviso no Cluster Principal</title>
       <para>
        Após a atualização do modo de replicação, um flag de erro ou aviso aparecerá na coluna direita correspondente. Isso acontece porque o pool ainda não tem um usuário peer atribuído para replicação. Ignore esse flag para o cluster <emphasis>principal</emphasis> já que atribuímos um usuário peer apenas ao cluster <emphasis>secundário</emphasis>.
       </para>
      </important>
     </step>
     <step>
      <para>
       No Painel de Controle do cluster <emphasis>secundário</emphasis>, navegue até <menuchoice><guimenu>Bloco</guimenu><guimenu>Espelhamento</guimenu></menuchoice>. Registre o chaveiro do usuário “client.rbd-mirror-peer” no pool espelhado clicando no nome do pool e selecionando <guimenu>Adicionar Peer</guimenu>. Insira os detalhes do cluster <emphasis>principal</emphasis>:
      </para>
      <figure>
       <title>Adição de Credenciais do Peer</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-peer.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <variablelist>
       <varlistentry>
        <term><guimenu>Cluster Name</guimenu></term>
        <listitem>
         <para>
          Uma string exclusiva arbitrária que identifica o cluster principal, como “primary”. O nome do cluster precisa ser diferente do nome do cluster secundário real.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>ID do CephX</guimenu></term>
        <listitem>
         <para>
          O ID de usuário do Ceph que você criou como um peer de espelhamento. Neste exemplo, ele é o “rbd-mirror-peer”.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Endereços do Monitor</guimenu></term>
        <listitem>
         <para>
          Lista separada por vírgula de endereços IP/nomes de host dos nós do Ceph Monitor do cluster principal.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><guimenu>Chave do CephX</guimenu></term>
        <listitem>
         <para>
          A chave relacionada ao ID de usuário peer. Você pode recuperá-la executando o seguinte comando de exemplo no cluster principal:
         </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph auth print_key client.rbd-mirror-peer</screen>
        </listitem>
       </varlistentry>
      </variablelist>
      <para>
       Clique em <guimenu>Enviar</guimenu> para confirmar.
      </para>
      <figure>
       <title>Lista de Pools Replicados</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="rbd-mirror-test">
    <title>Verificando se a replicação de imagens RBD funciona</title>
    <para>
     Quando o daemon <systemitem class="daemon">rbd-mirror</systemitem> está em execução e a replicação de imagens RBD foi configurada no Ceph Dashboard, é hora de verificar se a replicação está realmente funcionando:
    </para>
    <procedure>
     <step>
      <para>
       No Ceph Dashboard do cluster <emphasis>principal</emphasis>, crie uma imagem RBD de modo que seu pool pai seja o pool que você já criou para fins de replicação. Habilite os recursos <option>Bloqueio exclusivo</option> e <option>Registro em diário</option> para a imagem. Consulte a <xref linkend="dashboard-rbds-create"/> para obter detalhes sobre como criar imagens RBD.
      </para>
      <figure>
       <title>Nova Imagem RBD</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-image.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       Após criar a imagem que você deseja replicar, abra o Ceph Dashboard do cluster <emphasis>secundário</emphasis> e navegue até <menuchoice><guimenu>Bloco</guimenu><guimenu>Espelhamento</guimenu></menuchoice>. A tabela <guimenu>Pools</guimenu> à direita refletirá a mudança no número de imagens de <guimenu>Nº Remoto</guimenu> e sincronizará o número de imagens de <guimenu>Nº Local</guimenu>.
      </para>
      <figure>
       <title>Nova Imagem RBD Sincronizada</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="rbd-mirror-pool-list-1.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
      <tip>
       <title>Andamento da Replicação</title>
       <para>
        A tabela <guimenu>Imagens</guimenu> na parte inferior da página mostra o status da replicação das imagens RBD. A guia <guimenu>Problemas</guimenu> inclui possíveis problemas, a guia <guimenu>Sincronizando</guimenu> exibe o andamento da replicação de imagens e a guia <guimenu>Pronto</guimenu> lista todas as imagens com replicação bem-sucedida.
       </para>
       <figure>
        <title>Status da Replicação das Imagens RBD</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="rbd-mirror-images-status.png" width="75%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </tip>
     </step>
     <step>
      <para>
       No cluster <emphasis>principal</emphasis>, grave os dados na imagem RBD. No Ceph Dashboard do cluster <emphasis>secundário</emphasis>, navegue até <menuchoice><guimenu>Bloco</guimenu><guimenu>Imagens</guimenu></menuchoice> e monitore se o tamanho da imagem correspondente aumenta à medida que os dados no cluster principal são gravados.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dash-webui-nfs">
  <title>Gerenciando o NFS Ganesha</title>

  <tip>
   <title>Mais informações sobre o NFS Ganesha</title>
   <para>
    Para obter mais informações gerais sobre o NFS Ganesha, consulte o <xref linkend="cha-ceph-nfsganesha"/>.
   </para>
  </tip>

  <para>
   Para listar todas as exportações NFS disponíveis, clique em <guimenu>NFS</guimenu> no menu principal.
  </para>

  <para>
   A lista mostra o diretório de cada exportação, o nome de host do daemon, o tipo de back end de armazenamento e o tipo de acesso.
  </para>

  <figure>
   <title>Lista de exportações NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   Para ver informações mais detalhadas sobre uma exportação NFS, clique na linha dela na tabela.
  </para>

  <figure>
   <title>Detalhes da exportação NFS</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <sect2 xml:id="dash-webui-nfs-create">
   <title>Adicionando exportações NFS</title>
   <para>
    Para adicionar uma nova exportação NFS, clique em <guimenu>Adicionar</guimenu> na parte superior esquerda da tabela de exportações e insira as informações necessárias.
   </para>
   <figure>
    <title>Adicionando uma nova exportação NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure>
    <step>
     <para>
      Selecione um ou mais daemons NFS Ganesha que executarão a exportação.
     </para>
    </step>
    <step>
     <para>
      Selecione um back end de armazenamento: <guimenu>CephFS</guimenu> ou <guimenu>Object Gateway</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Selecione um ID de usuário e outras opções relacionadas ao back end.
     </para>
    </step>
    <step>
     <para>
      Digite o caminho do diretório para a exportação NFS. Se o diretório não existir no servidor, ele será criado.
     </para>
    </step>
    <step>
     <para>
      Especifique outras opções relacionadas ao NFS, como versão do protocolo NFS suportada, pseudo, tipo de acesso, squash ou protocolo de transporte.
     </para>
    </step>
    <step>
     <para>
      Se você precisa limitar o acesso apenas a determinados clientes, clique em <guimenu>Adicionar clientes</guimenu> e adicione os endereços IP deles juntamente com o tipo de acesso e as opções de squash.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>Enviar</guimenu> para confirmar.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-delete">
   <title>Apagando exportações NFS</title>
   <para>
    Para apagar uma exportação, clique na linha dela na tabela e selecione <guimenu>Excluir</guimenu> na parte superior esquerda da tabela de exportações.
   </para>
  </sect2>

  <sect2 xml:id="dash-webui-nfs-edit">
   <title>Editando exportações NFS</title>
   <para>
    Para editar uma exportação existente, clique na linha dela na tabela e clique em <guimenu>Editar</guimenu> na parte superior esquerda da tabela de exportações.
   </para>
   <para>
    Em seguida, você pode ajustar todos os detalhes da exportação NFS.
   </para>
   <figure>
    <title>Editando uma exportação NFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-mds">
  <title>Gerenciando sistemas de arquivos Ceph</title>

  <tip>
   <title>Para obter mais informações</title>
   <para>
    Para encontrar informações detalhadas sobre o CephFS, consulte o <xref linkend="cha-ceph-cephfs"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-mds-overview">
   <title>Acessando a visão geral do CephFS</title>
   <para>
    Clique em <guimenu>Sistemas de arquivos</guimenu> no menu principal para acessar a visão geral dos sistemas de arquivos configurados. A tabela principal mostra o nome e a data de criação de cada sistema de arquivos, e se ele está ou não habilitado.
   </para>
   <para>
    Ao clicar na linha de um sistema de arquivos na tabela, você revela detalhes sobre sua classificação e os pools adicionados a ele.
   </para>
   <figure>
    <title>Detalhes do CephFS</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_cephfs_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Na parte inferior da tela, você pode ver estatísticas que mostram o número de inodes MDS relacionados e solicitações de clientes, coletadas em tempo real.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-ogw">
  <title>Gerenciando Object Gateways</title>

  <tip>
   <title>Mais Informações sobre o Object Gateway</title>
   <para>
    Para obter mais informações gerais sobre o Object Gateway, consulte o <xref linkend="cha-ceph-gw"/>.
   </para>
  </tip>

  <sect2 xml:id="dashboard-ogw-view">
   <title>Vendo Object Gateways</title>
   <para>
    Para ver uma lista de Object Gateways configurados, clique em <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Daemons</guimenu></menuchoice>. A lista inclui o ID do gateway, o nome de host do nó do cluster onde o daemon do gateway está sendo executado e o número da versão do gateway.
   </para>
   <para>
    Clique na linha de um gateway na tabela para ver informações detalhadas sobre ele. A guia <guimenu>Contadores de Desempenho</guimenu> mostra detalhes sobre as operações de leitura/gravação e as estatísticas do cache.
   </para>
   <figure>
    <title>Detalhes do Gateway</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="dashboard-ogw-user">
   <title>Gerenciando usuários do Object Gateway</title>
   <para>
    Clique em <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Usuários</guimenu></menuchoice> para ver uma lista dos usuários existentes do Object Gateway.
   </para>
   <para>
    Clique na linha de um usuário na tabela para ver detalhes sobre a conta de usuário, como informações de status ou detalhes da cota de usuário e de compartimento de memória.
   </para>
   <figure>
    <title>Usuários do Gateway</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="dash_ogw_users_details.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="dashboard-ogw-user-create">
    <title>Adicionando um novo usuário do Gateway</title>
    <para>
     Para adicionar um novo usuário do gateway, clique em <guimenu>Adicionar</guimenu> na parte superior esquerda do cabeçalho da tabela. Preencha as credenciais dele, os detalhes sobre a chave S3 e a cota de usuário/compartimento de memória e clique em <guimenu>Adicionar</guimenu> para confirmar.
    </para>
    <figure>
     <title>Adicionando um novo usuário do Gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_user_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-delete">
    <title>Apagando usuários do Gateway</title>
    <para>
     Para apagar um usuário do gateway, clique na linha do usuário na tabela e selecione <guimenu>Excluir</guimenu> na parte superior esquerda do cabeçalho da tabela. Ative a caixa de seleção <guimenu>Sim, desejo</guimenu> e clique em <guimenu>Excluir usuário</guimenu> para confirmar.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-user-edit">
    <title>Editando detalhes do usuário do gateway</title>
    <para>
     Para mudar os detalhes do usuário do gateway, clique na linha do usuário na tabela e selecione <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela.
    </para>
    <para>
     Modifique as informações básicas ou adicionais do usuário, como informações de recursos, chaves, subusuários e cotas. Clique em <guimenu>Atualizar</guimenu> para confirmar.
    </para>
    <para>
     A guia <guimenu>Chaves</guimenu> inclui uma lista apenas leitura de usuários do gateway e suas chaves de acesso e secretas. Para ver as chaves, clique em um nome de usuário na lista e selecione <guimenu>Mostrar</guimenu> na parte superior esquerda do cabeçalho da tabela. Na caixa de diálogo <guimenu>Chave S3</guimenu>, clique no ícone de “olho” para exibir as chaves ou clique no ícone da área de transferência para copiar a chave relacionada para a área de transferência.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-ogw-bucket">
   <title>Gerenciando compartimentos de memória do Object Gateway</title>
   <para>
    Os compartimentos de memória do Object Gateway (OGW) implementam a funcionalidade dos containers OpenStack Swift. Os compartimentos de memória do Object Gateway servem como containers para armazenar objetos de dados.
   </para>
   <para>
    Clique em <menuchoice><guimenu>Object Gateway</guimenu><guimenu>Compartimentos</guimenu></menuchoice> para ver uma lista de compartimentos de memória do OGW.
   </para>
   <sect3 xml:id="dashboard-ogw-bucket-create">
    <title>Adicionando um novo compartimento de memória</title>
    <para>
     Para adicionar um novo compartimento de memória do OGW, clique em <guimenu>Adicionar</guimenu> na parte superior esquerda do cabeçalho da tabela. Insira o nome do compartimento de memória e selecione o proprietário dele. Confirme com <guimenu>Add</guimenu> (Adicionar).
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-view">
    <title>Vendo detalhes do compartimento de memória</title>
    <para>
     Para ver informações detalhadas sobre um compartimento de memória do OGW, clique na linha dele na tabela.
    </para>
    <figure>
     <title>Detalhes do Compartimento de Memória do Gateway</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="dash_ogw_bucket_details.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <tip>
     <title>Cota de Compartimento de Memória</title>
     <para>
      Abaixo da tabela <guimenu>Detalhes</guimenu>, você encontra detalhes sobre as configurações de cota de compartimento de memória.
     </para>
    </tip>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-edit">
    <title>Atualizando o proprietário de um compartimento de memória</title>
    <para>
     Clique na linha de um compartimento de memória na tabela e selecione <guimenu>Editar</guimenu> na parte superior esquerda do cabeçalho da tabela.
    </para>
    <para>
     Atualize o proprietário do compartimento de memória e clique em <guimenu>Atualizar</guimenu> para confirmar.
    </para>
   </sect3>
   <sect3 xml:id="dashboard-ogw-bucket-delete">
    <title>Apagando um compartimento de memória</title>
    <para>
     Para apagar um compartimento de memória do OGW, clique na linha dele na tabela e selecione <guimenu>Excluir</guimenu> na parte superior esquerda do cabeçalho da tabela. Ative a caixa de seleção <guimenu>Sim, desejo</guimenu> e clique em <guimenu>Excluir compartimento</guimenu> para confirmar.
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-initial-configuration">
  <title>Configuração manual</title>

  <para>
   Esta seção apresenta informações avançadas para usuários que preferem definir as configurações do painel de controle manualmente na linha de comando.
  </para>

  <sect2 xml:id="dashboard-ssl">
   <title>Suporte a TLS/SSL</title>
   <para>
    Todas as conexões HTTP com o painel de controle são protegidas com SSL/TLS por padrão. Uma conexão segura requer um certificado SSL. Você pode usar um certificado autoassinado ou gerar um certificado assinado por uma autoridade de certificação (CA, certificate authority) reconhecida.
   </para>
   <tip>
    <title>Desabilitação de SSL</title>
    <para>
     Talvez você tenha algum motivo específico para desabilitar o suporte a SSL. Por exemplo, se o painel de controle for executado por meio de um proxy que não suporta SSL.
    </para>
    <para>
     Tenha cuidado ao desabilitar o SSL, já que os <emphasis role="bold">nomes de usuário e as senhas</emphasis> serão enviados ao painel de controle <emphasis role="bold">não criptografados</emphasis>.
    </para>
    <para>
     Para desabilitar o SSL, execute:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/ssl false
</screen>
   </tip>
   <tip>
    <title>Reiniciar Processos do Ceph Manager</title>
    <para>
     Você precisará reiniciar os processos do Ceph Manager manualmente após mudar o certificado SSL e a chave. Para fazer isso, é possível executar
    </para>
<screen><prompt>cephadm@adm &gt; </prompt>ceph mgr fail<replaceable>ACTIVE-MANAGER-NAME</replaceable></screen>
    <para>
     ou desabilitar e habilitar novamente o módulo do painel de controle, o que também aciona o gerenciador para se reativar:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph mgr module disable dashboard
<prompt>cephadm@adm &gt; </prompt>ceph mgr module enable dashboard
</screen>
   </tip>
   <sect3 xml:id="self-sign-certificates">
    <title>Certificados autoassinados</title>
    <para>
     A criação de um certificado autoassinado para uma comunicação segura é simples. Dessa forma, você pode fazer com que o painel de controle seja executado rapidamente.
    </para>
    <note>
     <title>Reclamação dos Browsers da Web</title>
     <para>
      A maioria dos browsers da Web reclamará de um certificado autoassinado e exigirá a confirmação explícita antes de estabelecer uma conexão segura com o painel de controle.
     </para>
    </note>
    <para>
     Para gerar e instalar um certificado autoassinado, use o seguinte comando incorporado:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard create-self-signed-cert
</screen>
   </sect3>
   <sect3 xml:id="cert-sign-CA">
    <title>Certificados assinados por CA</title>
    <para>
     Para proteger apropriadamente a conexão com o painel de controel e eliminar as reclamações do browser da Web por causa de um certificado autoassinado, recomendamos o uso de um certificado assinado por uma CA.
    </para>
    <para>
     Você pode gerar um par de chaves do certificado com um comando semelhante ao seguinte:
    </para>
<screen>
<prompt>root # </prompt>openssl req -new -nodes -x509 \
  -subj "/O=IT/CN=ceph-mgr-dashboard" -days 3650 \
  -keyout dashboard.key -out dashboard.crt -extensions v3_ca
</screen>
    <para>
     O comando acima resulta nos arquivos <filename>dashboard.key</filename> e <filename>dashboard.crt</filename>. Após receber o arquivo <filename>dashboard.crt</filename> assinado por uma CA, habilite-o para todas as instâncias do Ceph Manager executando os seguintes comandos:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/key -i dashboard.key
</screen>
    <tip>
     <title>Certificados Diferentes para Cada Instância do Gerenciador</title>
     <para>
      Se você precisar de certificados diferentes para cada instância do Ceph Manager, modifique os comandos e inclua o nome da instância da seguinte maneira. Substitua <replaceable>NAME</replaceable> pelo nome da instância do Ceph Manager (normalmente, o nome de host relacionado):
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/crt -i dashboard.crt
<prompt>cephadm@adm &gt; </prompt>ceph config-key set mgr/dashboard/<replaceable>NAME</replaceable>/key -i dashboard.key
</screen>
    </tip>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-hostname-port">
   <title>Nome de host e número da porta</title>
   <para>
    O aplicativo Web do Ceph Dashboard está vinculado a um endereço TCP/IP e uma porta TCP específicos. Por padrão, o Ceph Manager ativo no momento e que hospeda o painel de controle está vinculado à porta TCP 8443 (ou 8080 quando o SSL está desabilitado).
   </para>
   <para>
    Por padrão, o aplicativo Web do painel de controle está vinculado a "::", que corresponde a todos os endereços IPv4 e IPv6 disponíveis. Você pode mudar o endereço IP e o número da porta do aplicativo Web para que eles se apliquem a todas as instâncias do Ceph Manager usando os seguintes comandos:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   <tip>
    <title>Configurar as Instâncias do Ceph Manager Separadamente</title>
    <para>
     Como cada daemon <systemitem class="daemon">ceph-mgr</systemitem> hospeda sua própria instância do painel de controle, talvez seja necessário configurá-los separadamente. Mude o endereço IP e o número da porta para uma instância específica do gerenciador usando os seguintes comandos (substitua <replaceable>NAME</replaceable> pelo ID da instância do <systemitem class="daemon">ceph-mgr</systemitem>):
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_addr <replaceable>IP_ADDRESS</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/<replaceable>NAME</replaceable>/server_port <replaceable>PORT_NUMBER</replaceable>
</screen>
   </tip>
   <tip>
    <title>Listar Endpoints Configurados</title>
    <para>
     O comando <command>ceph mgr services</command> exibe todos os endpoints que estão configurados. Procure a chave “dashboard” para obter o URL de acesso ao painel de controle.
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="dashboard-username-password">
   <title>Nome de usuário e senha</title>
   <para>
    Se você não deseja usar a conta de administrador padrão, crie uma conta de usuário diferente e associe-a a pelo menos uma função. Oferecemos um conjunto de funções de sistema predefinidas que você pode usar. Para obter mais detalhes, consulte a <xref linkend="dashboard-user-roles"/>.
   </para>
   <para>
    Para criar um usuário com privilégios de administrador, use o seguinte comando:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USER_NAME</replaceable> <replaceable>PASSWORD</replaceable> administrator
</screen>
  </sect2>

  <sect2 xml:id="dashboard-ogw-enabling">
   <title>Habilitando o front end de gerenciamento do Object Gateway</title>
   <para>
    Para usar a funcionalidade de gerenciamento do Object Gateway do painel de controle, você precisa fornecer as credenciais de login de um usuário com o flag “system” habilitado:
   </para>
   <procedure>
    <step>
     <para>
      Se você não tem um usuário com o flag “system”, crie um:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user create --uid=<replaceable>USER_ID</replaceable> --display-name=<replaceable>DISPLAY_NAME</replaceable> --system
</screen>
     <para>
      Anote as chaves “access_key” e “secret_key” na saída do comando.
     </para>
    </step>
    <step>
     <para>
      Você também pode obter as credenciais de um usuário existente usando o comando <command>radosgw-admin</command>:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>radosgw-admin user info --uid=<replaceable>USER_ID</replaceable>
</screen>
    </step>
    <step>
     <para>
      Insira as credenciais recebidas no painel de controle:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-access-key <replaceable>ACCESS_KEY</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-secret-key <replaceable>SECRET_KEY</replaceable>
</screen>
    </step>
   </procedure>
   <para>
    Há vários pontos a serem considerados:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      O nome de host e o número da porta do Object Gateway são determinados automaticamente.
     </para>
    </listitem>
    <listitem>
     <para>
      Se várias zonas forem usadas, ele determinará automaticamente o host no grupo de zonas master e na zona master. Isso é o suficiente para a maioria das configurações. No entanto, em algumas circunstâncias, talvez você queira definir o nome de host e a porta manualmente:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-host <replaceable>HOST</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-port <replaceable>PORT</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Veja a seguir outras configurações que você pode precisar:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-scheme <replaceable>SCHEME</replaceable>  # http or https
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-admin-resource <replaceable>ADMIN_RESOURCE</replaceable>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-user-id <replaceable>USER_ID</replaceable>
</screen>
    </listitem>
    <listitem>
     <para>
      Se você usa um certificado autoassinado (<xref linkend="dashboard-ssl"/>) na configuração do Object Gateway, desabilite a verificação de certificado no painel de controle para evitar conexões recusadas por causa de certificados assinados por uma CA desconhecida ou que não correspondem ao nome de host:
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rgw-api-ssl-verify False
</screen>
    </listitem>
    <listitem>
     <para>
      Se o Object Gateway levar muito tempo para processar as solicitações, e se a execução do painel de controle apresentar tempo de espera, o valor do tempo de espera poderá ser ajustado (o padrão é 45 segundos):
     </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-rest-requests-timeout <replaceable>SECONDS</replaceable>
</screen>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="dashboard-sso">
   <title>Habilitando login único</title>
   <para>
    O <emphasis>Login Único</emphasis> (SSO, Single Sign-On) é um método de controle de acesso que permite aos usuários efetuar login com ID e senha exclusivos em vários aplicativos simultaneamente.
   </para>
   <para>
    O Ceph Dashboard suporta autenticação externa de usuários por meio do protocolo SAML 2.0. Como a <emphasis>autorização</emphasis> ainda é realizada pelo painel de controle, você precisa primeiro criar as contas de usuário e associá-las às funções desejadas. No entanto, o processo de <emphasis>autenticação</emphasis> pode ser efetuado por um <emphasis>Provedor de Identidade</emphasis> (IdP, Identity Provider) existente.
   </para>
   <para>
    Para configurar o Login Único, use o seguinte comando:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso setup saml2 <replaceable>CEPH_DASHBOARD_BASE_URL</replaceable> \
 <replaceable>IDP_METADATA</replaceable> <replaceable>IDP_USERNAME_ATTRIBUTE</replaceable> \
 <replaceable>IDP_ENTITY_ID</replaceable> <replaceable>SP_X_509_CERT</replaceable> \
 <replaceable>SP_PRIVATE_KEY</replaceable>
</screen>
   <para>
    Parâmetros:
   </para>
   <variablelist>
    <varlistentry>
     <term><replaceable>CEPH_DASHBOARD_BASE_URL</replaceable></term>
     <listitem>
      <para>
       URL de base para acessar o Ceph Dashboard (por exemplo, “https://cephdashboard.local”).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_METADATA</replaceable></term>
     <listitem>
      <para>
       URL, caminho de arquivo ou conteúdo do XML de metadados do IdP (por exemplo, “https://myidp/metadata”).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_USERNAME_ATTRIBUTE</replaceable></term>
     <listitem>
      <para>
       Opcional. Atributo que será usado para obter o nome de usuário da resposta de autenticação. O padrão “uid” é usado.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>IDP_ENTITY_ID</replaceable></term>
     <listitem>
      <para>
       Opcional. Use quando há mais de um ID de entidade nos metadados do IdP.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><replaceable>SP_X_509_CERT</replaceable>/<replaceable>SP_PRIVATE_KEY</replaceable></term>
     <listitem>
      <para>
       Opcional. Caminho de arquivo ou conteúdo do certificado que será usado pelo Ceph Dashboard (Provedor de Serviços) para assinatura e criptografia.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>Solicitações SAML</title>
    <para>
     O valor do emissor das solicitações SAML seguirá este padrão:
    </para>
<screen>
<replaceable>CEPH_DASHBOARD_BASE_URL</replaceable>/auth/saml2/metadata
</screen>
   </note>
   <para>
    Para exibir a configuração atual do SAML 2.0, execute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso show saml2
</screen>
   <para>
    Para desabilitar o Login Único, execute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso disable
</screen>
   <para>
    Para verificar se o SSO está habilitado, execute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso status
</screen>
   <para>
    Para habilitar o SSO, execute:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard sso enable saml2
</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="dashboard-user-roles">
  <title>Gerenciando usuários e funções na linha de comando</title>

  <para>
   Esta seção descreve como gerenciar contas de usuário usadas pelo Ceph Dashboard. Ela ajuda você a criar ou modificar as contas de usuário e definir as funções e permissões de usuário apropriadas.
  </para>

  <sect2 xml:id="dahsboard-user-accounts">
   <title>Contas de usuário</title>
   <para>
    O Ceph Dashboard suporta o gerenciamento de várias contas de usuário. Cada conta de usuário consiste em nome de usuário, senha (armazenada em formato criptografado com <literal>bcrypt</literal>), além de nome e endereço de e-mail opcionais.
   </para>
   <para>
    As contas de usuário são armazenadas no banco de dados de configuração do Ceph Monitor e compartilhadas globalmente com todas as instâncias do Ceph Manager.
   </para>
   <para>
    Use os seguintes comandos para gerenciar as contas de usuário:
   </para>
   <variablelist>
    <varlistentry>
     <term>Mostrar usuários existentes:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-show [<replaceable>USERNAME</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Criar um novo usuário:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create <replaceable>USERNAME</replaceable> [<replaceable>PASSWORD</replaceable>] [<replaceable>ROLENAME</replaceable>] [<replaceable>NAME</replaceable>] [<replaceable>EMAIL</replaceable>]
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Apagar um usuário:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-delete <replaceable>USERNAME</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Mudar a senha de um usuário:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-password <replaceable>USERNAME</replaceable> <replaceable>PASSWORD</replaceable>
</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Modificar nome e e-mail de um usuário:</term>
     <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-info <replaceable>USERNAME</replaceable> <replaceable>NAME</replaceable> <replaceable>EMAIL</replaceable>
</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="dashboard-permissions">
   <title>Funções e permissões de usuário</title>
   <para>
    Esta seção descreve quais escopos de segurança você pode atribuir a uma função de usuário, como gerenciar as funções deo usuário e atribuí-las a contas de usuário.
   </para>
   <sect3>
    <title>Escopos de segurança</title>
    <para>
     As contas de usuário são associadas a um conjunto de funções que definem quais partes do painel de controle podem ser acessadas pelo usuário. As partes do painel de controle são agrupadas dentro de um escopo de <emphasis>segurança</emphasis>. Os escopos de segurança são predefinidos e estáticos. Atualmente, os seguintes escopos de segurança estão disponíveis:
    </para>
    <variablelist>
     <varlistentry>
      <term>hosts</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados à entrada do menu <guimenu>Hosts</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>config-opt</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento das opções de configuração do Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento de pools.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>osd</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento do Ceph OSD.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>monitor</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento do Ceph Monitor.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-image</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento de imagens do Dispositivo de Blocos RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rbd-mirroring</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento de espelhamento do Dispositivo de Blocos RADOS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>iscsi</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento do iSCSI.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento do Object Gateway.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento do CephFS.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>manager</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento do Ceph Manager.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>registro</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao gerenciamento de registros do Ceph.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>grafana</term>
      <listitem>
       <para>
        Inclui todos os recursos relacionados ao proxy do Grafana.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>dashboard-settings</term>
      <listitem>
       <para>
        Permite mudar as configurações do painel de controle.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3>
    <title>Funções do usuário</title>
    <para>
     Uma <emphasis>função</emphasis> especifica um conjunto de mapeamentos entre um <emphasis>escopo de segurança</emphasis> e um conjunto de <emphasis>permissões</emphasis>. Há quatro tipos de permissões: “read”, “create”, “update” e “delete”.
    </para>
    <para>
     O exemplo a seguir especifica uma função em que um usuário tem permissões de "leitura" e "criação" para recursos relacionados ao gerenciamento de pools e tem permissões completas para recursos relacionados ao gerenciamento de imagens RBD:
    </para>
<screen>
{
  'role': 'my_new_role',
  'description': 'My new role',
  'scopes_permissions': {
    'pool': ['read', 'create'],
    'rbd-image': ['read', 'create', 'update', 'delete']
  }
}
</screen>
    <para>
     O painel de controle já dispõe de um conjunto de funções predefinidas que chamamos de <emphasis>funções de sistema</emphasis>. Você pode usá-las logo após uma instalação recente do Ceph Dashboard:
    </para>
    <variablelist>
     <varlistentry>
      <term>administrator</term>
      <listitem>
       <para>
        Concede permissões completas para todos os escopos de segurança.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>read-only</term>
      <listitem>
       <para>
        Concede permissão de leitura para todos os escopos de segurança, exceto as configurações do painel de controle.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>block-manager</term>
      <listitem>
       <para>
        Concede permissões completas para os escopos “rbd-image”, “rbd-mirroring” e “iscsi”.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>rgw-manager</term>
      <listitem>
       <para>
        Concede permissões completas para o escopo “rgw”.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cluster-manager</term>
      <listitem>
       <para>
        Concede permissões completas para os escopos “hosts”, “osd”, “monitor”, “manager” e “config-opt”.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>pool-manager</term>
      <listitem>
       <para>
        Concede permissões completas para o escopo “pool”.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>cephfs-manager</term>
      <listitem>
       <para>
        Concede permissões completas para o escopo “cephfs”.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <sect4>
     <title>Gerenciando funções personalizadas</title>
     <para>
      Você pode criar novas funções de usuário executando os seguintes comandos:
     </para>
     <variablelist>
      <varlistentry>
       <term>Criar uma nova função:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create <replaceable>ROLENAME</replaceable> [<replaceable>DESCRIPTION</replaceable>]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Apagar uma função:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-delete <replaceable>ROLENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Adicionar permissões de escopo a uma função:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable> <replaceable>PERMISSION</replaceable> [<replaceable>PERMISSION</replaceable>...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Apagar permissões de escopo a uma função:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-del-perms <replaceable>ROLENAME</replaceable> <replaceable>SCOPENAME</replaceable>
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
    </sect4>
    <sect4>
     <title>Atribuindo funções às contas de usuário</title>
     <para>
      Use os seguintes comandos para atribuir funções a usuários:
     </para>
     <variablelist>
      <varlistentry>
       <term>Definir funções de usuário:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Adicionar mais funções a um usuário:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-add-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Apagar funções de um usuário:</term>
       <listitem>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-del-roles <replaceable>USERNAME</replaceable> <replaceable>ROLENAME</replaceable> [<replaceable>ROLENAME</replaceable> ...]
</screen>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>Purgar Funções Personalizadas</title>
      <para>
       Se você cria funções de usuário personalizadas e posteriormente pretende remover o cluster do Ceph com o executor <command>ceph.purge</command>, precisa purgar primeiro as funções personalizadas. Encontre mais detalhes na <xref linkend="deepsea-ceph-purge"/>.
      </para>
     </tip>
    </sect4>
    <sect4>
     <title>Exemplo: Criando um usuário e uma função personalizada</title>
     <para>
      Esta seção ilustra um procedimento para criar uma conta de usuário capaz de gerenciar imagens RBD, ver e criar pools do Ceph e obter acesso apenas leitura a qualquer outro escopo.
     </para>
     <procedure>
      <step>
       <para>
        Criar um novo usuário chamado 'tux':
       </para>
<screen>
 <prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-create tux <replaceable>PASSWORD</replaceable>
</screen>
      </step>
      <step>
       <para>
        Criar uma função e especificar permissões de escopo:
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-create rbd/pool-manager
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager \
 rbd-image read create update delete
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-role-add-scope-perms rbd/pool-manager pool read create
</screen>
      </step>
      <step>
       <para>
        Associar as funções ao usuário 'tux':
       </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard ac-user-set-roles tux rbd/pool-manager read-only
</screen>
      </step>
     </procedure>
    </sect4>
   </sect3>
  </sect2>

  <sect2 xml:id="dashboard-proxy">
   <title>Proxies reversos</title>
   <para>
    Se você acessa o painel de controle por meio de uma configuração de proxy reverso, talvez seja necessário usar um prefixo de URL para acessá-lo. Para fazer com que o painel de controle use hiperlinks que incluam seu prefixo, você pode definir a configuração <option>url_prefix</option>:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph config set mgr mgr/dashboard/url_prefix <replaceable>URL_PREFIX</replaceable>
</screen>
   <para>
    Em seguida, você pode acessar o painel de controle em <literal>http://<replaceable>HOST_NAME</replaceable>:<replaceable>PORT_NUMBER</replaceable>/<replaceable>URL_PREFIX</replaceable>/</literal>.
   </para>
  </sect2>

  <sect2 xml:id="dashboard-auditing">
   <title>Auditoria</title>
   <para>
    A API REST do Ceph Dashboard pode gravar solicitações PUT, POST e DELETE no registro de auditoria do Ceph. Por padrão, o registro está desabilitado, mas você pode habilitá-lo com o seguinte comando:
   </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-enabled true
</screen>
   <para>
    Se habilitado, os seguintes parâmetros serão registrados por cada solicitação:
   </para>
   <variablelist>
    <varlistentry>
     <term>from</term>
     <listitem>
      <para>
       A origem da solicitação, por exemplo “https://[::1]:44410”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>path</term>
     <listitem>
      <para>
       O caminho da API REST, por exemplo “/api/auth”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>method</term>
     <listitem>
      <para>
       “PUT”, “POST” ou “DELETE”.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user</term>
     <listitem>
      <para>
       O nome do usuário (ou “Nenhum”).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Veja a seguir um exemplo de entrada de registro:
   </para>
<screen>
2019-02-06 10:33:01.302514 mgr.x [INF] [DASHBOARD] \
 from='https://[::ffff:127.0.0.1]:37022' path='/api/rgw/user/exu' method='PUT' \
 user='admin' params='{"max_buckets": "1000", "display_name": "Example User", "uid": "exu", "suspended": "0", "email": "user@example.com"}'
</screen>
   <tip>
    <title>Desabilitar Registro de Payload de Solicitação</title>
    <para>
     Por padrão, o registro de payload de solicitação (a lista de argumentos e seus valores) está habilitado. Você pode desabilitá-lo da seguinte forma:
    </para>
<screen>
<prompt>cephadm@adm &gt; </prompt>ceph dashboard set-audit-api-log-payload false
</screen>
   </tip>
  </sect2>
 </sect1>
</chapter>
