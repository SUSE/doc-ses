<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="ceph_prompts.xml" version="5.0">
 <title>ユーザの特権とコマンドプロンプト</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:maintainer>tbazant@suse.com</dm:maintainer>
   <dm:status>編集</dm:status>
   <dm:deadline/>
   <dm:priority/>
   <dm:translation>yes</dm:translation>
   <dm:languages/>
   <dm:release>SES 6</dm:release>
  </dm:docmanager>
 </info>
 <para>
  Cephクラスタ管理者は、特定のコマンドを実行して、クラスタの動作を設定および調整します。必要になるコマンドには、次のように複数のタイプがあります。
 </para>
 <sect1>
  <title>Salt/DeepSea関連のコマンド</title>

  <para>
   これらのコマンドは、Cephクラスタを展開またはアップグレードしたり、クラスタノードの一部(または全部)で同時にコマンドを実行したり、クラスタノードを追加または削除したりする際に役立ちます。最も頻繁に使用されるコマンドは、<command>salt</command>、<command>salt-run</command>、および<command>deepsea</command>です。Salt Masterノードでは、Saltコマンドは<systemitem class="username">root</systemitem>として実行する必要があります(<xref linkend="deepsea-description"/>を参照)。これらのコマンドは、次のプロンプトで紹介されています。
  </para>

<screen>
<prompt>root@master # </prompt>
</screen>

  <para>
   次に例を示します。
  </para>

<screen>
<prompt>root@master # </prompt>salt '*.example.net' test.ping
</screen>
 </sect1>
 <sect1>
  <title>Ceph関連のコマンド</title>

  <para>
   これらは、クラスタとそのゲートウェイのすべての側面をコマンドラインで設定および微調整するための下位レベルのコマンドです。たとえば、<command>ceph</command>、<command>rbd</command>、<command>radosgw-admin</command>、<command>crushtool</command>などです。
  </para>

  <para>
   Ceph関連のコマンドを実行するには、Cephキーの読み込みアクセス権が必要です。このキーの機能により、Ceph環境内におけるユーザの特権が定義されます。1つのオプションは、<systemitem class="username">root</systemitem>として(または<command>sudo</command>を使用して)Cephコマンドを実行し、制限のないデフォルトのキーリング「ceph.client.admin.key」を使用します。
  </para>

  <para>
   より安全な推奨オプションは、各管理者ユーザに対してより制限の厳しい個別のキーを作成し、そのキーを、各ユーザが読み込むことができるディレクトリに保存することです。次に例を示します。
  </para>

<screen>~/.ceph/ceph.client.<replaceable>USERNAME</replaceable>.keyring</screen>

  <tip>
   <title>Cephキーのパス</title>
   <para>
    カスタムの管理者ユーザとキーリングを使用するには、<command>ceph</command>コマンドを実行するたびに、<option>-n client.<replaceable>USER_NAME</replaceable></option>オプションと<option>--keyring <replaceable>PATH/TO/KEYRING</replaceable></option>オプションを使用して、ユーザ名とプールのパスを指定する必要があります。
   </para>
   <para>
    これを回避するには、これらのオプションを <varname>CEPH_ARGS</varname>
    変数(個々のユーザの<filename>~/.bashrc</filename>ファイル。
   </para>
  </tip>

  <para>
   Ceph関連のコマンドは任意のクラスタノードで実行できますが、管理ノードで実行することをお勧めします。このドキュメントでは、<systemitem class="username">cephadm</systemitem>ユーザを使用してコマンドを実行するので、コマンドは次のプロンプトで紹介されています。
  </para>

<screen>
<prompt>cephadm@adm &gt; </prompt>
</screen>

  <para>
   次に例を示します。
  </para>

<screen>
<prompt>cephadm@adm &gt; </prompt>ceph auth list
</screen>

  <tip>
   <title>特定のノード用のコマンド</title>
   <para>
    クラスタノードに対して特定の役割でコマンドを実行するようドキュメントで指示されている場合は、プロンプトによって示されます。次に例を示します。
   </para>
<screen>
<prompt>cephadm@mon &gt; </prompt>
</screen>
  </tip>
 </sect1>
 <sect1>
  <title>一般的なLinuxコマンド</title>

  <para>
   <command>mount</command>、<command>cat</command>、<command>openssl</command>など、CephまたはDeepSeaに関係しないLinuxコマンドは、関連するコマンドで必要な特権に応じて、 <prompt>cephadm@adm &gt; </prompt>
   プロンプトまたは <prompt>root # </prompt> プロンプトのいずれかで紹介されています。
  </para>
 </sect1>
 <sect1>
  <title>追加情報</title>

  <para>
   Cephのキー管理の詳細については、<xref linkend="storage-cephx-keymgmt"/>を参照してください。
  </para>
 </sect1>
</chapter>
